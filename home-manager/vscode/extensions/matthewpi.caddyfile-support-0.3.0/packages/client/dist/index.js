"use strict";var wa=Object.create;var yr=Object.defineProperty;var Ta=Object.getOwnPropertyDescriptor;var Ea=Object.getOwnPropertyNames;var Pa=Object.getPrototypeOf,Sa=Object.prototype.hasOwnProperty;var H=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Da=(t,e)=>{for(var r in e)yr(t,r,{get:e[r],enumerable:!0})},Os=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ea(e))!Sa.call(t,s)&&s!==r&&yr(t,s,{get:()=>e[s],enumerable:!(n=Ta(e,s))||n.enumerable});return t};var Yt=(t,e,r)=>(r=t!=null?wa(Pa(t)):{},Os(e||!t||!t.__esModule?yr(r,"default",{value:t,enumerable:!0}):r,t)),ba=t=>Os(yr({},"__esModule",{value:!0}),t);var Ls=H((z,Ns)=>{z=Ns.exports=G;var ne;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?ne=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:ne=function(){};z.SEMVER_SPEC_VERSION="2.0.0";var en=256,Cr=Number.MAX_SAFE_INTEGER||9007199254740991,Zr=16,te=z.re=[],S=z.src=[],_=z.tokens={},qs=0;function V(t){_[t]=qs++}V("NUMERICIDENTIFIER");S[_.NUMERICIDENTIFIER]="0|[1-9]\\d*";V("NUMERICIDENTIFIERLOOSE");S[_.NUMERICIDENTIFIERLOOSE]="[0-9]+";V("NONNUMERICIDENTIFIER");S[_.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";V("MAINVERSION");S[_.MAINVERSION]="("+S[_.NUMERICIDENTIFIER]+")\\.("+S[_.NUMERICIDENTIFIER]+")\\.("+S[_.NUMERICIDENTIFIER]+")";V("MAINVERSIONLOOSE");S[_.MAINVERSIONLOOSE]="("+S[_.NUMERICIDENTIFIERLOOSE]+")\\.("+S[_.NUMERICIDENTIFIERLOOSE]+")\\.("+S[_.NUMERICIDENTIFIERLOOSE]+")";V("PRERELEASEIDENTIFIER");S[_.PRERELEASEIDENTIFIER]="(?:"+S[_.NUMERICIDENTIFIER]+"|"+S[_.NONNUMERICIDENTIFIER]+")";V("PRERELEASEIDENTIFIERLOOSE");S[_.PRERELEASEIDENTIFIERLOOSE]="(?:"+S[_.NUMERICIDENTIFIERLOOSE]+"|"+S[_.NONNUMERICIDENTIFIER]+")";V("PRERELEASE");S[_.PRERELEASE]="(?:-("+S[_.PRERELEASEIDENTIFIER]+"(?:\\."+S[_.PRERELEASEIDENTIFIER]+")*))";V("PRERELEASELOOSE");S[_.PRERELEASELOOSE]="(?:-?("+S[_.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+S[_.PRERELEASEIDENTIFIERLOOSE]+")*))";V("BUILDIDENTIFIER");S[_.BUILDIDENTIFIER]="[0-9A-Za-z-]+";V("BUILD");S[_.BUILD]="(?:\\+("+S[_.BUILDIDENTIFIER]+"(?:\\."+S[_.BUILDIDENTIFIER]+")*))";V("FULL");V("FULLPLAIN");S[_.FULLPLAIN]="v?"+S[_.MAINVERSION]+S[_.PRERELEASE]+"?"+S[_.BUILD]+"?";S[_.FULL]="^"+S[_.FULLPLAIN]+"$";V("LOOSEPLAIN");S[_.LOOSEPLAIN]="[v=\\s]*"+S[_.MAINVERSIONLOOSE]+S[_.PRERELEASELOOSE]+"?"+S[_.BUILD]+"?";V("LOOSE");S[_.LOOSE]="^"+S[_.LOOSEPLAIN]+"$";V("GTLT");S[_.GTLT]="((?:<|>)?=?)";V("XRANGEIDENTIFIERLOOSE");S[_.XRANGEIDENTIFIERLOOSE]=S[_.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";V("XRANGEIDENTIFIER");S[_.XRANGEIDENTIFIER]=S[_.NUMERICIDENTIFIER]+"|x|X|\\*";V("XRANGEPLAIN");S[_.XRANGEPLAIN]="[v=\\s]*("+S[_.XRANGEIDENTIFIER]+")(?:\\.("+S[_.XRANGEIDENTIFIER]+")(?:\\.("+S[_.XRANGEIDENTIFIER]+")(?:"+S[_.PRERELEASE]+")?"+S[_.BUILD]+"?)?)?";V("XRANGEPLAINLOOSE");S[_.XRANGEPLAINLOOSE]="[v=\\s]*("+S[_.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+S[_.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+S[_.XRANGEIDENTIFIERLOOSE]+")(?:"+S[_.PRERELEASELOOSE]+")?"+S[_.BUILD]+"?)?)?";V("XRANGE");S[_.XRANGE]="^"+S[_.GTLT]+"\\s*"+S[_.XRANGEPLAIN]+"$";V("XRANGELOOSE");S[_.XRANGELOOSE]="^"+S[_.GTLT]+"\\s*"+S[_.XRANGEPLAINLOOSE]+"$";V("COERCE");S[_.COERCE]="(^|[^\\d])(\\d{1,"+Zr+"})(?:\\.(\\d{1,"+Zr+"}))?(?:\\.(\\d{1,"+Zr+"}))?(?:$|[^\\d])";V("COERCERTL");te[_.COERCERTL]=new RegExp(S[_.COERCE],"g");V("LONETILDE");S[_.LONETILDE]="(?:~>?)";V("TILDETRIM");S[_.TILDETRIM]="(\\s*)"+S[_.LONETILDE]+"\\s+";te[_.TILDETRIM]=new RegExp(S[_.TILDETRIM],"g");var Oa="$1~";V("TILDE");S[_.TILDE]="^"+S[_.LONETILDE]+S[_.XRANGEPLAIN]+"$";V("TILDELOOSE");S[_.TILDELOOSE]="^"+S[_.LONETILDE]+S[_.XRANGEPLAINLOOSE]+"$";V("LONECARET");S[_.LONECARET]="(?:\\^)";V("CARETTRIM");S[_.CARETTRIM]="(\\s*)"+S[_.LONECARET]+"\\s+";te[_.CARETTRIM]=new RegExp(S[_.CARETTRIM],"g");var xa="$1^";V("CARET");S[_.CARET]="^"+S[_.LONECARET]+S[_.XRANGEPLAIN]+"$";V("CARETLOOSE");S[_.CARETLOOSE]="^"+S[_.LONECARET]+S[_.XRANGEPLAINLOOSE]+"$";V("COMPARATORLOOSE");S[_.COMPARATORLOOSE]="^"+S[_.GTLT]+"\\s*("+S[_.LOOSEPLAIN]+")$|^$";V("COMPARATOR");S[_.COMPARATOR]="^"+S[_.GTLT]+"\\s*("+S[_.FULLPLAIN]+")$|^$";V("COMPARATORTRIM");S[_.COMPARATORTRIM]="(\\s*)"+S[_.GTLT]+"\\s*("+S[_.LOOSEPLAIN]+"|"+S[_.XRANGEPLAIN]+")";te[_.COMPARATORTRIM]=new RegExp(S[_.COMPARATORTRIM],"g");var ka="$1$2$3";V("HYPHENRANGE");S[_.HYPHENRANGE]="^\\s*("+S[_.XRANGEPLAIN]+")\\s+-\\s+("+S[_.XRANGEPLAIN]+")\\s*$";V("HYPHENRANGELOOSE");S[_.HYPHENRANGELOOSE]="^\\s*("+S[_.XRANGEPLAINLOOSE]+")\\s+-\\s+("+S[_.XRANGEPLAINLOOSE]+")\\s*$";V("STAR");S[_.STAR]="(<|>)?=?\\s*\\*";for(gt=0;gt<qs;gt++)ne(gt,S[gt]),te[gt]||(te[gt]=new RegExp(S[gt]));var gt;z.parse=Ot;function Ot(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof G)return t;if(typeof t!="string"||t.length>en)return null;var r=e.loose?te[_.LOOSE]:te[_.FULL];if(!r.test(t))return null;try{return new G(t,e)}catch{return null}}z.valid=qa;function qa(t,e){var r=Ot(t,e);return r?r.version:null}z.clean=Ia;function Ia(t,e){var r=Ot(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}z.SemVer=G;function G(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof G){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>en)throw new TypeError("version is longer than "+en+" characters");if(!(this instanceof G))return new G(t,e);ne("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?te[_.LOOSE]:te[_.FULL]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Cr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Cr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Cr||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var s=+n;if(s>=0&&s<Cr)return s}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};G.prototype.toString=function(){return this.version};G.prototype.compare=function(t){return ne("SemVer.compare",this.version,this.options,t),t instanceof G||(t=new G(t,this.options)),this.compareMain(t)||this.comparePre(t)};G.prototype.compareMain=function(t){return t instanceof G||(t=new G(t,this.options)),bt(this.major,t.major)||bt(this.minor,t.minor)||bt(this.patch,t.patch)};G.prototype.comparePre=function(t){if(t instanceof G||(t=new G(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(ne("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return bt(r,n)}while(++e)};G.prototype.compareBuild=function(t){t instanceof G||(t=new G(t,this.options));var e=0;do{var r=this.build[e],n=t.build[e];if(ne("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return bt(r,n)}while(++e)};G.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};z.inc=Na;function Na(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new G(t,r).inc(e,n).version}catch{return null}}z.diff=La;function La(t,e){if(tn(t,e))return null;var r=Ot(t),n=Ot(e),s="";if(r.prerelease.length||n.prerelease.length){s="pre";var a="prerelease"}for(var u in r)if((u==="major"||u==="minor"||u==="patch")&&r[u]!==n[u])return s+u;return a}z.compareIdentifiers=bt;var xs=/^[0-9]+$/;function bt(t,e){var r=xs.test(t),n=xs.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}z.rcompareIdentifiers=Fa;function Fa(t,e){return bt(e,t)}z.major=Ma;function Ma(t,e){return new G(t,e).major}z.minor=Aa;function Aa(t,e){return new G(t,e).minor}z.patch=Ha;function Ha(t,e){return new G(t,e).patch}z.compare=st;function st(t,e,r){return new G(t,r).compare(new G(e,r))}z.compareLoose=ja;function ja(t,e){return st(t,e,!0)}z.compareBuild=Wa;function Wa(t,e,r){var n=new G(t,r),s=new G(e,r);return n.compare(s)||n.compareBuild(s)}z.rcompare=Ka;function Ka(t,e,r){return st(e,t,r)}z.sort=za;function za(t,e){return t.sort(function(r,n){return z.compareBuild(r,n,e)})}z.rsort=$a;function $a(t,e){return t.sort(function(r,n){return z.compareBuild(n,r,e)})}z.gt=Zt;function Zt(t,e,r){return st(t,e,r)>0}z.lt=Rr;function Rr(t,e,r){return st(t,e,r)<0}z.eq=tn;function tn(t,e,r){return st(t,e,r)===0}z.neq=Is;function Is(t,e,r){return st(t,e,r)!==0}z.gte=rn;function rn(t,e,r){return st(t,e,r)>=0}z.lte=nn;function nn(t,e,r){return st(t,e,r)<=0}z.cmp=_r;function _r(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return tn(t,r,n);case"!=":return Is(t,r,n);case">":return Zt(t,r,n);case">=":return rn(t,r,n);case"<":return Rr(t,r,n);case"<=":return nn(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}z.Comparator=Le;function Le(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Le){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Le))return new Le(t,e);ne("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===Mt?this.value="":this.value=this.operator+this.semver.version,ne("comp",this)}var Mt={};Le.prototype.parse=function(t){var e=this.options.loose?te[_.COMPARATORLOOSE]:te[_.COMPARATOR],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new G(r[2],this.options.loose):this.semver=Mt};Le.prototype.toString=function(){return this.value};Le.prototype.test=function(t){if(ne("Comparator.test",t,this.options.loose),this.semver===Mt||t===Mt)return!0;if(typeof t=="string")try{t=new G(t,this.options)}catch{return!1}return _r(t,this.operator,this.semver,this.options)};Le.prototype.intersects=function(t,e){if(!(t instanceof Le))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return this.value===""?!0:(r=new de(t.value,e),wr(this.value,r,e));if(t.operator==="")return t.value===""?!0:(r=new de(this.value,e),wr(t.semver,r,e));var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),s=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),a=this.semver.version===t.semver.version,u=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),l=_r(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),f=_r(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||s||a&&u||l||f};z.Range=de;function de(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof de)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new de(t.raw,e);if(t instanceof Le)return new de(t.value,e);if(!(this instanceof de))return new de(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}de.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};de.prototype.toString=function(){return this.range};de.prototype.parseRange=function(t){var e=this.options.loose;t=t.trim();var r=e?te[_.HYPHENRANGELOOSE]:te[_.HYPHENRANGE];t=t.replace(r,ec),ne("hyphen replace",t),t=t.replace(te[_.COMPARATORTRIM],ka),ne("comparator trim",t,te[_.COMPARATORTRIM]),t=t.replace(te[_.TILDETRIM],Oa),t=t.replace(te[_.CARETTRIM],xa),t=t.split(/\s+/).join(" ");var n=e?te[_.COMPARATORLOOSE]:te[_.COMPARATOR],s=t.split(" ").map(function(a){return Ga(a,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(a){return!!a.match(n)})),s=s.map(function(a){return new Le(a,this.options)},this),s};de.prototype.intersects=function(t,e){if(!(t instanceof de))throw new TypeError("a Range is required");return this.set.some(function(r){return ks(r,e)&&t.set.some(function(n){return ks(n,e)&&r.every(function(s){return n.every(function(a){return s.intersects(a,e)})})})})};function ks(t,e){for(var r=!0,n=t.slice(),s=n.pop();r&&n.length;)r=n.every(function(a){return s.intersects(a,e)}),s=n.pop();return r}z.toComparators=Ua;function Ua(t,e){return new de(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function Ga(t,e){return ne("comp",t,e),t=Ja(t,e),ne("caret",t),t=Xa(t,e),ne("tildes",t),t=Qa(t,e),ne("xrange",t),t=Za(t,e),ne("stars",t),t}function Se(t){return!t||t.toLowerCase()==="x"||t==="*"}function Xa(t,e){return t.trim().split(/\s+/).map(function(r){return Ba(r,e)}).join(" ")}function Ba(t,e){var r=e.loose?te[_.TILDELOOSE]:te[_.TILDE];return t.replace(r,function(n,s,a,u,l){ne("tilde",t,n,s,a,u,l);var f;return Se(s)?f="":Se(a)?f=">="+s+".0.0 <"+(+s+1)+".0.0":Se(u)?f=">="+s+"."+a+".0 <"+s+"."+(+a+1)+".0":l?(ne("replaceTilde pr",l),f=">="+s+"."+a+"."+u+"-"+l+" <"+s+"."+(+a+1)+".0"):f=">="+s+"."+a+"."+u+" <"+s+"."+(+a+1)+".0",ne("tilde return",f),f})}function Ja(t,e){return t.trim().split(/\s+/).map(function(r){return Va(r,e)}).join(" ")}function Va(t,e){ne("caret",t,e);var r=e.loose?te[_.CARETLOOSE]:te[_.CARET];return t.replace(r,function(n,s,a,u,l){ne("caret",t,n,s,a,u,l);var f;return Se(s)?f="":Se(a)?f=">="+s+".0.0 <"+(+s+1)+".0.0":Se(u)?s==="0"?f=">="+s+"."+a+".0 <"+s+"."+(+a+1)+".0":f=">="+s+"."+a+".0 <"+(+s+1)+".0.0":l?(ne("replaceCaret pr",l),s==="0"?a==="0"?f=">="+s+"."+a+"."+u+"-"+l+" <"+s+"."+a+"."+(+u+1):f=">="+s+"."+a+"."+u+"-"+l+" <"+s+"."+(+a+1)+".0":f=">="+s+"."+a+"."+u+"-"+l+" <"+(+s+1)+".0.0"):(ne("no pr"),s==="0"?a==="0"?f=">="+s+"."+a+"."+u+" <"+s+"."+a+"."+(+u+1):f=">="+s+"."+a+"."+u+" <"+s+"."+(+a+1)+".0":f=">="+s+"."+a+"."+u+" <"+(+s+1)+".0.0"),ne("caret return",f),f})}function Qa(t,e){return ne("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return Ya(r,e)}).join(" ")}function Ya(t,e){t=t.trim();var r=e.loose?te[_.XRANGELOOSE]:te[_.XRANGE];return t.replace(r,function(n,s,a,u,l,f){ne("xRange",t,n,s,a,u,l,f);var m=Se(a),y=m||Se(u),v=y||Se(l),P=v;return s==="="&&P&&(s=""),f=e.includePrerelease?"-0":"",m?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&P?(y&&(u=0),l=0,s===">"?(s=">=",y?(a=+a+1,u=0,l=0):(u=+u+1,l=0)):s==="<="&&(s="<",y?a=+a+1:u=+u+1),n=s+a+"."+u+"."+l+f):y?n=">="+a+".0.0"+f+" <"+(+a+1)+".0.0"+f:v&&(n=">="+a+"."+u+".0"+f+" <"+a+"."+(+u+1)+".0"+f),ne("xRange return",n),n})}function Za(t,e){return ne("replaceStars",t,e),t.trim().replace(te[_.STAR],"")}function ec(t,e,r,n,s,a,u,l,f,m,y,v,P){return Se(r)?e="":Se(n)?e=">="+r+".0.0":Se(s)?e=">="+r+"."+n+".0":e=">="+e,Se(f)?l="":Se(m)?l="<"+(+f+1)+".0.0":Se(y)?l="<"+f+"."+(+m+1)+".0":v?l="<="+f+"."+m+"."+y+"-"+v:l="<="+l,(e+" "+l).trim()}de.prototype.test=function(t){if(!t)return!1;if(typeof t=="string")try{t=new G(t,this.options)}catch{return!1}for(var e=0;e<this.set.length;e++)if(tc(this.set[e],t,this.options))return!0;return!1};function tc(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(ne(t[n].semver),t[n].semver!==Mt&&t[n].semver.prerelease.length>0){var s=t[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}z.satisfies=wr;function wr(t,e,r){try{e=new de(e,r)}catch{return!1}return e.test(t)}z.maxSatisfying=rc;function rc(t,e,r){var n=null,s=null;try{var a=new de(e,r)}catch{return null}return t.forEach(function(u){a.test(u)&&(!n||s.compare(u)===-1)&&(n=u,s=new G(n,r))}),n}z.minSatisfying=nc;function nc(t,e,r){var n=null,s=null;try{var a=new de(e,r)}catch{return null}return t.forEach(function(u){a.test(u)&&(!n||s.compare(u)===1)&&(n=u,s=new G(n,r))}),n}z.minVersion=ic;function ic(t,e){t=new de(t,e);var r=new G("0.0.0");if(t.test(r)||(r=new G("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var s=t.set[n];s.forEach(function(a){var u=new G(a.semver.version);switch(a.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!r||Zt(r,u))&&(r=u);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator)}})}return r&&t.test(r)?r:null}z.validRange=sc;function sc(t,e){try{return new de(t,e).range||"*"}catch{return null}}z.ltr=oc;function oc(t,e,r){return sn(t,e,"<",r)}z.gtr=ac;function ac(t,e,r){return sn(t,e,">",r)}z.outside=sn;function sn(t,e,r,n){t=new G(t,n),e=new de(e,n);var s,a,u,l,f;switch(r){case">":s=Zt,a=nn,u=Rr,l=">",f=">=";break;case"<":s=Rr,a=rn,u=Zt,l="<",f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(wr(t,e,n))return!1;for(var m=0;m<e.set.length;++m){var y=e.set[m],v=null,P=null;if(y.forEach(function(D){D.semver===Mt&&(D=new Le(">=0.0.0")),v=v||D,P=P||D,s(D.semver,v.semver,n)?v=D:u(D.semver,P.semver,n)&&(P=D)}),v.operator===l||v.operator===f||(!P.operator||P.operator===l)&&a(t,P.semver))return!1;if(P.operator===f&&u(t,P.semver))return!1}return!0}z.prerelease=cc;function cc(t,e){var r=Ot(t,e);return r&&r.prerelease.length?r.prerelease:null}z.intersects=uc;function uc(t,e,r){return t=new de(t,r),e=new de(e,r),t.intersects(e)}z.coerce=lc;function lc(t,e){if(t instanceof G)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};var r=null;if(!e.rtl)r=t.match(te[_.COERCE]);else{for(var n;(n=te[_.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),te[_.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;te[_.COERCERTL].lastIndex=-1}return r===null?null:Ot(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),e)}});var At=H(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});function dc(t){return t===!0||t===!1}ot.boolean=dc;function Fs(t){return typeof t=="string"||t instanceof String}ot.string=Fs;function fc(t){return typeof t=="number"||t instanceof Number}ot.number=fc;function hc(t){return t instanceof Error}ot.error=hc;function pc(t){return typeof t=="function"}ot.func=pc;function Ms(t){return Array.isArray(t)}ot.array=Ms;function gc(t){return Ms(t)&&t.every(e=>Fs(e))}ot.stringArray=gc});var Hs=H(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});var xt=At(),As;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.serverErrorStart=-32099,t.serverErrorEnd=-32e3,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.RequestCancelled=-32800,t.ContentModified=-32801,t.MessageWriteError=1,t.MessageReadError=2})(As=re.ErrorCodes||(re.ErrorCodes={}));var er=class extends Error{constructor(e,r,n){super(r),this.code=xt.number(e)?e:As.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,er.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};re.ResponseError=er;var le=class{constructor(e,r){this._method=e,this._numberOfParams=r}get method(){return this._method}get numberOfParams(){return this._numberOfParams}};re.AbstractMessageType=le;var on=class extends le{constructor(e){super(e,0)}};re.RequestType0=on;var an=class extends le{constructor(e){super(e,1)}};re.RequestType=an;var cn=class extends le{constructor(e){super(e,1)}};re.RequestType1=cn;var un=class extends le{constructor(e){super(e,2)}};re.RequestType2=un;var ln=class extends le{constructor(e){super(e,3)}};re.RequestType3=ln;var dn=class extends le{constructor(e){super(e,4)}};re.RequestType4=dn;var fn=class extends le{constructor(e){super(e,5)}};re.RequestType5=fn;var hn=class extends le{constructor(e){super(e,6)}};re.RequestType6=hn;var pn=class extends le{constructor(e){super(e,7)}};re.RequestType7=pn;var gn=class extends le{constructor(e){super(e,8)}};re.RequestType8=gn;var mn=class extends le{constructor(e){super(e,9)}};re.RequestType9=mn;var vn=class extends le{constructor(e){super(e,1),this._=void 0}};re.NotificationType=vn;var yn=class extends le{constructor(e){super(e,0)}};re.NotificationType0=yn;var Cn=class extends le{constructor(e){super(e,1)}};re.NotificationType1=Cn;var Rn=class extends le{constructor(e){super(e,2)}};re.NotificationType2=Rn;var _n=class extends le{constructor(e){super(e,3)}};re.NotificationType3=_n;var wn=class extends le{constructor(e){super(e,4)}};re.NotificationType4=wn;var Tn=class extends le{constructor(e){super(e,5)}};re.NotificationType5=Tn;var En=class extends le{constructor(e){super(e,6)}};re.NotificationType6=En;var Pn=class extends le{constructor(e){super(e,7)}};re.NotificationType7=Pn;var Sn=class extends le{constructor(e){super(e,8)}};re.NotificationType8=Sn;var Dn=class extends le{constructor(e){super(e,9)}};re.NotificationType9=Dn;function mc(t){let e=t;return e&&xt.string(e.method)&&(xt.string(e.id)||xt.number(e.id))}re.isRequestMessage=mc;function vc(t){let e=t;return e&&xt.string(e.method)&&t.id===void 0}re.isNotificationMessage=vc;function yc(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(xt.string(e.id)||xt.number(e.id)||e.id===null)}re.isResponseMessage=yc});var tr=H(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});var Cc;(function(t){function e(r){return{dispose:r}}t.create=e})(Cc=kt.Disposable||(kt.Disposable={}));var Rc;(function(t){let e={dispose(){}};t.None=function(){return e}})(Rc=kt.Event||(kt.Event={}));var bn=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(this._callbacks){for(var n=!1,s=0,a=this._callbacks.length;s<a;s++)if(this._callbacks[s]===e)if(this._contexts[s]===r){this._callbacks.splice(s,1),this._contexts.splice(s,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var r=[],n=this._callbacks.slice(0),s=this._contexts.slice(0),a=0,u=n.length;a<u;a++)try{r.push(n[a].apply(s[a],e))}catch(l){console.error(l)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Ht=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new bn),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let s;return s={dispose:()=>{this._callbacks.remove(e,r),s.dispose=Ht._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(n)&&n.push(s),s}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};kt.Emitter=Ht;Ht._noop=function(){}});var Er=H(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});var On=tr(),jt=At(),xn=8192,js=Buffer.from("\r","ascii")[0],Ws=Buffer.from(`
`,"ascii")[0],_c=`\r
`,kn=class{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(xn)}append(e){var r=e;if(typeof e=="string"){var n=e,s=Buffer.byteLength(n,this.encoding);r=Buffer.allocUnsafe(s),r.write(n,0,s,this.encoding)}if(this.buffer.length-this.index>=r.length)r.copy(this.buffer,this.index,0,r.length);else{var a=(Math.ceil((this.index+r.length)/xn)+1)*xn;this.index===0?(this.buffer=Buffer.allocUnsafe(a),r.copy(this.buffer,0,0,r.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),r],a)}this.index+=r.length}tryReadHeaders(){let e,r=0;for(;r+3<this.index&&(this.buffer[r]!==js||this.buffer[r+1]!==Ws||this.buffer[r+2]!==js||this.buffer[r+3]!==Ws);)r++;if(r+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,r).split(_c).forEach(a=>{let u=a.indexOf(":");if(u===-1)throw new Error("Message header must separate key and value using :");let l=a.substr(0,u),f=a.substr(u+1).trim();e[l]=f});let s=r+4;return this.buffer=this.buffer.slice(s),this.index=this.index-s,e}tryReadContent(e){if(this.index<e)return null;let r=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,r}get numberOfBytes(){return this.index}},wc;(function(t){function e(r){let n=r;return n&&jt.func(n.listen)&&jt.func(n.dispose)&&jt.func(n.onError)&&jt.func(n.onClose)&&jt.func(n.onPartialMessage)}t.is=e})(wc=mt.MessageReader||(mt.MessageReader={}));var rr=class{constructor(){this.errorEmitter=new On.Emitter,this.closeEmitter=new On.Emitter,this.partialMessageEmitter=new On.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${jt.string(e.message)?e.message:"unknown"}`)}};mt.AbstractMessageReader=rr;var Tr=class extends rr{constructor(e,r="utf8"){super(),this.readable=e,this.buffer=new kn(r),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",r=>{this.onData(r)}),this.readable.on("error",r=>this.fireError(r)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let s=this.buffer.tryReadHeaders();if(!s)return;let a=s["Content-Length"];if(!a)throw new Error("Header must provide a Content-Length property.");let u=parseInt(a);if(isNaN(u))throw new Error("Content-Length value must be a number.");this.nextMessageLength=u}var r=this.buffer.tryReadContent(this.nextMessageLength);if(r===null){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(r);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};mt.StreamMessageReader=Tr;var qn=class extends rr{constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};mt.IPCMessageReader=qn;var In=class extends Tr{constructor(e,r="utf-8"){super(e,r)}};mt.SocketMessageReader=In});var Sr=H(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});var Ks=tr(),nr=At(),zs="Content-Length: ",Pr=`\r
`,Tc;(function(t){function e(r){let n=r;return n&&nr.func(n.dispose)&&nr.func(n.onClose)&&nr.func(n.onError)&&nr.func(n.write)}t.is=e})(Tc=vt.MessageWriter||(vt.MessageWriter={}));var Wt=class{constructor(){this.errorEmitter=new Ks.Emitter,this.closeEmitter=new Ks.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${nr.string(e.message)?e.message:"unknown"}`)}};vt.AbstractMessageWriter=Wt;var Nn=class extends Wt{constructor(e,r="utf8"){super(),this.writable=e,this.encoding=r,this.errorCount=0,this.writable.on("error",n=>this.fireError(n)),this.writable.on("close",()=>this.fireClose())}write(e){let r=JSON.stringify(e),n=Buffer.byteLength(r,this.encoding),s=[zs,n.toString(),Pr,Pr];try{this.writable.write(s.join(""),"ascii"),this.writable.write(r,this.encoding),this.errorCount=0}catch(a){this.errorCount++,this.fireError(a,e,this.errorCount)}}};vt.StreamMessageWriter=Nn;var Ln=class extends Wt{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){!this.sending&&this.queue.length===0?this.doWriteMessage(e):this.queue.push(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,r=>{this.sending=!1,r?(this.errorCount++,this.fireError(r,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(r){this.errorCount++,this.fireError(r,e,this.errorCount)}}};vt.IPCMessageWriter=Ln;var Fn=class extends Wt{constructor(e,r="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=r,this.errorCount=0,this.socket.on("error",n=>this.fireError(n)),this.socket.on("close",()=>this.fireClose())}dispose(){super.dispose(),this.socket.destroy()}write(e){!this.sending&&this.queue.length===0?this.doWriteMessage(e):this.queue.push(e)}doWriteMessage(e){let r=JSON.stringify(e),n=Buffer.byteLength(r,this.encoding),s=[zs,n.toString(),Pr,Pr];try{this.sending=!0,this.socket.write(s.join(""),"ascii",a=>{a&&this.handleError(a,e);try{this.socket.write(r,this.encoding,u=>{this.sending=!1,u?this.handleError(u,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(u){this.handleError(u,e)}})}catch(a){this.handleError(a,e)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}};vt.SocketMessageWriter=Fn});var $s=H(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});var Mn=tr(),Ec=At(),An;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Mn.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Mn.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||Ec.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(An=ir.CancellationToken||(ir.CancellationToken={}));var Pc=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),Dr=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Pc:(this._emitter||(this._emitter=new Mn.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Hn=class{get token(){return this._token||(this._token=new Dr),this._token}cancel(){this._token?this._token.cancel():this._token=An.Cancelled}dispose(){this._token?this._token instanceof Dr&&this._token.dispose():this._token=An.None}};ir.CancellationTokenSource=Hn});var Us=H(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});var Je;(function(t){t.None=0,t.First=1,t.Last=2})(Je=sr.Touch||(sr.Touch={}));var jn=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){let r=this._map.get(e);if(r)return r.value}set(e,r,n=Je.None){let s=this._map.get(e);if(s)s.value=r,n!==Je.None&&this.touch(s,n);else{switch(s={key:e,value:r,next:void 0,previous:void 0},n){case Je.None:this.addItemLast(s);break;case Je.First:this.addItemFirst(s);break;case Je.Last:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}}delete(e){let r=this._map.get(e);return r?(this._map.delete(e),this.removeItem(r),this._size--,!0):!1}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._head;for(;n;)r?e.bind(r)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,r){let n=this._tail;for(;n;)r?e.bind(r)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],r=this._head;for(;r;)e.push(r.value),r=r.next;return e}keys(){let e=[],r=this._head;for(;r;)e.push(r.key),r=r.next;return e}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Je.First&&r!==Je.Last)){if(r===Je.First){if(e===this._head)return;let n=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(n.previous=s,s.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(r===Je.Last){if(e===this._tail)return;let n=e.next,s=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=s,s.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}};sr.LinkedMap=jn});var Js=H(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});var Sc=require("path"),Dc=require("os"),bc=require("crypto"),Gs=require("net"),Xs=Er(),Bs=Sr();function Oc(){let t=bc.randomBytes(21).toString("hex");return process.platform==="win32"?`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`:Sc.join(Dc.tmpdir(),`vscode-${t}.sock`)}or.generateRandomPipeName=Oc;function xc(t,e="utf-8"){let r,n=new Promise((s,a)=>{r=s});return new Promise((s,a)=>{let u=Gs.createServer(l=>{u.close(),r([new Xs.SocketMessageReader(l,e),new Bs.SocketMessageWriter(l,e)])});u.on("error",a),u.listen(t,()=>{u.removeListener("error",a),s({onConnected:()=>n})})})}or.createClientPipeTransport=xc;function kc(t,e="utf-8"){let r=Gs.createConnection(t);return[new Xs.SocketMessageReader(r,e),new Bs.SocketMessageWriter(r,e)]}or.createServerPipeTransport=kc});var Zs=H(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});var Vs=require("net"),Qs=Er(),Ys=Sr();function qc(t,e="utf-8"){let r,n=new Promise((s,a)=>{r=s});return new Promise((s,a)=>{let u=Vs.createServer(l=>{u.close(),r([new Qs.SocketMessageReader(l,e),new Ys.SocketMessageWriter(l,e)])});u.on("error",a),u.listen(t,"127.0.0.1",()=>{u.removeListener("error",a),s({onConnected:()=>n})})})}br.createClientSocketTransport=qc;function Ic(t,e="utf-8"){let r=Vs.createConnection(t,"127.0.0.1");return[new Qs.SocketMessageReader(r,e),new Ys.SocketMessageWriter(r,e)]}br.createServerSocketTransport=Ic});var ze=H(q=>{"use strict";function to(t){for(var e in t)q.hasOwnProperty(e)||(q[e]=t[e])}Object.defineProperty(q,"__esModule",{value:!0});var ye=At(),j=Hs();q.RequestType=j.RequestType;q.RequestType0=j.RequestType0;q.RequestType1=j.RequestType1;q.RequestType2=j.RequestType2;q.RequestType3=j.RequestType3;q.RequestType4=j.RequestType4;q.RequestType5=j.RequestType5;q.RequestType6=j.RequestType6;q.RequestType7=j.RequestType7;q.RequestType8=j.RequestType8;q.RequestType9=j.RequestType9;q.ResponseError=j.ResponseError;q.ErrorCodes=j.ErrorCodes;q.NotificationType=j.NotificationType;q.NotificationType0=j.NotificationType0;q.NotificationType1=j.NotificationType1;q.NotificationType2=j.NotificationType2;q.NotificationType3=j.NotificationType3;q.NotificationType4=j.NotificationType4;q.NotificationType5=j.NotificationType5;q.NotificationType6=j.NotificationType6;q.NotificationType7=j.NotificationType7;q.NotificationType8=j.NotificationType8;q.NotificationType9=j.NotificationType9;var cr=Er();q.MessageReader=cr.MessageReader;q.StreamMessageReader=cr.StreamMessageReader;q.IPCMessageReader=cr.IPCMessageReader;q.SocketMessageReader=cr.SocketMessageReader;var ur=Sr();q.MessageWriter=ur.MessageWriter;q.StreamMessageWriter=ur.StreamMessageWriter;q.IPCMessageWriter=ur.IPCMessageWriter;q.SocketMessageWriter=ur.SocketMessageWriter;var yt=tr();q.Disposable=yt.Disposable;q.Event=yt.Event;q.Emitter=yt.Emitter;var Kt=$s();q.CancellationTokenSource=Kt.CancellationTokenSource;q.CancellationToken=Kt.CancellationToken;var eo=Us();to(Js());to(Zs());var ar;(function(t){t.type=new j.NotificationType("$/cancelRequest")})(ar||(ar={}));var xr;(function(t){t.type=new j.NotificationType("$/progress")})(xr||(xr={}));var Wn=class{constructor(){}};q.ProgressType=Wn;q.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var he;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(he=q.Trace||(q.Trace={}));(function(t){function e(n){if(!ye.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(he=q.Trace||(q.Trace={}));var We;(function(t){t.Text="text",t.JSON="json"})(We=q.TraceFormat||(q.TraceFormat={}));(function(t){function e(r){return r=r.toLowerCase(),r==="json"?t.JSON:t.Text}t.fromString=e})(We=q.TraceFormat||(q.TraceFormat={}));var ro;(function(t){t.type=new j.NotificationType("$/setTraceNotification")})(ro=q.SetTraceNotification||(q.SetTraceNotification={}));var Kn;(function(t){t.type=new j.NotificationType("$/logTraceNotification")})(Kn=q.LogTraceNotification||(q.LogTraceNotification={}));var Or;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Or=q.ConnectionErrors||(q.ConnectionErrors={}));var Ct=class extends Error{constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,Ct.prototype)}};q.ConnectionError=Ct;var Nc;(function(t){function e(r){let n=r;return n&&ye.func(n.cancelUndispatched)}t.is=e})(Nc=q.ConnectionStrategy||(q.ConnectionStrategy={}));var Ke;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Ke||(Ke={}));function Lc(t,e,r,n){let s=0,a=0,u=0,l="2.0",f,m=Object.create(null),y,v=Object.create(null),P=new Map,D,F=new eo.LinkedMap,A=Object.create(null),K=Object.create(null),k=he.Off,L=We.Text,x,J=Ke.New,Ie=new yt.Emitter,Ae=new yt.Emitter,Xe=new yt.Emitter,_e=new yt.Emitter,Oe=new yt.Emitter;function Qe(i){return"req-"+i.toString()}function Be(i){return i===null?"res-unknown-"+(++u).toString():"res-"+i.toString()}function we(){return"not-"+(++a).toString()}function Ye(i,o){j.isRequestMessage(o)?i.set(Qe(o.id),o):j.isResponseMessage(o)?i.set(Be(o.id),o):i.set(we(),o)}function Ne(i){}function ut(){return J===Ke.Listening}function Ze(){return J===Ke.Closed}function xe(){return J===Ke.Disposed}function He(){(J===Ke.New||J===Ke.Listening)&&(J=Ke.Closed,Ae.fire(void 0))}function lt(i){Ie.fire([i,void 0,void 0])}function dt(i){Ie.fire(i)}t.onClose(He),t.onError(lt),e.onClose(He),e.onError(dt);function et(){D||F.size===0||(D=setImmediate(()=>{D=void 0,ft()}))}function ft(){if(F.size===0)return;let i=F.shift();try{j.isRequestMessage(i)?tt(i):j.isNotificationMessage(i)?Pt(i):j.isResponseMessage(i)?ht(i):rt(i)}finally{et()}}let Et=i=>{try{if(j.isNotificationMessage(i)&&i.method===ar.type.method){let o=Qe(i.params.id),p=F.get(o);if(j.isRequestMessage(p)){let g=n&&n.cancelUndispatched?n.cancelUndispatched(p,Ne):void 0;if(g&&(g.error!==void 0||g.result!==void 0)){F.delete(o),g.id=p.id,Ee(g,i.method,Date.now()),e.write(g);return}}}Ye(F,i)}finally{et()}};function tt(i){if(xe())return;function o(U,ce,c){let E={jsonrpc:l,id:i.id};U instanceof j.ResponseError?E.error=U.toJson():E.result=U===void 0?null:U,Ee(E,ce,c),e.write(E)}function p(U,ce,c){let E={jsonrpc:l,id:i.id,error:U.toJson()};Ee(E,ce,c),e.write(E)}function g(U,ce,c){U===void 0&&(U=null);let E={jsonrpc:l,id:i.id,result:U};Ee(E,ce,c),e.write(E)}Dt(i);let O=m[i.method],$,Z;O&&($=O.type,Z=O.handler);let W=Date.now();if(Z||f){let U=new Kt.CancellationTokenSource,ce=String(i.id);K[ce]=U;try{let c;i.params===void 0||$!==void 0&&$.numberOfParams===0?c=Z?Z(U.token):f(i.method,U.token):ye.array(i.params)&&($===void 0||$.numberOfParams>1)?c=Z?Z(...i.params,U.token):f(i.method,...i.params,U.token):c=Z?Z(i.params,U.token):f(i.method,i.params,U.token);let E=c;c?E.then?E.then(b=>{delete K[ce],o(b,i.method,W)},b=>{delete K[ce],b instanceof j.ResponseError?p(b,i.method,W):b&&ye.string(b.message)?p(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${i.method} failed with message: ${b.message}`),i.method,W):p(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${i.method} failed unexpectedly without providing any details.`),i.method,W)}):(delete K[ce],o(c,i.method,W)):(delete K[ce],g(c,i.method,W))}catch(c){delete K[ce],c instanceof j.ResponseError?o(c,i.method,W):c&&ye.string(c.message)?p(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${i.method} failed with message: ${c.message}`),i.method,W):p(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${i.method} failed unexpectedly without providing any details.`),i.method,W)}}else p(new j.ResponseError(j.ErrorCodes.MethodNotFound,`Unhandled method ${i.method}`),i.method,W)}function ht(i){if(!xe())if(i.id===null)i.error?r.error(`Received response message without id: Error is: 
${JSON.stringify(i.error,void 0,4)}`):r.error("Received response message without id. No further error information provided.");else{let o=String(i.id),p=A[o];if(it(i,p),p){delete A[o];try{if(i.error){let g=i.error;p.reject(new j.ResponseError(g.code,g.message,g.data))}else if(i.result!==void 0)p.resolve(i.result);else throw new Error("Should never happen.")}catch(g){g.message?r.error(`Response handler '${p.method}' failed with message: ${g.message}`):r.error(`Response handler '${p.method}' failed unexpectedly.`)}}}}function Pt(i){if(xe())return;let o,p;if(i.method===ar.type.method)p=g=>{let O=g.id,$=K[String(O)];$&&$.cancel()};else{let g=v[i.method];g&&(p=g.handler,o=g.type)}if(p||y)try{Pe(i),i.params===void 0||o!==void 0&&o.numberOfParams===0?p?p():y(i.method):ye.array(i.params)&&(o===void 0||o.numberOfParams>1)?p?p(...i.params):y(i.method,...i.params):p?p(i.params):y(i.method,i.params)}catch(g){g.message?r.error(`Notification handler '${i.method}' failed with message: ${g.message}`):r.error(`Notification handler '${i.method}' failed unexpectedly.`)}else Xe.fire(i)}function rt(i){if(!i){r.error("Received empty message.");return}r.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(i,null,4)}`);let o=i;if(ye.string(o.id)||ye.number(o.id)){let p=String(o.id),g=A[p];g&&g.reject(new Error("The received response has neither a result nor an error property."))}}function St(i){if(!(k===he.Off||!x))if(L===We.Text){let o;k===he.Verbose&&i.params&&(o=`Params: ${JSON.stringify(i.params,null,4)}

`),x.log(`Sending request '${i.method} - (${i.id})'.`,o)}else De("send-request",i)}function nt(i){if(!(k===he.Off||!x))if(L===We.Text){let o;k===he.Verbose&&(i.params?o=`Params: ${JSON.stringify(i.params,null,4)}

`:o=`No parameters provided.

`),x.log(`Sending notification '${i.method}'.`,o)}else De("send-notification",i)}function Ee(i,o,p){if(!(k===he.Off||!x))if(L===We.Text){let g;k===he.Verbose&&(i.error&&i.error.data?g=`Error data: ${JSON.stringify(i.error.data,null,4)}

`:i.result?g=`Result: ${JSON.stringify(i.result,null,4)}

`:i.error===void 0&&(g=`No result returned.

`)),x.log(`Sending response '${o} - (${i.id})'. Processing request took ${Date.now()-p}ms`,g)}else De("send-response",i)}function Dt(i){if(!(k===he.Off||!x))if(L===We.Text){let o;k===he.Verbose&&i.params&&(o=`Params: ${JSON.stringify(i.params,null,4)}

`),x.log(`Received request '${i.method} - (${i.id})'.`,o)}else De("receive-request",i)}function Pe(i){if(!(k===he.Off||!x||i.method===Kn.type.method))if(L===We.Text){let o;k===he.Verbose&&(i.params?o=`Params: ${JSON.stringify(i.params,null,4)}

`:o=`No parameters provided.

`),x.log(`Received notification '${i.method}'.`,o)}else De("receive-notification",i)}function it(i,o){if(!(k===he.Off||!x))if(L===We.Text){let p;if(k===he.Verbose&&(i.error&&i.error.data?p=`Error data: ${JSON.stringify(i.error.data,null,4)}

`:i.result?p=`Result: ${JSON.stringify(i.result,null,4)}

`:i.error===void 0&&(p=`No result returned.

`)),o){let g=i.error?` Request failed: ${i.error.message} (${i.error.code}).`:"";x.log(`Received response '${o.method} - (${i.id})' in ${Date.now()-o.timerStart}ms.${g}`,p)}else x.log(`Received response ${i.id} without active response promise.`,p)}else De("receive-response",i)}function De(i,o){if(!x||k===he.Off)return;let p={isLSPMessage:!0,type:i,message:o,timestamp:Date.now()};x.log(p)}function je(){if(Ze())throw new Ct(Or.Closed,"Connection is closed.");if(xe())throw new Ct(Or.Disposed,"Connection is disposed.")}function pt(){if(ut())throw new Ct(Or.AlreadyListening,"Connection is already listening")}function w(){if(!ut())throw new Error("Call listen() first.")}function d(i){return i===void 0?null:i}function C(i,o){let p,g=i.numberOfParams;switch(g){case 0:p=null;break;case 1:p=d(o[0]);break;default:p=[];for(let O=0;O<o.length&&O<g;O++)p.push(d(o[O]));if(o.length<g)for(let O=o.length;O<g;O++)p.push(null);break}return p}let R={sendNotification:(i,...o)=>{je();let p,g;if(ye.string(i))switch(p=i,o.length){case 0:g=null;break;case 1:g=o[0];break;default:g=o;break}else p=i.method,g=C(i,o);let O={jsonrpc:l,method:p,params:g};nt(O),e.write(O)},onNotification:(i,o)=>{je(),ye.func(i)?y=i:o&&(ye.string(i)?v[i]={type:void 0,handler:o}:v[i.method]={type:i,handler:o})},onProgress:(i,o,p)=>{if(P.has(o))throw new Error(`Progress handler for token ${o} already registered`);return P.set(o,p),{dispose:()=>{P.delete(o)}}},sendProgress:(i,o,p)=>{R.sendNotification(xr.type,{token:o,value:p})},onUnhandledProgress:_e.event,sendRequest:(i,...o)=>{je(),w();let p,g,O;if(ye.string(i))switch(p=i,o.length){case 0:g=null;break;case 1:Kt.CancellationToken.is(o[0])?(g=null,O=o[0]):g=d(o[0]);break;default:let W=o.length-1;Kt.CancellationToken.is(o[W])?(O=o[W],o.length===2?g=d(o[0]):g=o.slice(0,W).map(U=>d(U))):g=o.map(U=>d(U));break}else{p=i.method,g=C(i,o);let W=i.numberOfParams;O=Kt.CancellationToken.is(o[W])?o[W]:void 0}let $=s++,Z=new Promise((W,U)=>{let ce={jsonrpc:l,id:$,method:p,params:g},c={method:p,timerStart:Date.now(),resolve:W,reject:U};St(ce);try{e.write(ce)}catch(E){c.reject(new j.ResponseError(j.ErrorCodes.MessageWriteError,E.message?E.message:"Unknown reason")),c=null}c&&(A[String($)]=c)});return O&&O.onCancellationRequested(()=>{R.sendNotification(ar.type,{id:$})}),Z},onRequest:(i,o)=>{je(),ye.func(i)?f=i:o&&(ye.string(i)?m[i]={type:void 0,handler:o}:m[i.method]={type:i,handler:o})},trace:(i,o,p)=>{let g=!1,O=We.Text;p!==void 0&&(ye.boolean(p)?g=p:(g=p.sendNotification||!1,O=p.traceFormat||We.Text)),k=i,L=O,k===he.Off?x=void 0:x=o,g&&!Ze()&&!xe()&&R.sendNotification(ro.type,{value:he.toString(i)})},onError:Ie.event,onClose:Ae.event,onUnhandledNotification:Xe.event,onDispose:Oe.event,dispose:()=>{if(xe())return;J=Ke.Disposed,Oe.fire(void 0);let i=new Error("Connection got disposed.");Object.keys(A).forEach(o=>{A[o].reject(i)}),A=Object.create(null),K=Object.create(null),F=new eo.LinkedMap,ye.func(e.dispose)&&e.dispose(),ye.func(t.dispose)&&t.dispose()},listen:()=>{je(),pt(),J=Ke.Listening,t.listen(Et)},inspect:()=>{console.log("inspect")}};return R.onNotification(Kn.type,i=>{k===he.Off||!x||x.log(i.message,k===he.Verbose?i.verbose:void 0)}),R.onNotification(xr.type,i=>{let o=P.get(i.token);o?o(i.value):_e.fire(i)}),R}function Fc(t){return t.listen!==void 0&&t.read===void 0}function Mc(t){return t.write!==void 0&&t.end===void 0}function Ac(t,e,r,n){r||(r=q.NullLogger);let s=Fc(t)?t:new cr.StreamMessageReader(t),a=Mc(e)?e:new ur.StreamMessageWriter(e);return Lc(s,a,r,n)}q.createMessageConnection=Ac});var io=H((no,kr)=>{(function(t){if(typeof kr=="object"&&typeof kr.exports=="object"){var e=t(require,no);e!==void 0&&(kr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r;(function(d){function C(i,o){return{line:i,character:o}}d.create=C;function R(i){var o=i;return w.objectLiteral(o)&&w.number(o.line)&&w.number(o.character)}d.is=R})(r=e.Position||(e.Position={}));var n;(function(d){function C(i,o,p,g){if(w.number(i)&&w.number(o)&&w.number(p)&&w.number(g))return{start:r.create(i,o),end:r.create(p,g)};if(r.is(i)&&r.is(o))return{start:i,end:o};throw new Error("Range#create called with invalid arguments["+i+", "+o+", "+p+", "+g+"]")}d.create=C;function R(i){var o=i;return w.objectLiteral(o)&&r.is(o.start)&&r.is(o.end)}d.is=R})(n=e.Range||(e.Range={}));var s;(function(d){function C(i,o){return{uri:i,range:o}}d.create=C;function R(i){var o=i;return w.defined(o)&&n.is(o.range)&&(w.string(o.uri)||w.undefined(o.uri))}d.is=R})(s=e.Location||(e.Location={}));var a;(function(d){function C(i,o,p,g){return{targetUri:i,targetRange:o,targetSelectionRange:p,originSelectionRange:g}}d.create=C;function R(i){var o=i;return w.defined(o)&&n.is(o.targetRange)&&w.string(o.targetUri)&&(n.is(o.targetSelectionRange)||w.undefined(o.targetSelectionRange))&&(n.is(o.originSelectionRange)||w.undefined(o.originSelectionRange))}d.is=R})(a=e.LocationLink||(e.LocationLink={}));var u;(function(d){function C(i,o,p,g){return{red:i,green:o,blue:p,alpha:g}}d.create=C;function R(i){var o=i;return w.number(o.red)&&w.number(o.green)&&w.number(o.blue)&&w.number(o.alpha)}d.is=R})(u=e.Color||(e.Color={}));var l;(function(d){function C(i,o){return{range:i,color:o}}d.create=C;function R(i){var o=i;return n.is(o.range)&&u.is(o.color)}d.is=R})(l=e.ColorInformation||(e.ColorInformation={}));var f;(function(d){function C(i,o,p){return{label:i,textEdit:o,additionalTextEdits:p}}d.create=C;function R(i){var o=i;return w.string(o.label)&&(w.undefined(o.textEdit)||K.is(o))&&(w.undefined(o.additionalTextEdits)||w.typedArray(o.additionalTextEdits,K.is))}d.is=R})(f=e.ColorPresentation||(e.ColorPresentation={}));var m;(function(d){d.Comment="comment",d.Imports="imports",d.Region="region"})(m=e.FoldingRangeKind||(e.FoldingRangeKind={}));var y;(function(d){function C(i,o,p,g,O){var $={startLine:i,endLine:o};return w.defined(p)&&($.startCharacter=p),w.defined(g)&&($.endCharacter=g),w.defined(O)&&($.kind=O),$}d.create=C;function R(i){var o=i;return w.number(o.startLine)&&w.number(o.startLine)&&(w.undefined(o.startCharacter)||w.number(o.startCharacter))&&(w.undefined(o.endCharacter)||w.number(o.endCharacter))&&(w.undefined(o.kind)||w.string(o.kind))}d.is=R})(y=e.FoldingRange||(e.FoldingRange={}));var v;(function(d){function C(i,o){return{location:i,message:o}}d.create=C;function R(i){var o=i;return w.defined(o)&&s.is(o.location)&&w.string(o.message)}d.is=R})(v=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var P;(function(d){d.Error=1,d.Warning=2,d.Information=3,d.Hint=4})(P=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var D;(function(d){d.Unnecessary=1,d.Deprecated=2})(D=e.DiagnosticTag||(e.DiagnosticTag={}));var F;(function(d){function C(i,o,p,g,O,$){var Z={range:i,message:o};return w.defined(p)&&(Z.severity=p),w.defined(g)&&(Z.code=g),w.defined(O)&&(Z.source=O),w.defined($)&&(Z.relatedInformation=$),Z}d.create=C;function R(i){var o=i;return w.defined(o)&&n.is(o.range)&&w.string(o.message)&&(w.number(o.severity)||w.undefined(o.severity))&&(w.number(o.code)||w.string(o.code)||w.undefined(o.code))&&(w.string(o.source)||w.undefined(o.source))&&(w.undefined(o.relatedInformation)||w.typedArray(o.relatedInformation,v.is))}d.is=R})(F=e.Diagnostic||(e.Diagnostic={}));var A;(function(d){function C(i,o){for(var p=[],g=2;g<arguments.length;g++)p[g-2]=arguments[g];var O={title:i,command:o};return w.defined(p)&&p.length>0&&(O.arguments=p),O}d.create=C;function R(i){var o=i;return w.defined(o)&&w.string(o.title)&&w.string(o.command)}d.is=R})(A=e.Command||(e.Command={}));var K;(function(d){function C(p,g){return{range:p,newText:g}}d.replace=C;function R(p,g){return{range:{start:p,end:p},newText:g}}d.insert=R;function i(p){return{range:p,newText:""}}d.del=i;function o(p){var g=p;return w.objectLiteral(g)&&w.string(g.newText)&&n.is(g.range)}d.is=o})(K=e.TextEdit||(e.TextEdit={}));var k;(function(d){function C(i,o){return{textDocument:i,edits:o}}d.create=C;function R(i){var o=i;return w.defined(o)&&Oe.is(o.textDocument)&&Array.isArray(o.edits)}d.is=R})(k=e.TextDocumentEdit||(e.TextDocumentEdit={}));var L;(function(d){function C(i,o){var p={kind:"create",uri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(p.options=o),p}d.create=C;function R(i){var o=i;return o&&o.kind==="create"&&w.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||w.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||w.boolean(o.options.ignoreIfExists)))}d.is=R})(L=e.CreateFile||(e.CreateFile={}));var x;(function(d){function C(i,o,p){var g={kind:"rename",oldUri:i,newUri:o};return p!==void 0&&(p.overwrite!==void 0||p.ignoreIfExists!==void 0)&&(g.options=p),g}d.create=C;function R(i){var o=i;return o&&o.kind==="rename"&&w.string(o.oldUri)&&w.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||w.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||w.boolean(o.options.ignoreIfExists)))}d.is=R})(x=e.RenameFile||(e.RenameFile={}));var J;(function(d){function C(i,o){var p={kind:"delete",uri:i};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(p.options=o),p}d.create=C;function R(i){var o=i;return o&&o.kind==="delete"&&w.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||w.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||w.boolean(o.options.ignoreIfNotExists)))}d.is=R})(J=e.DeleteFile||(e.DeleteFile={}));var Ie;(function(d){function C(R){var i=R;return i&&(i.changes!==void 0||i.documentChanges!==void 0)&&(i.documentChanges===void 0||i.documentChanges.every(function(o){return w.string(o.kind)?L.is(o)||x.is(o)||J.is(o):k.is(o)}))}d.is=C})(Ie=e.WorkspaceEdit||(e.WorkspaceEdit={}));var Ae=function(){function d(C){this.edits=C}return d.prototype.insert=function(C,R){this.edits.push(K.insert(C,R))},d.prototype.replace=function(C,R){this.edits.push(K.replace(C,R))},d.prototype.delete=function(C){this.edits.push(K.del(C))},d.prototype.add=function(C){this.edits.push(C)},d.prototype.all=function(){return this.edits},d.prototype.clear=function(){this.edits.splice(0,this.edits.length)},d}(),Xe=function(){function d(C){var R=this;this._textEditChanges=Object.create(null),C&&(this._workspaceEdit=C,C.documentChanges?C.documentChanges.forEach(function(i){if(k.is(i)){var o=new Ae(i.edits);R._textEditChanges[i.textDocument.uri]=o}}):C.changes&&Object.keys(C.changes).forEach(function(i){var o=new Ae(C.changes[i]);R._textEditChanges[i]=o}))}return Object.defineProperty(d.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),d.prototype.getTextEditChange=function(C){if(Oe.is(C)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var R=C,i=this._textEditChanges[R.uri];if(!i){var o=[],p={textDocument:R,edits:o};this._workspaceEdit.documentChanges.push(p),i=new Ae(o),this._textEditChanges[R.uri]=i}return i}else{if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var i=this._textEditChanges[C];if(!i){var o=[];this._workspaceEdit.changes[C]=o,i=new Ae(o),this._textEditChanges[C]=i}return i}},d.prototype.createFile=function(C,R){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(L.create(C,R))},d.prototype.renameFile=function(C,R,i){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(x.create(C,R,i))},d.prototype.deleteFile=function(C,R){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(J.create(C,R))},d.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},d}();e.WorkspaceChange=Xe;var _e;(function(d){function C(i){return{uri:i}}d.create=C;function R(i){var o=i;return w.defined(o)&&w.string(o.uri)}d.is=R})(_e=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Oe;(function(d){function C(i,o){return{uri:i,version:o}}d.create=C;function R(i){var o=i;return w.defined(o)&&w.string(o.uri)&&(o.version===null||w.number(o.version))}d.is=R})(Oe=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var Qe;(function(d){function C(i,o,p,g){return{uri:i,languageId:o,version:p,text:g}}d.create=C;function R(i){var o=i;return w.defined(o)&&w.string(o.uri)&&w.string(o.languageId)&&w.number(o.version)&&w.string(o.text)}d.is=R})(Qe=e.TextDocumentItem||(e.TextDocumentItem={}));var Be;(function(d){d.PlainText="plaintext",d.Markdown="markdown"})(Be=e.MarkupKind||(e.MarkupKind={})),function(d){function C(R){var i=R;return i===d.PlainText||i===d.Markdown}d.is=C}(Be=e.MarkupKind||(e.MarkupKind={}));var we;(function(d){function C(R){var i=R;return w.objectLiteral(R)&&Be.is(i.kind)&&w.string(i.value)}d.is=C})(we=e.MarkupContent||(e.MarkupContent={}));var Ye;(function(d){d.Text=1,d.Method=2,d.Function=3,d.Constructor=4,d.Field=5,d.Variable=6,d.Class=7,d.Interface=8,d.Module=9,d.Property=10,d.Unit=11,d.Value=12,d.Enum=13,d.Keyword=14,d.Snippet=15,d.Color=16,d.File=17,d.Reference=18,d.Folder=19,d.EnumMember=20,d.Constant=21,d.Struct=22,d.Event=23,d.Operator=24,d.TypeParameter=25})(Ye=e.CompletionItemKind||(e.CompletionItemKind={}));var Ne;(function(d){d.PlainText=1,d.Snippet=2})(Ne=e.InsertTextFormat||(e.InsertTextFormat={}));var ut;(function(d){d.Deprecated=1})(ut=e.CompletionItemTag||(e.CompletionItemTag={}));var Ze;(function(d){function C(R){return{label:R}}d.create=C})(Ze=e.CompletionItem||(e.CompletionItem={}));var xe;(function(d){function C(R,i){return{items:R||[],isIncomplete:!!i}}d.create=C})(xe=e.CompletionList||(e.CompletionList={}));var He;(function(d){function C(i){return i.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}d.fromPlainText=C;function R(i){var o=i;return w.string(o)||w.objectLiteral(o)&&w.string(o.language)&&w.string(o.value)}d.is=R})(He=e.MarkedString||(e.MarkedString={}));var lt;(function(d){function C(R){var i=R;return!!i&&w.objectLiteral(i)&&(we.is(i.contents)||He.is(i.contents)||w.typedArray(i.contents,He.is))&&(R.range===void 0||n.is(R.range))}d.is=C})(lt=e.Hover||(e.Hover={}));var dt;(function(d){function C(R,i){return i?{label:R,documentation:i}:{label:R}}d.create=C})(dt=e.ParameterInformation||(e.ParameterInformation={}));var et;(function(d){function C(R,i){for(var o=[],p=2;p<arguments.length;p++)o[p-2]=arguments[p];var g={label:R};return w.defined(i)&&(g.documentation=i),w.defined(o)?g.parameters=o:g.parameters=[],g}d.create=C})(et=e.SignatureInformation||(e.SignatureInformation={}));var ft;(function(d){d.Text=1,d.Read=2,d.Write=3})(ft=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var Et;(function(d){function C(R,i){var o={range:R};return w.number(i)&&(o.kind=i),o}d.create=C})(Et=e.DocumentHighlight||(e.DocumentHighlight={}));var tt;(function(d){d.File=1,d.Module=2,d.Namespace=3,d.Package=4,d.Class=5,d.Method=6,d.Property=7,d.Field=8,d.Constructor=9,d.Enum=10,d.Interface=11,d.Function=12,d.Variable=13,d.Constant=14,d.String=15,d.Number=16,d.Boolean=17,d.Array=18,d.Object=19,d.Key=20,d.Null=21,d.EnumMember=22,d.Struct=23,d.Event=24,d.Operator=25,d.TypeParameter=26})(tt=e.SymbolKind||(e.SymbolKind={}));var ht;(function(d){d.Deprecated=1})(ht=e.SymbolTag||(e.SymbolTag={}));var Pt;(function(d){function C(R,i,o,p,g){var O={name:R,kind:i,location:{uri:p,range:o}};return g&&(O.containerName=g),O}d.create=C})(Pt=e.SymbolInformation||(e.SymbolInformation={}));var rt;(function(d){function C(i,o,p,g,O,$){var Z={name:i,detail:o,kind:p,range:g,selectionRange:O};return $!==void 0&&(Z.children=$),Z}d.create=C;function R(i){var o=i;return o&&w.string(o.name)&&w.number(o.kind)&&n.is(o.range)&&n.is(o.selectionRange)&&(o.detail===void 0||w.string(o.detail))&&(o.deprecated===void 0||w.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))}d.is=R})(rt=e.DocumentSymbol||(e.DocumentSymbol={}));var St;(function(d){d.Empty="",d.QuickFix="quickfix",d.Refactor="refactor",d.RefactorExtract="refactor.extract",d.RefactorInline="refactor.inline",d.RefactorRewrite="refactor.rewrite",d.Source="source",d.SourceOrganizeImports="source.organizeImports",d.SourceFixAll="source.fixAll"})(St=e.CodeActionKind||(e.CodeActionKind={}));var nt;(function(d){function C(i,o){var p={diagnostics:i};return o!=null&&(p.only=o),p}d.create=C;function R(i){var o=i;return w.defined(o)&&w.typedArray(o.diagnostics,F.is)&&(o.only===void 0||w.typedArray(o.only,w.string))}d.is=R})(nt=e.CodeActionContext||(e.CodeActionContext={}));var Ee;(function(d){function C(i,o,p){var g={title:i};return A.is(o)?g.command=o:g.edit=o,p!==void 0&&(g.kind=p),g}d.create=C;function R(i){var o=i;return o&&w.string(o.title)&&(o.diagnostics===void 0||w.typedArray(o.diagnostics,F.is))&&(o.kind===void 0||w.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||A.is(o.command))&&(o.isPreferred===void 0||w.boolean(o.isPreferred))&&(o.edit===void 0||Ie.is(o.edit))}d.is=R})(Ee=e.CodeAction||(e.CodeAction={}));var Dt;(function(d){function C(i,o){var p={range:i};return w.defined(o)&&(p.data=o),p}d.create=C;function R(i){var o=i;return w.defined(o)&&n.is(o.range)&&(w.undefined(o.command)||A.is(o.command))}d.is=R})(Dt=e.CodeLens||(e.CodeLens={}));var Pe;(function(d){function C(i,o){return{tabSize:i,insertSpaces:o}}d.create=C;function R(i){var o=i;return w.defined(o)&&w.number(o.tabSize)&&w.boolean(o.insertSpaces)}d.is=R})(Pe=e.FormattingOptions||(e.FormattingOptions={}));var it;(function(d){function C(i,o,p){return{range:i,target:o,data:p}}d.create=C;function R(i){var o=i;return w.defined(o)&&n.is(o.range)&&(w.undefined(o.target)||w.string(o.target))}d.is=R})(it=e.DocumentLink||(e.DocumentLink={}));var De;(function(d){function C(i,o){return{range:i,parent:o}}d.create=C;function R(i){var o=i;return o!==void 0&&n.is(o.range)&&(o.parent===void 0||d.is(o.parent))}d.is=R})(De=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var je;(function(d){function C(p,g,O,$){return new pt(p,g,O,$)}d.create=C;function R(p){var g=p;return!!(w.defined(g)&&w.string(g.uri)&&(w.undefined(g.languageId)||w.string(g.languageId))&&w.number(g.lineCount)&&w.func(g.getText)&&w.func(g.positionAt)&&w.func(g.offsetAt))}d.is=R;function i(p,g){for(var O=p.getText(),$=o(g,function(E,b){var ue=E.range.start.line-b.range.start.line;return ue===0?E.range.start.character-b.range.start.character:ue}),Z=O.length,W=$.length-1;W>=0;W--){var U=$[W],ce=p.offsetAt(U.range.start),c=p.offsetAt(U.range.end);if(c<=Z)O=O.substring(0,ce)+U.newText+O.substring(c,O.length);else throw new Error("Overlapping edit");Z=ce}return O}d.applyEdits=i;function o(p,g){if(p.length<=1)return p;var O=p.length/2|0,$=p.slice(0,O),Z=p.slice(O);o($,g),o(Z,g);for(var W=0,U=0,ce=0;W<$.length&&U<Z.length;){var c=g($[W],Z[U]);c<=0?p[ce++]=$[W++]:p[ce++]=Z[U++]}for(;W<$.length;)p[ce++]=$[W++];for(;U<Z.length;)p[ce++]=Z[U++];return p}})(je=e.TextDocument||(e.TextDocument={}));var pt=function(){function d(C,R,i,o){this._uri=C,this._languageId=R,this._version=i,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(d.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),d.prototype.getText=function(C){if(C){var R=this.offsetAt(C.start),i=this.offsetAt(C.end);return this._content.substring(R,i)}return this._content},d.prototype.update=function(C,R){this._content=C.text,this._version=R,this._lineOffsets=void 0},d.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var C=[],R=this._content,i=!0,o=0;o<R.length;o++){i&&(C.push(o),i=!1);var p=R.charAt(o);i=p==="\r"||p===`
`,p==="\r"&&o+1<R.length&&R.charAt(o+1)===`
`&&o++}i&&R.length>0&&C.push(R.length),this._lineOffsets=C}return this._lineOffsets},d.prototype.positionAt=function(C){C=Math.max(Math.min(C,this._content.length),0);var R=this.getLineOffsets(),i=0,o=R.length;if(o===0)return r.create(0,C);for(;i<o;){var p=Math.floor((i+o)/2);R[p]>C?o=p:i=p+1}var g=i-1;return r.create(g,C-R[g])},d.prototype.offsetAt=function(C){var R=this.getLineOffsets();if(C.line>=R.length)return this._content.length;if(C.line<0)return 0;var i=R[C.line],o=C.line+1<R.length?R[C.line+1]:this._content.length;return Math.max(Math.min(i+C.character,o),i)},Object.defineProperty(d.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),d}(),w;(function(d){var C=Object.prototype.toString;function R(W){return typeof W<"u"}d.defined=R;function i(W){return typeof W>"u"}d.undefined=i;function o(W){return W===!0||W===!1}d.boolean=o;function p(W){return C.call(W)==="[object String]"}d.string=p;function g(W){return C.call(W)==="[object Number]"}d.number=g;function O(W){return C.call(W)==="[object Function]"}d.func=O;function $(W){return W!==null&&typeof W=="object"}d.objectLiteral=$;function Z(W,U){return Array.isArray(W)&&W.every(U)}d.typedArray=Z})(w||(w={}))})});var ao=H($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});function Hc(t){return t===!0||t===!1}$e.boolean=Hc;function so(t){return typeof t=="string"||t instanceof String}$e.string=so;function jc(t){return typeof t=="number"||t instanceof Number}$e.number=jc;function Wc(t){return t instanceof Error}$e.error=Wc;function Kc(t){return typeof t=="function"}$e.func=Kc;function oo(t){return Array.isArray(t)}$e.array=oo;function zc(t){return oo(t)&&t.every(e=>so(e))}$e.stringArray=zc;function $c(t,e){return Array.isArray(t)&&t.every(e)}$e.typedArray=$c;function Uc(t){return t!==null&&typeof t=="object"}$e.objectLiteral=Uc});var ke=H(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});var qr=ze(),zn=class extends qr.RequestType0{constructor(e){super(e)}};zt.ProtocolRequestType0=zn;var $n=class extends qr.RequestType{constructor(e){super(e)}};zt.ProtocolRequestType=$n;var Un=class extends qr.NotificationType{constructor(e){super(e)}};zt.ProtocolNotificationType=Un;var Gn=class extends qr.NotificationType0{constructor(e){super(e)}};zt.ProtocolNotificationType0=Gn});var co=H(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});var Gc=ze(),Xc=ke(),Bc;(function(t){t.method="textDocument/implementation",t.type=new Xc.ProtocolRequestType(t.method),t.resultType=new Gc.ProgressType})(Bc=Ir.ImplementationRequest||(Ir.ImplementationRequest={}))});var uo=H(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});var Jc=ze(),Vc=ke(),Qc;(function(t){t.method="textDocument/typeDefinition",t.type=new Vc.ProtocolRequestType(t.method),t.resultType=new Jc.ProgressType})(Qc=Nr.TypeDefinitionRequest||(Nr.TypeDefinitionRequest={}))});var fo=H($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});var lo=ke(),Yc;(function(t){t.type=new lo.ProtocolRequestType0("workspace/workspaceFolders")})(Yc=$t.WorkspaceFoldersRequest||($t.WorkspaceFoldersRequest={}));var Zc;(function(t){t.type=new lo.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(Zc=$t.DidChangeWorkspaceFoldersNotification||($t.DidChangeWorkspaceFoldersNotification={}))});var ho=H(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});var eu=ke(),tu;(function(t){t.type=new eu.ProtocolRequestType("workspace/configuration")})(tu=Lr.ConfigurationRequest||(Lr.ConfigurationRequest={}))});var go=H(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});var ru=ze(),po=ke(),nu;(function(t){t.method="textDocument/documentColor",t.type=new po.ProtocolRequestType(t.method),t.resultType=new ru.ProgressType})(nu=Ut.DocumentColorRequest||(Ut.DocumentColorRequest={}));var iu;(function(t){t.type=new po.ProtocolRequestType("textDocument/colorPresentation")})(iu=Ut.ColorPresentationRequest||(Ut.ColorPresentationRequest={}))});var mo=H(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});var su=ze(),ou=ke(),au;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(au=Gt.FoldingRangeKind||(Gt.FoldingRangeKind={}));var cu;(function(t){t.method="textDocument/foldingRange",t.type=new ou.ProtocolRequestType(t.method),t.resultType=new su.ProgressType})(cu=Gt.FoldingRangeRequest||(Gt.FoldingRangeRequest={}))});var vo=H(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});var uu=ze(),lu=ke(),du;(function(t){t.method="textDocument/declaration",t.type=new lu.ProtocolRequestType(t.method),t.resultType=new uu.ProgressType})(du=Fr.DeclarationRequest||(Fr.DeclarationRequest={}))});var yo=H(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});var fu=ze(),hu=ke(),pu;(function(t){t.method="textDocument/selectionRange",t.type=new hu.ProtocolRequestType(t.method),t.resultType=new fu.ProgressType})(pu=Mr.SelectionRangeRequest||(Mr.SelectionRangeRequest={}))});var Ro=H(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});var gu=ze(),Co=ke(),mu;(function(t){t.type=new gu.ProgressType})(mu=Rt.WorkDoneProgress||(Rt.WorkDoneProgress={}));var vu;(function(t){t.type=new Co.ProtocolRequestType("window/workDoneProgress/create")})(vu=Rt.WorkDoneProgressCreateRequest||(Rt.WorkDoneProgressCreateRequest={}));var yu;(function(t){t.type=new Co.ProtocolNotificationType("window/workDoneProgress/cancel")})(yu=Rt.WorkDoneProgressCancelNotification||(Rt.WorkDoneProgressCancelNotification={}))});var Po=H(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var _t=ao(),at=ze(),X=ke(),Cu=co();T.ImplementationRequest=Cu.ImplementationRequest;var Ru=uo();T.TypeDefinitionRequest=Ru.TypeDefinitionRequest;var _o=fo();T.WorkspaceFoldersRequest=_o.WorkspaceFoldersRequest;T.DidChangeWorkspaceFoldersNotification=_o.DidChangeWorkspaceFoldersNotification;var _u=ho();T.ConfigurationRequest=_u.ConfigurationRequest;var wo=go();T.DocumentColorRequest=wo.DocumentColorRequest;T.ColorPresentationRequest=wo.ColorPresentationRequest;var wu=mo();T.FoldingRangeRequest=wu.FoldingRangeRequest;var Tu=vo();T.DeclarationRequest=Tu.DeclarationRequest;var Eu=yo();T.SelectionRangeRequest=Eu.SelectionRangeRequest;var Xn=Ro();T.WorkDoneProgress=Xn.WorkDoneProgress;T.WorkDoneProgressCreateRequest=Xn.WorkDoneProgressCreateRequest;T.WorkDoneProgressCancelNotification=Xn.WorkDoneProgressCancelNotification;var To;(function(t){function e(r){let n=r;return _t.string(n.language)||_t.string(n.scheme)||_t.string(n.pattern)}t.is=e})(To=T.DocumentFilter||(T.DocumentFilter={}));var Eo;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!_t.string(n)&&!To.is(n))return!1;return!0}t.is=e})(Eo=T.DocumentSelector||(T.DocumentSelector={}));var Pu;(function(t){t.type=new X.ProtocolRequestType("client/registerCapability")})(Pu=T.RegistrationRequest||(T.RegistrationRequest={}));var Su;(function(t){t.type=new X.ProtocolRequestType("client/unregisterCapability")})(Su=T.UnregistrationRequest||(T.UnregistrationRequest={}));var Du;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Du=T.ResourceOperationKind||(T.ResourceOperationKind={}));var bu;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(bu=T.FailureHandlingKind||(T.FailureHandlingKind={}));var Ou;(function(t){function e(r){let n=r;return n&&_t.string(n.id)&&n.id.length>0}t.hasId=e})(Ou=T.StaticRegistrationOptions||(T.StaticRegistrationOptions={}));var xu;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||Eo.is(n.documentSelector))}t.is=e})(xu=T.TextDocumentRegistrationOptions||(T.TextDocumentRegistrationOptions={}));var ku;(function(t){function e(n){let s=n;return _t.objectLiteral(s)&&(s.workDoneProgress===void 0||_t.boolean(s.workDoneProgress))}t.is=e;function r(n){let s=n;return s&&_t.boolean(s.workDoneProgress)}t.hasWorkDoneProgress=r})(ku=T.WorkDoneProgressOptions||(T.WorkDoneProgressOptions={}));var qu;(function(t){t.type=new X.ProtocolRequestType("initialize")})(qu=T.InitializeRequest||(T.InitializeRequest={}));var Iu;(function(t){t.unknownProtocolVersion=1})(Iu=T.InitializeError||(T.InitializeError={}));var Nu;(function(t){t.type=new X.ProtocolNotificationType("initialized")})(Nu=T.InitializedNotification||(T.InitializedNotification={}));var Lu;(function(t){t.type=new X.ProtocolRequestType0("shutdown")})(Lu=T.ShutdownRequest||(T.ShutdownRequest={}));var Fu;(function(t){t.type=new X.ProtocolNotificationType0("exit")})(Fu=T.ExitNotification||(T.ExitNotification={}));var Mu;(function(t){t.type=new X.ProtocolNotificationType("workspace/didChangeConfiguration")})(Mu=T.DidChangeConfigurationNotification||(T.DidChangeConfigurationNotification={}));var Au;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(Au=T.MessageType||(T.MessageType={}));var Hu;(function(t){t.type=new X.ProtocolNotificationType("window/showMessage")})(Hu=T.ShowMessageNotification||(T.ShowMessageNotification={}));var ju;(function(t){t.type=new X.ProtocolRequestType("window/showMessageRequest")})(ju=T.ShowMessageRequest||(T.ShowMessageRequest={}));var Wu;(function(t){t.type=new X.ProtocolNotificationType("window/logMessage")})(Wu=T.LogMessageNotification||(T.LogMessageNotification={}));var Ku;(function(t){t.type=new X.ProtocolNotificationType("telemetry/event")})(Ku=T.TelemetryEventNotification||(T.TelemetryEventNotification={}));var zu;(function(t){t.None=0,t.Full=1,t.Incremental=2})(zu=T.TextDocumentSyncKind||(T.TextDocumentSyncKind={}));var $u;(function(t){t.method="textDocument/didOpen",t.type=new X.ProtocolNotificationType(t.method)})($u=T.DidOpenTextDocumentNotification||(T.DidOpenTextDocumentNotification={}));var Uu;(function(t){t.method="textDocument/didChange",t.type=new X.ProtocolNotificationType(t.method)})(Uu=T.DidChangeTextDocumentNotification||(T.DidChangeTextDocumentNotification={}));var Gu;(function(t){t.method="textDocument/didClose",t.type=new X.ProtocolNotificationType(t.method)})(Gu=T.DidCloseTextDocumentNotification||(T.DidCloseTextDocumentNotification={}));var Xu;(function(t){t.method="textDocument/didSave",t.type=new X.ProtocolNotificationType(t.method)})(Xu=T.DidSaveTextDocumentNotification||(T.DidSaveTextDocumentNotification={}));var Bu;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Bu=T.TextDocumentSaveReason||(T.TextDocumentSaveReason={}));var Ju;(function(t){t.method="textDocument/willSave",t.type=new X.ProtocolNotificationType(t.method)})(Ju=T.WillSaveTextDocumentNotification||(T.WillSaveTextDocumentNotification={}));var Vu;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new X.ProtocolRequestType(t.method)})(Vu=T.WillSaveTextDocumentWaitUntilRequest||(T.WillSaveTextDocumentWaitUntilRequest={}));var Qu;(function(t){t.type=new X.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(Qu=T.DidChangeWatchedFilesNotification||(T.DidChangeWatchedFilesNotification={}));var Yu;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(Yu=T.FileChangeType||(T.FileChangeType={}));var Zu;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Zu=T.WatchKind||(T.WatchKind={}));var el;(function(t){t.type=new X.ProtocolNotificationType("textDocument/publishDiagnostics")})(el=T.PublishDiagnosticsNotification||(T.PublishDiagnosticsNotification={}));var tl;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(tl=T.CompletionTriggerKind||(T.CompletionTriggerKind={}));var rl;(function(t){t.method="textDocument/completion",t.type=new X.ProtocolRequestType(t.method),t.resultType=new at.ProgressType})(rl=T.CompletionRequest||(T.CompletionRequest={}));var nl;(function(t){t.method="completionItem/resolve",t.type=new X.ProtocolRequestType(t.method)})(nl=T.CompletionResolveRequest||(T.CompletionResolveRequest={}));var il;(function(t){t.method="textDocument/hover",t.type=new X.ProtocolRequestType(t.method)})(il=T.HoverRequest||(T.HoverRequest={}));var sl;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(sl=T.SignatureHelpTriggerKind||(T.SignatureHelpTriggerKind={}));var ol;(function(t){t.method="textDocument/signatureHelp",t.type=new X.ProtocolRequestType(t.method)})(ol=T.SignatureHelpRequest||(T.SignatureHelpRequest={}));var al;(function(t){t.method="textDocument/definition",t.type=new X.ProtocolRequestType(t.method),t.resultType=new at.ProgressType})(al=T.DefinitionRequest||(T.DefinitionRequest={}));var cl;(function(t){t.method="textDocument/references",t.type=new X.ProtocolRequestType(t.method),t.resultType=new at.ProgressType})(cl=T.ReferencesRequest||(T.ReferencesRequest={}));var ul;(function(t){t.method="textDocument/documentHighlight",t.type=new X.ProtocolRequestType(t.method),t.resultType=new at.ProgressType})(ul=T.DocumentHighlightRequest||(T.DocumentHighlightRequest={}));var ll;(function(t){t.method="textDocument/documentSymbol",t.type=new X.ProtocolRequestType(t.method),t.resultType=new at.ProgressType})(ll=T.DocumentSymbolRequest||(T.DocumentSymbolRequest={}));var dl;(function(t){t.method="textDocument/codeAction",t.type=new X.ProtocolRequestType(t.method),t.resultType=new at.ProgressType})(dl=T.CodeActionRequest||(T.CodeActionRequest={}));var fl;(function(t){t.method="workspace/symbol",t.type=new X.ProtocolRequestType(t.method),t.resultType=new at.ProgressType})(fl=T.WorkspaceSymbolRequest||(T.WorkspaceSymbolRequest={}));var hl;(function(t){t.type=new X.ProtocolRequestType("textDocument/codeLens"),t.resultType=new at.ProgressType})(hl=T.CodeLensRequest||(T.CodeLensRequest={}));var pl;(function(t){t.type=new X.ProtocolRequestType("codeLens/resolve")})(pl=T.CodeLensResolveRequest||(T.CodeLensResolveRequest={}));var gl;(function(t){t.method="textDocument/documentLink",t.type=new X.ProtocolRequestType(t.method),t.resultType=new at.ProgressType})(gl=T.DocumentLinkRequest||(T.DocumentLinkRequest={}));var ml;(function(t){t.type=new X.ProtocolRequestType("documentLink/resolve")})(ml=T.DocumentLinkResolveRequest||(T.DocumentLinkResolveRequest={}));var vl;(function(t){t.method="textDocument/formatting",t.type=new X.ProtocolRequestType(t.method)})(vl=T.DocumentFormattingRequest||(T.DocumentFormattingRequest={}));var yl;(function(t){t.method="textDocument/rangeFormatting",t.type=new X.ProtocolRequestType(t.method)})(yl=T.DocumentRangeFormattingRequest||(T.DocumentRangeFormattingRequest={}));var Cl;(function(t){t.method="textDocument/onTypeFormatting",t.type=new X.ProtocolRequestType(t.method)})(Cl=T.DocumentOnTypeFormattingRequest||(T.DocumentOnTypeFormattingRequest={}));var Rl;(function(t){t.method="textDocument/rename",t.type=new X.ProtocolRequestType(t.method)})(Rl=T.RenameRequest||(T.RenameRequest={}));var _l;(function(t){t.method="textDocument/prepareRename",t.type=new X.ProtocolRequestType(t.method)})(_l=T.PrepareRenameRequest||(T.PrepareRenameRequest={}));var wl;(function(t){t.type=new X.ProtocolRequestType("workspace/executeCommand")})(wl=T.ExecuteCommandRequest||(T.ExecuteCommandRequest={}));var Tl;(function(t){t.type=new X.ProtocolRequestType("workspace/applyEdit")})(Tl=T.ApplyWorkspaceEditRequest||(T.ApplyWorkspaceEditRequest={}))});var So=H(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});var Bn=ke(),El;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new Bn.ProtocolRequestType(t.method)})(El=wt.CallHierarchyPrepareRequest||(wt.CallHierarchyPrepareRequest={}));var Pl;(function(t){t.method="callHierarchy/incomingCalls",t.type=new Bn.ProtocolRequestType(t.method)})(Pl=wt.CallHierarchyIncomingCallsRequest||(wt.CallHierarchyIncomingCallsRequest={}));var Sl;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new Bn.ProtocolRequestType(t.method)})(Sl=wt.CallHierarchyOutgoingCallsRequest||(wt.CallHierarchyOutgoingCallsRequest={}))});var Do=H(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});var Jn=ke(),Dl;(function(t){t.comment="comment",t.keyword="keyword",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.namespace="namespace",t.type="type",t.struct="struct",t.class="class",t.interface="interface",t.enum="enum",t.typeParameter="typeParameter",t.function="function",t.member="member",t.property="property",t.macro="macro",t.variable="variable",t.parameter="parameter",t.label="label"})(Dl=be.SemanticTokenTypes||(be.SemanticTokenTypes={}));var bl;(function(t){t.documentation="documentation",t.declaration="declaration",t.definition="definition",t.reference="reference",t.static="static",t.abstract="abstract",t.deprecated="deprecated",t.async="async",t.volatile="volatile",t.readonly="readonly"})(bl=be.SemanticTokenModifiers||(be.SemanticTokenModifiers={}));var Ol;(function(t){function e(r){let n=r;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}t.is=e})(Ol=be.SemanticTokens||(be.SemanticTokens={}));var xl;(function(t){t.method="textDocument/semanticTokens",t.type=new Jn.ProtocolRequestType(t.method)})(xl=be.SemanticTokensRequest||(be.SemanticTokensRequest={}));var kl;(function(t){t.method="textDocument/semanticTokens/edits",t.type=new Jn.ProtocolRequestType(t.method)})(kl=be.SemanticTokensEditsRequest||(be.SemanticTokensEditsRequest={}));var ql;(function(t){t.method="textDocument/semanticTokens/range",t.type=new Jn.ProtocolRequestType(t.method)})(ql=be.SemanticTokensRangeRequest||(be.SemanticTokensRangeRequest={}))});var me=H(Y=>{"use strict";function bo(t){for(var e in t)Y.hasOwnProperty(e)||(Y[e]=t[e])}Object.defineProperty(Y,"__esModule",{value:!0});var ie=ze();Y.ErrorCodes=ie.ErrorCodes;Y.ResponseError=ie.ResponseError;Y.CancellationToken=ie.CancellationToken;Y.CancellationTokenSource=ie.CancellationTokenSource;Y.Disposable=ie.Disposable;Y.Event=ie.Event;Y.Emitter=ie.Emitter;Y.Trace=ie.Trace;Y.TraceFormat=ie.TraceFormat;Y.SetTraceNotification=ie.SetTraceNotification;Y.LogTraceNotification=ie.LogTraceNotification;Y.RequestType=ie.RequestType;Y.RequestType0=ie.RequestType0;Y.NotificationType=ie.NotificationType;Y.NotificationType0=ie.NotificationType0;Y.MessageReader=ie.MessageReader;Y.MessageWriter=ie.MessageWriter;Y.ConnectionStrategy=ie.ConnectionStrategy;Y.StreamMessageReader=ie.StreamMessageReader;Y.StreamMessageWriter=ie.StreamMessageWriter;Y.IPCMessageReader=ie.IPCMessageReader;Y.IPCMessageWriter=ie.IPCMessageWriter;Y.createClientPipeTransport=ie.createClientPipeTransport;Y.createServerPipeTransport=ie.createServerPipeTransport;Y.generateRandomPipeName=ie.generateRandomPipeName;Y.createClientSocketTransport=ie.createClientSocketTransport;Y.createServerSocketTransport=ie.createServerSocketTransport;Y.ProgressType=ie.ProgressType;bo(io());bo(Po());var Xt=So(),ct=Do(),Il;(function(t){let e;(function(l){l.method=Xt.CallHierarchyPrepareRequest.method,l.type=Xt.CallHierarchyPrepareRequest.type})(e=t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={}));let r;(function(l){l.method=Xt.CallHierarchyIncomingCallsRequest.method,l.type=Xt.CallHierarchyIncomingCallsRequest.type})(r=t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={}));let n;(function(l){l.method=Xt.CallHierarchyOutgoingCallsRequest.method,l.type=Xt.CallHierarchyOutgoingCallsRequest.type})(n=t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={})),t.SemanticTokenTypes=ct.SemanticTokenTypes,t.SemanticTokenModifiers=ct.SemanticTokenModifiers,t.SemanticTokens=ct.SemanticTokens;let s;(function(l){l.method=ct.SemanticTokensRequest.method,l.type=ct.SemanticTokensRequest.type})(s=t.SemanticTokensRequest||(t.SemanticTokensRequest={}));let a;(function(l){l.method=ct.SemanticTokensEditsRequest.method,l.type=ct.SemanticTokensEditsRequest.type})(a=t.SemanticTokensEditsRequest||(t.SemanticTokensEditsRequest={}));let u;(function(l){l.method=ct.SemanticTokensRangeRequest.method,l.type=ct.SemanticTokensRangeRequest.type})(u=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={}))})(Il=Y.Proposed||(Y.Proposed={}));function Nl(t,e,r,n){return ie.createMessageConnection(t,e,r,n)}Y.createProtocolConnection=Nl});var Bt=H(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});function Ll(t){return t===!0||t===!1}Fe.boolean=Ll;function Oo(t){return typeof t=="string"||t instanceof String}Fe.string=Oo;function Fl(t){return typeof t=="number"||t instanceof Number}Fe.number=Fl;function Ml(t){return t instanceof Error}Fe.error=Ml;function xo(t){return typeof t=="function"}Fe.func=xo;function ko(t){return Array.isArray(t)}Fe.array=ko;function Al(t){return ko(t)&&t.every(e=>Oo(e))}Fe.stringArray=Al;function Hl(t,e){return Array.isArray(t)&&t.every(e)}Fe.typedArray=Hl;function qo(t){return t&&xo(t.then)}Fe.thenable=qo;function jl(t){return t instanceof Promise?t:qo(t)?new Promise((e,r)=>{t.then(n=>e(n),n=>r(n))}):Promise.resolve(t)}Fe.asPromise=jl});var Yn=H(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});var Wl=require("vscode"),Vn=class extends Wl.CompletionItem{constructor(e){super(e)}};Qn.default=Vn});var ti=H(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});var Kl=require("vscode"),Zn=class extends Kl.CodeLens{constructor(e){super(e)}};ei.default=Zn});var ii=H(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});var zl=require("vscode"),ri=class extends zl.DocumentLink{constructor(e,r){super(e,r)}};ni.default=ri});var Io=H(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});var ve=require("vscode"),se=me(),lr=Bt(),$l=Yn(),Ul=ti(),Gl=ii();function Xl(t){let r=t||(i=>i.toString());function n(i){return r(i)}function s(i){return{uri:r(i.uri)}}function a(i){return{uri:r(i.uri),version:i.version}}function u(i){return{textDocument:{uri:r(i.uri),languageId:i.languageId,version:i.version,text:i.getText()}}}function l(i){let o=i;return!!o.document&&!!o.contentChanges}function f(i){let o=i;return!!o.uri&&!!o.version}function m(i){if(f(i))return{textDocument:{uri:r(i.uri),version:i.version},contentChanges:[{text:i.getText()}]};if(l(i)){let o=i.document;return{textDocument:{uri:r(o.uri),version:o.version},contentChanges:i.contentChanges.map(g=>{let O=g.range;return{range:{start:{line:O.start.line,character:O.start.character},end:{line:O.end.line,character:O.end.character}},rangeLength:g.rangeLength,text:g.text}})}}else throw Error("Unsupported text document change parameter")}function y(i){return{textDocument:s(i)}}function v(i,o=!1){let p={textDocument:a(i)};return o&&(p.text=i.getText()),p}function P(i){switch(i){case ve.TextDocumentSaveReason.Manual:return se.TextDocumentSaveReason.Manual;case ve.TextDocumentSaveReason.AfterDelay:return se.TextDocumentSaveReason.AfterDelay;case ve.TextDocumentSaveReason.FocusOut:return se.TextDocumentSaveReason.FocusOut}return se.TextDocumentSaveReason.Manual}function D(i){return{textDocument:s(i.document),reason:P(i.reason)}}function F(i,o){return{textDocument:s(i),position:_e(o)}}function A(i){switch(i){case ve.CompletionTriggerKind.TriggerCharacter:return se.CompletionTriggerKind.TriggerCharacter;case ve.CompletionTriggerKind.TriggerForIncompleteCompletions:return se.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return se.CompletionTriggerKind.Invoked}}function K(i,o,p){return{textDocument:s(i),position:_e(o),context:{triggerKind:A(p.triggerKind),triggerCharacter:p.triggerCharacter}}}function k(i){switch(i){case ve.SignatureHelpTriggerKind.Invoke:return se.SignatureHelpTriggerKind.Invoked;case ve.SignatureHelpTriggerKind.TriggerCharacter:return se.SignatureHelpTriggerKind.TriggerCharacter;case ve.SignatureHelpTriggerKind.ContentChange:return se.SignatureHelpTriggerKind.ContentChange}}function L(i){return{label:i.label}}function x(i){return i.map(L)}function J(i){return{label:i.label,parameters:x(i.parameters)}}function Ie(i){return i.map(J)}function Ae(i){return i===void 0?i:{signatures:Ie(i.signatures),activeSignature:i.activeSignature,activeParameter:i.activeParameter}}function Xe(i,o,p){return{textDocument:s(i),position:_e(o),context:{isRetrigger:p.isRetrigger,triggerCharacter:p.triggerCharacter,triggerKind:k(p.triggerKind),activeSignatureHelp:Ae(p.activeSignatureHelp)}}}function _e(i){return{line:i.line,character:i.character}}function Oe(i){return i==null?i:{line:i.line,character:i.character}}function Qe(i){let o=[];for(let p of i)o.push(Oe(p));return o}function Be(i){let o=i;return o&&!!o.inserting&&!!o.replacing}function we(i){if(i==null)return i;if(Be(i))throw new Error("Receving unknown insert replace range.");return{start:Oe(i.start),end:Oe(i.end)}}function Ye(i){return i==null?i:se.Location.create(n(i.uri),we(i.range))}function Ne(i){switch(i){case ve.DiagnosticSeverity.Error:return se.DiagnosticSeverity.Error;case ve.DiagnosticSeverity.Warning:return se.DiagnosticSeverity.Warning;case ve.DiagnosticSeverity.Information:return se.DiagnosticSeverity.Information;case ve.DiagnosticSeverity.Hint:return se.DiagnosticSeverity.Hint}}function ut(i){if(!i)return;let o=[];for(let p of i){let g=Ze(p);g!==void 0&&o.push(g)}return o.length>0?o:void 0}function Ze(i){switch(i){case ve.DiagnosticTag.Unnecessary:return se.DiagnosticTag.Unnecessary;case ve.DiagnosticTag.Deprecated:return se.DiagnosticTag.Deprecated;default:return}}function xe(i){return{message:i.message,location:Ye(i.location)}}function He(i){return i.map(xe)}function lt(i){let o=se.Diagnostic.create(we(i.range),i.message);return lr.number(i.severity)&&(o.severity=Ne(i.severity)),(lr.number(i.code)||lr.string(i.code))&&(o.code=i.code),Array.isArray(i.tags)&&(o.tags=ut(i.tags)),i.relatedInformation&&(o.relatedInformation=He(i.relatedInformation)),i.source&&(o.source=i.source),o}function dt(i){return i==null?i:i.map(lt)}function et(i,o){switch(i){case"$string":return o;case se.MarkupKind.PlainText:return{kind:i,value:o};case se.MarkupKind.Markdown:return{kind:i,value:o.value};default:return`Unsupported Markup content received. Kind is: ${i}`}}function ft(i){switch(i){case ve.CompletionItemTag.Deprecated:return se.CompletionItemTag.Deprecated}}function Et(i){if(i===void 0)return i;let o=[];for(let p of i){let g=ft(p);g!==void 0&&o.push(g)}return o}function tt(i,o){return o!==void 0?o:i+1}function ht(i){let o={label:i.label},p=i instanceof $l.default?i:void 0;i.detail&&(o.detail=i.detail),i.documentation&&(!p||p.documentationFormat==="$string"?o.documentation=i.documentation:o.documentation=et(p.documentationFormat,i.documentation)),i.filterText&&(o.filterText=i.filterText),Pt(o,i),lr.number(i.kind)&&(o.kind=tt(i.kind,p&&p.originalItemKind)),i.sortText&&(o.sortText=i.sortText),i.additionalTextEdits&&(o.additionalTextEdits=St(i.additionalTextEdits)),i.commitCharacters&&(o.commitCharacters=i.commitCharacters.slice()),i.command&&(o.command=De(i.command)),(i.preselect===!0||i.preselect===!1)&&(o.preselect=i.preselect);let g=Et(i.tags);if(p&&(p.data!==void 0&&(o.data=p.data),p.deprecated===!0||p.deprecated===!1)){if(p.deprecated===!0&&g!==void 0&&g.length>0){let O=g.indexOf(ve.CompletionItemTag.Deprecated);O!==-1&&g.splice(O,1)}o.deprecated=p.deprecated}return g!==void 0&&g.length>0&&(o.tags=g),o}function Pt(i,o){let p=se.InsertTextFormat.PlainText,g,O;o.textEdit?(g=o.textEdit.newText,O=we(o.textEdit.range)):o.insertText instanceof ve.SnippetString?(p=se.InsertTextFormat.Snippet,g=o.insertText.value):g=o.insertText,o.range&&(O=we(o.range)),i.insertTextFormat=p,o.fromEdit&&g!==void 0&&O!==void 0?i.textEdit={newText:g,range:O}:i.insertText=g}function rt(i){return{range:we(i.range),newText:i.newText}}function St(i){return i==null?i:i.map(rt)}function nt(i){return i<=ve.SymbolKind.TypeParameter?i+1:se.SymbolKind.Property}function Ee(i){return i}function Dt(i){return i.map(Ee)}function Pe(i,o,p){return{textDocument:s(i),position:_e(o),context:{includeDeclaration:p.includeDeclaration}}}function it(i){if(i==null)return i;let o;return i.only&&lr.string(i.only.value)&&(o=[i.only.value]),se.CodeActionContext.create(dt(i.diagnostics),o)}function De(i){let o=se.Command.create(i.title,i.command);return i.arguments&&(o.arguments=i.arguments),o}function je(i){let o=se.CodeLens.create(we(i.range));return i.command&&(o.command=De(i.command)),i instanceof Ul.default&&i.data&&(o.data=i.data),o}function pt(i){return{tabSize:i.tabSize,insertSpaces:i.insertSpaces}}function w(i){return{textDocument:s(i)}}function d(i){return{textDocument:s(i)}}function C(i){let o=se.DocumentLink.create(we(i.range));i.target&&(o.target=n(i.target)),i.tooltip!==void 0&&(o.tooltip=i.tooltip);let p=i instanceof Gl.default?i:void 0;return p&&p.data&&(o.data=p.data),o}function R(i){return{textDocument:s(i)}}return{asUri:n,asTextDocumentIdentifier:s,asVersionedTextDocumentIdentifier:a,asOpenTextDocumentParams:u,asChangeTextDocumentParams:m,asCloseTextDocumentParams:y,asSaveTextDocumentParams:v,asWillSaveTextDocumentParams:D,asTextDocumentPositionParams:F,asCompletionParams:K,asSignatureHelpParams:Xe,asWorkerPosition:_e,asRange:we,asPosition:Oe,asPositions:Qe,asLocation:Ye,asDiagnosticSeverity:Ne,asDiagnosticTag:Ze,asDiagnostic:lt,asDiagnostics:dt,asCompletionItem:ht,asTextEdit:rt,asSymbolKind:nt,asSymbolTag:Ee,asSymbolTags:Dt,asReferenceParams:Pe,asCodeActionContext:it,asCommand:De,asCodeLens:je,asFormattingOptions:pt,asDocumentSymbolParams:w,asCodeLensParams:d,asDocumentLink:C,asDocumentLinkParams:R}}si.createConverter=Xl});var No=H(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});var I=require("vscode"),Q=me(),qe=Bt(),Bl=Yn(),Jl=ti(),Vl=ii(),Ar;(function(t){function e(r){let n=r;return n&&qe.string(n.language)&&qe.string(n.value)}t.is=e})(Ar||(Ar={}));function Ql(t){let r=t||(c=>I.Uri.parse(c));function n(c){return r(c)}function s(c){return c.map(a)}function a(c){let E=new I.Diagnostic(v(c.range),c.message,D(c.severity));return(qe.number(c.code)||qe.string(c.code))&&(E.code=c.code),c.source&&(E.source=c.source),c.relatedInformation&&(E.relatedInformation=u(c.relatedInformation)),Array.isArray(c.tags)&&(E.tags=f(c.tags)),E}function u(c){return c.map(l)}function l(c){return new I.DiagnosticRelatedInformation(Ne(c.location),c.message)}function f(c){if(!c)return;let E=[];for(let b of c){let ue=m(b);ue!==void 0&&E.push(ue)}return E.length>0?E:void 0}function m(c){switch(c){case Q.DiagnosticTag.Unnecessary:return I.DiagnosticTag.Unnecessary;case Q.DiagnosticTag.Deprecated:return I.DiagnosticTag.Deprecated;default:return}}function y(c){if(c)return new I.Position(c.line,c.character)}function v(c){if(c)return new I.Range(y(c.start),y(c.end))}function P(c){return c.map(E=>v(E))}function D(c){if(c==null)return I.DiagnosticSeverity.Error;switch(c){case Q.DiagnosticSeverity.Error:return I.DiagnosticSeverity.Error;case Q.DiagnosticSeverity.Warning:return I.DiagnosticSeverity.Warning;case Q.DiagnosticSeverity.Information:return I.DiagnosticSeverity.Information;case Q.DiagnosticSeverity.Hint:return I.DiagnosticSeverity.Hint}return I.DiagnosticSeverity.Error}function F(c){if(qe.string(c))return new I.MarkdownString(c);if(Ar.is(c))return new I.MarkdownString().appendCodeblock(c.value,c.language);if(Array.isArray(c)){let E=[];for(let b of c){let ue=new I.MarkdownString;Ar.is(b)?ue.appendCodeblock(b.value,b.language):ue.appendMarkdown(b),E.push(ue)}return E}else{let E;switch(c.kind){case Q.MarkupKind.Markdown:return new I.MarkdownString(c.value);case Q.MarkupKind.PlainText:return E=new I.MarkdownString,E.appendText(c.value),E;default:return E=new I.MarkdownString,E.appendText(`Unsupported Markup content received. Kind is: ${c.kind}`),E}}}function A(c){if(qe.string(c))return c;switch(c.kind){case Q.MarkupKind.Markdown:return new I.MarkdownString(c.value);case Q.MarkupKind.PlainText:return c.value;default:return`Unsupported Markup content received. Kind is: ${c.kind}`}}function K(c){if(c)return new I.Hover(F(c.contents),v(c.range))}function k(c){if(!c)return;if(Array.isArray(c))return c.map(Ie);let E=c;return new I.CompletionList(E.items.map(Ie),E.isIncomplete)}function L(c){return Q.CompletionItemKind.Text<=c&&c<=Q.CompletionItemKind.TypeParameter?[c-1,void 0]:[I.CompletionItemKind.Text,c]}function x(c){switch(c){case Q.CompletionItemTag.Deprecated:return I.CompletionItemTag.Deprecated}}function J(c){if(c==null)return[];let E=[];for(let b of c){let ue=x(b);ue!==void 0&&E.push(ue)}return E}function Ie(c){let E=J(c.tags),b=new Bl.default(c.label);c.detail&&(b.detail=c.detail),c.documentation&&(b.documentation=A(c.documentation),b.documentationFormat=qe.string(c.documentation)?"$string":c.documentation.kind),c.filterText&&(b.filterText=c.filterText);let ue=Ae(c);if(ue&&(b.insertText=ue.text,b.range=ue.range,b.fromEdit=ue.fromEdit),qe.number(c.kind)){let[_a,bs]=L(c.kind);b.kind=_a,bs&&(b.originalItemKind=bs)}return c.sortText&&(b.sortText=c.sortText),c.additionalTextEdits&&(b.additionalTextEdits=_e(c.additionalTextEdits)),qe.stringArray(c.commitCharacters)&&(b.commitCharacters=c.commitCharacters.slice()),c.command&&(b.command=Ee(c.command)),(c.deprecated===!0||c.deprecated===!1)&&(b.deprecated=c.deprecated,c.deprecated===!0&&E.push(I.CompletionItemTag.Deprecated)),(c.preselect===!0||c.preselect===!1)&&(b.preselect=c.preselect),c.data!==void 0&&(b.data=c.data),E.length>0&&(b.tags=E),b}function Ae(c){return c.textEdit?c.insertTextFormat===Q.InsertTextFormat.Snippet?{text:new I.SnippetString(c.textEdit.newText),range:v(c.textEdit.range),fromEdit:!0}:{text:c.textEdit.newText,range:v(c.textEdit.range),fromEdit:!0}:c.insertText?c.insertTextFormat===Q.InsertTextFormat.Snippet?{text:new I.SnippetString(c.insertText),fromEdit:!1}:{text:c.insertText,fromEdit:!1}:void 0}function Xe(c){if(c)return new I.TextEdit(v(c.range),c.newText)}function _e(c){if(c)return c.map(Xe)}function Oe(c){if(!c)return;let E=new I.SignatureHelp;return qe.number(c.activeSignature)?E.activeSignature=c.activeSignature:E.activeSignature=0,qe.number(c.activeParameter)?E.activeParameter=c.activeParameter:E.activeParameter=0,c.signatures&&(E.signatures=Qe(c.signatures)),E}function Qe(c){return c.map(Be)}function Be(c){let E=new I.SignatureInformation(c.label);return c.documentation&&(E.documentation=A(c.documentation)),c.parameters&&(E.parameters=we(c.parameters)),E}function we(c){return c.map(Ye)}function Ye(c){let E=new I.ParameterInformation(c.label);return c.documentation&&(E.documentation=A(c.documentation)),E}function Ne(c){if(c)return new I.Location(r(c.uri),v(c.range))}function ut(c){if(c)return He(c)}function Ze(c){if(c)return He(c)}function xe(c){if(!c)return;let E={targetUri:r(c.targetUri),targetRange:v(c.targetSelectionRange),originSelectionRange:v(c.originSelectionRange),targetSelectionRange:v(c.targetSelectionRange)};if(!E.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return E}function He(c){if(c)return qe.array(c)?c.length===0?[]:Q.LocationLink.is(c[0])?c.map(b=>xe(b)):c.map(b=>Ne(b)):Q.LocationLink.is(c)?[xe(c)]:Ne(c)}function lt(c){if(c)return c.map(E=>Ne(E))}function dt(c){if(c)return c.map(et)}function et(c){let E=new I.DocumentHighlight(v(c.range));return qe.number(c.kind)&&(E.kind=ft(c.kind)),E}function ft(c){switch(c){case Q.DocumentHighlightKind.Text:return I.DocumentHighlightKind.Text;case Q.DocumentHighlightKind.Read:return I.DocumentHighlightKind.Read;case Q.DocumentHighlightKind.Write:return I.DocumentHighlightKind.Write}return I.DocumentHighlightKind.Text}function Et(c,E){if(c)return c.map(b=>rt(b,E))}function tt(c){return c<=Q.SymbolKind.TypeParameter?c-1:I.SymbolKind.Property}function ht(c){return c}function Pt(c){if(c!=null)return c.map(ht)}function rt(c,E){let b=new I.SymbolInformation(c.name,tt(c.kind),v(c.location.range),c.location.uri?r(c.location.uri):E);return c.containerName&&(b.containerName=c.containerName),b}function St(c){if(c!=null)return c.map(nt)}function nt(c){let E=new I.DocumentSymbol(c.name,c.detail||"",tt(c.kind),v(c.range),v(c.selectionRange));if(c.children!==void 0&&c.children.length>0){let b=[];for(let ue of c.children)b.push(nt(ue));E.children=b}return E}function Ee(c){let E={title:c.title,command:c.command};return c.arguments&&(E.arguments=c.arguments),E}function Dt(c){if(c)return c.map(Ee)}let Pe=new Map;Pe.set(Q.CodeActionKind.Empty,I.CodeActionKind.Empty),Pe.set(Q.CodeActionKind.QuickFix,I.CodeActionKind.QuickFix),Pe.set(Q.CodeActionKind.Refactor,I.CodeActionKind.Refactor),Pe.set(Q.CodeActionKind.RefactorExtract,I.CodeActionKind.RefactorExtract),Pe.set(Q.CodeActionKind.RefactorInline,I.CodeActionKind.RefactorInline),Pe.set(Q.CodeActionKind.RefactorRewrite,I.CodeActionKind.RefactorRewrite),Pe.set(Q.CodeActionKind.Source,I.CodeActionKind.Source),Pe.set(Q.CodeActionKind.SourceOrganizeImports,I.CodeActionKind.SourceOrganizeImports);function it(c){if(c==null)return;let E=Pe.get(c);if(E)return E;let b=c.split(".");E=I.CodeActionKind.Empty;for(let ue of b)E=E.append(ue);return E}function De(c){if(c!=null)return c.map(E=>it(E))}function je(c){if(c==null)return;let E=new I.CodeAction(c.title);return c.kind!==void 0&&(E.kind=it(c.kind)),c.diagnostics&&(E.diagnostics=s(c.diagnostics)),c.edit&&(E.edit=d(c.edit)),c.command&&(E.command=Ee(c.command)),c.isPreferred!==void 0&&(E.isPreferred=c.isPreferred),E}function pt(c){if(!c)return;let E=new Jl.default(v(c.range));return c.command&&(E.command=Ee(c.command)),c.data!==void 0&&c.data!==null&&(E.data=c.data),E}function w(c){if(c)return c.map(E=>pt(E))}function d(c){if(!c)return;let E=new I.WorkspaceEdit;return c.documentChanges?c.documentChanges.forEach(b=>{Q.CreateFile.is(b)?E.createFile(r(b.uri),b.options):Q.RenameFile.is(b)?E.renameFile(r(b.oldUri),r(b.newUri),b.options):Q.DeleteFile.is(b)?E.deleteFile(r(b.uri),b.options):Q.TextDocumentEdit.is(b)?E.set(r(b.textDocument.uri),_e(b.edits)):console.error(`Unknown workspace edit change received:
${JSON.stringify(b,void 0,4)}`)}):c.changes&&Object.keys(c.changes).forEach(b=>{E.set(r(b),_e(c.changes[b]))}),E}function C(c){let E=v(c.range),b=c.target?n(c.target):void 0,ue=new Vl.default(E,b);return c.tooltip!==void 0&&(ue.tooltip=c.tooltip),c.data!==void 0&&c.data!==null&&(ue.data=c.data),ue}function R(c){if(c)return c.map(C)}function i(c){return new I.Color(c.red,c.green,c.blue,c.alpha)}function o(c){return new I.ColorInformation(v(c.range),i(c.color))}function p(c){if(Array.isArray(c))return c.map(o)}function g(c){let E=new I.ColorPresentation(c.label);return E.additionalTextEdits=_e(c.additionalTextEdits),c.textEdit&&(E.textEdit=Xe(c.textEdit)),E}function O(c){if(Array.isArray(c))return c.map(g)}function $(c){if(c)switch(c){case Q.FoldingRangeKind.Comment:return I.FoldingRangeKind.Comment;case Q.FoldingRangeKind.Imports:return I.FoldingRangeKind.Imports;case Q.FoldingRangeKind.Region:return I.FoldingRangeKind.Region}}function Z(c){return new I.FoldingRange(c.startLine,c.endLine,$(c.kind))}function W(c){if(Array.isArray(c))return c.map(Z)}function U(c){return new I.SelectionRange(v(c.range),c.parent?U(c.parent):void 0)}function ce(c){if(!Array.isArray(c))return[];let E=[];for(let b of c)E.push(U(b));return E}return{asUri:n,asDiagnostics:s,asDiagnostic:a,asRange:v,asRanges:P,asPosition:y,asDiagnosticSeverity:D,asDiagnosticTag:m,asHover:K,asCompletionResult:k,asCompletionItem:Ie,asTextEdit:Xe,asTextEdits:_e,asSignatureHelp:Oe,asSignatureInformations:Qe,asSignatureInformation:Be,asParameterInformations:we,asParameterInformation:Ye,asDeclarationResult:ut,asDefinitionResult:Ze,asLocation:Ne,asReferences:lt,asDocumentHighlights:dt,asDocumentHighlight:et,asDocumentHighlightKind:ft,asSymbolKind:tt,asSymbolTag:ht,asSymbolTags:Pt,asSymbolInformations:Et,asSymbolInformation:rt,asDocumentSymbols:St,asDocumentSymbol:nt,asCommand:Ee,asCommands:Dt,asCodeAction:je,asCodeActionKind:it,asCodeActionKinds:De,asCodeLens:pt,asCodeLenses:w,asWorkspaceEdit:d,asDocumentLink:C,asDocumentLinks:R,asFoldingRangeKind:$,asFoldingRange:Z,asFoldingRanges:W,asColor:i,asColorInformation:o,asColorInformations:p,asColorPresentation:g,asColorPresentations:O,asSelectionRange:U,asSelectionRanges:ce}}oi.createConverter=Ql});var Lo=H(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});var ai=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,r=this.defaultDelay){return this.task=e,r>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(r>=0||this.timeout===void 0)&&(this.timeout=setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},r>=0?r:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}};ci.Delayer=ai});var ui=H(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});var dr=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},B=class extends dr{constructor(){super([B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),"-",B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),"-","4",B._randomHex(),B._randomHex(),B._randomHex(),"-",B._oneOf(B._timeHighBits),B._randomHex(),B._randomHex(),B._randomHex(),"-",B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return B._oneOf(B._chars)}};B._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];B._timeHighBits=["8","9","a","b"];qt.empty=new dr("00000000-0000-0000-0000-000000000000");function Fo(){return new B}qt.v4=Fo;var Yl=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Mo(t){return Yl.test(t)}qt.isUUID=Mo;function Zl(t){if(!Mo(t))throw new Error("invalid uuid");return new dr(t)}qt.parse=Zl;function ed(){return Fo().asHex()}qt.generateUuid=ed});var hi=H(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});var li=require("vscode"),Ao=me(),Ho=Bt(),di=class{constructor(e,r){this._client=e,this._token=r,this._reported=0,this._disposable=this._client.onProgress(Ao.WorkDoneProgress.type,this._token,n=>{switch(n.kind){case"begin":this.begin(n);break;case"report":this.report(n);break;case"end":this.done();break}})}begin(e){let r=e.cancellable?li.ProgressLocation.Notification:li.ProgressLocation.Window;li.window.withProgress({location:r,cancellable:e.cancellable,title:e.title},async(n,s)=>(this._progress=n,this._infinite=e.percentage===void 0,this._cancellationToken=s,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Ao.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((a,u)=>{this._resolve=a,this._reject=u})))}report(e){if(this._infinite&&Ho.string(e.message))this._progress.report({message:e.message});else if(Ho.number(e.percentage)){let r=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,r-this._reported);this._progress.report({message:e.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};fi.ProgressPart=di});var Ge=H(Te=>{"use strict";function td(t){for(var e in t)Te.hasOwnProperty(e)||(Te[e]=t[e])}Object.defineProperty(Te,"__esModule",{value:!0});var N=require("vscode"),h=me(),rd=Io(),nd=No(),ae=Bt(),jo=Lo(),oe=ui(),id=hi();td(me());var pi=class{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}};function sd(t,e,r,n){let s=new pi,a=h.createProtocolConnection(t,e,s);return a.onError(l=>{r(l[0],l[1],l[2])}),a.onClose(n),{listen:()=>a.listen(),sendRequest:(l,...f)=>a.sendRequest(ae.string(l)?l:l.method,...f),onRequest:(l,f)=>a.onRequest(ae.string(l)?l:l.method,f),sendNotification:(l,f)=>a.sendNotification(ae.string(l)?l:l.method,f),onNotification:(l,f)=>a.onNotification(ae.string(l)?l:l.method,f),onProgress:a.onProgress,sendProgress:a.sendProgress,trace:(l,f,m)=>{let y={sendNotification:!1,traceFormat:h.TraceFormat.Text};m===void 0?a.trace(l,f,y):(ae.boolean(m),a.trace(l,f,m))},initialize:l=>a.sendRequest(h.InitializeRequest.type,l),shutdown:()=>a.sendRequest(h.ShutdownRequest.type,void 0),exit:()=>a.sendNotification(h.ExitNotification.type),onLogMessage:l=>a.onNotification(h.LogMessageNotification.type,l),onShowMessage:l=>a.onNotification(h.ShowMessageNotification.type,l),onTelemetry:l=>a.onNotification(h.TelemetryEventNotification.type,l),didChangeConfiguration:l=>a.sendNotification(h.DidChangeConfigurationNotification.type,l),didChangeWatchedFiles:l=>a.sendNotification(h.DidChangeWatchedFilesNotification.type,l),didOpenTextDocument:l=>a.sendNotification(h.DidOpenTextDocumentNotification.type,l),didChangeTextDocument:l=>a.sendNotification(h.DidChangeTextDocumentNotification.type,l),didCloseTextDocument:l=>a.sendNotification(h.DidCloseTextDocumentNotification.type,l),didSaveTextDocument:l=>a.sendNotification(h.DidSaveTextDocumentNotification.type,l),onDiagnostics:l=>a.onNotification(h.PublishDiagnosticsNotification.type,l),dispose:()=>a.dispose()}}var jr;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(jr=Te.ErrorAction||(Te.ErrorAction={}));var It;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(It=Te.CloseAction||(Te.CloseAction={}));var Wr=class{constructor(e){this.name=e,this.restarts=[]}error(e,r,n){return n&&n<=3?jr.Continue:jr.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<5?It.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(N.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),It.DoNotRestart):(this.restarts.shift(),It.Restart)}},fr;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(fr=Te.RevealOutputChannelOn||(Te.RevealOutputChannelOn={}));var Hr;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(Hr=Te.State||(Te.State={}));var fe;(function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.StartFailed=2]="StartFailed",t[t.Running=3]="Running",t[t.Stopping=4]="Stopping",t[t.Stopped=5]="Stopped"})(fe||(fe={}));var Wo=[h.SymbolKind.File,h.SymbolKind.Module,h.SymbolKind.Namespace,h.SymbolKind.Package,h.SymbolKind.Class,h.SymbolKind.Method,h.SymbolKind.Property,h.SymbolKind.Field,h.SymbolKind.Constructor,h.SymbolKind.Enum,h.SymbolKind.Interface,h.SymbolKind.Function,h.SymbolKind.Variable,h.SymbolKind.Constant,h.SymbolKind.String,h.SymbolKind.Number,h.SymbolKind.Boolean,h.SymbolKind.Array,h.SymbolKind.Object,h.SymbolKind.Key,h.SymbolKind.Null,h.SymbolKind.EnumMember,h.SymbolKind.Struct,h.SymbolKind.Event,h.SymbolKind.Operator,h.SymbolKind.TypeParameter],od=[h.CompletionItemKind.Text,h.CompletionItemKind.Method,h.CompletionItemKind.Function,h.CompletionItemKind.Constructor,h.CompletionItemKind.Field,h.CompletionItemKind.Variable,h.CompletionItemKind.Class,h.CompletionItemKind.Interface,h.CompletionItemKind.Module,h.CompletionItemKind.Property,h.CompletionItemKind.Unit,h.CompletionItemKind.Value,h.CompletionItemKind.Enum,h.CompletionItemKind.Keyword,h.CompletionItemKind.Snippet,h.CompletionItemKind.Color,h.CompletionItemKind.File,h.CompletionItemKind.Reference,h.CompletionItemKind.Folder,h.CompletionItemKind.EnumMember,h.CompletionItemKind.Constant,h.CompletionItemKind.Struct,h.CompletionItemKind.Event,h.CompletionItemKind.Operator,h.CompletionItemKind.TypeParameter];function M(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var gi;(function(t){function e(r){let n=r;return n&&ae.func(n.register)&&ae.func(n.unregister)&&ae.func(n.dispose)&&n.messages!==void 0}t.is=e})(gi||(gi={}));var Ue=class{constructor(e,r,n,s,a,u){this._client=e,this._event=r,this._type=n,this._middleware=s,this._createParams=a,this._selectorFilter=u,this._selectors=new Map}static textDocumentFilter(e,r){for(let n of e)if(N.languages.match(n,r))return!0;return!1}register(e,r){r.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(r.id,r.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,r=>this._client.sendNotification(this._type,this._createParams(r))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let r of this._selectors.values())if(N.languages.match(r,e))return{send:n=>{this.callback(n)}};throw new Error("No provider available for the given text document")}},mi=class extends Ue{constructor(e,r){super(e,N.workspace.onDidOpenTextDocument,h.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),Ue.textDocumentFilter),this._syncedDocuments=r}get messages(){return h.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){M(M(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:r}})}register(e,r){if(super.register(e,r),!r.registerOptions.documentSelector)return;let n=r.registerOptions.documentSelector;N.workspace.textDocuments.forEach(s=>{let a=s.uri.toString();if(!this._syncedDocuments.has(a)&&N.languages.match(n,s)){let u=this._client.clientOptions.middleware,l=f=>{this._client.sendNotification(this._type,this._createParams(f))};u.didOpen?u.didOpen(s,l):l(s),this._syncedDocuments.set(a,s)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},vi=class extends Ue{constructor(e,r){super(e,N.workspace.onDidCloseTextDocument,h.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),Ue.textDocumentFilter),this._syncedDocuments=r}get messages(){return h.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){M(M(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:r}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let r=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(s=>{if(N.languages.match(r,s)&&!this._selectorFilter(n,s)){let a=this._client.clientOptions.middleware,u=l=>{this._client.sendNotification(this._type,this._createParams(l))};this._syncedDocuments.delete(s.uri.toString()),a.didClose?a.didClose(s,u):u(s)}})}},yi=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return h.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){M(M(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.change!==void 0&&n.change!==h.TextDocumentSyncKind.None&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{syncKind:n.change})})}register(e,r){r.registerOptions.documentSelector&&(this._listener||(this._listener=N.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(r.id,{documentSelector:r.registerOptions.documentSelector,syncKind:r.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let r of this._changeData.values())if(N.languages.match(r.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(r.syncKind===h.TextDocumentSyncKind.Incremental){let s=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(h.DidChangeTextDocumentNotification.type,s)):this._client.sendNotification(h.DidChangeTextDocumentNotification.type,s)}else if(r.syncKind===h.TextDocumentSyncKind.Full){let s=a=>{this._changeDelayer?(this._changeDelayer.uri!==a.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=a.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(h.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))})):(this._changeDelayer={uri:a.document.uri.toString(),delayer:new jo.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(h.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))},-1))};n.didChange?n.didChange(e,s):s(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let r of this._changeData.values())if(N.languages.match(r.documentSelector,e))return{send:n=>{this.callback(n)}};throw new Error("No provider available for the given text document")}},Ci=class extends Ue{constructor(e){super(e,N.workspace.onWillSaveTextDocument,h.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,r=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(r),(r,n)=>Ue.textDocumentFilter(r,n.document))}get messages(){return h.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let r=M(M(e,"textDocument"),"synchronization");r.willSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSave&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:r}})}},Ri=class{constructor(e){this._client=e,this._selectors=new Map}get messages(){return h.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let r=M(M(e,"textDocument"),"synchronization");r.willSaveWaitUntil=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSaveWaitUntil&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:r}})}register(e,r){r.registerOptions.documentSelector&&(this._listener||(this._listener=N.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(r.id,r.registerOptions.documentSelector))}callback(e){if(Ue.textDocumentFilter(this._selectors.values(),e.document)){let r=this._client.clientOptions.middleware,n=s=>this._client.sendRequest(h.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(s)).then(a=>{let u=this._client.protocol2CodeConverter.asTextEdits(a);return u===void 0?[]:u});e.waitUntil(r.willSaveWaitUntil?r.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},_i=class extends Ue{constructor(e){super(e,N.workspace.onDidSaveTextDocument,h.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,r=>e.code2ProtocolConverter.asSaveTextDocumentParams(r,this._includeText),Ue.textDocumentFilter)}get messages(){return h.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){M(M(e,"textDocument"),"synchronization").didSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.save&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{includeText:!!n.save.includeText})})}register(e,r){this._includeText=!!r.registerOptions.includeText,super.register(e,r)}},wi=class{constructor(e,r){this._client=e,this._notifyFileEvent=r,this._watchers=new Map}get messages(){return h.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){M(M(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,r){}register(e,r){if(!Array.isArray(r.registerOptions.watchers))return;let n=[];for(let s of r.registerOptions.watchers){if(!ae.string(s.globPattern))continue;let a=!0,u=!0,l=!0;s.kind!==void 0&&s.kind!==null&&(a=(s.kind&h.WatchKind.Create)!==0,u=(s.kind&h.WatchKind.Change)!==0,l=(s.kind&h.WatchKind.Delete)!==0);let f=N.workspace.createFileSystemWatcher(s.globPattern,!a,!u,!l);this.hookListeners(f,a,u,l),n.push(f)}this._watchers.set(r.id,n)}registerRaw(e,r){let n=[];for(let s of r)this.hookListeners(s,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,r,n,s,a){r&&e.onDidCreate(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:h.FileChangeType.Created}),null,a),n&&e.onDidChange(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:h.FileChangeType.Changed}),null,a),s&&e.onDidDelete(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:h.FileChangeType.Deleted}),null,a)}unregister(e){let r=this._watchers.get(e);if(r)for(let n of r)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let r of e)r.dispose()}),this._watchers.clear()}},Ce=class{constructor(e,r){this._client=e,this._message=r,this._registrations=new Map}get messages(){return this._message}register(e,r){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!r.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(r.registerOptions);this._registrations.set(r.id,{disposable:n[0],data:r,provider:n[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,r){if(r){if(h.TextDocumentRegistrationOptions.is(r)){let n=h.StaticRegistrationOptions.hasId(r)?r.id:oe.generateUuid(),s=r.documentSelector||e;if(s)return[n,Object.assign({},r,{documentSelector:s})]}else if(ae.boolean(r)&&r===!0||h.WorkDoneProgressOptions.is(r)){if(!e)return[void 0,void 0];let n=ae.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e});return[oe.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,r){if(!(!e||!r))return ae.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e})}getProvider(e){for(let r of this._registrations.values()){let n=r.data.registerOptions.documentSelector;if(n!==null&&N.languages.match(n,e))return r.provider}throw new Error(`The feature has no registration for the provided text document ${e.uri.toString()}`)}};Te.TextDocumentFeature=Ce;var Ti=class{constructor(e,r){this._client=e,this._message=r,this._registrations=new Map}get messages(){return this._message}register(e,r){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let n=this.registerLanguageProvider(r.registerOptions);this._registrations.set(r.id,{disposable:n[0],provider:n[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}},Ei=class extends Ce{constructor(e){super(e,h.CompletionRequest.type)}fillClientCapabilities(e){let r=M(M(e,"textDocument"),"completion");r.dynamicRegistration=!0,r.contextSupport=!0,r.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[h.MarkupKind.Markdown,h.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[h.CompletionItemTag.Deprecated]}},r.completionItemKind={valueSet:od}}initialize(e,r){let n=this.getRegistrationOptions(r,e.completionProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.triggerCharacters||[],n={provideCompletionItems:(s,a,u,l)=>{let f=this._client,m=this._client.clientOptions.middleware,y=(v,P,D,F)=>f.sendRequest(h.CompletionRequest.type,f.code2ProtocolConverter.asCompletionParams(v,P,D),F).then(f.protocol2CodeConverter.asCompletionResult,A=>(f.logFailedRequest(h.CompletionRequest.type,A),Promise.resolve([])));return m.provideCompletionItem?m.provideCompletionItem(s,a,l,u,y):y(s,a,l,u)},resolveCompletionItem:e.resolveProvider?(s,a)=>{let u=this._client,l=this._client.clientOptions.middleware,f=(m,y)=>u.sendRequest(h.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(m),y).then(u.protocol2CodeConverter.asCompletionItem,v=>(u.logFailedRequest(h.CompletionResolveRequest.type,v),Promise.resolve(m)));return l.resolveCompletionItem?l.resolveCompletionItem(s,a,f):f(s,a)}:void 0};return[N.languages.registerCompletionItemProvider(e.documentSelector,n,...r),n]}},Pi=class extends Ce{constructor(e){super(e,h.HoverRequest.type)}fillClientCapabilities(e){let r=M(M(e,"textDocument"),"hover");r.dynamicRegistration=!0,r.contentFormat=[h.MarkupKind.Markdown,h.MarkupKind.PlainText]}initialize(e,r){let n=this.getRegistrationOptions(r,e.hoverProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideHover:(n,s,a)=>{let u=this._client,l=(m,y,v)=>u.sendRequest(h.HoverRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,y),v).then(u.protocol2CodeConverter.asHover,P=>(u.logFailedRequest(h.HoverRequest.type,P),Promise.resolve(null))),f=u.clientOptions.middleware;return f.provideHover?f.provideHover(n,s,a,l):l(n,s,a)}};return[N.languages.registerHoverProvider(e.documentSelector,r),r]}},Si=class extends Ce{constructor(e){super(e,h.SignatureHelpRequest.type)}fillClientCapabilities(e){let r=M(M(e,"textDocument"),"signatureHelp");r.dynamicRegistration=!0,r.signatureInformation={documentationFormat:[h.MarkupKind.Markdown,h.MarkupKind.PlainText]},r.signatureInformation.parameterInformation={labelOffsetSupport:!0},r.contextSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.signatureHelpProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideSignatureHelp:(s,a,u,l)=>{let f=this._client,m=(v,P,D,F)=>f.sendRequest(h.SignatureHelpRequest.type,f.code2ProtocolConverter.asSignatureHelpParams(v,P,D),F).then(f.protocol2CodeConverter.asSignatureHelp,A=>(f.logFailedRequest(h.SignatureHelpRequest.type,A),Promise.resolve(null))),y=f.clientOptions.middleware;return y.provideSignatureHelp?y.provideSignatureHelp(s,a,l,u,m):m(s,a,l,u)}},n;if(e.retriggerCharacters===void 0){let s=e.triggerCharacters||[];n=N.languages.registerSignatureHelpProvider(e.documentSelector,r,...s)}else{let s={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};n=N.languages.registerSignatureHelpProvider(e.documentSelector,r,s)}return[n,r]}},Di=class extends Ce{constructor(e){super(e,h.DefinitionRequest.type)}fillClientCapabilities(e){let r=M(M(e,"textDocument"),"definition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.definitionProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDefinition:(n,s,a)=>{let u=this._client,l=(m,y,v)=>u.sendRequest(h.DefinitionRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,y),v).then(u.protocol2CodeConverter.asDefinitionResult,P=>(u.logFailedRequest(h.DefinitionRequest.type,P),Promise.resolve(null))),f=u.clientOptions.middleware;return f.provideDefinition?f.provideDefinition(n,s,a,l):l(n,s,a)}};return[N.languages.registerDefinitionProvider(e.documentSelector,r),r]}},bi=class extends Ce{constructor(e){super(e,h.ReferencesRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.referencesProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideReferences:(n,s,a,u)=>{let l=this._client,f=(y,v,P,D)=>l.sendRequest(h.ReferencesRequest.type,l.code2ProtocolConverter.asReferenceParams(y,v,P),D).then(l.protocol2CodeConverter.asReferences,F=>(l.logFailedRequest(h.ReferencesRequest.type,F),Promise.resolve([]))),m=l.clientOptions.middleware;return m.provideReferences?m.provideReferences(n,s,a,u,f):f(n,s,a,u)}};return[N.languages.registerReferenceProvider(e.documentSelector,r),r]}},Oi=class extends Ce{constructor(e){super(e,h.DocumentHighlightRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentHighlightProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentHighlights:(n,s,a)=>{let u=this._client,l=(m,y,v)=>u.sendRequest(h.DocumentHighlightRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,y),v).then(u.protocol2CodeConverter.asDocumentHighlights,P=>(u.logFailedRequest(h.DocumentHighlightRequest.type,P),Promise.resolve([]))),f=u.clientOptions.middleware;return f.provideDocumentHighlights?f.provideDocumentHighlights(n,s,a,l):l(n,s,a)}};return[N.languages.registerDocumentHighlightProvider(e.documentSelector,r),r]}},xi=class extends Ce{constructor(e){super(e,h.DocumentSymbolRequest.type)}fillClientCapabilities(e){let r=M(M(e,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Wo},r.hierarchicalDocumentSymbolSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentSymbolProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentSymbols:(n,s)=>{let a=this._client,u=(f,m)=>a.sendRequest(h.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(f),m).then(y=>{if(y!==null){if(y.length===0)return[];{let v=y[0];return h.DocumentSymbol.is(v)?a.protocol2CodeConverter.asDocumentSymbols(y):a.protocol2CodeConverter.asSymbolInformations(y)}}},y=>(a.logFailedRequest(h.DocumentSymbolRequest.type,y),Promise.resolve([]))),l=a.clientOptions.middleware;return l.provideDocumentSymbols?l.provideDocumentSymbols(n,s,u):u(n,s)}};return[N.languages.registerDocumentSymbolProvider(e.documentSelector,r),r]}},ki=class extends Ti{constructor(e){super(e,h.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let r=M(M(e,"workspace"),"symbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Wo}}initialize(e){e.workspaceSymbolProvider&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let r={provideWorkspaceSymbols:(n,s)=>{let a=this._client,u=(f,m)=>a.sendRequest(h.WorkspaceSymbolRequest.type,{query:f},m).then(a.protocol2CodeConverter.asSymbolInformations,y=>(a.logFailedRequest(h.WorkspaceSymbolRequest.type,y),Promise.resolve([]))),l=a.clientOptions.middleware;return l.provideWorkspaceSymbols?l.provideWorkspaceSymbols(n,s,u):u(n,s)}};return[N.languages.registerWorkspaceSymbolProvider(r),r]}},qi=class extends Ce{constructor(e){super(e,h.CodeActionRequest.type)}fillClientCapabilities(e){let r=M(M(e,"textDocument"),"codeAction");r.dynamicRegistration=!0,r.isPreferredSupport=!0,r.codeActionLiteralSupport={codeActionKind:{valueSet:[h.CodeActionKind.Empty,h.CodeActionKind.QuickFix,h.CodeActionKind.Refactor,h.CodeActionKind.RefactorExtract,h.CodeActionKind.RefactorInline,h.CodeActionKind.RefactorRewrite,h.CodeActionKind.Source,h.CodeActionKind.SourceOrganizeImports]}}}initialize(e,r){let n=this.getRegistrationOptions(r,e.codeActionProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideCodeActions:(n,s,a,u)=>{let l=this._client,f=(y,v,P,D)=>{let F={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(y),range:l.code2ProtocolConverter.asRange(v),context:l.code2ProtocolConverter.asCodeActionContext(P)};return l.sendRequest(h.CodeActionRequest.type,F,D).then(A=>{if(A===null)return;let K=[];for(let k of A)h.Command.is(k)?K.push(l.protocol2CodeConverter.asCommand(k)):K.push(l.protocol2CodeConverter.asCodeAction(k));return K},A=>(l.logFailedRequest(h.CodeActionRequest.type,A),Promise.resolve([])))},m=l.clientOptions.middleware;return m.provideCodeActions?m.provideCodeActions(n,s,a,u,f):f(n,s,a,u)}};return[N.languages.registerCodeActionsProvider(e.documentSelector,r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}},Ii=class extends Ce{constructor(e){super(e,h.CodeLensRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.codeLensProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideCodeLenses:(n,s)=>{let a=this._client,u=(f,m)=>a.sendRequest(h.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(f),m).then(a.protocol2CodeConverter.asCodeLenses,y=>(a.logFailedRequest(h.CodeLensRequest.type,y),Promise.resolve([]))),l=a.clientOptions.middleware;return l.provideCodeLenses?l.provideCodeLenses(n,s,u):u(n,s)},resolveCodeLens:e.resolveProvider?(n,s)=>{let a=this._client,u=(f,m)=>a.sendRequest(h.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(f),m).then(a.protocol2CodeConverter.asCodeLens,y=>(a.logFailedRequest(h.CodeLensResolveRequest.type,y),f)),l=a.clientOptions.middleware;return l.resolveCodeLens?l.resolveCodeLens(n,s,u):u(n,s)}:void 0};return[N.languages.registerCodeLensProvider(e.documentSelector,r),r]}},Ni=class extends Ce{constructor(e){super(e,h.DocumentFormattingRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentFormattingProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentFormattingEdits:(n,s,a)=>{let u=this._client,l=(m,y,v)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m),options:u.code2ProtocolConverter.asFormattingOptions(y)};return u.sendRequest(h.DocumentFormattingRequest.type,P,v).then(u.protocol2CodeConverter.asTextEdits,D=>(u.logFailedRequest(h.DocumentFormattingRequest.type,D),Promise.resolve([])))},f=u.clientOptions.middleware;return f.provideDocumentFormattingEdits?f.provideDocumentFormattingEdits(n,s,a,l):l(n,s,a)}};return[N.languages.registerDocumentFormattingEditProvider(e.documentSelector,r),r]}},Li=class extends Ce{constructor(e){super(e,h.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentRangeFormattingProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentRangeFormattingEdits:(n,s,a,u)=>{let l=this._client,f=(y,v,P,D)=>{let F={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(y),range:l.code2ProtocolConverter.asRange(v),options:l.code2ProtocolConverter.asFormattingOptions(P)};return l.sendRequest(h.DocumentRangeFormattingRequest.type,F,D).then(l.protocol2CodeConverter.asTextEdits,A=>(l.logFailedRequest(h.DocumentRangeFormattingRequest.type,A),Promise.resolve([])))},m=l.clientOptions.middleware;return m.provideDocumentRangeFormattingEdits?m.provideDocumentRangeFormattingEdits(n,s,a,u,f):f(n,s,a,u)}};return[N.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,r),r]}},Fi=class extends Ce{constructor(e){super(e,h.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentOnTypeFormattingProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideOnTypeFormattingEdits:(s,a,u,l,f)=>{let m=this._client,y=(P,D,F,A,K)=>{let k={textDocument:m.code2ProtocolConverter.asTextDocumentIdentifier(P),position:m.code2ProtocolConverter.asPosition(D),ch:F,options:m.code2ProtocolConverter.asFormattingOptions(A)};return m.sendRequest(h.DocumentOnTypeFormattingRequest.type,k,K).then(m.protocol2CodeConverter.asTextEdits,L=>(m.logFailedRequest(h.DocumentOnTypeFormattingRequest.type,L),Promise.resolve([])))},v=m.clientOptions.middleware;return v.provideOnTypeFormattingEdits?v.provideOnTypeFormattingEdits(s,a,u,l,f,y):y(s,a,u,l,f)}},n=e.moreTriggerCharacter||[];return[N.languages.registerOnTypeFormattingEditProvider(e.documentSelector,r,e.firstTriggerCharacter,...n),r]}},Mi=class extends Ce{constructor(e){super(e,h.RenameRequest.type)}fillClientCapabilities(e){let r=M(M(e,"textDocument"),"rename");r.dynamicRegistration=!0,r.prepareSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.renameProvider);n&&(ae.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register(this.messages,{id:oe.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let r={provideRenameEdits:(n,s,a,u)=>{let l=this._client,f=(y,v,P,D)=>{let F={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(y),position:l.code2ProtocolConverter.asPosition(v),newName:P};return l.sendRequest(h.RenameRequest.type,F,D).then(l.protocol2CodeConverter.asWorkspaceEdit,A=>(l.logFailedRequest(h.RenameRequest.type,A),Promise.reject(new Error(A.message))))},m=l.clientOptions.middleware;return m.provideRenameEdits?m.provideRenameEdits(n,s,a,u,f):f(n,s,a,u)},prepareRename:e.prepareProvider?(n,s,a)=>{let u=this._client,l=(m,y,v)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m),position:u.code2ProtocolConverter.asPosition(y)};return u.sendRequest(h.PrepareRenameRequest.type,P,v).then(D=>h.Range.is(D)?u.protocol2CodeConverter.asRange(D):D&&h.Range.is(D.range)?{range:u.protocol2CodeConverter.asRange(D.range),placeholder:D.placeholder}:Promise.reject(new Error("The element can't be renamed.")),D=>(u.logFailedRequest(h.PrepareRenameRequest.type,D),Promise.reject(new Error(D.message))))},f=u.clientOptions.middleware;return f.prepareRename?f.prepareRename(n,s,a,l):l(n,s,a)}:void 0};return[N.languages.registerRenameProvider(e.documentSelector,r),r]}},Ai=class extends Ce{constructor(e){super(e,h.DocumentLinkRequest.type)}fillClientCapabilities(e){let r=M(M(e,"textDocument"),"documentLink");r.dynamicRegistration=!0,r.tooltipSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentLinkProvider);n&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentLinks:(n,s)=>{let a=this._client,u=(f,m)=>a.sendRequest(h.DocumentLinkRequest.type,a.code2ProtocolConverter.asDocumentLinkParams(f),m).then(a.protocol2CodeConverter.asDocumentLinks,y=>(a.logFailedRequest(h.DocumentLinkRequest.type,y),Promise.resolve([]))),l=a.clientOptions.middleware;return l.provideDocumentLinks?l.provideDocumentLinks(n,s,u):u(n,s)},resolveDocumentLink:e.resolveProvider?(n,s)=>{let a=this._client,u=(f,m)=>a.sendRequest(h.DocumentLinkResolveRequest.type,a.code2ProtocolConverter.asDocumentLink(f),m).then(a.protocol2CodeConverter.asDocumentLink,y=>(a.logFailedRequest(h.DocumentLinkResolveRequest.type,y),Promise.resolve(f))),l=a.clientOptions.middleware;return l.resolveDocumentLink?l.resolveDocumentLink(n,s,u):u(n,s)}:void 0};return[N.languages.registerDocumentLinkProvider(e.documentSelector,r),r]}},Hi=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return h.DidChangeConfigurationNotification.type}fillClientCapabilities(e){M(M(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{section:e}})}register(e,r){let n=N.workspace.onDidChangeConfiguration(s=>{this.onDidChangeConfiguration(r.registerOptions.section,s)});this._listeners.set(r.id,n),r.registerOptions.section!==void 0&&this.onDidChangeConfiguration(r.registerOptions.section,void 0)}unregister(e){let r=this._listeners.get(e);r&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,r){let n;if(ae.string(e)?n=[e]:n=e,n!==void 0&&r!==void 0&&!n.some(l=>r.affectsConfiguration(l)))return;let s=u=>{if(u===void 0){this._client.sendNotification(h.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(h.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(u)})},a=this.getMiddleware();a?a(n,s):s(n)}extractSettingsInformation(e){function r(a,u){let l=a;for(let f=0;f<u.length-1;f++){let m=l[u[f]];m||(m=Object.create(null),l[u[f]]=m),l=m}return l}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,s=Object.create(null);for(let a=0;a<e.length;a++){let u=e[a],l=u.indexOf("."),f=null;if(l>=0?f=N.workspace.getConfiguration(u.substr(0,l),n).get(u.substr(l+1)):f=N.workspace.getConfiguration(u,n),f){let m=e[a].split(".");r(s,m)[m[m.length-1]]=f}}return s}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},ji=class{constructor(e){this._client=e,this._commands=new Map}get messages(){return h.ExecuteCommandRequest.type}fillClientCapabilities(e){M(M(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,r){let n=this._client,s=n.clientOptions.middleware,a=(u,l)=>{let f={command:u,arguments:l};return n.sendRequest(h.ExecuteCommandRequest.type,f).then(void 0,m=>{n.logFailedRequest(h.ExecuteCommandRequest.type,m)})};if(r.registerOptions.commands){let u=[];for(let l of r.registerOptions.commands)u.push(N.commands.registerCommand(l,(...f)=>s.executeCommand?s.executeCommand(l,f,a):a(l,f)));this._commands.set(r.id,u)}}unregister(e){let r=this._commands.get(e);r&&r.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(r=>r.dispose())}),this._commands.clear()}},ad;(function(t){function e(r){return r&&h.MessageReader.is(r.reader)&&h.MessageWriter.is(r.writer)}t.is=e})(ad=Te.MessageTransports||(Te.MessageTransports={}));var Kr=class{constructor(e,r){this._resolve=e,this._reject=r,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},Wi=class{constructor(e,r,n){this._traceFormat=h.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=r,n=n||{},this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||fr.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler||new Wr(this._name),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=fe.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new jo.Delayer(250),this._onReady=new Promise((s,a)=>{this._onReadyCallbacks=new Kr(s,a)}),this._onStop=void 0,this._telemetryEmitter=new h.Emitter,this._stateChangeEmitter=new h.Emitter,this._tracer={log:(s,a)=>{ae.string(s)?this.logTrace(s,a):this.logObjectTrace(s)}},this._c2p=rd.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=nd.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let r=this.getPublicState();this._state=e;let n=this.getPublicState();n!==r&&this._stateChangeEmitter.fire({oldState:r,newState:n})}getPublicState(){return this.state===fe.Running?Hr.Running:this.state===fe.Starting?Hr.Starting:Hr.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...r)}catch(n){throw this.error(`Sending request ${ae.string(e)?e:e.method} failed.`,n),n}}onRequest(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,r)}catch(n){throw this.error(`Registering request handler ${ae.string(e)?e:e.method} failed.`,n),n}}sendNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,r)}catch(n){throw this.error(`Sending notification ${ae.string(e)?e:e.method} failed.`,n),n}}onNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,r)}catch(n){throw this.error(`Registering notification handler ${ae.string(e)?e:e.method} failed.`,n),n}}onProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onProgress(e,r,n)}catch(s){throw this.error(`Registering progress handler for token ${r} failed.`,s),s}}sendProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,r,n)}catch(s){throw this.error(`Sending progress for token ${r} failed.`,s),s}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=N.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new Wr(this._name)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(r=>{r.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof h.ResponseError){let r=e;return`  Message: ${r.message}
  Code: ${r.code} ${r.data?`
`+r.data.toString():""}`}return e instanceof Error?ae.string(e.stack)?e.stack:e.message:ae.string(e)?e:e.toString()}info(e,r,n=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=fr.Info&&this.showNotificationMessage()}warn(e,r,n=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=fr.Warn&&this.showNotificationMessage()}error(e,r,n=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=fr.Error&&this.showNotificationMessage()}showNotificationMessage(){N.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,r){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.traceOutputChannel.appendLine(this.data2String(r))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===fe.Initial||this.state===fe.Stopping||this.state===fe.Stopped}needsStop(){return this.state===fe.Starting||this.state===fe.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===fe.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,r)=>{this._onReadyCallbacks=new Kr(e,r)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?N.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):N.languages.createDiagnosticCollection()),this.state=fe.Starting,this.resolveConnection().then(e=>(e.onLogMessage(r=>{switch(r.type){case h.MessageType.Error:this.error(r.message,void 0,!1);break;case h.MessageType.Warning:this.warn(r.message,void 0,!1);break;case h.MessageType.Info:this.info(r.message,void 0,!1);break;default:this.outputChannel.appendLine(r.message)}}),e.onShowMessage(r=>{switch(r.type){case h.MessageType.Error:N.window.showErrorMessage(r.message);break;case h.MessageType.Warning:N.window.showWarningMessage(r.message);break;case h.MessageType.Info:N.window.showInformationMessage(r.message);break;default:N.window.showInformationMessage(r.message)}}),e.onRequest(h.ShowMessageRequest.type,r=>{let n;switch(r.type){case h.MessageType.Error:n=N.window.showErrorMessage;break;case h.MessageType.Warning:n=N.window.showWarningMessage;break;case h.MessageType.Info:n=N.window.showInformationMessage;break;default:n=N.window.showInformationMessage}let s=r.actions||[];return n(r.message,...s)}),e.onTelemetry(r=>{this._telemetryEmitter.fire(r)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=fe.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),N.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new N.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let r=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),s={processId:process.pid,clientInfo:{name:"vscode",version:N.version},rootPath:n||null,rootUri:n?this._c2p.asUri(N.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:ae.func(r)?r():r,trace:h.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(s),this._clientOptions.progressOnInitialization){let a=oe.generateUuid(),u=new id.ProgressPart(e,a);return s.workDoneToken=a,this.doInitialize(e,s).then(l=>(u.done(),l),l=>{throw u.cancel(),l})}else return this.doInitialize(e,s)}doInitialize(e,r){return e.initialize(r).then(n=>{this._resolvedConnection=e,this._initializeResult=n,this.state=fe.Running;let s;return ae.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===h.TextDocumentSyncKind.None?s={openClose:!1,change:h.TextDocumentSyncKind.None,save:void 0}:s={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(s=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:s}),e.onDiagnostics(a=>this.handleDiagnostics(a)),e.onRequest(h.RegistrationRequest.type,a=>this.handleRegistrationRequest(a)),e.onRequest("client/registerFeature",a=>this.handleRegistrationRequest(a)),e.onRequest(h.UnregistrationRequest.type,a=>this.handleUnregistrationRequest(a)),e.onRequest("client/unregisterFeature",a=>this.handleUnregistrationRequest(a)),e.onRequest(h.ApplyWorkspaceEditRequest.type,a=>this.handleApplyWorkspaceEdit(a)),e.sendNotification(h.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),n}).then(void 0,n=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n)):n instanceof h.ResponseError&&n.data&&n.data.retry?N.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(s=>{s&&s.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n))}):(n&&n.message&&N.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop(),this._onReadyCallbacks.reject(n)),n})}_clientGetRootPath(){let e=N.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===fe.Stopping&&this._onStop?this._onStop:(this.state=fe.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.dispose(),this.state=fe.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=fe.Stopped,Promise.resolve())}cleanUp(e=!0,r=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._dynamicFeatures.values())n.dispose();e&&this.cleanUpChannel(),r&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var r,n;let s=this;function a(l){s._fileEvents.push(l),s._fileEventDelayer.trigger(()=>{s.onReady().then(()=>{s.resolveConnection().then(f=>{s.isConnectionActive()&&(s.forceDocumentSync(),f.didChangeWatchedFiles({changes:s._fileEvents})),s._fileEvents=[]})},f=>{s.error("Notify file events failed.",f)})})}let u=(r=this.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;!((n=u)===null||n===void 0)&&n.didChangeWatchedFile?u.didChangeWatchedFile(e,a):a(e)}forceDocumentSync(){this._dynamicFeatures.get(h.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let r=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),s=this.clientOptions.middleware;s.handleDiagnostics?s.handleDiagnostics(r,n,(a,u)=>this.setDiagnostics(a,u)):this.setDiagnostics(r,n)}setDiagnostics(e,r){this._diagnostics&&this._diagnostics.set(e,r)}createConnection(){let e=(n,s,a)=>{this.handleConnectionError(n,s,a)},r=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>sd(n.reader,n.writer,e,r))}handleConnectionClosed(){if(this.state===fe.Stopping||this.state===fe.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=It.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===It.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=fe.Stopped,this.cleanUp(!1,!0)):e===It.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=fe.Initial,this.start())}handleConnectionError(e,r,n){this._clientOptions.errorHandler.error(e,r,n)===jr.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){N.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,r=!1){let n=N.workspace.getConfiguration(this._id),s=h.Trace.Off,a=h.TraceFormat.Text;if(n){let u=n.get("trace.server","off");typeof u=="string"?s=h.Trace.fromString(u):(s=h.Trace.fromString(n.get("trace.server.verbosity","off")),a=h.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=s,this._traceFormat=a,e.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat})}hookFileEvents(e){let r=this._clientOptions.synchronize.fileEvents;if(!r)return;let n;ae.array(r)?n=r:n=[r],n&&this._dynamicFeatures.get(h.DidChangeWatchedFilesNotification.type.method).registerRaw(oe.generateUuid(),n)}registerFeatures(e){for(let r of e)this.registerFeature(r)}registerFeature(e){if(this._features.push(e),gi.is(e)){let r=e.messages;if(Array.isArray(r))for(let n of r)this._method2Message.set(n.method,n),this._dynamicFeatures.set(n.method,e);else this._method2Message.set(r.method,r),this._dynamicFeatures.set(r.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Hi(this)),this.registerFeature(new mi(this,this._syncedDocuments)),this.registerFeature(new yi(this)),this.registerFeature(new Ci(this)),this.registerFeature(new Ri(this)),this.registerFeature(new _i(this)),this.registerFeature(new vi(this,this._syncedDocuments)),this.registerFeature(new wi(this,e=>this.notifyFileEvent(e))),this.registerFeature(new Ei(this)),this.registerFeature(new Pi(this)),this.registerFeature(new Si(this)),this.registerFeature(new Di(this)),this.registerFeature(new bi(this)),this.registerFeature(new Oi(this)),this.registerFeature(new xi(this)),this.registerFeature(new ki(this)),this.registerFeature(new qi(this)),this.registerFeature(new Ii(this)),this.registerFeature(new Ni(this)),this.registerFeature(new Li(this)),this.registerFeature(new Fi(this)),this.registerFeature(new Mi(this)),this.registerFeature(new Ai(this)),this.registerFeature(new ji(this))}fillInitializeParams(e){for(let r of this._features)ae.func(r.fillInitializeParams)&&r.fillInitializeParams(e)}computeClientCapabilities(){let e={};M(e,"workspace").applyEdit=!0;let r=M(M(e,"workspace"),"workspaceEdit");r.documentChanges=!0,r.resourceOperations=[h.ResourceOperationKind.Create,h.ResourceOperationKind.Rename,h.ResourceOperationKind.Delete],r.failureHandling=h.FailureHandlingKind.TextOnlyTransactional;let n=M(M(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[h.DiagnosticTag.Unnecessary,h.DiagnosticTag.Deprecated]};for(let s of this._features)s.fillClientCapabilities(e);return e}initializeFeatures(e){let r=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,r)}handleRegistrationRequest(e){return new Promise((r,n)=>{for(let s of e.registrations){let a=this._dynamicFeatures.get(s.method);if(!a){n(new Error(`No feature implementation for ${s.method} found. Registration failed.`));return}let u=s.registerOptions||{};u.documentSelector=u.documentSelector||this._clientOptions.documentSelector;let l={id:s.id,registerOptions:u};a.register(this._method2Message.get(s.method),l)}r()})}handleUnregistrationRequest(e){return new Promise((r,n)=>{for(let s of e.unregisterations){let a=this._dynamicFeatures.get(s.method);if(!a){n(new Error(`No feature implementation for ${s.method} found. Unregistration failed.`));return}a.unregister(s.id)}r()})}handleApplyWorkspaceEdit(e){let r=e.edit,n=new Map;N.workspace.textDocuments.forEach(a=>n.set(a.uri.toString(),a));let s=!1;if(r.documentChanges){for(let a of r.documentChanges)if(h.TextDocumentEdit.is(a)&&a.textDocument.version&&a.textDocument.version>=0){let u=n.get(a.textDocument.uri);if(u&&u.version!==a.textDocument.version){s=!0;break}}}return s?Promise.resolve({applied:!1}):ae.asPromise(N.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(a=>({applied:a})))}logFailedRequest(e,r){r instanceof h.ResponseError&&(r.code===h.ErrorCodes.RequestCancelled||r.code===h.ErrorCodes.ContentModified)||this.error(`Request ${e.method} failed.`,r)}};Te.BaseLanguageClient=Wi});var zo=H(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});var zr=require("vscode"),hr=me(),cd=Ge();function Ko(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Ki=class extends cd.TextDocumentFeature{constructor(e){super(e,hr.DocumentColorRequest.type)}fillClientCapabilities(e){Ko(Ko(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,r){let[n,s]=this.getRegistration(r,e.colorProvider);!n||!s||this.register(this.messages,{id:n,registerOptions:s})}registerLanguageProvider(e){let r={provideColorPresentations:(n,s,a)=>{let u=this._client,l=(m,y,v)=>{let P={color:m,textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(y.document),range:u.code2ProtocolConverter.asRange(y.range)};return u.sendRequest(hr.ColorPresentationRequest.type,P,v).then(this.asColorPresentations.bind(this),D=>(u.logFailedRequest(hr.ColorPresentationRequest.type,D),Promise.resolve(null)))},f=u.clientOptions.middleware;return f.provideColorPresentations?f.provideColorPresentations(n,s,a,l):l(n,s,a)},provideDocumentColors:(n,s)=>{let a=this._client,u=(f,m)=>{let y={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(f)};return a.sendRequest(hr.DocumentColorRequest.type,y,m).then(this.asColorInformations.bind(this),v=>(a.logFailedRequest(hr.ColorPresentationRequest.type,v),Promise.resolve(null)))},l=a.clientOptions.middleware;return l.provideDocumentColors?l.provideDocumentColors(n,s,u):u(n,s)}};return[zr.languages.registerColorProvider(e.documentSelector,r),r]}asColor(e){return new zr.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(r=>new zr.ColorInformation(this._client.protocol2CodeConverter.asRange(r.range),this.asColor(r.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(r=>{let n=new zr.ColorPresentation(r.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(r.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(r.textEdit),n}):[]}};zi.ColorProviderFeature=Ki});var $o=H(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});var $i=require("vscode"),ud=me(),Ui=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(ud.ConfigurationRequest.type,(r,n)=>{let s=u=>{let l=[];for(let f of u.items){let m=f.scopeUri!==void 0&&f.scopeUri!==null?this._client.protocol2CodeConverter.asUri(f.scopeUri):void 0;l.push(this.getConfiguration(m,f.section!==null?f.section:void 0))}return l},a=e.clientOptions.middleware.workspace;return a&&a.configuration?a.configuration(r,n,s):s(r,n)})}getConfiguration(e,r){let n=null;if(r){let s=r.lastIndexOf(".");if(s===-1)n=$i.workspace.getConfiguration(void 0,e).get(r);else{let a=$i.workspace.getConfiguration(r.substr(0,s),e);a&&(n=a.get(r.substr(s+1)))}}else{let s=$i.workspace.getConfiguration(void 0,e);n={};for(let a of Object.keys(s))s.has(a)&&(n[a]=s.get(a))}return n||null}};Gi.ConfigurationFeature=Ui});var Go=H(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});var ld=require("vscode"),Xi=me(),dd=Ge();function Uo(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Bi=class extends dd.TextDocumentFeature{constructor(e){super(e,Xi.ImplementationRequest.type)}fillClientCapabilities(e){let r=Uo(Uo(e,"textDocument"),"implementation");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,s]=this.getRegistration(r,e.implementationProvider);!n||!s||this.register(this.messages,{id:n,registerOptions:s})}registerLanguageProvider(e){let r={provideImplementation:(n,s,a)=>{let u=this._client,l=(m,y,v)=>u.sendRequest(Xi.ImplementationRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,y),v).then(u.protocol2CodeConverter.asDefinitionResult,P=>(u.logFailedRequest(Xi.ImplementationRequest.type,P),Promise.resolve(null))),f=u.clientOptions.middleware;return f.provideImplementation?f.provideImplementation(n,s,a,l):l(n,s,a)}};return[ld.languages.registerImplementationProvider(e.documentSelector,r),r]}};Ji.ImplementationFeature=Bi});var Xo=H(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});var fd=require("vscode"),Vi=me(),hd=Ge();function $r(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Qi=class extends hd.TextDocumentFeature{constructor(e){super(e,Vi.TypeDefinitionRequest.type)}fillClientCapabilities(e){$r($r(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let r=$r($r(e,"textDocument"),"typeDefinition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,s]=this.getRegistration(r,e.typeDefinitionProvider);!n||!s||this.register(this.messages,{id:n,registerOptions:s})}registerLanguageProvider(e){let r={provideTypeDefinition:(n,s,a)=>{let u=this._client,l=(m,y,v)=>u.sendRequest(Vi.TypeDefinitionRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,y),v).then(u.protocol2CodeConverter.asDefinitionResult,P=>(u.logFailedRequest(Vi.TypeDefinitionRequest.type,P),Promise.resolve(null))),f=u.clientOptions.middleware;return f.provideTypeDefinition?f.provideTypeDefinition(n,s,a,l):l(n,s,a)}};return[fd.languages.registerTypeDefinitionProvider(e.documentSelector,r),r]}};Yi.TypeDefinitionFeature=Qi});var Bo=H(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});var pd=ui(),Ur=require("vscode"),Zi=me();function es(t,e){if(t!==void 0)return t[e]}function ts(t,e){return t.filter(r=>e.indexOf(r)<0)}Gr.arrayDiff=ts;var rs=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return Zi.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let r=Ur.workspace.workspaceFolders;this.initializeWithFolders(r),r===void 0?e.workspaceFolders=null:e.workspaceFolders=r.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let r=this._client;r.onRequest(Zi.WorkspaceFoldersRequest.type,a=>{let u=()=>{let f=Ur.workspace.workspaceFolders;return f===void 0?null:f.map(y=>this.asProtocol(y))},l=r.clientOptions.middleware.workspace;return l&&l.workspaceFolders?l.workspaceFolders(a,u):u(a)});let n=es(es(es(e,"workspace"),"workspaceFolders"),"changeNotifications"),s;typeof n=="string"?s=n:n===!0&&(s=pd.generateUuid()),s&&this.register(this.messages,{id:s,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let r=ts(this._initialFolders,e),n=ts(e,this._initialFolders);(n.length>0||r.length>0)&&this.doSendEvent(n,r)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,r){let n={event:{added:e.map(s=>this.asProtocol(s)),removed:r.map(s=>this.asProtocol(s))}};this._client.sendNotification(Zi.DidChangeWorkspaceFoldersNotification.type,n)}register(e,r){let n=r.id,s=this._client,a=Ur.workspace.onDidChangeWorkspaceFolders(u=>{let l=m=>{this.doSendEvent(m.added,m.removed)},f=s.clientOptions.middleware.workspace;f&&f.didChangeWorkspaceFolders?f.didChangeWorkspaceFolders(u,l):l(u)});this._listeners.set(n,a),this.sendInitialEvent(Ur.workspace.workspaceFolders)}unregister(e){let r=this._listeners.get(e);r!==void 0&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Gr.WorkspaceFoldersFeature=rs});var Vo=H(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});var pr=require("vscode"),Jt=me(),gd=Ge();function Jo(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var ns=class extends gd.TextDocumentFeature{constructor(e){super(e,Jt.FoldingRangeRequest.type)}fillClientCapabilities(e){let r=Jo(Jo(e,"textDocument"),"foldingRange");r.dynamicRegistration=!0,r.rangeLimit=5e3,r.lineFoldingOnly=!0}initialize(e,r){let[n,s]=this.getRegistration(r,e.foldingRangeProvider);!n||!s||this.register(this.messages,{id:n,registerOptions:s})}registerLanguageProvider(e){let r={provideFoldingRanges:(n,s,a)=>{let u=this._client,l=(m,y,v)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m)};return u.sendRequest(Jt.FoldingRangeRequest.type,P,v).then(this.asFoldingRanges.bind(this),D=>(u.logFailedRequest(Jt.FoldingRangeRequest.type,D),Promise.resolve(null)))},f=u.clientOptions.middleware;return f.provideFoldingRanges?f.provideFoldingRanges(n,s,a,l):l(n,s,a)}};return[pr.languages.registerFoldingRangeProvider(e.documentSelector,r),r]}asFoldingRangeKind(e){if(e)switch(e){case Jt.FoldingRangeKind.Comment:return pr.FoldingRangeKind.Comment;case Jt.FoldingRangeKind.Imports:return pr.FoldingRangeKind.Imports;case Jt.FoldingRangeKind.Region:return pr.FoldingRangeKind.Region}}asFoldingRanges(e){return Array.isArray(e)?e.map(r=>new pr.FoldingRange(r.startLine,r.endLine,this.asFoldingRangeKind(r.kind))):[]}};is.FoldingRangeFeature=ns});var Yo=H(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});var md=require("vscode"),ss=me(),vd=Ge();function Qo(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var os=class extends vd.TextDocumentFeature{constructor(e){super(e,ss.DeclarationRequest.type)}fillClientCapabilities(e){let r=Qo(Qo(e,"textDocument"),"declaration");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,s]=this.getRegistration(r,e.declarationProvider);!n||!s||this.register(this.messages,{id:n,registerOptions:s})}registerLanguageProvider(e){let r={provideDeclaration:(n,s,a)=>{let u=this._client,l=(m,y,v)=>u.sendRequest(ss.DeclarationRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,y),v).then(u.protocol2CodeConverter.asDeclarationResult,P=>(u.logFailedRequest(ss.DeclarationRequest.type,P),Promise.resolve(null))),f=u.clientOptions.middleware;return f.provideDeclaration?f.provideDeclaration(n,s,a,l):l(n,s,a)}};return[md.languages.registerDeclarationProvider(e.documentSelector,r),r]}};as.DeclarationFeature=os});var ea=H(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});var yd=require("vscode"),cs=me(),Cd=Ge();function Zo(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var us=class extends Cd.TextDocumentFeature{constructor(e){super(e,cs.SelectionRangeRequest.type)}fillClientCapabilities(e){let r=Zo(Zo(e,"textDocument"),"selectionRange");r.dynamicRegistration=!0}initialize(e,r){let[n,s]=this.getRegistration(r,e.selectionRangeProvider);!n||!s||this.register(this.messages,{id:n,registerOptions:s})}registerLanguageProvider(e){let r={provideSelectionRanges:(n,s,a)=>{let u=this._client,l=(m,y,v)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m),positions:u.code2ProtocolConverter.asPositions(y)};return u.sendRequest(cs.SelectionRangeRequest.type,P,v).then(D=>u.protocol2CodeConverter.asSelectionRanges(D),D=>(u.logFailedRequest(cs.SelectionRangeRequest.type,D),Promise.resolve(null)))},f=u.clientOptions.middleware;return f.provideSelectionRanges?f.provideSelectionRanges(n,s,a,l):l(n,s,a)}};return[yd.languages.registerSelectionRangeProvider(e.documentSelector,r),r]}};ls.SelectionRangeFeature=us});var ta=H(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});var Rd=me(),_d=hi();function wd(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var ds=class{constructor(e){this._client=e}fillClientCapabilities(e){wd(e,"window").workDoneProgress=!0}initialize(){let e=this._client,r=n=>{new _d.ProgressPart(this._client,n.token)};e.onRequest(Rd.WorkDoneProgressCreateRequest.type,r)}};fs.ProgressFeature=ds});var na=H(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});var Xr=require("vscode"),Nt=me(),Td=Ge();function ra(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var gr;(function(t){function e(l,f){if(f===null)return;let m=new Xr.CallHierarchyItem(l.asSymbolKind(f.kind),f.name,f.detail||"",l.asUri(f.uri),l.asRange(f.range),l.asRange(f.selectionRange));return f.tags!==void 0&&(m.tags=l.asSymbolTags(f.tags)),m}t.asCallHierarchyItem=e;function r(l,f){return f===null?void 0:f.map(y=>e(l,y))[0]}t.asCallHierarchyItems=r;function n(l,f){return new Xr.CallHierarchyIncomingCall(e(l,f.from),l.asRanges(f.fromRanges))}t.asCallHierarchyIncomingCall=n;function s(l,f){if(f!==null)return f.map(m=>n(l,m))}t.asCallHierarchyIncomingCalls=s;function a(l,f){return new Xr.CallHierarchyOutgoingCall(e(l,f.to),l.asRanges(f.fromRanges))}t.asCallHierarchyOutgoingCall=a;function u(l,f){if(f!==null)return f.map(m=>a(l,m))}t.asCallHierarchyOutgoingCalls=u})(gr||(gr={}));var Br;(function(t){function e(r,n){let s={name:n.name,kind:r.asSymbolKind(n.kind),uri:r.asUri(n.uri),range:r.asRange(n.range),selectionRange:r.asRange(n.selectionRange)};return n.detail!==void 0&&n.detail.length>0&&(s.detail=n.detail),n.tags!==void 0&&(s.tags=r.asSymbolTags(n.tags)),s}t.asCallHierarchyItem=e})(Br||(Br={}));var hs=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,r,n){let s=this.client,a=this.middleware,u=(l,f,m)=>{let y=s.code2ProtocolConverter.asTextDocumentPositionParams(l,f);return s.sendRequest(Nt.Proposed.CallHierarchyPrepareRequest.type,y,m).then(v=>gr.asCallHierarchyItems(this.client.protocol2CodeConverter,v),v=>(s.logFailedRequest(Nt.Proposed.CallHierarchyPrepareRequest.type,v),Promise.resolve(null)))};return a.prepareCallHierarchy?a.prepareCallHierarchy(e,r,n,u):u(e,r,n)}provideCallHierarchyIncomingCalls(e,r){let n=this.client,s=this.middleware,a=(u,l)=>{let f={item:Br.asCallHierarchyItem(n.code2ProtocolConverter,u)};return n.sendRequest(Nt.Proposed.CallHierarchyIncomingCallsRequest.type,f,l).then(m=>gr.asCallHierarchyIncomingCalls(n.protocol2CodeConverter,m),m=>(n.logFailedRequest(Nt.Proposed.CallHierarchyIncomingCallsRequest.type,m),Promise.resolve(null)))};return s.provideCallHierarchyIncomingCalls?s.provideCallHierarchyIncomingCalls(e,r,a):a(e,r)}provideCallHierarchyOutgoingCalls(e,r){let n=this.client,s=this.middleware,a=(u,l)=>{let f={item:Br.asCallHierarchyItem(n.code2ProtocolConverter,u)};return n.sendRequest(Nt.Proposed.CallHierarchyOutgoingCallsRequest.type,f,l).then(m=>gr.asCallHierarchyOutgoingCalls(n.protocol2CodeConverter,m),m=>(n.logFailedRequest(Nt.Proposed.CallHierarchyOutgoingCallsRequest.type,m),Promise.resolve(null)))};return s.provideCallHierarchyOutgingCalls?s.provideCallHierarchyOutgingCalls(e,r,a):a(e,r)}},ps=class extends Td.TextDocumentFeature{constructor(e){super(e,Nt.Proposed.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=ra(ra(e,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,r){let n=e,[s,a]=this.getRegistration(r,n.callHierarchyProvider);!s||!a||this.register(this.messages,{id:s,registerOptions:a})}registerLanguageProvider(e){let r=this._client,n=new hs(r);return[Xr.languages.registerCallHierarchyProvider(e.documentSelector,n),n]}};gs.CallHierarchyFeature=ps});var sa=H(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});var Vt=require("vscode"),Ed=Ge(),ee=me();function ia(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Lt;(function(t){function e(a){if(a!=null)return new Vt.SemanticTokens(new Uint32Array(a.data),a.resultId)}t.asSemanticTokens=e;function r(a){return new Vt.SemanticTokensEdit(a.start,a.deleteCount,a.data!==void 0?new Uint32Array(a.data):void 0)}t.asSemanticTokensEdit=r;function n(a){if(a!=null)return new Vt.SemanticTokensEdits(a.edits.map(r),a.resultId)}t.asSemanticTokensEdits=n;function s(a){return a}t.asLegend=s})(Lt||(Lt={}));var ms=class extends Ed.TextDocumentFeature{constructor(e){super(e,ee.Proposed.SemanticTokensRequest.type)}fillClientCapabilities(e){let n=ia(ia(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[ee.Proposed.SemanticTokenTypes.comment,ee.Proposed.SemanticTokenTypes.keyword,ee.Proposed.SemanticTokenTypes.number,ee.Proposed.SemanticTokenTypes.regexp,ee.Proposed.SemanticTokenTypes.operator,ee.Proposed.SemanticTokenTypes.namespace,ee.Proposed.SemanticTokenTypes.type,ee.Proposed.SemanticTokenTypes.struct,ee.Proposed.SemanticTokenTypes.class,ee.Proposed.SemanticTokenTypes.interface,ee.Proposed.SemanticTokenTypes.enum,ee.Proposed.SemanticTokenTypes.typeParameter,ee.Proposed.SemanticTokenTypes.function,ee.Proposed.SemanticTokenTypes.member,ee.Proposed.SemanticTokenTypes.macro,ee.Proposed.SemanticTokenTypes.variable,ee.Proposed.SemanticTokenTypes.parameter,ee.Proposed.SemanticTokenTypes.property,ee.Proposed.SemanticTokenTypes.label],n.tokenModifiers=[ee.Proposed.SemanticTokenModifiers.declaration,ee.Proposed.SemanticTokenModifiers.documentation,ee.Proposed.SemanticTokenModifiers.static,ee.Proposed.SemanticTokenModifiers.abstract,ee.Proposed.SemanticTokenModifiers.deprecated,ee.Proposed.SemanticTokenModifiers.async,ee.Proposed.SemanticTokenModifiers.readonly]}initialize(e,r){let n=e,[s,a]=this.getRegistration(r,n.semanticTokensProvider);!s||!a||this.register(this.messages,{id:s,registerOptions:a})}registerLanguageProvider(e){let r=e.documentProvider!==void 0&&typeof e.documentProvider!="boolean"&&e.documentProvider.edits===!0,n={provideDocumentSemanticTokens:(f,m)=>{let y=this._client,v=y.clientOptions.middleware,P=(D,F)=>{let A={textDocument:y.code2ProtocolConverter.asTextDocumentIdentifier(D)};return y.sendRequest(ee.Proposed.SemanticTokensRequest.type,A,F).then(K=>Lt.asSemanticTokens(K),K=>{y.logFailedRequest(ee.Proposed.SemanticTokensRequest.type,K)})};return v.provideDocumentSemanticTokens?v.provideDocumentSemanticTokens(f,m,P):P(f,m)},provideDocumentSemanticTokensEdits:r?(f,m,y)=>{let v=this._client,P=v.clientOptions.middleware,D=(F,A,K)=>{let k={textDocument:v.code2ProtocolConverter.asTextDocumentIdentifier(F),previousResultId:A};return v.sendRequest(ee.Proposed.SemanticTokensEditsRequest.type,k,K).then(L=>ee.Proposed.SemanticTokens.is(L)?Lt.asSemanticTokens(L):Lt.asSemanticTokensEdits(L),L=>{v.logFailedRequest(ee.Proposed.SemanticTokensEditsRequest.type,L)})};return P.provideDocumentSemanticTokensEdits?P.provideDocumentSemanticTokensEdits(f,m,y,D):D(f,m,y)}:void 0},a=e.rangeProvider===!0?{provideDocumentRangeSemanticTokens:(f,m,y)=>{let v=this._client,P=v.clientOptions.middleware,D=(F,A,K)=>{let k={textDocument:v.code2ProtocolConverter.asTextDocumentIdentifier(F),range:v.code2ProtocolConverter.asRange(A)};return v.sendRequest(ee.Proposed.SemanticTokensRangeRequest.type,k,K).then(L=>Lt.asSemanticTokens(L),L=>{v.logFailedRequest(ee.Proposed.SemanticTokensRangeRequest.type,L)})};return P.provideDocumentRangeSemanticTokens?P.provideDocumentRangeSemanticTokens(f,m,y,D):D(f,m,y)}}:void 0,u=[],l=Lt.asLegend(e.legend);return u.push(Vt.languages.registerDocumentSemanticTokensProvider(e.documentSelector,n,l)),a!==void 0&&u.push(Vt.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,a,l)),[new Vt.Disposable(()=>u.forEach(f=>f.dispose())),{document:n,range:a}]}};vs.SemanticTokensFeature=ms});var aa=H(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});var oa=require("child_process"),Pd=require("path"),Sd=process.platform==="win32",Dd=process.platform==="darwin",bd=process.platform==="linux";function Od(t,e){if(Sd)try{let s={stdio:["pipe","pipe","ignore"]};return e&&(s.cwd=e),oa.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],s),!0}catch{return!1}else if(bd||Dd)try{var r=Pd.join(__dirname,"terminateProcess.sh"),n=oa.spawnSync(r,[t.pid.toString()]);return!n.error}catch{return!1}else return t.kill("SIGKILL"),!0}ys.terminate=Od});var fa=H(Ve=>{"use strict";function xd(t){for(var e in t)Ve.hasOwnProperty(e)||(Ve[e]=t[e])}Object.defineProperty(Ve,"__esModule",{value:!0});var Ft=require("child_process"),kd=require("fs"),ca=Ls(),ua=Ge(),Tt=require("vscode"),pe=me(),qd=zo(),Id=$o(),Nd=Go(),Ld=Xo(),Fd=Bo(),Md=Vo(),Ad=Yo(),Hd=ea(),jd=ta(),Wd=na(),Kd=sa(),ge=Bt(),zd=aa();xd(Ge());var la="^1.41.0",Cs;(function(t){function e(r){return ge.string(r.command)}t.is=e})(Cs||(Cs={}));var Re;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(Re=Ve.TransportKind||(Ve.TransportKind={}));var Qt;(function(t){function e(r){let n=r;return n&&n.kind===Re.socket&&ge.number(n.port)}t.isSocket=e})(Qt||(Qt={}));var Rs;(function(t){function e(r){return ge.string(r.module)}t.is=e})(Rs||(Rs={}));var _s;(function(t){function e(r){let n=r;return n&&n.writer!==void 0&&n.reader!==void 0}t.is=e})(_s||(_s={}));var ws;(function(t){function e(r){let n=r;return n&&n.process!==void 0&&typeof n.detached=="boolean"}t.is=e})(ws||(ws={}));var Ts=class extends ua.BaseLanguageClient{constructor(e,r,n,s,a){let u,l,f,m,y;ge.string(r)?(u=e,l=r,f=n,m=s,y=!!a):(u=e.toLowerCase(),l=e,f=r,m=n,y=s),y===void 0&&(y=!1),super(u,l,m),this._serverOptions=f,this._forceDebug=y;try{this.checkVersion()}catch(v){throw ge.string(v.message)&&this.outputChannel.appendLine(v.message),v}}checkVersion(){let e=ca.parse(Tt.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${Tt.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!ca.satisfies(e,la))throw new Error(`The language client requires VS Code version ${la} but received version ${Tt.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){e&&setTimeout(()=>{try{process.kill(e.pid,0),zd.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(e){function r(y,v){if(!y&&!v)return;let P=Object.create(null);return Object.keys(process.env).forEach(D=>P[D]=process.env[D]),v&&(P.ELECTRON_RUN_AS_NODE="1",P.ELECTRON_NO_ASAR="1"),y&&Object.keys(y).forEach(D=>P[D]=y[D]),P}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],s=["--debug","--debug-brk","--inspect","--inspect-brk"];function a(){let y=process.execArgv;return y?y.some(v=>n.some(P=>v.startsWith(P))||s.some(P=>v===P)):!1}function u(y){if(y.stdin===null||y.stdout===null||y.stderr===null)throw new Error("Process created without stdio streams")}let l=this._serverOptions;if(ge.func(l))return l().then(y=>{if(ua.MessageTransports.is(y))return this._isDetached=!!y.detached,y;if(_s.is(y))return this._isDetached=!!y.detached,{reader:new pe.StreamMessageReader(y.reader),writer:new pe.StreamMessageWriter(y.writer)};{let v;return ws.is(y)?(v=y.process,this._isDetached=y.detached):(v=y,this._isDetached=!1),v.stderr.on("data",P=>this.outputChannel.append(ge.string(P)?P:P.toString(e))),{reader:new pe.StreamMessageReader(v.stdout),writer:new pe.StreamMessageWriter(v.stdin)}}});let f,m=l;return m.run||m.debug?this._forceDebug||a()?f=m.debug:f=m.run:f=l,this._getServerWorkingDir(f.options).then(y=>{if(Rs.is(f)&&f.module){let v=f,P=v.transport||Re.stdio;if(v.runtime){let D=[],F=v.options||Object.create(null);F.execArgv&&F.execArgv.forEach(k=>D.push(k)),D.push(v.module),v.args&&v.args.forEach(k=>D.push(k));let A=Object.create(null);A.cwd=y,A.env=r(F.env,!1);let K;if(P===Re.ipc?(A.stdio=[null,null,null,"ipc"],D.push("--node-ipc")):P===Re.stdio?D.push("--stdio"):P===Re.pipe?(K=pe.generateRandomPipeName(),D.push(`--pipe=${K}`)):Qt.isSocket(P)&&D.push(`--socket=${P.port}`),D.push(`--clientProcessId=${process.pid.toString()}`),P===Re.ipc||P===Re.stdio){let k=Ft.spawn(v.runtime,D,A);return!k||!k.pid?Promise.reject(`Launching server using runtime ${v.runtime} failed.`):(this._serverProcess=k,k.stderr.on("data",L=>this.outputChannel.append(ge.string(L)?L:L.toString(e))),P===Re.ipc?(k.stdout.on("data",L=>this.outputChannel.append(ge.string(L)?L:L.toString(e))),Promise.resolve({reader:new pe.IPCMessageReader(k),writer:new pe.IPCMessageWriter(k)})):Promise.resolve({reader:new pe.StreamMessageReader(k.stdout),writer:new pe.StreamMessageWriter(k.stdin)}))}else{if(P===Re.pipe)return pe.createClientPipeTransport(K).then(k=>{let L=Ft.spawn(v.runtime,D,A);return!L||!L.pid?Promise.reject(`Launching server using runtime ${v.runtime} failed.`):(this._serverProcess=L,L.stderr.on("data",x=>this.outputChannel.append(ge.string(x)?x:x.toString(e))),L.stdout.on("data",x=>this.outputChannel.append(ge.string(x)?x:x.toString(e))),k.onConnected().then(x=>({reader:x[0],writer:x[1]})))});if(Qt.isSocket(P))return pe.createClientSocketTransport(P.port).then(k=>{let L=Ft.spawn(v.runtime,D,A);return!L||!L.pid?Promise.reject(`Launching server using runtime ${v.runtime} failed.`):(this._serverProcess=L,L.stderr.on("data",x=>this.outputChannel.append(ge.string(x)?x:x.toString(e))),L.stdout.on("data",x=>this.outputChannel.append(ge.string(x)?x:x.toString(e))),k.onConnected().then(x=>({reader:x[0],writer:x[1]})))})}}else{let D;return new Promise((F,A)=>{let K=v.args&&v.args.slice()||[];P===Re.ipc?K.push("--node-ipc"):P===Re.stdio?K.push("--stdio"):P===Re.pipe?(D=pe.generateRandomPipeName(),K.push(`--pipe=${D}`)):Qt.isSocket(P)&&K.push(`--socket=${P.port}`),K.push(`--clientProcessId=${process.pid.toString()}`);let k=v.options||Object.create(null);if(k.env=r(k.env,!0),k.execArgv=k.execArgv||[],k.cwd=y,k.silent=!0,P===Re.ipc||P===Re.stdio){let L=Ft.fork(v.module,K||[],k);u(L),this._serverProcess=L,L.stderr.on("data",x=>this.outputChannel.append(ge.string(x)?x:x.toString(e))),P===Re.ipc?(L.stdout.on("data",x=>this.outputChannel.append(ge.string(x)?x:x.toString(e))),F({reader:new pe.IPCMessageReader(this._serverProcess),writer:new pe.IPCMessageWriter(this._serverProcess)})):F({reader:new pe.StreamMessageReader(L.stdout),writer:new pe.StreamMessageWriter(L.stdin)})}else P===Re.pipe?pe.createClientPipeTransport(D).then(L=>{let x=Ft.fork(v.module,K||[],k);u(x),this._serverProcess=x,x.stderr.on("data",J=>this.outputChannel.append(ge.string(J)?J:J.toString(e))),x.stdout.on("data",J=>this.outputChannel.append(ge.string(J)?J:J.toString(e))),L.onConnected().then(J=>{F({reader:J[0],writer:J[1]})})}):Qt.isSocket(P)&&pe.createClientSocketTransport(P.port).then(L=>{let x=Ft.fork(v.module,K||[],k);u(x),this._serverProcess=x,x.stderr.on("data",J=>this.outputChannel.append(ge.string(J)?J:J.toString(e))),x.stdout.on("data",J=>this.outputChannel.append(ge.string(J)?J:J.toString(e))),L.onConnected().then(J=>{F({reader:J[0],writer:J[1]})})})})}}else if(Cs.is(f)&&f.command){let v=f,P=v.args||[],D=Object.assign({},v.options);D.cwd=D.cwd||y;let F=Ft.spawn(v.command,P,D);return!F||!F.pid?Promise.reject(`Launching server using command ${v.command} failed.`):(F.stderr.on("data",A=>this.outputChannel.append(ge.string(A)?A:A.toString(e))),this._serverProcess=F,this._isDetached=!!D.detached,Promise.resolve({reader:new pe.StreamMessageReader(F.stdout),writer:new pe.StreamMessageWriter(F.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(l,null,4)))})}registerProposedFeatures(){this.registerFeatures(da.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new Id.ConfigurationFeature(this)),this.registerFeature(new Ld.TypeDefinitionFeature(this)),this.registerFeature(new Nd.ImplementationFeature(this)),this.registerFeature(new qd.ColorProviderFeature(this)),this.registerFeature(new Fd.WorkspaceFoldersFeature(this)),this.registerFeature(new Md.FoldingRangeFeature(this)),this.registerFeature(new Ad.DeclarationFeature(this)),this.registerFeature(new Hd.SelectionRangeFeature(this)),this.registerFeature(new jd.ProgressFeature(this))}_mainGetRootPath(){let e=Tt.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}_getServerWorkingDir(e){let r=e&&e.cwd;return r||(r=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),r?new Promise(n=>{kd.lstat(r,(s,a)=>{n(!s&&a.isDirectory()?r:void 0)})}):Promise.resolve(void 0)}};Ve.LanguageClient=Ts;var Es=class{constructor(e,r){this._client=e,this._setting=r,this._listeners=[]}start(){return Tt.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new Tt.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),r=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,s=n?Tt.workspace.getConfiguration(r).get(n,!1):Tt.workspace.getConfiguration(r);s&&this._client.needsStart()?this._client.start():!s&&this._client.needsStop()&&this._client.stop()}};Ve.SettingMonitor=Es;var da;(function(t){function e(r){return[new Wd.CallHierarchyFeature(r),new Kd.SemanticTokensFeature(r)]}t.createAll=e})(da=Ve.ProposedFeatures||(Ve.ProposedFeatures={}))});var va=H((eh,ma)=>{"use strict";var Ds=Object.defineProperty,$d=Object.getOwnPropertyDescriptor,Ud=Object.getOwnPropertyNames,Gd=Object.prototype.hasOwnProperty,Xd=(t,e)=>{for(var r in e)Ds(t,r,{get:e[r],enumerable:!0})},Bd=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ud(e))!Gd.call(t,s)&&s!==r&&Ds(t,s,{get:()=>e[s],enumerable:!(n=$d(e,s))||n.enumerable});return t},Jd=t=>Bd(Ds({},"__esModule",{value:!0}),t),ga={};Xd(ga,{treeKill:()=>Yd});ma.exports=Jd(ga);var Ps=require("child_process"),Vd=require("fs"),Qd=require("process");function Yd(t,e,r){let n=new Map;n.set(t,[]);let s=new Map;switch(s.set(t,1),process.platform){case"win32":(0,Ps.exec)(`taskkill /pid ${t.toString()} /T /F`,a=>{r!==void 0&&r(a??void 0)});break;case"darwin":Ss(t,n,s,a=>(0,Ps.spawn)(Zd(),["-P",a.toString()]),function(){ha(n,e,r)});break;default:Ss(t,n,s,a=>(0,Ps.spawn)("ps",["-o","pid","--no-headers","--ppid",a.toString()]),()=>{ha(n,e,r)});break}}function ha(t,e,r){let n=new Map;try{for(let[s,a]of t){for(let u of a)n.get(u)===void 0&&(pa(u,e),n.set(u,1));n.get(s)===void 0&&(pa(s,e),n.set(s,1))}}catch(s){if(s instanceof Error&&r!==void 0)return r(s);throw s}r!==void 0&&r()}function pa(t,e){try{(0,Qd.kill)(t,e)}catch(r){if(r?.code==="ESRCH")return;throw r}}function Ss(t,e,r,n,s){let a=n(t),u="";a.stdout.on("data",l=>{let f=l.toString("ascii");u+=f}),a.on("close",l=>{if(r.delete(t),l!=0){r.size==0&&s();return}u.match(/\d+/g)?.forEach(f=>{let m=parseInt(f,10),y=e.get(t);e.set(t,y?.concat(m)??[]),e.set(m,[]),r.set(m,1),Ss(m,e,r,n,s)})})}var mr;function Zd(){if(mr!==void 0)return mr;try{mr=(0,Vd.existsSync)("/usr/bin/pgrep")?"/usr/bin/pgrep":"pgrep"}catch{mr="pgrep"}return mr}});var nf={};Da(nf,{activate:()=>tf,deactivate:()=>rf});module.exports=ba(nf);var Ra=Yt(require("node:path")),Yr=require("vscode"),vr=Yt(fa());var ya=require("node:child_process"),Vr=Yt(require("node:path")),Me=Yt(require("vscode")),Ca=Yt(va()),Jr=class{provideDocumentFormattingEdits(e,r,n){return Me.window.visibleTextEditors.every(s=>s.document.fileName!==e.fileName)?[]:this.runFormatter(e,n).then(s=>s,s=>{if(s)return console.log(s),Promise.reject("Check the console in dev tools to find errors when formatting.")})}runFormatter(e,r){let n=Me.workspace.getConfiguration("caddyfile").get("executable");return new Promise((s,a)=>{let u;if(n!=null&&n!==""){if(!Vr.isAbsolute(n))return Me.window.showInformationMessage("Invalid executable path for caddy."),a();u=n}else u="caddy";let l=Vr.dirname(e.fileName),f="",m="",y=(0,ya.spawn)(u,["fmt","-"],{cwd:l});r.onCancellationRequested(()=>!y.killed&&ef(y)),y.stdout.setEncoding("utf8"),y.stdout.on("data",v=>f+=v),y.stderr.on("data",v=>m+=v),y.on("error",v=>{if(v&&v.code==="ENOENT")return Me.window.showInformationMessage("Caddy was not found in your $PATH"),a()}),y.on("close",v=>{if(v!==0)return a(m);let P=new Me.Position(0,0),D=e.lineAt(e.lineCount-1).range.end,F=[new Me.TextEdit(new Me.Range(P,D),f)];return s(F)}),y.pid&&y.stdin.end(e.getText())})}};function ef(t,e){e||(e=console.log);let r=t.pid;return r===void 0||t.exitCode!==null?Promise.resolve():new Promise(n=>{(0,Ca.treeKill)(r,void 0,s=>(s&&e?.(`Error killing process ${t.pid}: ${s}`),n()))})}var Qr;function tf(t){Yr.languages.registerDocumentFormattingEditProvider("caddyfile",new Jr);let e=t.asAbsolutePath(Ra.join("packages","server","dist","index.js")),r={execArgv:["--nolazy","--inspect=6009"]},n={run:{module:e,transport:vr.TransportKind.ipc},debug:{module:e,transport:vr.TransportKind.ipc,options:r}},s={documentSelector:[{scheme:"file",language:"caddyfile"}],synchronize:{fileEvents:Yr.workspace.createFileSystemWatcher("**/.clientrc")}};Qr=new vr.LanguageClient("caddyfileLanguageServer","Caddyfile Language Server",n,s),Qr.start()}function rf(){if(Qr)return Qr.stop()}0&&(module.exports={activate,deactivate});
//# sourceMappingURL=index.js.map
