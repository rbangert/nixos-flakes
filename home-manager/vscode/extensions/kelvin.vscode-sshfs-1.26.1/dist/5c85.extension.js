"use strict";exports.id="5c85",exports.ids=["5c85"],exports.modules={3201:(e,t,n)=>{n.r(t),n.d(t,{navigate:()=>v,open:()=>w});var s=n(7897),i=n(7147),r=n(1017),o=n(9496),a=n(366),c=n(2809),g=n(2516);const l=c.zW.scope("WebView");let u,d;async function w(){if(!u){const e=function(){const e=o.extensions.getExtension("Kelvin.vscode-sshfs");return e&&e.extensionPath}();u=o.window.createWebviewPanel("sshfs-settings","SSH-FS",o.ViewColumn.One,{enableFindWidget:!0,enableScripts:!0}),u.onDidDispose((()=>u=void 0)),e&&(u.iconPath=o.Uri.file(r.join(e,"resources/icon.svg")));const{webview:t}=u;t.onDidReceiveMessage(f);let s=await async function(){if(!c.eM)return!1;const e="http://localhost:3000/",t=await Promise.resolve().then(n.t.bind(n,3685,23));return(0,g.Vi)((n=>t.get(e,(async t=>{if(200!==t.statusCode)return n(new Error(`Error code ${t.statusCode} (${t.statusMessage}) connecting to React dev server}`));let s="";t.on("data",(e=>s+=e)),await(0,g.Vi)((e=>t.on("end",e))),s=s.toString().replace(/\/static\/js\/bundle\.js/,`${e}/static/js/bundle.js`),s=s.replace(/\$WEBVIEW_CSPSOURCE/g,`$WEBVIEW_CSPSOURCE ${e}`),s=s.replace(/\$WEBVIEW_CSPEXTRA/g,`connect-src ${e} ${e.replace("http://","ws://")};`),s=s.replace(/src="\/static\//g,`src="${e}/static/`),n(null,s)})).on("error",(e=>{l.warning(`Error connecting to React dev server: ${e}`),n(new Error("Could not connect to React dev server. Not running?"))}))))}().catch((e=>(o.window.showErrorMessage(e.message),null)));if(!s){if(!e)throw new Error("Could not get extensionPath");s=i.readFileSync(r.resolve(e,"webview/build/index.html")).toString(),s=s.replace(/\/static\//g,t.asWebviewUri(o.Uri.file(r.join(e,"webview/build/static/"))).toString())}s=s.replace(/\$WEBVIEW_CSPSOURCE/g,t.cspSource),s=s.replace(/\$WEBVIEW_CSPEXTRA/g,""),t.html=s}u.reveal()}async function v(e){return l.debug`Navigation requested: ${e}`,d=e,p({navigation:e,type:"navigate"}),w()}function p(e){null==u||u.webview.postMessage(e)}async function f(e){if(!u)return l.warning`Got message without webviewPanel: ${e}`;switch(l.debug`Got message: ${e}`,d&&(p({type:"navigate",navigation:d}),d=void 0),e.type){case"requestData":{const t=await(e.reload?a.O1:a.G_)();return p({configs:t,locations:(0,s.JC)(t),type:"responseData"})}case"saveConfig":{const{uniqueId:t,config:n,name:s,remove:i}=e;let r;try{i?await(0,a.vj)(n):await(0,a.rF)(n,s)}catch(t){l.error("Error handling saveConfig message for settings UI:",c.j7),l.error(JSON.stringify(e),c.j7),l.error(t),r=t.message}return p({uniqueId:t,config:n,error:r,type:"saveConfigResult"})}case"promptPath":{const{uniqueId:t}=e;let n,s;try{const e=await o.window.showOpenDialog({});e&&([n]=e)}catch(t){l.error`Error handling promptPath message for settings UI:\n${e}\n${t}`,s=t.message}return p({uniqueId:t,path:n&&n.fsPath,type:"promptPathResult"})}case"navigated":{const{view:t}=e;let n;switch(t){case"configeditor":n="SSH FS - Edit config";break;case"configlocator":n="SSH FS - Locate config";break;case"newconfig":n="SSH FS - New config"}u.title=n||"SSH FS"}}}}};
//# sourceMappingURL=5c85.extension.js.map