var Oc=Object.defineProperty;var o=(Io,Va)=>Oc(Io,"name",{value:Va,configurable:!0});(()=>{var Io={850:(it,l,C)=>{"use strict";C.r(l),C.d(l,{AppInsightsCore:()=>Ye,BaseCore:()=>Pn,BaseTelemetryPlugin:()=>$r.i,CoreUtils:()=>B.Tr,DiagnosticLogger:()=>me.AQ,ESPromise:()=>vr,ESPromiseScheduler:()=>jn,EventHelper:()=>Fr.zB,EventLatency:()=>N,EventPersistence:()=>w,EventPropertyType:()=>m,EventsDiscardedReason:()=>Rr.h,FullVersionString:()=>B.vs,InternalAppInsightsCore:()=>tt.F,InternalBaseCore:()=>Jt.A,LoggingSeverity:()=>y.X,MinChannelPriorty:()=>Xn,NotificationManager:()=>Dr.f,PerfEvent:()=>xe.zn,PerfManager:()=>xe.Jk,ProcessTelemetryContext:()=>Cr.Vi,TraceLevel:()=>O,Undefined:()=>_r.jA,Utils:()=>B.cQ,ValueKind:()=>W,ValueSanitizer:()=>fr,Version:()=>B.Gf,_ExtendedInternalMessageId:()=>H,_InternalLogMessage:()=>me.lQ,_InternalMessageId:()=>y.v,__getRegisteredEvents:()=>xn.um,_logInternalMessage:()=>me.L4,_throwInternal:()=>me.kP,_warnToConsole:()=>me.jV,addEventHandler:()=>xn.Ib,addEventListeners:()=>xn.yw,addPageHideEventListener:()=>xn.TJ,addPageShowEventListener:()=>xn.nD,addPageUnloadEventListener:()=>xn.c9,areCookiesSupported:()=>Kr.p7,arrForEach:()=>I.tO,arrIndexOf:()=>I.UA,arrMap:()=>I.Mr,arrReduce:()=>I.Xz,attachEvent:()=>xn.pZ,cookieAvailable:()=>Kr.p7,createCookieMgr:()=>Kr.Nz,createEnumStyle:()=>v.By,createGuid:()=>B.cm,createProcessTelemetryContext:()=>Cr.CD,createTraceParent:()=>br.SU,createUniqueNamespace:()=>Tr.J,createUnloadHandlerContainer:()=>vi.Y,dateNow:()=>I.m6,deleteCookie:()=>B.kT,detachEvent:()=>xn.pD,disableCookies:()=>B.oF,disallowsSameSiteNone:()=>Kr.UY,doPerf:()=>xe.Lm,dumpObj:()=>Ze.eU,eventOff:()=>xn.QY,eventOn:()=>xn.XO,extend:()=>B.l7,findW3cTraceParent:()=>br.lq,formatTraceParent:()=>br.aR,generateW3CId:()=>Fr.DO,getCommonSchemaMetaData:()=>B.Vv,getConsole:()=>Ze.dr,getCookie:()=>B.ej,getCookieValue:()=>B.Do,getCrypto:()=>Ze.MX,getDocument:()=>Ze.Me,getExceptionName:()=>I.jj,getFieldValueType:()=>B.Sy,getGlobal:()=>lr.Rd,getGlobalInst:()=>Ze.a8,getHistory:()=>Ze.s1,getIEVersion:()=>Ze.sA,getISOString:()=>I.Y6,getJSON:()=>Ze.xA,getLocation:()=>Ze.k$,getMsCrypto:()=>Ze.gz,getNavigator:()=>Ze.jW,getPerformance:()=>Ze.r,getSetValue:()=>I.qK,getTenantId:()=>B.jM,getTime:()=>B.hK,getWindow:()=>Ze.Jj,hasDocument:()=>Ze.Nv,hasHistory:()=>Ze.fE,hasJSON:()=>Ze.nS,hasNavigator:()=>Ze.d6,hasOwnProperty:()=>I.nr,hasWindow:()=>Ze.Ym,isArray:()=>I.kJ,isArrayValid:()=>B.JT,isBeaconsSupported:()=>Ze.MF,isBoolean:()=>I.jn,isChromium:()=>B.mJ,isDate:()=>I.J_,isDocumentObjectAvailable:()=>B.x9,isError:()=>I.VZ,isFetchSupported:()=>Ze.JO,isFunction:()=>I.mf,isIE:()=>Ze.w1,isLatency:()=>B.r7,isNotTruthy:()=>I.F,isNullOrUndefined:()=>I.le,isNumber:()=>I.hj,isObject:()=>I.Kn,isReactNative:()=>Ze.b$,isSampledFlag:()=>br.Pn,isString:()=>I.HD,isTruthy:()=>I.fQ,isTypeof:()=>I.Ym,isUint8ArrayAvailable:()=>B.IZ,isUndefined:()=>I.o8,isValidSpanId:()=>br.Lc,isValidTraceId:()=>br.jN,isValidTraceParent:()=>br.J6,isValueAssigned:()=>B.Sn,isValueKind:()=>B.oS,isWindowObjectAvailable:()=>B.dH,isXhrSupported:()=>Ze.Z3,mergeEvtNamespace:()=>xn.jU,newGuid:()=>Fr.GW,newId:()=>Bn.pZ,normalizeJsName:()=>I.Gf,objCreate:()=>lr.pu,objDefineAccessors:()=>I.l_,objForEachKey:()=>I.rW,objFreeze:()=>I.FL,objKeys:()=>I.FY,objSeal:()=>I.Xi,openXhr:()=>B.ot,optimizeObject:()=>I.Ax,parseTraceParent:()=>br.j_,perfNow:()=>Fr.Jj,proxyAssign:()=>I.cf,proxyFunctionAs:()=>I.Oi,proxyFunctions:()=>I.Vb,random32:()=>Bn._l,randomValue:()=>Bn.az,removeEventHandler:()=>xn.C1,removeEventListeners:()=>xn.nJ,removePageHideEventListener:()=>xn.C9,removePageShowEventListener:()=>xn.Yl,removePageUnloadEventListener:()=>xn.JA,safeGetCookieMgr:()=>Kr.JP,safeGetLogger:()=>me.vH,sanitizeProperty:()=>B.yj,setCookie:()=>B.d8,setEnableEnvMocks:()=>Ze.dI,setProcessTelemetryTimings:()=>B.if,setValue:()=>I.sO,strContains:()=>I._Q,strEndsWith:()=>I.Id,strFunction:()=>_r.cb,strObject:()=>_r.fK,strPrototype:()=>_r.hB,strStartsWith:()=>I.xe,strTrim:()=>I.nd,strUndefined:()=>_r.jA,throwError:()=>I._y,toISOString:()=>I.Y6,useXDomainRequest:()=>Ze.cp});var R=C(1088),v=C(4873),I=C(6708),y=C(7310),W=(0,v.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),N=(0,v.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),m=(0,v.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),w=(0,v.By)({Normal:1,Critical:2}),O=(0,v.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),H=(0,I.FL)((0,R.uc)((0,R.uc)({},y.v),(0,v.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520})));/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var b,$="undefined",F="constructor",j="prototype",q="function",Ee="_dynInstFuncs",z="_isDynProxy",Z="_dynClass",ee="_dynCls$",T="_dynInstChk",Y=T,k="_dfOpts",le="_unknown_",J="__proto__",fe="_dyn"+J,De="__dynProto$Gbl",Oe="_dynInstProto",oe="useBaseInst",Se="setInstFuncs",D=Object,ze=D.getPrototypeOf,we=D.getOwnPropertyNames;function ve(){var M;return typeof globalThis!==$&&(M=globalThis),!M&&typeof self!==$&&(M=self),!M&&typeof window!==$&&(M=window),!M&&typeof C.g!==$&&(M=C.g),M||{}}o(ve,"_getGlobal");var G=ve(),se=G[De]||(G[De]={o:(b={},b[Se]=!0,b[oe]=!0,b),n:1e3});function Te(M,ue){return M&&D[j].hasOwnProperty.call(M,ue)}o(Te,"_hasOwnProperty");function $e(M){return M&&(M===D[j]||M===Array[j])}o($e,"_isObjectOrArrayPrototype");function ae(M){return $e(M)||M===Function[j]}o(ae,"_isObjectArrayOrFunctionPrototype");function Xe(M){var ue;if(M){if(ze)return ze(M);var Ae=M[J]||M[j]||(M[F]?M[F][j]:null);ue=M[fe]||Ae,Te(M,fe)||(delete M[Oe],ue=M[fe]=M[Oe]||M[fe],M[Oe]=Ae)}return ue}o(Xe,"_getObjProto");function lt(M,ue){var Ae=[];if(we)Ae=we(M);else for(var Le in M)typeof Le=="string"&&Te(M,Le)&&Ae.push(Le);if(Ae&&Ae.length>0)for(var et=0;et<Ae.length;et++)ue(Ae[et])}o(lt,"_forEachProp");function mt(M,ue,Ae){return ue!==F&&typeof M[ue]===q&&(Ae||Te(M,ue))}o(mt,"_isDynamicCandidate");function P(M){throw new TypeError("DynamicProto: "+M)}o(P,"_throwTypeError");function U(M){var ue={};return lt(M,function(Ae){!ue[Ae]&&mt(M,Ae,!1)&&(ue[Ae]=M[Ae])}),ue}o(U,"_getInstanceFuncs");function re(M,ue){for(var Ae=M.length-1;Ae>=0;Ae--)if(M[Ae]===ue)return!0;return!1}o(re,"_hasVisited");function de(M,ue,Ae,Le){function et(Rt,_t,Ct){var Ft=_t[Ct];if(Ft[z]&&Le){var Bt=Rt[Ee]||{};Bt[Y]!==!1&&(Ft=(Bt[_t[Z]]||{})[Ct]||Ft)}return function(){return Ft.apply(Rt,arguments)}}o(et,"_instFuncProxy");var je={};lt(Ae,function(Rt){je[Rt]=et(ue,Ae,Rt)});for(var ct=Xe(M),Dt=[];ct&&!ae(ct)&&!re(Dt,ct);)lt(ct,function(Rt){!je[Rt]&&mt(ct,Rt,!ze)&&(je[Rt]=et(ue,ct,Rt))}),Dt.push(ct),ct=Xe(ct);return je}o(de,"_getBaseFuncs");function Ue(M,ue,Ae,Le){var et=null;if(M&&Te(Ae,Z)){var je=M[Ee]||{};if(et=(je[Ae[Z]]||{})[ue],et||P("Missing ["+ue+"] "+q),!et[T]&&je[Y]!==!1){for(var ct=!Te(M,ue),Dt=Xe(M),Rt=[];ct&&Dt&&!ae(Dt)&&!re(Rt,Dt);){var _t=Dt[ue];if(_t){ct=_t===Le;break}Rt.push(Dt),Dt=Xe(Dt)}try{ct&&(M[ue]=et),et[T]=1}catch(Ct){je[Y]=!1}}}return et}o(Ue,"_getInstFunc");function Pe(M,ue,Ae){var Le=ue[M];return Le===Ae&&(Le=Xe(ue)[M]),typeof Le!==q&&P("["+M+"] is not a "+q),Le}o(Pe,"_getProtoFunc");function ce(M,ue,Ae,Le,et){function je(Rt,_t){var Ct=o(function(){var Ft=Ue(this,_t,Rt,Ct)||Pe(_t,Rt,Ct);return Ft.apply(this,arguments)},"dynProtoProxy");return Ct[z]=1,Ct}if(o(je,"_createDynamicPrototype"),!$e(M)){var ct=Ae[Ee]=Ae[Ee]||{},Dt=ct[ue]=ct[ue]||{};ct[Y]!==!1&&(ct[Y]=!!et),lt(Ae,function(Rt){mt(Ae,Rt,!1)&&Ae[Rt]!==Le[Rt]&&(Dt[Rt]=Ae[Rt],delete Ae[Rt],(!Te(M,Rt)||M[Rt]&&!M[Rt][z])&&(M[Rt]=je(M,Rt)))})}}o(ce,"_populatePrototype");function Ce(M,ue){if(ze){for(var Ae=[],Le=Xe(ue);Le&&!ae(Le)&&!re(Ae,Le);){if(Le===M)return!0;Ae.push(Le),Le=Xe(Le)}return!1}return!0}o(Ce,"_checkPrototype");function Me(M,ue){return Te(M,j)?M.name||ue||le:((M||{})[F]||{}).name||ue||le}o(Me,"_getObjName");function Je(M,ue,Ae,Le){Te(M,j)||P("theClass is an invalid class definition.");var et=M[j];Ce(et,ue)||P("["+Me(M)+"] not in hierarchy of ["+Me(ue)+"]");var je=null;Te(et,Z)?je=et[Z]:(je=ee+Me(M,"_")+"$"+se.n,se.n++,et[Z]=je);var ct=Je[k],Dt=!!ct[oe];Dt&&Le&&Le[oe]!==void 0&&(Dt=!!Le[oe]);var Rt=U(ue),_t=de(et,ue,Rt,Dt);Ae(ue,_t);var Ct=!!ze&&!!ct[Se];Ct&&Le&&(Ct=!!Le[Se]),ce(et,je,ue,Rt,Ct!==!1)}o(Je,"dynamicProto"),Je[k]=se.o;var me=C(5018),xe=C(9288),Ze=C(7630),tt=C(5121),_e=C(7984),B=C(3599),K=function(M){(0,R.ne)(ue,M);function ue(){var Ae=M.call(this)||this;return Ae.pluginVersionStringArr=[],Je(ue,Ae,function(Le,et){(!Le.logger||!Le.logger.queue)&&(Le.logger=new me.AQ({loggingLevelConsole:1})),Le.initialize=function(je,ct,Dt,Rt){(0,xe.Lm)(Le,function(){return"AppInsightsCore.initialize"},function(){var _t=Le.pluginVersionStringArr;if(je){je.endpointUrl||(je.endpointUrl=_e.YT);var Ct=je.propertyStorageOverride;Ct&&(!Ct.getProperty||!Ct.setProperty)&&(0,I._y)("Invalid property storage override passed."),je.channels&&(0,I.tO)(je.channels,function(Nt){Nt&&(0,I.tO)(Nt,function(kt){if(kt.identifier&&kt.version){var Jn=kt.identifier+"="+kt.version;_t.push(Jn)}})})}Le.getWParam=function(){return typeof document!="undefined"||!!je.enableWParam?0:-1},ct&&(0,I.tO)(ct,function(Nt){if(Nt&&Nt.identifier&&Nt.version){var kt=Nt.identifier+"="+Nt.version;_t.push(kt)}}),Le.pluginVersionString=_t.join(";"),Le.pluginVersionStringArr=_t;try{et.initialize(je,ct,Dt,Rt),Le.pollInternalLogs("InternalLog")}catch(Nt){var Ft=Le.logger,Bt=(0,Ze.eU)(Nt);Bt.indexOf("channels")!==-1&&(Bt+=`
 - Channels must be provided through config.channels only!`),(0,me.kP)(Ft,1,514,"SDK Initialization Failed - no telemetry will be sent: "+Bt)}},function(){return{config:je,extensions:ct,logger:Dt,notificationManager:Rt}})},Le.track=function(je){(0,xe.Lm)(Le,function(){return"AppInsightsCore.track"},function(){var ct=je;if(ct){ct.timings=ct.timings||{},ct.timings.trackStart=(0,B.hK)(),(0,B.r7)(ct.latency)||(ct.latency=1);var Dt=ct.ext=ct.ext||{};Dt.sdk=Dt.sdk||{},Dt.sdk.ver=B.vs;var Rt=ct.baseData=ct.baseData||{};Rt[_e.o6]=Rt[_e.o6]||{};var _t=Rt[_e.o6];_t[_e.p8]=_t[_e.p8]||Le.pluginVersionString||_e.qS}et.track(ct)},function(){return{item:je}},!je.sync)}}),Ae}return o(ue,"AppInsightsCore"),ue.__ieDyn=1,ue}(tt.F);const Ye=K;var Jt=C(6900),Tn=function(M){(0,R.ne)(ue,M);function ue(){var Ae=M.call(this)||this;return Je(ue,Ae,function(Le,et){Le.initialize=function(je,ct,Dt,Rt){je&&!je.endpointUrl&&(je.endpointUrl=_e.YT),Le.getWParam=function(){return B.x9||!!je.enableWParam?0:-1};try{et.initialize(je,ct,Dt,Rt)}catch(_t){(0,me.kP)(Le.logger,1,514,"Initialization Failed: "+(0,Ze.eU)(_t)+`
 - Note: Channels must be provided through config.channels only`)}},Le.track=function(je){var ct=je;if(ct){var Dt=ct.ext=ct.ext||{};Dt.sdk=Dt.sdk||{},Dt.sdk.ver=B.vs}et.track(ct)}}),Ae}return o(ue,"BaseCore"),ue.__ieDyn=1,ue}(Jt.A);const Pn=Tn;var Sn=I.mf;function sr(M,ue,Ae){return function(Le){M[ue]=Le,Ae()}}o(sr,"_createPromiseAllOnResolvedFunction");var or=function(){function M(ue){var Ae=0,Le=null,et=[];Je(M,this,function(_t){_t.then=function(Ct,Ft){return new M(function(Bt,Nt){je(Ct,Ft,Bt,Nt)})},_t.catch=function(Ct){return _t.then(null,Ct)}});function je(_t,Ct,Ft,Bt){et.push(function(){var Nt;try{Ae===1?Nt=Sn(_t)?_t(Le):Le:Nt=Sn(Ct)?Ct(Le):Le,Nt instanceof M?Nt.then(Ft,Bt):Ae===2&&!Sn(Ct)?Bt(Nt):Ft(Nt)}catch(kt){Bt(kt);return}}),Ae!==0&&ct()}o(je,"_enqueue");function ct(){if(et.length>0){var _t=et.slice();et=[],setTimeout(function(){for(var Ct=0,Ft=_t.length;Ct<Ft;++Ct)try{_t[Ct]()}catch(Bt){}},0)}}o(ct,"_processQueue");function Dt(_t){Ae===0&&(Le=_t,Ae=1,ct())}o(Dt,"_resolve");function Rt(_t){Ae===0&&(Le=_t,Ae=2,ct())}o(Rt,"_reject"),o(function(){if(!Sn(ue))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{ue(Dt,Rt)}catch(Ct){Rt(Ct)}},"_initialize")()}return o(M,"ESPromise"),M.resolve=function(ue){return ue instanceof M?ue:ue&&Sn(ue.then)?new M(function(Ae,Le){try{ue.then(Ae,Le)}catch(et){Le(et)}}):new M(function(Ae){Ae(ue)})},M.reject=function(ue){return new M(function(Ae,Le){Le(ue)})},M.all=function(ue){if(!(!ue||!ue.length))return new M(function(Ae,Le){try{for(var et=[],je=0,ct=0;ct<ue.length;ct++){var Dt=ue[ct];Dt&&Sn(Dt.then)?(je++,Dt.then(sr(et,ct,function(){--je==0&&Ae(et)}),Le)):et[ct]=Dt}je===0&&setTimeout(function(){Ae(et)},0)}catch(Rt){Le(Rt)}})},M.race=function(ue){return new M(function(Ae,Le){if(!(!ue||!ue.length))try{for(var et=o(function(ct){var Dt=ue[ct];Dt&&Sn(Dt.then)?Dt.then(Ae,Le):setTimeout(function(){Ae(Dt)},0)},"_loop_1"),je=0;je<ue.length;je++)et(je)}catch(ct){Le(ct)}})},M}();const vr=or;var lr=C(2091),pr=6e5,ft=0,Kt=[],rn=[],on=[];function Vt(){return new Date().getTime()}o(Vt,"_getTime");var En=function(){function M(ue,Ae){var Le=0,et=(ue||"<unnamed>")+"."+ft;ft++,Je(M,this,function(Dt){var Rt=null,_t=0;Dt.scheduleEvent=function(Ft,Bt,Nt){var kt=et+"."+_t;_t++,Bt&&(kt+="-("+Bt+")");var Jn=kt+"{"+Le+"}";Le++;var An={evt:null,tm:Vt(),id:Jn,isRunning:!1,isAborted:!1};return Rt?An.evt=pi(An,Rt):An.evt=Gn(An),Rt=An,Rt.evt._schId=Jn,An.evt;function mr(zt){for(var Zn=Vt(),Dn=Zn-pr,Cn=zt.length,fn=0;fn<Cn;){var er=zt[fn];if(er&&er.tm<Dn){var Qn=null;er.abort?(Qn="Aborting ["+er.id+"] due to Excessive runtime ("+(Zn-er.tm)+" ms)",er.abort(Qn)):Qn="Removing ["+er.id+"] due to Excessive runtime ("+(Zn-er.tm)+" ms)",ct(Qn),zt.splice(fn,1),Cn--}else fn++}}o(mr,"_abortAndRemoveOldEvents");function qn(zt,Zn){var Dn=!1,Cn=Ct(Kt,zt);if(Cn||(Cn=Ct(on,zt),Dn=!0),Cn){Cn.to&&(clearTimeout(Cn.to),Cn.to=null);var fn=Vt()-Cn.tm;Zn?Dn?ct("Timed out event ["+zt+"] finally complete -- "+fn+" ms"):je("Promise ["+zt+"] Complete -- "+fn+" ms"):(on.push(Cn),ct("Event ["+zt+"] Timed out and removed -- "+fn+" ms"))}else je("Failed to remove ["+zt+"] from running queue");Rt&&Rt.id===zt&&(Rt=null),mr(Kt),mr(rn),mr(on)}o(qn,"_cleanup");function cr(zt,Zn){return function(Dn){return qn(zt,!0),Zn&&Zn(Dn),Dn}}o(cr,"_removeScheduledEvent");function Gr(zt,Zn,Dn,Cn){Zn.then(function(fn){return fn instanceof vr?(je("Event ["+zt+"] returned a promise -- waiting"),Gr(zt,fn,Dn,Cn),fn):cr(zt,Dn)(fn)},cr(zt,Cn))}o(Gr,"_waitForFinalResult");function zr(zt,Zn){var Dn=zt.id;return new vr(function(Cn,fn){je("Event ["+Dn+"] Starting -- waited for "+(zt.wTm||"--")+" ms"),zt.isRunning=!0,zt.abort=function(Qn){zt.abort=null,zt.isAborted=!0,qn(Dn,!1),fn(new Error(Qn))};var er=Zn(Dn);er instanceof vr?(Nt&&(zt.to=setTimeout(function(){qn(Dn,!1),fn(new Error("Timed out after ["+Nt+"] ms"))},Nt)),Gr(Dn,er,function(Qn){je("Event ["+Dn+"] Resolving after "+(Vt()-zt.tm)+" ms"),Cn(Qn)},fn)):(je("Promise ["+Dn+"] Auto completed as the start action did not return a promise"),Cn())})}o(zr,"_createScheduledEvent");function Gn(zt){var Zn=Vt();return zt.wTm=Zn-zt.tm,zt.tm=Zn,zt.isAborted?vr.reject(new Error("["+kt+"] was aborted")):(Kt.push(zt),zr(zt,Ft))}o(Gn,"_startWaitingEvent");function pi(zt,Zn){var Dn=new vr(function(Cn,fn){var er=Vt()-Zn.tm,Qn=Zn.id;je("["+kt+"] is waiting for ["+Qn+":"+er+" ms] to complete before starting -- ["+rn.length+"] waiting and ["+Kt.length+"] running"),zt.abort=function(Nr){zt.abort=null,Ct(rn,kt),zt.isAborted=!0,fn(new Error(Nr))},Zn.evt.then(function(Nr){Ct(rn,kt),Gn(zt).then(Cn,fn)},function(Nr){Ct(rn,kt),Gn(zt).then(Cn,fn)})});return rn.push(zt),Dn}o(pi,"_waitForPreviousEvent")};function Ct(Ft,Bt){for(var Nt=0;Nt<Ft.length;Nt++)if(Ft[Nt].id===Bt)return Ft.splice(Nt,1)[0];return null}o(Ct,"_removeQueuedEvent")});function je(Dt){var Rt=(0,lr.Rd)();Rt&&Rt.QUnit&&console&&console.log("ESPromiseScheduler["+et+"] "+Dt)}o(je,"_debugLog");function ct(Dt){(0,me.jV)(Ae,"ESPromiseScheduler["+et+"] "+Dt)}o(ct,"_warnLog")}return o(M,"ESPromiseScheduler"),M.incomplete=function(){return Kt},M.waitingToStart=function(){return rn},M}();const jn=En;var fr=function(){function M(ue){var Ae=this,Le={},et=[],je=[];ue&&je.push(ue);function ct(Ct,Ft){var Bt,Nt=Le[Ct];if(Nt&&(Bt=Nt[Ft]),!Bt&&Bt!==null){if((0,I.HD)(Ct)&&(0,I.HD)(Ft))if(je.length>0){for(var kt=0;kt<je.length;kt++)if(je[kt].handleField(Ct,Ft)){Bt={canHandle:!0,fieldHandler:je[kt]};break}}else et.length===0&&(Bt={canHandle:!0});if(!Bt&&Bt!==null){Bt=null;for(var kt=0;kt<et.length;kt++)if(et[kt].handleField(Ct,Ft)){Bt={canHandle:!0,handler:et[kt],fieldHandler:null};break}}Nt||(Nt=Le[Ct]={}),Nt[Ft]=Bt}return Bt}o(ct,"_getFieldSanitizer"),Ae.addSanitizer=function(Ct){Ct&&(et.push(Ct),Le={})},Ae.addFieldSanitizer=function(Ct){Ct&&(je.push(Ct),Le={})},Ae.handleField=function(Ct,Ft){var Bt=ct(Ct,Ft);return Bt?Bt.canHandle:!1},Ae.value=function(Ct,Ft,Bt,Nt){var kt=ct(Ct,Ft);if(kt&&kt.canHandle){if(!kt||!kt.canHandle)return null;if(kt.handler)return kt.handler.value(Ct,Ft,Bt,Nt);if(!(0,I.HD)(Ft)||(0,I.le)(Bt)||Bt===_e.qS)return null;var Jn=null,An=(0,B.Sy)(Bt);if((An&8192)==8192){var mr=An&~8192;if(Jn=Bt,!(0,B.Sn)(Jn.value)||mr!==1&&mr!==2&&mr!==3&&(mr&4096)!=4096)return null}else An===1||An===2||An===3||(An&4096)==4096?Jn=Rt(Ct,Ft,Bt):An===4&&(Jn=Rt(Ct,Ft,Nt?JSON.stringify(Bt):Bt));if(Jn)return Dt(kt,Ct,Ft,An,Jn,Nt)}return null},Ae.property=function(Ct,Ft,Bt,Nt){var kt=ct(Ct,Ft);if(!kt||!kt.canHandle||!(0,I.HD)(Ft)||(0,I.le)(Bt)||!(0,B.Sn)(Bt.value))return null;var Jn=(0,B.Sy)(Bt.value);return Jn===0?null:Dt(kt,Ct,Ft,Jn,Bt,Nt)};function Dt(Ct,Ft,Bt,Nt,kt,Jn){if(Ct.handler)return Ct.handler.property(Ft,Bt,kt,Jn);if(!(0,I.le)(kt.kind)){if((Nt&4096)==4096||!(0,B.oS)(kt.kind))return null;kt.value=kt.value.toString()}return _t(Ct.fieldHandler,Ft,Bt,Nt,kt)}o(Dt,"_handleProperty");function Rt(Ct,Ft,Bt){return(0,B.Sn)(Bt)?{value:Bt}:null}o(Rt,"_convertToProperty");function _t(Ct,Ft,Bt,Nt,kt){if(kt&&Ct){var Jn=Ct.getSanitizer(Ft,Bt,Nt,kt.kind,kt.propertyType);if(Jn)if(Nt===4){var An={},mr=kt.value;(0,I.rW)(mr,function(cr,Gr){var zr=Ft+"."+Bt;if((0,B.Sn)(Gr)){var Gn=Rt(zr,cr,Gr);Gn=_t(Ct,zr,cr,(0,B.Sy)(Gr),Gn),Gn&&(An[cr]=Gn.value)}}),kt.value=An}else{var qn={path:Ft,name:Bt,type:Nt,prop:kt,sanitizer:Ae};kt=Jn.call(Ae,qn)}}return kt}o(_t,"_callFieldSanitizer")}return o(M,"ValueSanitizer"),M.getFieldType=B.Sy,M}(),Xn=100,Dr=C(1880),$r=C(4063),Cr=C(1589),Rr=C(5928),Fr=C(5843),xn=C(4869),Bn=C(4878),_r=C(4392),Kr=C(3242),Tr=C(5883),vi=C(310),br=C(4206)},7984:(it,l,C)=>{"use strict";C.d(l,{qS:()=>R,YT:()=>v,p8:()=>W,o6:()=>N});var R="",v="https://browser.events.data.microsoft.com/OneCollector/1.0/",I="pluginVersionString",y=I+"Arr",W="version",N="properties"},3599:(it,l,C)=>{"use strict";C.d(l,{Gf:()=>b,vs:()=>$,x9:()=>Z,dH:()=>ee,Sn:()=>T,jM:()=>Y,IZ:()=>k,r7:()=>le,yj:()=>J,Vv:()=>fe,oF:()=>De,d8:()=>Oe,kT:()=>oe,ej:()=>Se,Do:()=>D,cm:()=>ze,l7:()=>we,hK:()=>ve,oS:()=>G,JT:()=>$e,if:()=>ae,Sy:()=>Xe,cQ:()=>lt,Tr:()=>mt,mJ:()=>P,ot:()=>U});var R=C(7630),v=C(6708),I=C(3242),y=C(5843),W=C(4392),N=C(4869),m=C(4878),w=C(2091),O=C(7984),H,b="3.2.10",$="1DS-Web-JS-"+b,F="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",j="withCredentials",q="timeout",Ee=(H={},H[0]=0,H[2]=6,H[1]=1,H[3]=7,H[4096|2]=6,H[4096|1]=1,H[4096|3]=7,H),z=null,Z=Boolean((0,R.Me)()),ee=Boolean((0,R.Jj)());function T(re){return!(re===O.qS||(0,v.le)(re))}o(T,"isValueAssigned");function Y(re){if(re){var de=re.indexOf("-");if(de>-1)return re.substring(0,de)}return O.qS}o(Y,"getTenantId");function k(){return z===null&&(z=!(0,v.o8)(Uint8Array)&&!Te()&&!(0,R.b$)()),z}o(k,"isUint8ArrayAvailable");function le(re){return!!(re&&(0,v.hj)(re)&&re>=1&&re<=4)}o(le,"isLatency");function J(re,de,Ue){if(!de&&!T(de)||typeof re!="string")return null;var Pe=typeof de;if(Pe==="string"||Pe==="number"||Pe==="boolean"||(0,v.kJ)(de))de={value:de};else if(Pe==="object"&&!W.CY.call(de,"value"))de={value:Ue?JSON.stringify(de):de};else if((0,v.le)(de.value)||de.value===O.qS||!(0,v.HD)(de.value)&&!(0,v.hj)(de.value)&&!(0,v.jn)(de.value)&&!(0,v.kJ)(de.value))return null;if((0,v.kJ)(de.value)&&!$e(de.value))return null;if(!(0,v.le)(de.kind)){if((0,v.kJ)(de.value)||!G(de.kind))return null;de.value=de.value.toString()}return de}o(J,"sanitizeProperty");function fe(re,de,Ue){var Pe=-1;if(!(0,v.o8)(re))if(de>0&&(de===32?Pe=1<<13:de<=13&&(Pe=de<<5)),se(Ue))Pe===-1&&(Pe=0),Pe|=Ue;else{var ce=Ee[Xe(re)]||-1;Pe!==-1&&ce!==-1?Pe|=ce:ce===6&&(Pe=ce)}return Pe}o(fe,"getCommonSchemaMetaData");function De(){(0,I.JP)(null).setEnabled(!1)}o(De,"disableCookies");function Oe(re,de,Ue){(0,I.p7)(null)&&(0,I.JP)(null).set(re,de,Ue*86400,null,"/")}o(Oe,"setCookie");function oe(re){(0,I.p7)(null)&&(0,I.JP)(null).del(re)}o(oe,"deleteCookie");function Se(re){return(0,I.p7)(null)?D((0,I.JP)(null),re):O.qS}o(Se,"getCookie");function D(re,de,Ue){Ue===void 0&&(Ue=!0);var Pe;return re&&(Pe=re.get(de),Ue&&Pe&&decodeURIComponent&&(Pe=decodeURIComponent(Pe))),Pe||O.qS}o(D,"getCookieValue");function ze(re){re===void 0&&(re="D");var de=(0,y.GW)();return re==="B"?de="{"+de+"}":re==="P"?de="("+de+")":re==="N"&&(de=de.replace(/-/g,O.qS)),de}o(ze,"createGuid");function we(re,de,Ue,Pe,ce){var Ce={},Me=!1,Je=0,me=arguments.length,xe=Object[W.hB],Ze=arguments;for(xe.toString.call(Ze[0])==="[object Boolean]"&&(Me=Ze[0],Je++);Je<me;Je++){var re=Ze[Je];(0,v.rW)(re,function(_e,B){Me&&B&&(0,v.Kn)(B)?(0,v.kJ)(B)?(Ce[_e]=Ce[_e]||[],(0,v.tO)(B,function(K,Ye){K&&(0,v.Kn)(K)?Ce[_e][Ye]=we(!0,Ce[_e][Ye],K):Ce[_e][Ye]=K})):Ce[_e]=we(!0,Ce[_e],B):Ce[_e]=B})}return Ce}o(we,"extend");var ve=y.Jj;function G(re){return re===0||re>0&&re<=13||re===32}o(G,"isValueKind");function se(re){return re>=0&&re<=9}o(se,"isDataType");function Te(){var re=(0,R.jW)();if(!(0,v.o8)(re)&&re.userAgent){var de=re.userAgent.toLowerCase();if((de.indexOf("safari")>=0||de.indexOf("firefox")>=0)&&de.indexOf("chrome")<0)return!0}return!1}o(Te,"isSafariOrFirefox");function $e(re){return re.length>0}o($e,"isArrayValid");function ae(re,de){var Ue=re;Ue.timings=Ue.timings||{},Ue.timings.processTelemetryStart=Ue.timings.processTelemetryStart||{},Ue.timings.processTelemetryStart[de]=ve()}o(ae,"setProcessTelemetryTimings");function Xe(re){var de=0;if(re!=null){var Ue=typeof re;Ue==="string"?de=1:Ue==="number"?de=2:Ue==="boolean"?de=3:Ue===W.fK&&(de=4,(0,v.kJ)(re)?(de=4096,re.length>0&&(de|=Xe(re[0]))):W.CY.call(re,"value")&&(de=8192|Xe(re.value)))}return de}o(Xe,"getFieldValueType");var lt={Version:b,FullVersionString:$,strUndefined:W.jA,strObject:W.fK,Undefined:W.jA,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,objKeys:v.FY,toISOString:v.Y6,isReactNative:R.b$,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,isFunction:v.mf,isArray:v.kJ,isObject:v.Kn,strTrim:v.nd,isDocumentObjectAvailable:Z,isWindowObjectAvailable:ee,isValueAssigned:T,getTenantId:Y,isBeaconsSupported:R.MF,isUint8ArrayAvailable:k,isLatency:le,sanitizeProperty:J,getISOString:v.Y6,useXDomainRequest:R.cp,getCommonSchemaMetaData:fe,cookieAvailable:I.p7,disallowsSameSiteNone:I.UY,setCookie:Oe,deleteCookie:oe,getCookie:Se,createGuid:ze,extend:we,getTime:ve,isValueKind:G,isArrayValid:$e,objDefineAccessors:v.l_,addPageUnloadEventListener:N.c9,setProcessTelemetryTimings:ae,addEventHandler:N.Ib,getFieldValueType:Xe,strEndsWith:v.Id,objForEachKey:v.rW},mt={_canUseCookies:void 0,isTypeof:v.Ym,isUndefined:v.o8,isNullOrUndefined:v.le,hasOwnProperty:v.nr,isFunction:v.mf,isObject:v.Kn,isDate:v.J_,isArray:v.kJ,isError:v.VZ,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,toISOString:v.Y6,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,strTrim:v.nd,objCreate:w.pu,objKeys:v.FY,objDefineAccessors:v.l_,addEventHandler:N.Ib,dateNow:v.m6,isIE:R.w1,disableCookies:De,newGuid:y.GW,perfNow:y.Jj,newId:m.pZ,randomValue:m.az,random32:m._l,mwcRandomSeed:m.CN,mwcRandom32:m.F6,generateW3CId:y.DO};function P(){return!!(0,R.a8)("chrome")}o(P,"isChromium");function U(re,de,Ue,Pe,ce,Ce){Pe===void 0&&(Pe=!1),ce===void 0&&(ce=!1);function Me(me,xe,Ze){try{me[xe]=Ze}catch(tt){}}o(Me,"_wrapSetXhrProp");var Je=new XMLHttpRequest;return Pe&&Me(Je,F,Pe),Ue&&Me(Je,j,Ue),Je.open(re,de,!ce),Ue&&Me(Je,j,Ue),!ce&&Ce&&Me(Je,q,Ce),Je}o(U,"openXhr")},5229:(it,l,C)=>{"use strict";C.r(l),C.d(l,{BE_PROFILE:()=>Ze,NRT_PROFILE:()=>xe,PostChannel:()=>sa,RT_PROFILE:()=>me});var R=C(1088);/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var v,I="undefined",y="constructor",W="prototype",N="function",m="_dynInstFuncs",w="_isDynProxy",O="_dynClass",H="_dynCls$",b="_dynInstChk",$=b,F="_dfOpts",j="_unknown_",q="__proto__",Ee="_dyn"+q,z="__dynProto$Gbl",Z="_dynInstProto",ee="useBaseInst",T="setInstFuncs",Y=Object,k=Y.getPrototypeOf,le=Y.getOwnPropertyNames;function J(){var ke;return typeof globalThis!==I&&(ke=globalThis),!ke&&typeof self!==I&&(ke=self),!ke&&typeof window!==I&&(ke=window),!ke&&typeof C.g!==I&&(ke=C.g),ke||{}}o(J,"_getGlobal");var fe=J(),De=fe[z]||(fe[z]={o:(v={},v[T]=!0,v[ee]=!0,v),n:1e3});function Oe(ke,nt){return ke&&Y[W].hasOwnProperty.call(ke,nt)}o(Oe,"_hasOwnProperty");function oe(ke){return ke&&(ke===Y[W]||ke===Array[W])}o(oe,"_isObjectOrArrayPrototype");function Se(ke){return oe(ke)||ke===Function[W]}o(Se,"_isObjectArrayOrFunctionPrototype");function D(ke){var nt;if(ke){if(k)return k(ke);var yt=ke[q]||ke[W]||(ke[y]?ke[y][W]:null);nt=ke[Ee]||yt,Oe(ke,Ee)||(delete ke[Z],nt=ke[Ee]=ke[Z]||ke[Ee],ke[Z]=yt)}return nt}o(D,"_getObjProto");function ze(ke,nt){var yt=[];if(le)yt=le(ke);else for(var rt in ke)typeof rt=="string"&&Oe(ke,rt)&&yt.push(rt);if(yt&&yt.length>0)for(var Lt=0;Lt<yt.length;Lt++)nt(yt[Lt])}o(ze,"_forEachProp");function we(ke,nt,yt){return nt!==y&&typeof ke[nt]===N&&(yt||Oe(ke,nt))}o(we,"_isDynamicCandidate");function ve(ke){throw new TypeError("DynamicProto: "+ke)}o(ve,"_throwTypeError");function G(ke){var nt={};return ze(ke,function(yt){!nt[yt]&&we(ke,yt,!1)&&(nt[yt]=ke[yt])}),nt}o(G,"_getInstanceFuncs");function se(ke,nt){for(var yt=ke.length-1;yt>=0;yt--)if(ke[yt]===nt)return!0;return!1}o(se,"_hasVisited");function Te(ke,nt,yt,rt){function Lt(Ut,pn,_n){var tr=pn[_n];if(tr[w]&&rt){var $n=Ut[m]||{};$n[$]!==!1&&(tr=($n[pn[O]]||{})[_n]||tr)}return function(){return tr.apply(Ut,arguments)}}o(Lt,"_instFuncProxy");var Gt={};ze(yt,function(Ut){Gt[Ut]=Lt(nt,yt,Ut)});for(var wt=D(ke),Qt=[];wt&&!Se(wt)&&!se(Qt,wt);)ze(wt,function(Ut){!Gt[Ut]&&we(wt,Ut,!k)&&(Gt[Ut]=Lt(nt,wt,Ut))}),Qt.push(wt),wt=D(wt);return Gt}o(Te,"_getBaseFuncs");function $e(ke,nt,yt,rt){var Lt=null;if(ke&&Oe(yt,O)){var Gt=ke[m]||{};if(Lt=(Gt[yt[O]]||{})[nt],Lt||ve("Missing ["+nt+"] "+N),!Lt[b]&&Gt[$]!==!1){for(var wt=!Oe(ke,nt),Qt=D(ke),Ut=[];wt&&Qt&&!Se(Qt)&&!se(Ut,Qt);){var pn=Qt[nt];if(pn){wt=pn===rt;break}Ut.push(Qt),Qt=D(Qt)}try{wt&&(ke[nt]=Lt),Lt[b]=1}catch(_n){Gt[$]=!1}}}return Lt}o($e,"_getInstFunc");function ae(ke,nt,yt){var rt=nt[ke];return rt===yt&&(rt=D(nt)[ke]),typeof rt!==N&&ve("["+ke+"] is not a "+N),rt}o(ae,"_getProtoFunc");function Xe(ke,nt,yt,rt,Lt){function Gt(Ut,pn){var _n=o(function(){var tr=$e(this,pn,Ut,_n)||ae(pn,Ut,_n);return tr.apply(this,arguments)},"dynProtoProxy");return _n[w]=1,_n}if(o(Gt,"_createDynamicPrototype"),!oe(ke)){var wt=yt[m]=yt[m]||{},Qt=wt[nt]=wt[nt]||{};wt[$]!==!1&&(wt[$]=!!Lt),ze(yt,function(Ut){we(yt,Ut,!1)&&yt[Ut]!==rt[Ut]&&(Qt[Ut]=yt[Ut],delete yt[Ut],(!Oe(ke,Ut)||ke[Ut]&&!ke[Ut][w])&&(ke[Ut]=Gt(ke,Ut)))})}}o(Xe,"_populatePrototype");function lt(ke,nt){if(k){for(var yt=[],rt=D(nt);rt&&!Se(rt)&&!se(yt,rt);){if(rt===ke)return!0;yt.push(rt),rt=D(rt)}return!1}return!0}o(lt,"_checkPrototype");function mt(ke,nt){return Oe(ke,W)?ke.name||nt||j:((ke||{})[y]||{}).name||nt||j}o(mt,"_getObjName");function P(ke,nt,yt,rt){Oe(ke,W)||ve("theClass is an invalid class definition.");var Lt=ke[W];lt(Lt,nt)||ve("["+mt(ke)+"] not in hierarchy of ["+mt(nt)+"]");var Gt=null;Oe(Lt,O)?Gt=Lt[O]:(Gt=H+mt(ke,"_")+"$"+De.n,De.n++,Lt[O]=Gt);var wt=P[F],Qt=!!wt[ee];Qt&&rt&&rt[ee]!==void 0&&(Qt=!!rt[ee]);var Ut=G(nt),pn=Te(Lt,nt,Ut,Qt);yt(nt,pn);var _n=!!k&&!!wt[T];_n&&rt&&(_n=!!rt[T]),Xe(Lt,Gt,nt,Ut,_n!==!1)}o(P,"dynamicProto"),P[F]=De.o;var U=C(9288),re=C(4869),de=C(5883),Ue=C(3599),Pe=C(6708),ce=C(7630),Ce=C(5928),Me=C(5018),Je=C(4063),me="REAL_TIME",xe="NEAR_REAL_TIME",Ze="BEST_EFFORT",tt="",_e="POST",B="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",K="drop",Ye="send",Jt="requeue",Tn="rspFail",Pn="oth",Sn="no-cache, no-store",sr="application/x-json-stream",or="cache-control",vr="content-type",lr="kill-tokens",pr="kill-duration",ft="kill-duration-seconds",Kt="time-delta-millis",rn="client-version",on="client-id",Vt="time-delta-to-apply-millis",En="upload-time",jn="apikey",fr="AuthMsaDeviceTicket",Xn="AuthXToken",Dr="sdk-version",$r="NoResponseBody",Cr="msfpc",Rr="trace",Fr="user";function xn(ke){var nt=(ke.ext||{}).intweb;return nt&&(0,Ue.Sn)(nt[Cr])?nt[Cr]:null}o(xn,"_getEventMsfpc");function Bn(ke){for(var nt=null,yt=0;nt===null&&yt<ke.length;yt++)nt=xn(ke[yt]);return nt}o(Bn,"_getMsfpc");var _r=function(){function ke(nt,yt){var rt=yt?[].concat(yt):[],Lt=this,Gt=Bn(rt);Lt.iKey=function(){return nt},Lt.Msfpc=function(){return Gt||tt},Lt.count=function(){return rt.length},Lt.events=function(){return rt},Lt.addEvent=function(wt){return wt?(rt.push(wt),Gt||(Gt=xn(wt)),!0):!1},Lt.split=function(wt,Qt){var Ut;if(wt<rt.length){var pn=rt.length-wt;(0,Pe.le)(Qt)||(pn=Qt<pn?Qt:pn),Ut=rt.splice(wt,pn),Gt=Bn(rt)}return new ke(nt,Ut)}}return o(ke,"EventBatch"),ke.create=function(nt,yt){return new ke(nt,yt)},ke}(),Kr=function(){function ke(){var nt=!0,yt=!0,rt=!0,Lt="use-collector-delta",Gt=!1;P(ke,this,function(wt){wt.allowRequestSending=function(){return nt},wt.firstRequestSent=function(){rt&&(rt=!1,Gt||(nt=!1))},wt.shouldAddClockSkewHeaders=function(){return yt},wt.getClockSkewHeaderValue=function(){return Lt},wt.setClockSkew=function(Qt){Gt||(Qt?(Lt=Qt,yt=!0,Gt=!0):yt=!1,nt=!0)}})}return o(ke,"ClockSkewManager"),ke.__ieDyn=1,ke}();const Tr=Kr;var vi=1e3,br=function(){function ke(){var nt={};function yt(rt){var Lt=[];return rt&&(0,Pe.tO)(rt,function(Gt){Lt.push((0,Pe.nd)(Gt))}),Lt}o(yt,"_normalizeTenants"),P(ke,this,function(rt){rt.setKillSwitchTenants=function(Lt,Gt){if(Lt&&Gt)try{var wt=yt(Lt.split(","));if(Gt==="this-request-only")return wt;for(var Qt=parseInt(Gt,10)*vi,Ut=0;Ut<wt.length;++Ut)nt[wt[Ut]]=(0,Pe.m6)()+Qt}catch(pn){return[]}return[]},rt.isTenantKilled=function(Lt){var Gt=nt,wt=(0,Pe.nd)(Lt);return Gt[wt]!==void 0&&Gt[wt]>(0,Pe.m6)()?!0:(delete Gt[wt],!1)}})}return o(ke,"KillSwitch"),ke.__ieDyn=1,ke}();const M=br;var ue=C(4392),Ae=.8,Le=1.2,et=3e3,je=6e5;function ct(ke){return!(ke>=300&&ke<500&&ke!=408&&ke!=429||ke==501||ke==505)}o(ct,"retryPolicyShouldRetryForStatus");function Dt(ke){var nt=0,yt=et*Ae,rt=et*Le,Lt=Math.floor(Math.random()*(rt-yt))+yt;return nt=Math.pow(2,ke)*Lt,Math.min(nt,je)}o(Dt,"retryPolicyGetMillisToBackoffForRetry");var Rt=20,_t=3984588,Ct=65e3,Ft=2e6,Bt=Math.min(Ft,Ct),Nt="metadata",kt="f",Jn=/\./,An=function(){function ke(nt,yt,rt,Lt){var Gt="data",wt="baseData",Qt="ext",Ut=!!Lt,pn=!0,_n=yt,tr={};P(ke,this,function($n){$n.createPayload=function(jt,sn,yn,Xt,x,te){return{apiKeys:[],payloadBlob:tt,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:jt,isTeardown:sn,isSync:yn,isBeacon:Xt,sendType:te,sendReason:x}},$n.appendPayload=function(jt,sn,yn){var Xt=jt&&sn&&!jt.overflow;return Xt&&(0,U.Lm)(nt,function(){return"Serializer:appendPayload"},function(){for(var x=sn.events(),te=jt.payloadBlob,Re=jt.numEvents,at=!1,Et=[],Mt=[],gn=jt.isBeacon,vn=gn?Ct:_t,en=gn?Bt:Ft,tn=0,mn=0;tn<x.length;){var $t=x[tn];if($t){if(Re>=yn){jt.overflow=sn.split(tn);break}var St=$n.getEventBlob($t);if(St&&St.length<=en){var bn=St.length,Fn=te.length;if(Fn+bn>vn){jt.overflow=sn.split(tn);break}te&&(te+=`
`),te+=St,mn++,mn>Rt&&(te.substr(0,1),mn=0),at=!0,Re++}else St?Et.push($t):Mt.push($t),x.splice(tn,1),tn--}tn++}if(Et&&Et.length>0&&jt.sizeExceed.push(_r.create(sn.iKey(),Et)),Mt&&Mt.length>0&&jt.failedEvts.push(_r.create(sn.iKey(),Mt)),at){jt.batches.push(sn),jt.payloadBlob=te,jt.numEvents=Re;var Nn=sn.iKey();(0,Pe.UA)(jt.apiKeys,Nn)===-1&&jt.apiKeys.push(Nn)}},function(){return{payload:jt,theBatch:{iKey:sn.iKey(),evts:sn.events()},max:yn}}),Xt},$n.getEventBlob=function(jt){try{return(0,U.Lm)(nt,function(){return"Serializer.getEventBlob"},function(){var sn={};sn.name=jt.name,sn.time=jt.time,sn.ver=jt.ver,sn.iKey="o:"+(0,Ue.jM)(jt.iKey);var yn={},Xt=jt[Qt];Xt&&(sn[Qt]=yn,(0,Pe.rW)(Xt,function(Re,at){var Et=yn[Re]={};Hn(at,Et,"ext."+Re,!0,null,null,!0)}));var x=sn[Gt]={};x.baseType=jt.baseType;var te=x[wt]={};return Hn(jt.baseData,te,wt,!1,[wt],function(Re,at,Et){mr(yn,Re,at,Et)},pn),Hn(jt.data,x,Gt,!1,[],function(Re,at,Et){mr(yn,Re,at,Et)},pn),JSON.stringify(sn)},function(){return{item:jt}})}catch(sn){return null}};function nr(jt,sn){var yn=tr[jt];return yn===void 0&&(jt.length>=7&&(yn=(0,Pe.xe)(jt,"ext.metadata")||(0,Pe.xe)(jt,"ext.web")),tr[jt]=yn),yn}o(nr,"_isReservedField");function Hn(jt,sn,yn,Xt,x,te,Re){(0,Pe.rW)(jt,function(at,Et){var Mt=null;if(Et||(0,Ue.Sn)(Et)){var gn=yn,vn=at,en=x,tn=sn;if(Ut&&!Xt&&Jn.test(at)){var mn=at.split("."),$t=mn.length;if($t>1){en&&(en=en.slice());for(var St=0;St<$t-1;St++){var bn=mn[St];tn=tn[bn]=tn[bn]||{},gn+="."+bn,en&&en.push(bn)}vn=mn[$t-1]}}var Fn=Xt&&nr(gn,vn);if(!Fn&&_n&&_n.handleField(gn,vn)?Mt=_n.value(gn,vn,Et,rt):Mt=(0,Ue.yj)(vn,Et,rt),Mt){var Nn=Mt.value;if(tn[vn]=Nn,te&&te(en,vn,Mt),Re&&typeof Nn=="object"&&!(0,Pe.kJ)(Nn)){var kn=en;kn&&(kn=kn.slice(),kn.push(vn)),Hn(Et,Nn,gn+"."+vn,Xt,kn,te,Re)}}}})}o(Hn,"_processPathKeys")})}return o(ke,"Serializer"),ke.__ieDyn=1,ke}();function mr(ke,nt,yt,rt){if(rt&&ke){var Lt=(0,Ue.Vv)(rt.value,rt.kind,rt.propertyType);if(Lt>-1){var Gt=ke[Nt];Gt||(Gt=ke[Nt]={f:{}});var wt=Gt[kt];if(wt||(wt=Gt[kt]={}),nt)for(var Qt=0;Qt<nt.length;Qt++){var Ut=nt[Qt];wt[Ut]||(wt[Ut]={f:{}});var pn=wt[Ut][kt];pn||(pn=wt[Ut][kt]={}),wt=pn}wt=wt[yt]={},(0,Pe.kJ)(rt.value)?wt.a={t:Lt}:wt.t=Lt}}}o(mr,"_addJSONPropertyMetaData");var qn,cr="sendAttempt",Gr="&"+$r+"=true",zr=(qn={},qn[1]=Jt,qn[100]=Jt,qn[200]="sent",qn[8004]=K,qn[8003]=K,qn),Gn={},pi={};function zt(ke,nt,yt){Gn[ke]=nt,yt!==!1&&(pi[nt]=ke)}o(zt,"_addCollectorHeaderQsMapping"),zt(fr,fr,!1),zt(rn,rn),zt(on,"Client-Id"),zt(jn,jn),zt(Vt,Vt),zt(En,En),zt(Xn,Xn);function Zn(ke){try{return ke.responseText}catch(nt){}return tt}o(Zn,"_getResponseText");function Dn(ke,nt){var yt=!1;if(ke&&nt){var rt=(0,Pe.FY)(ke);if(rt&&rt.length>0)for(var Lt=nt.toLowerCase(),Gt=0;Gt<rt.length;Gt++){var wt=rt[Gt];if(wt&&(0,Pe.nr)(nt,wt)&&wt.toLowerCase()===Lt){yt=!0;break}}}return yt}o(Dn,"_hasHeader");function Cn(ke,nt,yt,rt){nt&&yt&&yt.length>0&&(rt&&Gn[nt]?(ke.hdrs[Gn[nt]]=yt,ke.useHdrs=!0):ke.url+="&"+nt+"="+yt)}o(Cn,"_addRequestDetails");function fn(ke,nt){return nt&&((0,Pe.hj)(nt)?ke=[nt].concat(ke):(0,Pe.kJ)(nt)&&(ke=nt.concat(ke))),ke}o(fn,"_prependTransports");var er=function(){function ke(nt,yt,rt,Lt,Gt){this._responseHandlers=[];var wt="?cors=true&"+vr.toLowerCase()+"="+sr,Qt=new M,Ut=!1,pn=new Tr,_n=!1,tr=0,$n,nr,Hn,jt,sn=!0,yn=[],Xt={},x=[],te=null,Re=!1,at,Et=!1,Mt=!1,gn,vn,en,tn,mn;P(ke,this,function($t){var St=!0;$t.initialize=function(he,qe,st,ut,Tt){var Ot;Tt||(Tt={}),wt=he+wt,Mt=(0,Pe.o8)(Tt.avoidOptions)?!0:!Tt.avoidOptions,jt=qe,at=qe.getCookieMgr(),Re=!jt.config.disableEventTimings;var ln=!!jt.config.enableCompoundKey;$n=st,nr=$n.diagLog();var ge=Tt.valueSanitizer,Ge=Tt.stringifyObjects;(0,Pe.o8)(Tt.enableCompoundKey)||(ln=!!Tt.enableCompoundKey),gn=Tt.xhrTimeout,vn=!!Tt.disableXhrSync,en=!!Tt.disableFetchKeepAlive,mn=Tt.addNoResponse!==!1,_n=!(0,ce.b$)(),te=new An(jt,ge,Ge,ln),(0,Pe.le)(Tt.useSendBeacon)||(_n=!!Tt.useSendBeacon);var He=ut,ht=Tt.alwaysUseXhrOverride?ut:null,xt=Tt.alwaysUseXhrOverride?ut:null,Ht=[3,2];if(!ut){sn=!1;var an=(0,ce.k$)();an&&an.protocol&&an.protocol.toLowerCase()==="file:"&&(St=!1);var Ln=[];(0,ce.b$)()?(Ln=[2,1],Ht=[2,1,3]):Ln=[1,2,3],Ln=fn(Ln,Tt.transports),ut=bn(Ln,!1),ut||(0,Me.jV)(nr,"No available transport to send events"),He=bn(Ln,!0)}ht||(Ht=fn(Ht,Tt.unloadTransports),ht=bn(Ht,!0)),tn=!sn&&(_n&&(0,ce.MF)()||!en&&(0,ce.JO)(!0)),Hn=(Ot={},Ot[0]=ut,Ot[1]=He||bn([1,2,3],!0),Ot[2]=ht||He||bn([1],!0),Ot[3]=xt||bn([2,3],!0)||He||bn([1],!0),Ot)};function bn(he,qe){for(var st=0,ut=null,Tt=0;ut==null&&Tt<he.length;)st=he[Tt],st===1?(0,ce.cp)()?ut=Fn:(0,ce.Z3)()&&(ut=kn):st===2&&(0,ce.JO)(qe)&&(!qe||qe&&!en)?ut=Nn:_n&&st===3&&(0,ce.MF)()&&(ut=Br),Tt++;return ut?{_transport:st,_isSync:qe,sendPOST:ut}:null}o(bn,"_getSenderInterface"),$t._getDbgPlgTargets=function(){return[Hn[0],Qt,te,Hn]};function Fn(he,qe,st){var ut=new XDomainRequest;ut.open(_e,he.urlString),he.timeout&&(ut.timeout=he.timeout),ut.onload=function(){var Tt=Zn(ut);Yt(qe,200,{},Tt),li(Tt)},ut.onerror=function(){Yt(qe,400,{})},ut.ontimeout=function(){Yt(qe,500,{})},ut.onprogress=function(){},st?ut.send(he.data):Gt.set(function(){ut.send(he.data)},0)}o(Fn,"_xdrSendPost");function Nn(he,qe,st){var ut,Tt=he.urlString,Ot=!1,ln=!1,ge=(ut={body:he.data,method:_e},ut[B]=!0,ut);st&&(ge.keepalive=!0,he._sendReason===2&&(Ot=!0,mn&&(Tt+=Gr))),St&&(ge.credentials="include"),he.headers&&(0,Pe.FY)(he.headers).length>0&&(ge.headers=he.headers),fetch(Tt,ge).then(function(Ge){var He={},ht=tt,xt=Ge.headers;xt&&xt.forEach(function(Ht,an){He[an]=Ht}),Ge.body&&Ge.text().then(function(Ht){ht=Ht}),ln||(ln=!0,Yt(qe,Ge.status,He,ht),li(ht))}).catch(function(Ge){ln||(ln=!0,Yt(qe,0,{}))}),Ot&&!ln&&(ln=!0,Yt(qe,200,{})),!ln&&he.timeout>0&&Gt.set(function(){ln||(ln=!0,Yt(qe,500,{}))},he.timeout)}o(Nn,"_fetchSendPost");function kn(he,qe,st){var ut=he.urlString;function Tt(Ge,He,ht){if(!Ge[ht]&&He&&He.getResponseHeader){var xt=He.getResponseHeader(ht);xt&&(Ge[ht]=(0,Pe.nd)(xt))}return Ge}o(Tt,"_appendHeader");function Ot(Ge){var He={};return Ge.getAllResponseHeaders?He=Ei(Ge.getAllResponseHeaders()):(He=Tt(He,Ge,Kt),He=Tt(He,Ge,pr),He=Tt(He,Ge,ft)),He}o(Ot,"_getAllResponseHeaders");function ln(Ge,He){Yt(qe,Ge.status,Ot(Ge),He)}o(ln,"xhrComplete"),st&&he.disableXhrSync&&(st=!1);var ge=(0,Ue.ot)(_e,ut,St,!0,st,he.timeout);(0,Pe.rW)(he.headers,function(Ge,He){ge.setRequestHeader(Ge,He)}),ge.onload=function(){var Ge=Zn(ge);ln(ge,Ge),li(Ge)},ge.onerror=function(){ln(ge)},ge.ontimeout=function(){ln(ge)},ge.send(he.data)}o(kn,"_xhrSendPost");function Yt(he,qe,st,ut){try{he(qe,st,ut)}catch(Tt){(0,Me.kP)(nr,2,518,(0,ce.eU)(Tt))}}o(Yt,"_doOnComplete");function Br(he,qe,st){var ut=he,Tt=200,Ot=ut._thePayload,ln=he.urlString+(mn?Gr:tt);try{var ge=(0,ce.jW)();if(!ge.sendBeacon(ln,he.data))if(Ot){var Ge=[];(0,Pe.tO)(Ot.batches,function(He){if(Ge&&He&&He.count()>0){for(var ht=He.events(),xt=0;xt<ht.length;xt++)if(!ge.sendBeacon(ln,te.getEventBlob(ht[xt]))){Ge.push(He.split(xt));break}}else Ge.push(He.split(0))}),hr(Ge,8003,Ot.sendType,!0)}else Tt=0}catch(He){(0,Me.jV)(nr,"Failed to send telemetry using sendBeacon API. Ex:"+(0,ce.eU)(He)),Tt=0}finally{Yt(qe,Tt,{},tt)}}o(Br,"_beaconSendPost");function Er(he){return he===2||he===3}o(Er,"_isBeaconPayload");function Un(he){return Et&&Er(he)&&(he=2),he}o(Un,"_adjustSendType"),$t.addQueryStringParameter=function(he,qe){for(var st=0;st<yn.length;st++)if(yn[st].name===he){yn[st].value=qe;return}yn.push({name:he,value:qe})},$t.addHeader=function(he,qe){Xt[he]=qe},$t.canSendRequest=function(){return rr()&&pn.allowRequestSending()},$t.sendQueuedRequests=function(he,qe){(0,Pe.o8)(he)&&(he=0),Et&&(he=Un(he),qe=2),Hr(x,he,0)&&qr(Vn(),0,!1,he,qe||0)},$t.isCompletelyIdle=function(){return!Ut&&tr===0&&x.length===0},$t.setUnloading=function(he){Et=he},$t.addBatch=function(he){if(he&&he.count()>0){if(Qt.isTenantKilled(he.iKey()))return!1;x.push(he)}return!0},$t.teardown=function(){x.length>0&&qr(Vn(),0,!0,2,2)},$t.pause=function(){Ut=!0},$t.resume=function(){Ut=!1,$t.sendQueuedRequests(0,4)},$t.sendSynchronousBatch=function(he,qe,st){he&&he.count()>0&&((0,Pe.le)(qe)&&(qe=1),Et&&(qe=Un(qe),st=2),qr([he],0,!1,qe,st||0))};function rr(){return!Ut&&tr<yt}o(rr,"_hasIdleConnection");function Vn(){var he=x;return x=[],he}o(Vn,"_clearQueue");function Hr(he,qe,st){var ut=!1;return he&&he.length>0&&!Ut&&Hn[qe]&&te&&(ut=qe!==0||rr()&&(st>0||pn.allowRequestSending())),ut}o(Hr,"_canSendPayload");function yr(he){var qe={};return he&&(0,Pe.tO)(he,function(st,ut){qe[ut]={iKey:st.iKey(),evts:st.events()}}),qe}o(yr,"_createDebugBatches");function qr(he,qe,st,ut,Tt){if(!(!he||he.length===0)){if(Ut){hr(he,1,ut);return}ut=Un(ut);try{var Ot=he,ln=ut!==0;(0,U.Lm)(jt,function(){return"HttpManager:_sendBatches"},function(ge){ge&&(he=he.slice(0));for(var Ge=[],He=null,ht=(0,Ue.hK)(),xt=Hn[ut]||(ln?Hn[1]:Hn[0]),Ht=xt&&xt._transport,an=tn&&(Et||Er(ut)||Ht===3||xt._isSync&&Ht===2);Hr(he,ut,qe);){var Ln=he.shift();Ln&&Ln.count()>0&&(Qt.isTenantKilled(Ln.iKey())?Ge.push(Ln):(He=He||te.createPayload(qe,st,ln,an,Tt,ut),te.appendPayload(He,Ln,nt)?He.overflow!==null&&(he=[He.overflow].concat(he),He.overflow=null,Ci(He,ht,(0,Ue.hK)(),Tt),ht=(0,Ue.hK)(),He=null):(Ci(He,ht,(0,Ue.hK)(),Tt),ht=(0,Ue.hK)(),he=[Ln].concat(he),He=null)))}He&&Ci(He,ht,(0,Ue.hK)(),Tt),he.length>0&&(x=he.concat(x)),hr(Ge,8004,ut)},function(){return{batches:yr(Ot),retryCount:qe,isTeardown:st,isSynchronous:ln,sendReason:Tt,useSendBeacon:Er(ut),sendType:ut}},!ln)}catch(ge){(0,Me.kP)(nr,2,48,"Unexpected Exception sending batch: "+(0,ce.eU)(ge))}}}o(qr,"_sendBatches");function Qr(he,qe){var st={url:wt,hdrs:{},useHdrs:!1};qe?(st.hdrs=(0,Ue.l7)(st.hdrs,Xt),st.useHdrs=(0,Pe.FY)(st.hdrs).length>0):(0,Pe.rW)(Xt,function(ge,Ge){pi[ge]?Cn(st,pi[ge],Ge,!1):(st.hdrs[ge]=Ge,st.useHdrs=!0)}),Cn(st,on,"NO_AUTH",qe),Cn(st,rn,Ue.vs,qe);var ut=tt;(0,Pe.tO)(he.apiKeys,function(ge){ut.length>0&&(ut+=","),ut+=ge}),Cn(st,jn,ut,qe),Cn(st,En,(0,Pe.m6)().toString(),qe);var Tt=Xr(he);if((0,Ue.Sn)(Tt)&&(st.url+="&ext.intweb.msfpc="+Tt),pn.shouldAddClockSkewHeaders()&&Cn(st,Vt,pn.getClockSkewHeaderValue(),qe),jt.getWParam){var Ot=jt.getWParam();Ot>=0&&(st.url+="&w="+Ot)}for(var ln=0;ln<yn.length;ln++)st.url+="&"+yn[ln].name+"="+yn[ln].value;return st}o(Qr,"_buildRequestDetails");function Yr(he,qe,st){he[qe]=he[qe]||{},he[qe][$n.identifier]=st}o(Yr,"_setTimingValue");function Ci(he,qe,st,ut){if(he&&he.payloadBlob&&he.payloadBlob.length>0){var Tt=!!$t.sendHook,Ot=Hn[he.sendType];!Er(he.sendType)&&he.isBeacon&&he.sendReason===2&&(Ot=Hn[2]||Hn[3]||Ot);var ln=Mt;(he.isBeacon||Ot._transport===3)&&(ln=!1);var ge=Qr(he,ln);ln=ln||ge.useHdrs;var Ge=(0,Ue.hK)();(0,U.Lm)(jt,function(){return"HttpManager:_doPayloadSend"},function(){for(var He=0;He<he.batches.length;He++)for(var ht=he.batches[He],xt=ht.events(),Ht=0;Ht<xt.length;Ht++){var an=xt[Ht];if(Re){var Ln=an.timings=an.timings||{};Yr(Ln,"sendEventStart",Ge),Yr(Ln,"serializationStart",qe),Yr(Ln,"serializationCompleted",st)}an[cr]>0?an[cr]++:an[cr]=1}hr(he.batches,1e3+(ut||0),he.sendType,!0);var zn={data:he.payloadBlob,urlString:ge.url,headers:ge.hdrs,_thePayload:he,_sendReason:ut,timeout:gn,disableXhrSync:vn,disableFetchKeepAlive:en};ln&&(Dn(zn.headers,or)||(zn.headers[or]=Sn),Dn(zn.headers,vr)||(zn.headers[vr]=sr));var ii=null;Ot&&(ii=o(function(Ni){pn.firstRequestSent();var Oi=o(function(Bi,Hi){_i(Bi,Hi,he,ut)},"onComplete"),ir=he.isTeardown||he.isSync;try{Ot.sendPOST(Ni,Oi,ir),$t.sendListener&&$t.sendListener(zn,Ni,ir,he.isBeacon)}catch(Bi){(0,Me.jV)(nr,"Unexpected exception sending payload. Ex:"+(0,ce.eU)(Bi)),Yt(Oi,0,{})}},"sender")),(0,U.Lm)(jt,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(ii)if(he.sendType===0&&tr++,Tt&&!he.isBeacon&&Ot._transport!==3){var Ni={data:zn.data,urlString:zn.urlString,headers:(0,Ue.l7)({},zn.headers),timeout:zn.timeout,disableXhrSync:zn.disableXhrSync,disableFetchKeepAlive:zn.disableFetchKeepAlive},Oi=!1;(0,U.Lm)(jt,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{$t.sendHook(Ni,function(ir){Oi=!0,!sn&&!ir._thePayload&&(ir._thePayload=ir._thePayload||zn._thePayload,ir._sendReason=ir._sendReason||zn._sendReason),ii(ir)},he.isSync||he.isTeardown)}catch(ir){Oi||ii(zn)}})}else ii(zn)})},function(){return{thePayload:he,serializationStart:qe,serializationCompleted:st,sendReason:ut}},he.isSync)}he.sizeExceed&&he.sizeExceed.length>0&&hr(he.sizeExceed,8003,he.sendType),he.failedEvts&&he.failedEvts.length>0&&hr(he.failedEvts,8002,he.sendType)}o(Ci,"_doPayloadSend");function si(he,qe){Re&&(0,Pe.tO)(he,function(st){var ut=st.timings=st.timings||{};Yr(ut,"sendEventCompleted",qe)})}o(si,"_addEventCompletedTimings");function _i(he,qe,st,ut){var Tt=9e3,Ot=null,ln=!1,ge=!1;try{var Ge=!0;if(typeof he!==ue.jA){if(qe){pn.setClockSkew(qe[Kt]);var He=qe[pr]||qe["kill-duration-seconds"];(0,Pe.tO)(Qt.setKillSwitchTenants(qe[lr],He),function(xt){(0,Pe.tO)(st.batches,function(Ht){if(Ht.iKey()===xt){Ot=Ot||[];var an=Ht.split(0);st.numEvents-=an.count(),Ot.push(an)}})})}if(he==200||he==204){Tt=200;return}(!ct(he)||st.numEvents<=0)&&(Ge=!1),Tt=9e3+he%1e3}if(Ge){Tt=100;var ht=st.retryCnt;st.sendType===0&&(ht<rt?(ln=!0,Lr(function(){st.sendType===0&&tr--,qr(st.batches,ht+1,st.isTeardown,Et?2:st.sendType,5)},Et,Dt(ht))):(ge=!0,Et&&(Tt=8001)))}}finally{ln||(pn.setClockSkew(),ri(st,Tt,ut,ge)),hr(Ot,8004,st.sendType)}}o(_i,"_retryRequestIfNeeded");function ri(he,qe,st,ut){try{ut&&$n._backOffTransmission(),qe===200&&(!ut&&!he.isSync&&$n._clearBackOff(),bi(he.batches)),hr(he.batches,qe,he.sendType,!0)}finally{he.sendType===0&&(tr--,st!==5&&$t.sendQueuedRequests(he.sendType,st))}}o(ri,"_handleRequestFinished");function bi(he){if(Re){var qe=(0,Ue.hK)();(0,Pe.tO)(he,function(st){st&&st.count()>0&&si(st.events(),qe)})}}o(bi,"_addCompleteTimings");function Lr(he,qe,st){qe?he():Gt.set(he,st)}o(Lr,"_doAction");function Ei(he){var qe={};if((0,Pe.HD)(he)){var st=(0,Pe.nd)(he).split(/[\r\n]+/);(0,Pe.tO)(st,function(ut){if(ut){var Tt=ut.indexOf(": ");if(Tt!==-1){var Ot=(0,Pe.nd)(ut.substring(0,Tt)).toLowerCase(),ln=(0,Pe.nd)(ut.substring(Tt+1));qe[Ot]=ln}else qe[(0,Pe.nd)(ut)]=1}})}return qe}o(Ei,"_convertAllHeadersToMap");function Xr(he){for(var qe=0;qe<he.batches.length;qe++){var st=he.batches[qe].Msfpc();if(st)return encodeURIComponent(st)}return tt}o(Xr,"_getMsfpc");function li(he){var qe=$t._responseHandlers;try{for(var st=0;st<qe.length;st++)try{qe[st](he)}catch(Tt){(0,Me.kP)(nr,1,519,"Response handler failed: "+Tt)}if(he){var ut=JSON.parse(he);(0,Ue.Sn)(ut.webResult)&&(0,Ue.Sn)(ut.webResult[Cr])&&at.set("MSFPC",ut.webResult[Cr],365*86400)}}catch(Tt){}}o(li,"_handleCollectorResponse");function hr(he,qe,st,ut){if(he&&he.length>0&&Lt){var Tt=Lt[Jr(qe)];if(Tt){var Ot=st!==0;(0,U.Lm)(jt,function(){return"HttpManager:_sendBatchesNotification"},function(){Lr(function(){try{Tt.call(Lt,he,qe,Ot,st)}catch(ln){(0,Me.kP)(nr,1,74,"send request notification failed: "+ln)}},ut||Ot,0)},function(){return{batches:yr(he),reason:qe,isSync:Ot,sendSync:ut,sendType:st}},!Ot)}}}o(hr,"_sendBatchesNotification");function Jr(he){var qe=zr[he];return(0,Ue.Sn)(qe)||(qe=Pn,he>=9e3&&he<=9999?qe=Tn:he>=8e3&&he<=8999?qe=K:he>=1e3&&he<=1999&&(qe=Ye)),qe}o(Jr,"_getNotificationAction")})}return o(ke,"HttpManager"),ke.__ieDyn=1,ke}();function Qn(ke,nt){for(var yt=[],rt=2;rt<arguments.length;rt++)yt[rt-2]=arguments[rt];return setTimeout(ke,nt,yt)}o(Qn,"defaultSetTimeout");function Nr(ke){clearTimeout(ke)}o(Nr,"defaultClearTimeout");function mi(ke,nt){return{set:ke||Qn,clear:nt||Nr}}o(mi,"createTimeoutWrapper");var yi=.25,xi=500,wi=20,Or=6,Si=2,oa=4,Ji=2,ki=1,ei="eventsDiscarded",ti="overrideInstrumentationKey",ni="maxEventRetryAttempts",ea="maxUnloadEventRetryAttempts",Fi="addUnloadCb",oi=function(ke){(0,R.ne)(nt,ke);function nt(){var yt=ke.call(this)||this;yt.identifier="PostChannel",yt.priority=1011,yt.version="3.2.10";var rt,Lt=!1,Gt=[],wt=null,Qt=!1,Ut=0,pn=500,_n=0,tr=1e4,$n={},nr=me,Hn=null,jt=null,sn=0,yn=0,Xt,x,te={},Re,at,Et=-1,Mt,gn=!0,vn=!1,en=Or,tn=Si,mn,$t;return P(nt,yt,function(St,bn){rr(),St._getDbgPlgTargets=function(){return[x]},St.initialize=function(ge,Ge,He){(0,U.Lm)(Ge,function(){return"PostChannel:initialize"},function(){var ht=Ge;bn.initialize(ge,Ge,He);try{var xt=!!Ge[Fi];mn=(0,re.jU)((0,de.J)(St.identifier),Ge.evtNamespace&&Ge.evtNamespace());var Ht=St._getTelCtx();ge.extensionConfig[St.identifier]=ge.extensionConfig[St.identifier]||{},rt=Ht.getExtCfg(St.identifier),$t=mi(rt.setTimeoutOverride,rt.clearTimeoutOverride),gn=!rt.disableOptimizeObj&&(0,Ue.mJ)(),Fn(ht),rt.eventsLimitInMem>0&&(tr=rt.eventsLimitInMem),rt.immediateEventLimit>0&&(pn=rt.immediateEventLimit),rt.autoFlushEventsLimit>0&&(Re=rt.autoFlushEventsLimit),(0,Pe.hj)(rt[ni])&&(en=rt[ni]),(0,Pe.hj)(rt[ea])&&(tn=rt[ea]),ln(),rt.httpXHROverride&&rt.httpXHROverride.sendPOST&&(Xt=rt.httpXHROverride),(0,Ue.Sn)(ge.anonCookieName)&&x.addQueryStringParameter("anoncknm",ge.anonCookieName),x.sendHook=rt.payloadPreprocessor,x.sendListener=rt.payloadListener;var an=rt.overrideEndpointUrl?rt.overrideEndpointUrl:ge.endpointUrl;St._notificationManager=Ge.getNotifyMgr(),x.initialize(an,St.core,St,Xt,rt);var Ln=ge.disablePageUnloadEvents||[];(0,re.c9)(Nn,Ln,mn),(0,re.TJ)(Nn,Ln,mn),(0,re.nD)(kn,ge.disablePageShowEvents,mn)}catch(zn){throw St.setInitialized(!1),zn}},function(){return{coreConfig:ge,core:Ge,extensions:He}})},St.processTelemetry=function(ge,Ge){(0,Ue.if)(ge,St.identifier),Ge=St._getTelCtx(Ge);var He=Ge.getExtCfg(St.identifier),ht=!!rt.disableTelemetry;He&&(ht=ht||!!He.disableTelemetry);var xt=ge;!ht&&!Lt&&(rt[ti]&&(xt.iKey=rt[ti]),He&&He[ti]&&(xt.iKey=He[ti]),Yt(xt,!0),vn?yr(2,2):Un()),St.processNext(xt,Ge)},St._doTeardown=function(ge,Ge){yr(2,2),Lt=!0,x.teardown(),(0,re.JA)(null,mn),(0,re.C9)(null,mn),(0,re.Yl)(null,mn),rr()};function Fn(ge){var Ge=ge.getWParam;ge.getWParam=function(){var He=0;return rt.ignoreMc1Ms0CookieProcessing&&(He=He|2),He|Ge()}}o(Fn,"_hookWParam");function Nn(ge){var Ge=ge||(0,ce.Jj)().event;Ge.type!=="beforeunload"&&(vn=!0,x.setUnloading(vn)),yr(2,2)}o(Nn,"_handleUnloadEvents");function kn(ge){vn=!1,x.setUnloading(vn)}o(kn,"_handleShowEvents");function Yt(ge,Ge){if(ge.sendAttempt||(ge.sendAttempt=0),ge.latency||(ge.latency=1),ge.ext&&ge.ext[Rr]&&delete ge.ext[Rr],ge.ext&&ge.ext[Fr]&&ge.ext[Fr].id&&delete ge.ext[Fr].id,gn&&(Ue.if,ge.ext=(0,Pe.Ax)(ge.ext),ge.baseData&&(ge.baseData=(0,Pe.Ax)(ge.baseData)),ge.data&&(ge.data=(0,Pe.Ax)(ge.data))),ge.sync){if(sn||Qt)ge.latency=3,ge.sync=!1;else if(x){gn&&(ge=(0,Pe.Ax)(ge)),x.sendSynchronousBatch(_r.create(ge.iKey,[ge]),ge.sync===!0?1:ge.sync,3);return}}var He=ge.latency,ht=_n,xt=tr;He===4&&(ht=Ut,xt=pn);var Ht=!1;if(ht<xt)Ht=!Ci(ge,Ge);else{var an=1,Ln=wi;He===4&&(an=4,Ln=1),Ht=!0,si(ge.iKey,ge.latency,an,Ln)&&(Ht=!Ci(ge,Ge))}Ht&&Jr(ei,[ge],Ce.h.QueueFull)}o(Yt,"_addEventToQueues"),St.setEventQueueLimits=function(ge,Ge){tr=ge>0?ge:1e4,Re=Ge>0?Ge:0,ln();var He=_n>ge;if(!He&&at>0)for(var ht=1;!He&&ht<=3;ht++){var xt=te[ht];xt&&xt.batches&&(0,Pe.tO)(xt.batches,function(Ht){Ht&&Ht.count()>=at&&(He=!0)})}Yr(!0,He)},St.pause=function(){Hr(),Qt=!0,x.pause()},St.resume=function(){Qt=!1,x.resume(),Un()},St.addResponseHandler=function(ge){x._responseHandlers.push(ge)},St._loadTransmitProfiles=function(ge){Ei(),(0,Pe.rW)(ge,function(Ge,He){var ht=He.length;if(ht>=2){var xt=ht>2?He[2]:0;if(He.splice(0,ht-2),He[1]<0&&(He[0]=-1),He[1]>0&&He[0]>0){var Ht=He[0]/He[1];He[0]=Math.ceil(Ht)*He[1]}xt>=0&&He[1]>=0&&xt>He[1]&&(xt=He[1]),He.push(xt),$n[Ge]=He}})},St.flush=function(ge,Ge,He){if(ge===void 0&&(ge=!0),!Qt)if(He=He||1,ge)wt==null?(Hr(),ri(1,0,He),wt=Vn(function(){wt=null,bi(Ge,He)},0)):Gt.push(Ge);else{var ht=Hr();Br(1,1,He),Ge!=null&&Ge(),ht&&Un()}},St.setMsaAuthTicket=function(ge){x.addHeader(fr,ge)},St.hasEvents=Er,St._setTransmitProfile=function(ge){nr!==ge&&$n[ge]!==void 0&&(Hr(),nr=ge,Un())};function Br(ge,Ge,He){var ht=ri(ge,Ge,He);return x.sendQueuedRequests(Ge,He),ht}o(Br,"_sendEventsForLatencyAndAbove");function Er(){return _n>0}o(Er,"_hasEvents");function Un(){if(Et>=0&&ri(Et,0,Mt)&&x.sendQueuedRequests(0,Mt),Ut>0&&!jt&&!Qt){var ge=$n[nr][2];ge>=0&&(jt=Vn(function(){jt=null,Br(4,0,1),Un()},ge))}var Ge=$n[nr][1];!Hn&&!wt&&Ge>=0&&!Qt&&(Er()?Hn=Vn(function(){Hn=null,Br(yn===0?3:1,0,1),yn++,yn%=2,Un()},Ge):yn=0)}o(Un,"_scheduleTimer"),St._backOffTransmission=function(){sn<oa&&(sn++,Hr(),Un())},St._clearBackOff=function(){sn&&(sn=0,Hr(),Un())};function rr(){rt=null,Lt=!1,Gt=[],wt=null,Qt=!1,Ut=0,pn=500,_n=0,tr=1e4,$n={},nr=me,Hn=null,jt=null,sn=0,yn=0,Xt=null,te={},Re=void 0,at=0,Et=-1,Mt=null,gn=!0,vn=!1,en=Or,tn=Si,mn=null,$t=mi(),x=new er(xi,Ji,ki,{requeue:li,send:qe,sent:st,drop:ut,rspFail:Tt,oth:Ot},$t),Xr(),qr(),ln()}o(rr,"_initDefaults");function Vn(ge,Ge){Ge===0&&sn&&(Ge=1);var He=1e3;return sn&&(He=Dt(sn-1)),$t.set(ge,Ge*He)}o(Vn,"_createTimer");function Hr(){return Hn!==null?($t.clear(Hn),Hn=null,yn=0,!0):!1}o(Hr,"_clearScheduledTimer");function yr(ge,Ge){Hr(),wt&&($t.clear(wt),wt=null),Qt||Br(1,ge,Ge)}o(yr,"_releaseAllQueues");function qr(){te[4]={batches:[],iKeyMap:{}},te[3]={batches:[],iKeyMap:{}},te[2]={batches:[],iKeyMap:{}},te[1]={batches:[],iKeyMap:{}}}o(qr,"_clearQueues");function Qr(ge,Ge,He){var ht=te[Ge];ht||(Ge=1,ht=te[Ge]);var xt=ht.iKeyMap[ge];return!xt&&He&&(xt=_r.create(ge),ht.batches.push(xt),ht.iKeyMap[ge]=xt),xt}o(Qr,"_getEventBatch");function Yr(ge,Ge){x.canSendRequest()&&!sn&&(Re>0&&_n>Re&&(Ge=!0),Ge&&wt==null&&St.flush(ge,null,20))}o(Yr,"_performAutoFlush");function Ci(ge,Ge){gn&&(ge=(0,Pe.Ax)(ge));var He=ge.latency,ht=Qr(ge.iKey,He,!0);return ht.addEvent(ge)?(He!==4?(_n++,Ge&&ge.sendAttempt===0&&Yr(!ge.sync,at>0&&ht.count()>=at)):Ut++,!0):!1}o(Ci,"_addEventToProperQueue");function si(ge,Ge,He,ht){for(;He<=Ge;){var xt=Qr(ge,Ge,!0);if(xt&&xt.count()>0){var Ht=xt.split(0,ht),an=Ht.count();if(an>0)return He===4?Ut-=an:_n-=an,he(ei,[Ht],Ce.h.QueueFull),!0}He++}return _i(),!1}o(si,"_dropEventWithLatencyOrLess");function _i(){for(var ge=0,Ge=0,He=o(function(xt){var Ht=te[xt];Ht&&Ht.batches&&(0,Pe.tO)(Ht.batches,function(an){xt===4?ge+=an.count():Ge+=an.count()})},"_loop_1"),ht=1;ht<=4;ht++)He(ht);_n=Ge,Ut=ge}o(_i,"_resetQueueCounts");function ri(ge,Ge,He){var ht=!1,xt=Ge===0;return!xt||x.canSendRequest()?(0,U.Lm)(St.core,function(){return"PostChannel._queueBatches"},function(){for(var Ht=[],an=4;an>=ge;){var Ln=te[an];Ln&&Ln.batches&&Ln.batches.length>0&&((0,Pe.tO)(Ln.batches,function(zn){x.addBatch(zn)?ht=ht||zn&&zn.count()>0:Ht=Ht.concat(zn.events()),an===4?Ut-=zn.count():_n-=zn.count()}),Ln.batches=[],Ln.iKeyMap={}),an--}Ht.length>0&&Jr(ei,Ht,Ce.h.KillSwitch),ht&&Et>=ge&&(Et=-1,Mt=0)},function(){return{latency:ge,sendType:Ge,sendReason:He}},!xt):(Et=Et>=0?Math.min(Et,ge):ge,Mt=Math.max(Mt,He)),ht}o(ri,"_queueBatches");function bi(ge,Ge){Br(1,0,Ge),_i(),Lr(function(){ge&&ge(),Gt.length>0?wt=Vn(function(){wt=null,bi(Gt.shift(),Ge)},0):(wt=null,Un())})}o(bi,"_flushImpl");function Lr(ge){x.isCompletelyIdle()?ge():wt=Vn(function(){wt=null,Lr(ge)},yi)}o(Lr,"_waitForIdleManager");function Ei(){Hr(),Xr(),nr=me,Un()}o(Ei,"_resetTransmitProfiles");function Xr(){$n={},$n[me]=[2,1,0],$n[xe]=[6,3,0],$n[Ze]=[18,9,0]}o(Xr,"_initializeProfiles");function li(ge,Ge){var He=[],ht=en;vn&&(ht=tn),(0,Pe.tO)(ge,function(xt){xt&&xt.count()>0&&(0,Pe.tO)(xt.events(),function(Ht){Ht&&(Ht.sync&&(Ht.latency=4,Ht.sync=!1),Ht.sendAttempt<ht?((0,Ue.if)(Ht,St.identifier),Yt(Ht,!1)):He.push(Ht))})}),He.length>0&&Jr(ei,He,Ce.h.NonRetryableStatus),vn&&yr(2,2)}o(li,"_requeueEvents");function hr(ge,Ge){var He=St._notificationManager||{},ht=He[ge];if(ht)try{ht.apply(He,Ge)}catch(xt){(0,Me.kP)(St.diagLog(),1,74,ge+" notification failed: "+xt)}}o(hr,"_callNotification");function Jr(ge,Ge){for(var He=[],ht=2;ht<arguments.length;ht++)He[ht-2]=arguments[ht];Ge&&Ge.length>0&&hr(ge,[Ge].concat(He))}o(Jr,"_notifyEvents");function he(ge,Ge){for(var He=[],ht=2;ht<arguments.length;ht++)He[ht-2]=arguments[ht];Ge&&Ge.length>0&&(0,Pe.tO)(Ge,function(xt){xt&&xt.count()>0&&hr(ge,[xt.events()].concat(He))})}o(he,"_notifyBatchEvents");function qe(ge,Ge,He){ge&&ge.length>0&&hr("eventsSendRequest",[Ge>=1e3&&Ge<=1999?Ge-1e3:0,He!==!0])}o(qe,"_sendingEvent");function st(ge,Ge){he("eventsSent",ge,Ge),Un()}o(st,"_eventsSentEvent");function ut(ge,Ge){he(ei,ge,Ge>=8e3&&Ge<=8999?Ge-8e3:Ce.h.Unknown)}o(ut,"_eventsDropped");function Tt(ge){he(ei,ge,Ce.h.NonRetryableStatus),Un()}o(Tt,"_eventsResponseFail");function Ot(ge,Ge){he(ei,ge,Ce.h.Unknown),Un()}o(Ot,"_otherEvent");function ln(){!rt||!rt.disableAutoBatchFlushLimit?at=Math.max(xi*(Ji+1),tr/6):at=0}o(ln,"_setAutoLimits"),(0,Pe.l_)(St,"_setTimeoutOverride",function(){return $t.set},function(ge){$t=mi(ge,$t.clear)}),(0,Pe.l_)(St,"_clearTimeoutOverride",function(){return $t.clear},function(ge){$t=mi($t.set,ge)})}),yt}return o(nt,"PostChannel"),nt.__ieDyn=1,nt}(Je.i);const sa=oi},4873:(it,l,C)=>{"use strict";C.d(l,{By:()=>v,cc:()=>y});var R=C(6708);function v(W){var N={};return(0,R.rW)(W,function(m,w){N[m]=w,N[w]=m}),(0,R._A)(N)}o(v,"createEnumStyle");function I(W){var N={};return objForEachKey(W,function(m,w){N[m]=m,N[w]=m}),deepFreeze(N)}o(I,"createEnumMap");function y(W){var N={};return(0,R.rW)(W,function(m,w){N[m]=w[1],N[w[0]]=w[1]}),(0,R._A)(N)}o(y,"createValueMap")},5928:(it,l,C)=>{"use strict";C.d(l,{h:()=>v});var R=C(4873),v=(0,R.By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},7310:(it,l,C)=>{"use strict";C.d(l,{X:()=>Z,v:()=>ee});var R=C(4873),v,I="Failed",y=I+"MonitorAjax",W="Track",N="Start",m="Stop",w="Event",O="AuthContext",H="Exception",b="Local",$="Session",F="Storage",j="Browser",q="Cannot",Ee="Buffer",z="InstrumentationKey",Z=(0,R.By)({CRITICAL:1,WARNING:2}),ee=(0,R.By)((v={},v[j+"DoesNotSupport"+b+F]=0,v[j+q+"Read"+b+F]=1,v[j+q+"Read"+$+F]=2,v[j+q+"Write"+b+F]=3,v[j+q+"Write"+$+F]=4,v[j+I+"RemovalFrom"+b+F]=5,v[j+I+"RemovalFrom"+$+F]=6,v[q+"SendEmptyTelemetry"]=7,v.ClientPerformanceMathError=8,v["ErrorParsingAI"+$+"Cookie"]=9,v.ErrorPVCalc=10,v[H+"WhileLoggingError"]=11,v[I+"AddingTelemetryTo"+Ee]=12,v[y+"Abort"]=13,v[y+"Dur"]=14,v[y+"Open"]=15,v[y+"RSC"]=16,v[y+"Send"]=17,v[y+"GetCorrelationHeader"]=18,v[I+"ToAddHandlerForOnBeforeUnload"]=19,v[I+"ToSendQueuedTelemetry"]=20,v[I+"ToReportDataLoss"]=21,v["Flush"+I]=22,v.MessageLimitPerPVExceeded=23,v.MissingRequiredFieldSpecification=24,v.NavigationTimingNotSupported=25,v.OnError=26,v[$+"RenewalDateIsZero"]=27,v.SenderNotInitialized=28,v[N+W+w+I]=29,v[m+W+w+I]=30,v[N+W+I]=31,v[m+W+I]=32,v.TelemetrySampledAndNotSent=33,v[W+w+I]=34,v[W+H+I]=35,v[W+"Metric"+I]=36,v[W+"PV"+I]=37,v[W+"PV"+I+"Calc"]=38,v[W+"Trace"+I]=39,v["Transmission"+I]=40,v[I+"ToSet"+F+Ee]=41,v[I+"ToRestore"+F+Ee]=42,v.InvalidBackendResponse=43,v[I+"ToFixDepricatedValues"]=44,v.InvalidDurationValue=45,v.TelemetryEnvelopeInvalid=46,v.CreateEnvelopeError=47,v[q+"SerializeObject"]=48,v[q+"SerializeObjectNonSerializable"]=49,v.CircularReferenceDetected=50,v["Clear"+O+I]=51,v[H+"Truncated"]=52,v.IllegalCharsInName=53,v.ItemNotInArray=54,v.MaxAjaxPerPVExceeded=55,v.MessageTruncated=56,v.NameTooLong=57,v.SampleRateOutOfRange=58,v["Set"+O+I]=59,v["Set"+O+I+"AccountName"]=60,v.StringValueTooLong=61,v.StartCalledMoreThanOnce=62,v.StopCalledWithoutStart=63,v["TelemetryInitializer"+I]=64,v.TrackArgumentsNotSpecified=65,v.UrlTooLong=66,v[$+F+Ee+"Full"]=67,v[q+"AccessCookie"]=68,v.IdTooLong=69,v.InvalidEvent=70,v[y+"SetRequestHeader"]=71,v["Send"+j+"InfoOnUserInit"]=72,v["Plugin"+H]=73,v["Notification"+H]=74,v.SnippetScriptLoadFailure=99,v["Invalid"+z]=100,v[q+"ParseAiBlobValue"]=101,v.InvalidContentBlob=102,v[W+"PageAction"+w+I]=103,v[I+"AddingCustomDefinedRequestContext"]=104,v["InMemory"+F+Ee+"Full"]=105,v[z+"Deprecation"]=106,v))},5121:(it,l,C)=>{"use strict";C.d(l,{F:()=>H});var R=C(1088),v=C(1679),I=C(8096),y=C(6900),W=C(5018),N=C(6708),m=C(6041),w=C(1880),O=C(9288),H=function(b){(0,R.ne)($,b);function $(){var F=b.call(this)||this;return(0,v.Z)($,F,function(j,q){j[I.VL]=function(Z,ee,T,Y){q[I.VL](Z,ee,T||new W.AQ(Z),Y||new w.f(Z))},j.track=function(Z){(0,O.Lm)(j[m.kl](),function(){return"AppInsightsCore:track"},function(){Z===null&&(z(Z),(0,N._y)("Invalid telemetry item")),Ee(Z),q.track(Z)},function(){return{item:Z}},!Z.sync)};function Ee(Z){(0,N.le)(Z[I.I])&&(z(Z),(0,N._y)("telemetry name required"))}o(Ee,"_validateTelemetryItem");function z(Z){var ee=j[I.tb]();ee&&ee[m.$F]([Z],2)}o(z,"_notifyInvalidEvent")}),F}return o($,"AppInsightsCore"),$.__ieDyn=1,$}(y.A)},6900:(it,l,C)=>{"use strict";C.d(l,{A:()=>we});var R=C(1088),v=C(1679),I=C(2091),y=C(8096),W=C(6708),N=C(6041),m=C(1589),w=C(3833),O=500,H="Channel has invalid priority - ";function b(ve,G,se){G&&(0,W.kJ)(G)&&G[y.R5]>0&&(G=G.sort(function(Te,$e){return Te[N.yi]-$e[N.yi]}),(0,W.tO)(G,function(Te){Te[N.yi]<O&&(0,W._y)(H+Te[y.pZ])}),ve[y.MW]({queue:(0,W.FL)(G),chain:(0,m.jV)(G,se[y.TC],se)}))}o(b,"_addChannelQueue");function $(ve,G){function se(){return(0,m.CD)(null,G[y.TC],G,null)}o(se,"_getTelCtx");function Te(P,U,re,de){var Ue=P?P[y.R5]+1:1;function Pe(){Ue--,Ue===0&&(de&&de(),de=null)}o(Pe,"_runChainOnComplete"),Ue>0&&(0,W.tO)(P,function(ce){if(ce&&ce.queue[y.R5]>0){var Ce=ce.chain,Me=U[y.zV](Ce);Me[y.Fc](Pe),re(Me)}else Ue--}),Pe()}o(Te,"_processChannelQueue");function $e(P,U){var re=U||{reason:0};return Te(ve,P,function(de){de[y.uL](re)},function(){P[y.uL](re)}),!0}o($e,"_doUpdate");function ae(P,U){var re=U||{reason:0,isAsync:!1};return Te(ve,P,function(de){de[y.uL](re)},function(){P[y.uL](re),lt=!1}),!0}o(ae,"_doTeardown");function Xe(P){var U=null;return ve&&ve[y.R5]>0&&(0,W.tO)(ve,function(re){if(re&&re.queue[y.R5]>0&&((0,W.tO)(re.queue,function(de){if(de[y.pZ]===P)return U=de,-1}),U))return-1}),U}o(Xe,"_getChannel");var lt=!1,mt={identifier:"ChannelControllerPlugin",priority:O,initialize:function(P,U,re,de){lt=!0,(0,W.tO)(ve,function(Ue){Ue&&Ue.queue[y.R5]>0&&(0,w.bP)((0,m.CD)(Ue.chain,P,U),re)})},isInitialized:function(){return lt},processTelemetry:function(P,U){Te(ve,U||se(),function(re){re[y.uL](P)},function(){U[y.uL](P)})},update:$e,pause:function(){Te(ve,se(),function(P){P.iterate(function(U){U.pause&&U.pause()})},null)},resume:function(){Te(ve,se(),function(P){P.iterate(function(U){U.resume&&U.resume()})},null)},teardown:ae,getChannel:Xe,flush:function(P,U,re,de){var Ue=1,Pe=!1,ce=null;de=de||5e3;function Ce(){Ue--,Pe&&Ue===0&&(ce&&(clearTimeout(ce),ce=null),U&&U(Pe),U=null)}return o(Ce,"doCallback"),Te(ve,se(),function(Me){Me.iterate(function(Je){if(Je[y.kL]){Ue++;var me=!1;Je[y.kL](P,function(){me=!0,Ce()},re)||me||(P&&ce==null?ce=setTimeout(function(){ce=null,Ce()},de):Ce())}})},function(){Pe=!0,Ce()}),!0},_setQueue:function(P){ve=P}};return mt}o($,"createChannelControllerPlugin");function F(ve,G,se){var Te=[];if(ve&&(0,W.tO)(ve,function(ae){return b(Te,ae,se)}),G){var $e=[];(0,W.tO)(G,function(ae){ae[N.yi]>O&&$e[y.MW](ae)}),b(Te,$e,se)}return Te}o(F,"createChannelQueues");var j=C(3242),q=C(5883),Ee=C(7158),z=C(5018),Z=C(9288),ee=C(4063),T=C(7630),Y=function(ve){(0,R.ne)(G,ve);function G(){var se=ve.call(this)||this;se.identifier="TelemetryInitializerPlugin",se.priority=199;var Te,$e;ae(),(0,v.Z)(G,se,function(Xe,lt){Xe.addTelemetryInitializer=function(mt){var P={id:Te++,fn:mt};$e[y.MW](P);var U={remove:function(){(0,W.tO)($e,function(re,de){if(re.id===P.id)return $e[y.cb](de,1),-1})}};return U},Xe[N.hL]=function(mt,P){for(var U=!1,re=$e[y.R5],de=0;de<re;++de){var Ue=$e[de];if(Ue)try{if(Ue.fn[y.ZV](null,[mt])===!1){U=!0;break}}catch(Pe){(0,z.kP)(P[y.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,W.jj)(Pe),{exception:(0,T.eU)(Pe)},!0)}}U||Xe[y.uL](mt,P)},Xe[y.F3]=function(){ae()}});function ae(){Te=0,$e=[]}return o(ae,"_initDefaults"),se}return o(G,"TelemetryInitializerPlugin"),G.__ieDyn=1,G}(ee.i),k=C(310),le="Plugins must provide initialize method",J="_notificationManager",fe="SDK is still unloading...",De="SDK is not initialized",Oe={loggingLevelConsole:1};function oe(ve,G){return new Z.Jk(G)}o(oe,"_createPerfManager");function Se(ve,G,se){var Te,$e=[],ae={};return(0,W.tO)(se,function(Xe){((0,W.le)(Xe)||(0,W.le)(Xe[y.VL]))&&(0,W._y)(le);var lt=Xe[N.yi],mt=Xe[y.pZ];Xe&&lt&&((0,W.le)(ae[lt])?ae[lt]=mt:(0,z.jV)(ve,"Two extensions have same priority #"+lt+" - "+ae[lt]+", "+mt)),(!lt||lt<G)&&$e[y.MW](Xe)}),Te={all:se},Te[N.oV]=$e,Te}o(Se,"_validateExtensions");function D(ve,G){var se=!1;return(0,W.tO)(G,function(Te){if(Te===ve)return se=!0,-1}),se}o(D,"_isPluginPresent");function ze(){var ve;return(0,I.pu)((ve={},ve[y.g]=function(G){},ve[y.n7]=function(G){},ve[N.uC]=function(G){},ve[N.$F]=function(G,se){},ve[N.f_]=function(G,se){},ve))}o(ze,"_createDummyNotificationManager");var we=function(){function ve(){var G,se,Te,$e,ae,Xe,lt,mt,P,U,re,de,Ue,Pe,ce,Ce,Me,Je,me,xe,Ze=0;(0,v.Z)(ve,this,function(tt){_e(),tt[y.yl]=function(){return se},tt[y.VL]=function(ft,Kt,rn,on){Pe&&(0,W._y)(fe),tt[y.yl]()&&(0,W._y)("Core should not be initialized more than once"),G=ft||{},tt[y.TC]=G,(0,W.le)(ft[y.p$])&&(0,W._y)("Please provide instrumentation key"),$e=on,tt[J]=on,sr(),or(),vr(),rn&&(tt[y.eZ]=rn);var Vt=(0,W.qK)(G,N.js,[]);P=[],P[y.MW].apply(P,(0,R.$h)((0,R.$h)([],Kt,!1),Vt,!1)),de=(0,W.qK)(G,N.Z,[]),K(null),(!Ue||Ue[y.R5]===0)&&(0,W._y)("No "+N.Z+" available"),se=!0,tt.releaseQueue()},tt.getTransmissionControls=function(){var ft=[];return Ue&&(0,W.tO)(Ue,function(Kt){ft[y.MW](Kt.queue)}),(0,W.FL)(ft)},tt.track=function(ft){ft.iKey=ft.iKey||G[y.p$],ft[y.Z_]=ft[y.Z_]||(0,W.Y6)(new Date),ft.ver=ft.ver||"4.0",!Pe&&tt[y.yl]()?B()[y.uL](ft):Te[y.MW](ft)},tt[y.SD]=B,tt[y.tb]=function(){return $e||($e=ze(),tt[J]=$e),$e},tt[y.g]=function(ft){$e&&$e[y.g](ft)},tt[y.n7]=function(ft){$e&&$e[y.n7](ft)},tt.getCookieMgr=function(){return lt||(lt=(0,j.Nz)(G,tt[y.eZ])),lt},tt.setCookieMgr=function(ft){lt=ft},tt[N.kl]=function(){if(!ae&&!Xe&&(0,W.v4)(G.enablePerfMgr)){var ft=(0,W.v4)(G[N.DN]);(0,W.mf)(ft)&&(Xe=ft(tt,tt[y.tb]()))}return ae||Xe||(0,Z.j5)()},tt.setPerfMgr=function(ft){ae=ft},tt.eventCnt=function(){return Te[y.R5]},tt.releaseQueue=function(){if(se&&Te[y.R5]>0){var ft=Te;Te=[],(0,W.tO)(ft,function(Kt){B()[y.uL](Kt)})}},tt.pollInternalLogs=function(ft){Ce=ft||null;var Kt=(0,W.v4)(G.diagnosticLogInterval);return(!Kt||!(Kt>0))&&(Kt=1e4),Ze&&clearInterval(Ze),Ze=setInterval(function(){Pn()},Kt),Ze},tt[y.LS]=function(){Ze&&(clearInterval(Ze),Ze=0,Pn())},(0,W.Vb)(tt,function(){return ce},["addTelemetryInitializer"]),tt.unload=function(ft,Kt,rn){var on;ft===void 0&&(ft=!0),se||(0,W._y)(De),Pe&&(0,W._y)(fe);var Vt=(on={reason:50},on[y.d]=ft,on.flushComplete=!1,on),En=(0,m.Bt)(Jt(),tt);En[y.Fc](function(){_e(),Kt&&Kt(Vt)},tt);function jn(fr){Vt.flushComplete=fr,Pe=!0,Je.run(En,Vt),tt[y.LS](),En[y.uL](Vt)}o(jn,"_doUnload"),Sn(ft,jn,6,rn)||jn(!1)},tt[y.TO]=Ye,tt.addPlugin=function(ft,Kt,rn,on){if(!ft){on&&on(!1),pr(le);return}var Vt=Ye(ft[y.pZ]);if(Vt&&!Kt){on&&on(!1),pr("Plugin ["+ft[y.pZ]+"] is already loaded!");return}var En={reason:16};function jn(Dr){P[y.MW](ft),En.added=[ft],K(En),on&&on(!0)}if(o(jn,"_addPlugin"),Vt){var fr=[Vt.plugin],Xn={reason:2,isAsync:!!rn};Tn(fr,Xn,function(Dr){Dr?(En.removed=fr,En.reason|=32,jn(!0)):on&&on(!1)})}else jn(!1)},tt.evtNamespace=function(){return Me},tt[y.kL]=Sn,tt.getTraceCtx=function(ft){return xe||(xe=(0,w.Yn)()),xe},tt.setTraceCtx=function(ft){xe=ft||null},(0,W.Oi)(tt,"addUnloadCb",function(){return Je},"add");function _e(){se=!1,G=(0,W.mm)(!0,{},Oe),tt[y.TC]=G,tt[y.eZ]=new z.AQ(G),tt[y.iC]=[],ce=new Y,Te=[],$e=null,ae=null,Xe=null,lt=null,mt=null,U=null,P=[],re=null,de=null,Ue=null,Pe=!1,Ce=null,Me=(0,q.J)("AIBaseCore",!0),Je=(0,k.Y)(),xe=null}o(_e,"_initDefaults");function B(){return(0,m.CD)(Jt(),G,tt)}o(B,"_createTelCtx");function K(ft){var Kt=Se(tt[y.eZ],O,P);U=Kt[N.oV],mt=null;var rn=Kt.all;if(Ue=(0,W.FL)(F(de,rn,tt)),re){var on=(0,W.UA)(rn,re);on!==-1&&rn[y.cb](on,1),on=(0,W.UA)(U,re),on!==-1&&U[y.cb](on,1),re._setQueue(Ue)}else re=$(Ue,tt);rn[y.MW](re),U[y.MW](re),tt[y.iC]=(0,w.AA)(rn),re[y.VL](G,tt,rn),(0,w.bP)(B(),rn),tt[y.iC]=(0,W.FL)((0,w.AA)(U||[])).slice(),ft&&lr(ft)}o(K,"_initPluginChain");function Ye(ft){var Kt,rn=null,on=null;return(0,W.tO)(tt[y.iC],function(Vt){if(Vt[y.pZ]===ft&&Vt!==re&&Vt!==ce)return on=Vt,-1}),!on&&re&&(on=re.getChannel(ft)),on&&(rn=(Kt={plugin:on},Kt[y.$h]=function(Vt){(0,w.OY)(on)[N.mE]=!Vt},Kt.isEnabled=function(){var Vt=(0,w.OY)(on);return!Vt[y.fi]&&!Vt[N.mE]},Kt.remove=function(Vt,En){var jn;Vt===void 0&&(Vt=!0);var fr=[on],Xn=(jn={reason:1},jn[y.d]=Vt,jn);Tn(fr,Xn,function(Dr){Dr&&K({reason:32,removed:fr}),En&&En(Dr)})},Kt)),rn}o(Ye,"_getPlugin");function Jt(){if(!mt){var ft=(U||[]).slice();(0,W.UA)(ft,ce)===-1&&ft[y.MW](ce),mt=(0,m.jV)((0,w.AA)(ft),G,tt)}return mt}o(Jt,"_getPluginChain");function Tn(ft,Kt,rn){if(ft&&ft[y.R5]>0){var on=(0,m.jV)(ft,G,tt),Vt=(0,m.Bt)(on,tt);Vt[y.Fc](function(){var En=!1,jn=[];(0,W.tO)(P,function(Xn,Dr){D(Xn,ft)?En=!0:jn[y.MW](Xn)}),P=jn;var fr=[];de&&((0,W.tO)(de,function(Xn,Dr){var $r=[];(0,W.tO)(Xn,function(Cr){D(Cr,ft)?En=!0:$r[y.MW](Cr)}),fr[y.MW]($r)}),de=fr),rn&&rn(En)}),Vt[y.uL](Kt)}else rn(!1)}o(Tn,"_removePlugins");function Pn(){var ft=tt[y.eZ]?tt[y.eZ].queue:[];ft&&((0,W.tO)(ft,function(Kt){var rn,on=(rn={},rn[y.I]=Ce||"InternalMessageId: "+Kt[y.Gc],rn.iKey=(0,W.v4)(G[y.p$]),rn.time=(0,W.Y6)(new Date),rn.baseType=z.lQ.dataType,rn.baseData={message:Kt[y.gU]},rn);tt.track(on)}),ft[y.R5]=0)}o(Pn,"_flushInternalLogs");function Sn(ft,Kt,rn,on){return re?re[y.kL](ft,Kt,rn||6,on):(Kt&&Kt(!1),!0)}o(Sn,"_flushChannels");function sr(){var ft=(0,W.v4)(G.disableDbgExt);ft===!0&&me&&($e[y.n7](me),me=null),$e&&!me&&ft!==!0&&(me=(0,Ee.p)(G),$e[y.g](me))}o(sr,"_initDebugListener");function or(){var ft=(0,W.v4)(G.enablePerfMgr);!ft&&Xe&&(Xe=null),ft&&(0,W.qK)(G,N.DN,oe)}o(or,"_initPerfManager");function vr(){var ft=(0,W.qK)(G,N.Zh,{});ft.NotificationManager=$e}o(vr,"_initExtConfig");function lr(ft){var Kt=(0,m.xy)(Jt(),tt);(!tt._updateHook||tt._updateHook(Kt,ft)!==!0)&&Kt[y.uL](ft)}o(lr,"_doUpdate");function pr(ft){var Kt=tt[y.eZ];Kt?(0,z.kP)(Kt,2,73,ft):(0,W._y)(ft)}o(pr,"_logOrThrowError")})}return o(ve,"BaseCore"),ve.__ieDyn=1,ve}()},4063:(it,l,C)=>{"use strict";C.d(l,{i:()=>w});var R=C(1679),v=C(8096),I=C(6708),y=C(6041),W=C(1589),N=C(310),m="getPlugin",w=function(){function O(){var H=this,b,$,F,j,q;Z(),(0,R.Z)(O,H,function(ee){ee[v.VL]=function(T,Y,k,le){z(T,Y,le),b=!0},ee[v.fi]=function(T,Y){var k,le=ee[y.oV];if(!le||T&&le!==T[y.oV]())return;var J,fe=!1,De=T||(0,W.Bt)(null,le,F&&F[m]?F[m]():F),Oe=Y||(k={reason:0},k[v.d]=!1,k);function oe(){if(!fe){fe=!0,j.run(De,Y);var Se=q;q=[],(0,I.tO)(Se,function(D){D.rm()}),J===!0&&De[v.uL](Oe),Z()}}return o(oe,"_unloadCallback"),!ee[v.F3]||ee[v.F3](De,Oe,oe)!==!0?oe():J=!0,J},ee[v.Tu]=function(T,Y){var k=ee[y.oV];if(!k||T&&k!==T[y.oV]())return;var le,J=!1,fe=T||(0,W.xy)(null,k,F&&F[m]?F[m]():F),De=Y||{reason:0};function Oe(){J||(J=!0,z(fe.getCfg(),fe.core(),fe[v.W2]()))}return o(Oe,"_updateCallback"),!ee._doUpdate||ee._doUpdate(fe,De,Oe)!==!0?Oe():le=!0,le},ee._addHook=function(T){T&&((0,I.kJ)(T)?q=q.concat(T):q[v.MW](T))},(0,I.Oi)(ee,"_addUnloadCb",function(){return j},"add")}),H[v.mc]=function(ee){return Ee(ee)[v.mc]()},H[v.yl]=function(){return b},H.setInitialized=function(ee){b=ee},H[v.Jd]=function(ee){F=ee},H[v.uL]=function(ee,T){T?T[v.uL](ee):F&&(0,I.mf)(F[y.hL])&&F[y.hL](ee,null)},H._getTelCtx=Ee;function Ee(ee){ee===void 0&&(ee=null);var T=ee;if(!T){var Y=$||(0,W.CD)(null,{},H[y.oV]);F&&F[m]?T=Y[v.zV](null,F[m]):T=Y[v.zV](null,F)}return T}o(Ee,"_getTelCtx");function z(ee,T,Y){ee&&(0,I.sO)(ee,y.Zh,[],null,I.le),!Y&&T&&(Y=T[v.SD]()[v.W2]());var k=F;F&&F[m]&&(k=F[m]()),H[y.oV]=T,$=(0,W.CD)(Y,ee,T,k)}o(z,"_setDefaults");function Z(){b=!1,H[y.oV]=null,$=null,F=null,q=[],j=(0,N.Y)()}o(Z,"_initDefaults")}return o(O,"BaseTelemetryPlugin"),O.__ieDyn=1,O}()},3242:(it,l,C)=>{"use strict";C.d(l,{kj:()=>T,JP:()=>fe,Nz:()=>De,p7:()=>Oe,UY:()=>ve});var R=C(8096),v=C(5018),I=C(7630),y=C(6708),W=C(6041),N="toGMTString",m="toUTCString",w="cookie",O="expires",H="enabled",b="isCookieUseDisabled",$="disableCookiesUsage",F="_ckMgr",j=null,q=null,Ee=null,z=(0,I.Me)(),Z={},ee={};function T(G,se){var Te=De[F]||ee[F];return Te||(Te=De[F]=De(G,se),ee[F]=Te),Te}o(T,"_gblCookieMgr");function Y(G){return G?G.isEnabled():!0}o(Y,"_isMgrEnabled");function k(G){var se=G[R.Lk]=G[R.Lk]||{};if((0,y.sO)(se,"domain",G.cookieDomain,y.BX,y.le),(0,y.sO)(se,"path",G.cookiePath||"/",null,y.le),(0,y.le)(se[H])){var Te=void 0;(0,y.o8)(G[b])||(Te=!G[b]),(0,y.o8)(G[$])||(Te=!G[$]),se[H]=Te}return se}o(k,"_createCookieMgrConfig");function le(G,se){return se&&G&&(0,y.kJ)(G.ignoreCookies)?G.ignoreCookies[R.ou](se)!==-1:!1}o(le,"_isIgnoredCookie");function J(G,se){return se&&G&&(0,y.kJ)(G.blockedCookies)&&G.blockedCookies[R.ou](se)!==-1?!0:le(G,se)}o(J,"_isBlockedCookie");function fe(G,se){var Te;if(G)Te=G.getCookieMgr();else if(se){var $e=se[R.Lk];$e[F]?Te=$e[F]:Te=De(se)}return Te||(Te=T(se,(G||{})[R.eZ])),Te}o(fe,"safeGetCookieMgr");function De(G,se){var Te,$e=k(G||ee),ae=$e.path||"/",Xe=$e.domain,lt=$e[H]!==!1,mt=(Te={isEnabled:function(){var P=lt&&Oe(se),U=ee[F];return P&&U&&mt!==U&&(P=Y(U)),P}},Te[R.$h]=function(P){lt=P!==!1},Te.set=function(P,U,re,de,Ue){var Pe=!1;if(Y(mt)&&!J($e,P)){var ce={},Ce=(0,y.nd)(U||W.qS),Me=Ce[R.ou](";");if(Me!==-1&&(Ce=(0,y.nd)(U[R.zc](0,Me)),ce=oe(U[R.zc](Me+1))),(0,y.sO)(ce,"domain",de||Xe,y.fQ,y.o8),!(0,y.le)(re)){var Je=(0,I.w1)();if((0,y.o8)(ce[O])){var me=(0,y.m6)(),xe=me+re*1e3;if(xe>0){var Ze=new Date;Ze.setTime(xe),(0,y.sO)(ce,O,Se(Ze,Je?N:m)||Se(Ze,Je?N:m)||W.qS,y.fQ)}}Je||(0,y.sO)(ce,"max-age",W.qS+re,null,y.o8)}var tt=(0,I.k$)();tt&&tt.protocol==="https:"&&((0,y.sO)(ce,"secure",null,null,y.o8),q===null&&(q=!ve(((0,I.jW)()||{})[R.qV])),q&&(0,y.sO)(ce,"SameSite","None",null,y.o8)),(0,y.sO)(ce,"path",Ue||ae,null,y.o8);var _e=$e.setCookie||we;_e(P,D(Ce,ce)),Pe=!0}return Pe},Te.get=function(P){var U=W.qS;return Y(mt)&&!le($e,P)&&(U=($e.getCookie||ze)(P)),U},Te.del=function(P,U){var re=!1;return Y(mt)&&(re=mt.purge(P,U)),re},Te.purge=function(P,U){var re,de=!1;if(Oe(se)){var Ue=(re={},re.path=U||"/",re[O]="Thu, 01 Jan 1970 00:00:01 GMT",re);(0,I.w1)()||(Ue["max-age"]="0");var Pe=$e.delCookie||we;Pe(P,D(W.qS,Ue)),de=!0}return de},Te);return mt[F]=mt,mt}o(De,"createCookieMgr");function Oe(G){if(j===null){j=!1;try{var se=z||{};j=se[w]!==void 0}catch(Te){(0,v.kP)(G,2,68,"Cannot access document.cookie - "+(0,y.jj)(Te),{exception:(0,I.eU)(Te)})}}return j}o(Oe,"areCookiesSupported");function oe(G){var se={};if(G&&G[R.R5]){var Te=(0,y.nd)(G)[R.w6](";");(0,y.tO)(Te,function($e){if($e=(0,y.nd)($e||W.qS),$e){var ae=$e[R.ou]("=");ae===-1?se[$e]=null:se[(0,y.nd)($e[R.zc](0,ae))]=(0,y.nd)($e[R.zc](ae+1))}})}return se}o(oe,"_extractParts");function Se(G,se){return(0,y.mf)(G[se])?G[se]():null}o(Se,"_formatDate");function D(G,se){var Te=G||W.qS;return(0,y.rW)(se,function($e,ae){Te+="; "+$e+((0,y.le)(ae)?W.qS:"="+ae)}),Te}o(D,"_formatCookieValue");function ze(G){var se=W.qS;if(z){var Te=z[w]||W.qS;Ee!==Te&&(Z=oe(Te),Ee=Te),se=(0,y.nd)(Z[G]||W.qS)}return se}o(ze,"_getCookieValue");function we(G,se){z&&(z[w]=G+"="+se)}o(we,"_setCookieValue");function ve(G){return(0,y.HD)(G)?!!((0,y._Q)(G,"CPU iPhone OS 12")||(0,y._Q)(G,"iPad; CPU OS 12")||(0,y._Q)(G,"Macintosh; Intel Mac OS X 10_14")&&(0,y._Q)(G,"Version/")&&(0,y._Q)(G,"Safari")||(0,y._Q)(G,"Macintosh; Intel Mac OS X 10_14")&&(0,y.Id)(G,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,y._Q)(G,"Chrome/5")||(0,y._Q)(G,"Chrome/6")||(0,y._Q)(G,"UnrealEngine")&&!(0,y._Q)(G,"Chrome")||(0,y._Q)(G,"UCBrowser/12")||(0,y._Q)(G,"UCBrowser/11")):!1}o(ve,"uaDisallowsSameSiteNone")},5843:(it,l,C)=>{"use strict";C.d(l,{GW:()=>$,Jj:()=>F,DO:()=>q,Tr:()=>Ee,zB:()=>Z,oF:()=>T,vn:()=>Y,ej:()=>k,d8:()=>le,kT:()=>J});var R=C(2091),v=C(8096),I=C(3242),y=C(7630),W=C(4869),N=C(6708),m=C(6041),w=C(4878),O=null,H,b=null;function $(){var fe=q();return fe[v.zc](0,8)+"-"+fe[v.zc](8,12)+"-"+fe[v.zc](12,16)+"-"+fe[v.zc](16,20)+"-"+fe[v.zc](20)}o($,"newGuid");function F(){var fe=(0,y.r)();return fe&&fe.now?fe.now():(0,N.m6)()}o(F,"perfNow");function j(fe,De){if(fe&&De){var Oe=fe[_DYN_LENGTH],oe=Oe-De[_DYN_LENGTH];return fe[_DYN_SUBSTRING](oe>=0?oe:0,Oe)===De}return!1}o(j,"strEndsWith");function q(){for(var fe=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],De=m.qS,Oe,oe=0;oe<4;oe++)Oe=(0,w._l)(),De+=fe[Oe&15]+fe[Oe>>4&15]+fe[Oe>>8&15]+fe[Oe>>12&15]+fe[Oe>>16&15]+fe[Oe>>20&15]+fe[Oe>>24&15]+fe[Oe>>28&15];var Se=fe[8+((0,w._l)()&3)|0];return De[v.Jn](0,8)+De[v.Jn](9,4)+"4"+De[v.Jn](13,3)+Se+De[v.Jn](16,3)+De[v.Jn](19,12)}o(q,"generateW3CId");var Ee={_canUseCookies:void 0,isTypeof:N.Ym,isUndefined:N.o8,isNullOrUndefined:N.le,hasOwnProperty:N.nr,isFunction:N.mf,isObject:N.Kn,isDate:N.J_,isArray:N.kJ,isError:N.VZ,isString:N.HD,isNumber:N.hj,isBoolean:N.jn,toISOString:N.Y6,arrForEach:N.tO,arrIndexOf:N.UA,arrMap:N.Mr,arrReduce:N.Xz,strTrim:N.nd,objCreate:R.pu,objKeys:N.FY,objDefineAccessors:N.l_,addEventHandler:W.Ib,dateNow:N.m6,isIE:y.w1,disableCookies:T,newGuid:$,perfNow:F,newId:w.pZ,randomValue:w.az,random32:w._l,mwcRandomSeed:w.CN,mwcRandom32:w.F6,generateW3CId:q},z=/[xy]/g,Z={Attach:W.pZ,AttachEvent:W.pZ,Detach:W.pD,DetachEvent:W.pD};function ee(fe,De){var Oe=(0,I.kj)(fe,De),oe=Ee._canUseCookies;return O===null&&(O=[],H=oe,(0,N.l_)(Ee,"_canUseCookies",function(){return H},function(Se){H=Se,(0,N.tO)(O,function(D){D[v.$h](Se)})})),(0,N.UA)(O,Oe)===-1&&O[v.MW](Oe),(0,N.jn)(oe)&&Oe[v.$h](oe),(0,N.jn)(H)&&Oe[v.$h](H),Oe}o(ee,"_legacyCookieMgr");function T(){ee()[v.$h](!1)}o(T,"disableCookies");function Y(fe){return ee(null,fe).isEnabled()}o(Y,"canUseCookies");function k(fe,De){return ee(null,fe).get(De)}o(k,"getCookie");function le(fe,De,Oe,oe){ee(null,fe).set(De,Oe,null,oe)}o(le,"setCookie");function J(fe,De){return ee(null,fe).del(De)}o(J,"deleteCookie")},5883:(it,l,C)=>{"use strict";C.d(l,{J:()=>F,K:()=>j});var R=C(4392),v=C(8096),I=C(6708),y=C(6041),W=C(4878),N=R.RJ,m="2.8.12",w="."+(0,W.pZ)(6),O=0;function H(q,Ee,z){if(N)try{return N(q,Ee,{value:z,enumerable:!1,configurable:!0}),!0}catch(Z){}return!1}o(H,"_createAccessor");function b(q){return q[v.xv]===1||q[v.xv]===9||!+q[v.xv]}o(b,"_canAcceptData");function $(q,Ee){var z=Ee[q.id];if(!z){z={};try{b(Ee)&&(H(Ee,q.id,z)||(Ee[q.id]=z))}catch(Z){}}return z}o($,"_getCache");function F(q,Ee){return Ee===void 0&&(Ee=!1),(0,I.Gf)(q+O+++(Ee?"."+m:y.qS)+w)}o(F,"createUniqueNamespace");function j(q){var Ee={id:F("_aiData-"+(q||y.qS)+"."+m),accept:function(z){return b(z)},get:function(z,Z,ee,T){var Y=z[Ee.id];return Y?Y[(0,I.Gf)(Z)]:(T&&(Y=$(Ee,z),Y[(0,I.Gf)(Z)]=ee),ee)},kill:function(z,Z){if(z&&z[Z])try{delete z[Z]}catch(ee){}}};return Ee}o(j,"createElmNodeData")},7158:(it,l,C)=>{"use strict";C.d(l,{j:()=>w,p:()=>O});var R=C(8096),v=C(7630),I=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],y=null,W;function N(H,b){return function(){var $=arguments,F=w(b);if(F){var j=F.listener;j&&j[H]&&j[H][R.ZV](j,$)}}}o(N,"_listenerProxyFunc");function m(){var H=(0,v.a8)("Microsoft");return H&&(y=H.ApplicationInsights),y}o(m,"_getExtensionNamespace");function w(H){var b=y;return!b&&H.disableDbgExt!==!0&&(b=y||m()),b?b.ChromeDbgExt:null}o(w,"getDebugExt");function O(H){if(!W){W={};for(var b=0;b<I[R.R5];b++)W[I[b]]=N(I[b],H)}return W}o(O,"getDebugListener")},5018:(it,l,C)=>{"use strict";C.d(l,{lQ:()=>$,vH:()=>F,AQ:()=>j,kP:()=>Ee,jV:()=>z,L4:()=>Z});var R=C(1679),v=C(8096),I=C(7158),y=C(7630),W=C(6708),N=C(6041),m="AI (Internal): ",w="AI: ",O="AITR_";function H(ee){return ee?'"'+ee[v.i7](/\"/g,N.qS)+'"':N.qS}o(H,"_sanitizeDiagnosticText");function b(ee,T){var Y=(0,y.dr)();if(Y){var k="log";Y[ee]&&(k=ee),(0,W.mf)(Y[k])&&Y[k](T)}}o(b,"_logToConsole");var $=function(){function ee(T,Y,k,le){k===void 0&&(k=!1);var J=this;J[v.Gc]=T,J[v.gU]=(k?w:m)+T;var fe=N.qS;(0,y.nS)()&&(fe=(0,y.xA)().stringify(le));var De=(Y?" message:"+H(Y):N.qS)+(le?" props:"+H(fe):N.qS);J[v.gU]+=De}return o(ee,"_InternalLogMessage"),ee.dataType="MessageData",ee}();function F(ee,T){return(ee||{})[v.eZ]||new j(T)}o(F,"safeGetLogger");var j=function(){function ee(T){this.identifier="DiagnosticLogger",this.queue=[];var Y=0,k={},le,J,fe,De;(0,R.Z)(ee,this,function(Oe){Se(T||{}),Oe.consoleLoggingLevel=function(){return le},Oe.telemetryLoggingLevel=function(){return J},Oe.maxInternalMessageLimit=function(){return fe},Oe[v.Fr]=function(){return De},Oe.throwInternal=function(we,ve,G,se,Te){Te===void 0&&(Te=!1);var $e=new $(ve,G,Te,se);if(De)throw(0,y.eU)($e);var ae=we===1?N.ys:N.cL;if((0,W.o8)($e[v.gU]))ze("throw"+(we===1?"Critical":"Warning"),$e);else{if(Te){var Xe=+$e[v.Gc];!k[Xe]&&le>=we&&(Oe[ae]($e[v.gU]),k[Xe]=!0)}else le>=we&&Oe[ae]($e[v.gU]);oe(we,$e)}},Oe[N.cL]=function(we){b("warn",we),ze("warning",we)},Oe[N.ys]=function(we){b("error",we),ze("error",we)},Oe.resetInternalMessageCount=function(){Y=0,k={}},Oe[v.jk]=oe;function oe(we,ve){if(!D()){var G=!0,se=O+ve[v.Gc];if(k[se]?G=!1:k[se]=!0,G&&(we<=J&&(Oe.queue[v.MW](ve),Y++,ze(we===1?"error":"warn",ve)),Y===fe)){var Te="Internal events throttle limit per PageView reached for this app.",$e=new $(23,Te,!1);Oe.queue[v.MW]($e),we===1?Oe[N.ys](Te):Oe[N.cL](Te)}}}o(oe,"_logInternalMessage");function Se(we){le=(0,W.v4)(we.loggingLevelConsole,0),J=(0,W.v4)(we.loggingLevelTelemetry,1),fe=(0,W.v4)(we.maxMessageLimit,25),De=(0,W.v4)(we.enableDebug,(0,W.v4)(we[v.Fr],!1))}o(Se,"_setDefaultsFromConfig");function D(){return Y>=fe}o(D,"_areInternalMessagesThrottled");function ze(we,ve){var G=(0,I.j)(T||{});G&&G[v.mc]&&G[v.mc](we,ve)}o(ze,"_debugExtMsg")})}return o(ee,"DiagnosticLogger"),ee.__ieDyn=1,ee}();function q(ee){return ee||new j}o(q,"_getLogger");function Ee(ee,T,Y,k,le,J){J===void 0&&(J=!1),q(ee).throwInternal(T,Y,k,le,J)}o(Ee,"_throwInternal");function z(ee,T){q(ee)[N.cL](T)}o(z,"_warnToConsole");function Z(ee,T,Y){q(ee)[v.jk](T,Y)}o(Z,"_logInternalMessage")},7630:(it,l,C)=>{"use strict";C.d(l,{dI:()=>Oe,a8:()=>oe,Ym:()=>Se,Jj:()=>D,Nv:()=>ze,Me:()=>we,d6:()=>ve,jW:()=>G,fE:()=>se,s1:()=>Te,k$:()=>$e,dr:()=>ae,r:()=>Xe,nS:()=>lt,xA:()=>mt,MX:()=>P,gz:()=>U,b$:()=>re,w1:()=>de,sA:()=>Ue,eU:()=>Pe,MF:()=>Ce,JO:()=>Me,cp:()=>Je,Z3:()=>me,ed:()=>Ze,pI:()=>tt});var R=C(4392),v=C(2091),I=C(8096),y=C(6708),W=C(6041),N="window",m="document",w="documentMode",O="navigator",H="history",b="location",$="console",F="performance",j="JSON",q="crypto",Ee="msCrypto",z="ReactNative",Z="msie",ee="trident/",T="XMLHttpRequest",Y=null,k=null,le=!1,J=null,fe=null;function De(_e,B){var K=!1;if(_e){try{if(K=B in _e,!K){var Ye=_e[R.hB];Ye&&(K=B in Ye)}}catch(Tn){}if(!K)try{var Jt=new _e;K=!(0,y.o8)(Jt[B])}catch(Tn){}}return K}o(De,"_hasProperty");function Oe(_e){le=_e}o(Oe,"setEnableEnvMocks");function oe(_e){var B=(0,v.Rd)();return B&&B[_e]?B[_e]:_e===N&&Se()?window:null}o(oe,"getGlobalInst");function Se(){return Boolean(typeof window===R.fK&&window)}o(Se,"hasWindow");function D(){return Se()?window:oe(N)}o(D,"getWindow");function ze(){return Boolean(typeof document===R.fK&&document)}o(ze,"hasDocument");function we(){return ze()?document:oe(m)}o(we,"getDocument");function ve(){return Boolean(typeof navigator===R.fK&&navigator)}o(ve,"hasNavigator");function G(){return ve()?navigator:oe(O)}o(G,"getNavigator");function se(){return Boolean(typeof history===R.fK&&history)}o(se,"hasHistory");function Te(){return se()?history:oe(H)}o(Te,"getHistory");function $e(_e){if(_e&&le){var B=oe("__mockLocation");if(B)return B}return typeof location===R.fK&&location?location:oe(b)}o($e,"getLocation");function ae(){return typeof console!==R.jA?console:oe($)}o(ae,"getConsole");function Xe(){return oe(F)}o(Xe,"getPerformance");function lt(){return Boolean(typeof JSON===R.fK&&JSON||oe(j)!==null)}o(lt,"hasJSON");function mt(){return lt()?JSON||oe(j):null}o(mt,"getJSON");function P(){return oe(q)}o(P,"getCrypto");function U(){return oe(Ee)}o(U,"getMsCrypto");function re(){var _e=G();return _e&&_e.product?_e.product===z:!1}o(re,"isReactNative");function de(){var _e=G();if(_e&&(_e[I.qV]!==k||Y===null)){k=_e[I.qV];var B=(k||W.qS)[I.T1]();Y=(0,y._Q)(B,Z)||(0,y._Q)(B,ee)}return Y}o(de,"isIE");function Ue(_e){if(_e===void 0&&(_e=null),!_e){var B=G()||{};_e=B?(B[I.qV]||W.qS)[I.T1]():W.qS}var K=(_e||W.qS)[I.T1]();if((0,y._Q)(K,Z)){var Ye=we()||{};return Math.max(parseInt(K[I.w6](Z)[1]),Ye[w]||0)}else if((0,y._Q)(K,ee)){var Jt=parseInt(K[I.w6](ee)[1]);if(Jt)return Jt+4}return null}o(Ue,"getIEVersion");function Pe(_e){var B=Object[R.hB].toString[I._S](_e),K=W.qS;return B==="[object Error]"?K="{ stack: '"+_e.stack+"', message: '"+_e.message+"', name: '"+_e[I.I]+"'":lt()&&(K=mt().stringify(_e)),B+K}o(Pe,"dumpObj");function ce(_e){if(!_e||!isString(_e)){var B=G()||{};_e=B?(B[_DYN_USER_AGENT]||STR_EMPTY)[_DYN_TO_LOWER_CASE]():STR_EMPTY}var K=(_e||STR_EMPTY)[_DYN_TO_LOWER_CASE]();return K[_DYN_INDEX_OF]("safari")>=0}o(ce,"isSafari");function Ce(){return fe===null&&(fe=ve()&&Boolean(G().sendBeacon)),fe}o(Ce,"isBeaconsSupported");function Me(_e){var B=!1;try{B=!!oe("fetch");var K=oe("Request");B&&_e&&K&&(B=De(K,"keepalive"))}catch(Ye){}return B}o(Me,"isFetchSupported");function Je(){return J===null&&(J=typeof XDomainRequest!==R.jA,J&&me()&&(J=J&&!De(oe(T),"withCredentials"))),J}o(Je,"useXDomainRequest");function me(){var _e=!1;try{var B=oe(T);_e=!!B}catch(K){}return _e}o(me,"isXhrSupported");function xe(_e,B){if(_e)for(var K=0;K<_e[I.R5];K++){var Ye=_e[K];if(Ye[I.I]&&Ye[I.I]===B)return Ye}return{}}o(xe,"_getNamedValue");function Ze(_e){var B=we();return B&&_e?xe(B.querySelectorAll("meta"),_e).content:null}o(Ze,"findMetaTag");function tt(_e){var B,K=Xe();if(K){var Ye=K.getEntriesByType("navigation")||[];B=xe((Ye[I.R5]>0?Ye[0]:{}).serverTiming,_e).description}return B}o(tt,"findNamedServerTiming")},4869:(it,l,C)=>{"use strict";C.d(l,{um:()=>De,jU:()=>we,XO:()=>ve,QY:()=>G,pZ:()=>se,pD:()=>Te,Ib:()=>$e,C1:()=>ae,yw:()=>lt,nJ:()=>mt,c9:()=>P,JA:()=>U,TJ:()=>re,C9:()=>de,nD:()=>Ue,Yl:()=>Pe});var R=C(8096),v=C(5883),I=C(7630),y=C(6708),W=C(6041),N="on",m="attachEvent",w="addEventListener",O="detachEvent",H="removeEventListener",b="events",$="visibilitychange",F="pagehide",j="pageshow",q="unload",Ee="beforeunload",z=(0,v.J)("aiEvtPageHide"),Z=(0,v.J)("aiEvtPageShow"),ee=/\.[\.]+/g,T=/[\.]+$/,Y=1,k=(0,v.K)("events"),le=/^([^.]*)(?:\.(.+)|)/;function J(ce){return ce&&ce[R.i7]?ce[R.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,W.qS):ce}o(J,"_normalizeNamespace");function fe(ce,Ce){var Me;if(Ce){var Je=W.qS;(0,y.kJ)(Ce)?(Je=W.qS,(0,y.tO)(Ce,function(xe){xe=J(xe),xe&&(xe[0]!=="."&&(xe="."+xe),Je+=xe)})):Je=J(Ce),Je&&(Je[0]!=="."&&(Je="."+Je),ce=(ce||W.qS)+Je)}var me=le.exec(ce||W.qS)||[];return Me={},Me[R.P6]=me[1],Me.ns=(me[2]||W.qS).replace(ee,".").replace(T,W.qS)[R.w6](".").sort().join("."),Me}o(fe,"_getEvtNamespace");function De(ce,Ce,Me){var Je=[],me=k.get(ce,b,{},!1),xe=fe(Ce,Me);return(0,y.rW)(me,function(Ze,tt){(0,y.tO)(tt,function(_e){var B;(!xe[R.P6]||xe[R.P6]===_e.evtName[R.P6])&&(!xe.ns||xe.ns===xe.ns)&&Je[R.MW]((B={},B[R.I]=_e.evtName[R.P6]+(_e.evtName.ns?"."+_e.evtName.ns:W.qS),B.handler=_e[R.Kn],B))})}),Je}o(De,"__getRegisteredEvents");function Oe(ce,Ce,Me){Me===void 0&&(Me=!0);var Je=k.get(ce,b,{},Me),me=Je[Ce];return me||(me=Je[Ce]=[]),me}o(Oe,"_getRegisteredEvents");function oe(ce,Ce,Me,Je){ce&&Ce&&Ce[R.P6]&&(ce[H]?ce[H](Ce[R.P6],Me,Je):ce[O]&&ce[O](N+Ce[R.P6],Me))}o(oe,"_doDetach");function Se(ce,Ce,Me,Je){var me=!1;return ce&&Ce&&Ce[R.P6]&&Me&&(ce[w]?(ce[w](Ce[R.P6],Me,Je),me=!0):ce[m]&&(ce[m](N+Ce[R.P6],Me),me=!0)),me}o(Se,"_doAttach");function D(ce,Ce,Me,Je){for(var me=Ce[R.R5];me--;){var xe=Ce[me];xe&&(!Me.ns||Me.ns===xe.evtName.ns)&&(!Je||Je(xe))&&(oe(ce,xe.evtName,xe[R.Kn],xe.capture),Ce[R.cb](me,1))}}o(D,"_doUnregister");function ze(ce,Ce,Me){if(Ce[R.P6])D(ce,Oe(ce,Ce[R.P6]),Ce,Me);else{var Je=k.get(ce,b,{});(0,y.rW)(Je,function(me,xe){D(ce,xe,Ce,Me)}),(0,y.FY)(Je)[R.R5]===0&&k.kill(ce,b)}}o(ze,"_unregisterEvents");function we(ce,Ce){var Me;return Ce?((0,y.kJ)(Ce)?Me=[ce].concat(Ce):Me=[ce,Ce],Me=fe("xx",Me).ns[R.w6](".")):Me=ce,Me}o(we,"mergeEvtNamespace");function ve(ce,Ce,Me,Je,me){var xe;me===void 0&&(me=!1);var Ze=!1;if(ce)try{var tt=fe(Ce,Je);if(Ze=Se(ce,tt,Me,me),Ze&&k.accept(ce)){var _e=(xe={guid:Y++,evtName:tt},xe[R.Kn]=Me,xe.capture=me,xe);Oe(ce,tt.type)[R.MW](_e)}}catch(B){}return Ze}o(ve,"eventOn");function G(ce,Ce,Me,Je,me){if(me===void 0&&(me=!1),ce)try{var xe=fe(Ce,Je),Ze=!1;ze(ce,xe,function(tt){return xe.ns&&!Me||tt[R.Kn]===Me?(Ze=!0,!0):!1}),Ze||oe(ce,xe,Me,me)}catch(tt){}}o(G,"eventOff");function se(ce,Ce,Me,Je){return Je===void 0&&(Je=!1),ve(ce,Ce,Me,null,Je)}o(se,"attachEvent");function Te(ce,Ce,Me,Je){Je===void 0&&(Je=!1),G(ce,Ce,Me,null,Je)}o(Te,"detachEvent");function $e(ce,Ce,Me){var Je=!1,me=(0,I.Jj)();me&&(Je=ve(me,ce,Ce,Me),Je=ve(me.body,ce,Ce,Me)||Je);var xe=(0,I.Me)();return xe&&(Je=ve(xe,ce,Ce,Me)||Je),Je}o($e,"addEventHandler");function ae(ce,Ce,Me){var Je=(0,I.Jj)();Je&&(G(Je,ce,Ce,Me),G(Je.body,ce,Ce,Me));var me=(0,I.Me)();me&&G(me,ce,Ce,Me)}o(ae,"removeEventHandler");function Xe(ce,Ce,Me,Je){var me=!1;return Ce&&ce&&ce[R.R5]>0&&(0,y.tO)(ce,function(xe){xe&&(!Me||(0,y.UA)(Me,xe)===-1)&&(me=$e(xe,Ce,Je)||me)}),me}o(Xe,"_addEventListeners");function lt(ce,Ce,Me,Je){var me=!1;return Ce&&ce&&(0,y.kJ)(ce)&&(me=Xe(ce,Ce,Me,Je),!me&&Me&&Me[R.R5]>0&&(me=Xe(ce,Ce,null,Je))),me}o(lt,"addEventListeners");function mt(ce,Ce,Me){ce&&(0,y.kJ)(ce)&&(0,y.tO)(ce,function(Je){Je&&ae(Je,Ce,Me)})}o(mt,"removeEventListeners");function P(ce,Ce,Me){return lt([Ee,q,F],ce,Ce,Me)}o(P,"addPageUnloadEventListener");function U(ce,Ce){mt([Ee,q,F],ce,Ce)}o(U,"removePageUnloadEventListener");function re(ce,Ce,Me){function Je(Ze){var tt=(0,I.Me)();ce&&tt&&tt.visibilityState==="hidden"&&ce(Ze)}o(Je,"_handlePageVisibility");var me=we(z,Me),xe=Xe([F],ce,Ce,me);return(!Ce||(0,y.UA)(Ce,$)===-1)&&(xe=Xe([$],Je,Ce,me)||xe),!xe&&Ce&&(xe=re(ce,null,Me)),xe}o(re,"addPageHideEventListener");function de(ce,Ce){var Me=we(z,Ce);mt([F],ce,Me),mt([$],null,Me)}o(de,"removePageHideEventListener");function Ue(ce,Ce,Me){function Je(Ze){var tt=(0,I.Me)();ce&&tt&&tt.visibilityState==="visible"&&ce(Ze)}o(Je,"_handlePageVisibility");var me=we(Z,Me),xe=Xe([j],ce,Ce,me);return xe=Xe([$],Je,Ce,me)||xe,!xe&&Ce&&(xe=Ue(ce,null,Me)),xe}o(Ue,"addPageShowEventListener");function Pe(ce,Ce){var Me=we(Z,Ce);mt([j],ce,Me),mt([$],null,Me)}o(Pe,"removePageShowEventListener")},6708:(it,l,C)=>{"use strict";C.d(l,{Ym:()=>se,o8:()=>Te,le:()=>ae,BX:()=>Xe,nr:()=>lt,Kn:()=>mt,mf:()=>P,Gf:()=>re,rW:()=>de,Id:()=>Ue,xe:()=>ce,_Q:()=>Me,J_:()=>Je,kJ:()=>me,VZ:()=>Ze,HD:()=>tt,hj:()=>_e,jn:()=>B,Y6:()=>Jt,tO:()=>Pn,UA:()=>Sn,Mr:()=>sr,Xz:()=>or,nd:()=>vr,FY:()=>ft,l_:()=>Kt,_A:()=>on,FL:()=>Vt,Xi:()=>En,m6:()=>jn,jj:()=>fr,sO:()=>Xn,qK:()=>Dr,v4:()=>$r,F:()=>Cr,fQ:()=>Rr,_y:()=>Fr,cf:()=>Bn,Oi:()=>_r,Vb:()=>Kr,hl:()=>Tr,Ax:()=>vi,mm:()=>br});var R=C(4392),v=C(2091),I=C(8096),y=C(6041),W="toISOString",N="endsWith",m="startsWith",w="indexOf",O="map",H="reduce",b="trim",$="toString",F="__proto__",j="constructor",q=R.RJ,Ee=R.Pw.freeze,z=R.Pw.seal,Z=R.Pw.keys,ee=String[R.hB],T=ee[b],Y=ee[N],k=ee[m],le=Date[R.hB],J=le[W],fe=Array.isArray,De=R.V4[$],Oe=R.CY[$],oe=Oe[I._S](R.Pw),Se=/-([a-z])/g,D=/([^\w\d_$])/g,ze=/^(\d+[\w\d_$])/,we=Object.getPrototypeOf;function ve(M){if(M){if(we)return we(M);var ue=M[F]||M[R.hB]||M[j];if(ue)return ue}return null}o(ve,"_getObjProto");function G(M){return De[_DYN_CALL](M)}o(G,"objToString");function se(M,ue){return typeof M===ue}o(se,"isTypeof");function Te(M){return M===void 0||typeof M===R.jA}o(Te,"isUndefined");function $e(M){return!Te(M)}o($e,"isNotUndefined");function ae(M){return M===null||Te(M)}o(ae,"isNullOrUndefined");function Xe(M){return!ae(M)}o(Xe,"isNotNullOrUndefined");function lt(M,ue){return!!(M&&R.CY[I._S](M,ue))}o(lt,"hasOwnProperty");function mt(M){return!!(M&&typeof M===R.fK)}o(mt,"isObject");function P(M){return!!(M&&typeof M===R.cb)}o(P,"isFunction");function U(M){return M&&P(M.then)}o(U,"isPromiseLike");function re(M){var ue=M;return ue&&tt(ue)&&(ue=ue[I.i7](Se,function(Ae,Le){return Le.toUpperCase()}),ue=ue[I.i7](D,"_"),ue=ue[I.i7](ze,function(Ae,Le){return"_"+Le})),ue}o(re,"normalizeJsName");function de(M,ue){if(M)for(var Ae in M)R.CY[I._S](M,Ae)&&ue[I._S](M,Ae,M[Ae])}o(de,"objForEachKey");function Ue(M,ue){var Ae=!1;return M&&ue&&!(Ae=M===ue)&&(Ae=Y?M[N](ue):Pe(M,ue)),Ae}o(Ue,"strEndsWith");function Pe(M,ue){var Ae=!1,Le=ue?ue[I.R5]:0,et=M?M[I.R5]:0;if(Le&&et&&et>=Le&&!(Ae=M===ue)){for(var je=et-1,ct=Le-1;ct>=0;ct--){if(M[je]!=ue[ct])return!1;je--}Ae=!0}return Ae}o(Pe,"_strEndsWithPoly");function ce(M,ue){var Ae=!1;return M&&ue&&!(Ae=M===ue)&&(Ae=k?M[m](ue):Ce(M,ue)),Ae}o(ce,"strStartsWith");function Ce(M,ue){var Ae=!1,Le=ue?ue[I.R5]:0;if(M&&Le&&M[I.R5]>=Le&&!(Ae=M===ue)){for(var et=0;et<Le;et++)if(M[et]!==ue[et])return!1;Ae=!0}return Ae}o(Ce,"_strStartsWithPoly");function Me(M,ue){return M&&ue?M[I.ou](ue)!==-1:!1}o(Me,"strContains");function Je(M){return!!(M&&De[I._S](M)==="[object Date]")}o(Je,"isDate");var me=fe||xe;function xe(M){return!!(M&&De[I._S](M)==="[object Array]")}o(xe,"_isArrayPoly");function Ze(M){return!!(M&&De[I._S](M)==="[object Error]")}o(Ze,"isError");function tt(M){return typeof M=="string"}o(tt,"isString");function _e(M){return typeof M=="number"}o(_e,"isNumber");function B(M){return typeof M=="boolean"}o(B,"isBoolean");function K(M){return typeof M=="symbol"}o(K,"isSymbol");function Ye(M){var ue=!1;if(M&&typeof M=="object"){var Ae=we?we(M):ve(M);Ae?(Ae[j]&&R.CY[I._S](Ae,j)&&(Ae=Ae[j]),ue=typeof Ae===R.cb&&Oe[I._S](Ae)===oe):ue=!0}return ue}o(Ye,"isPlainObject");function Jt(M){if(M)return J?M[W]():Tn(M)}o(Jt,"toISOString");function Tn(M){if(M&&M.getUTCFullYear){var ue=o(function(Ae){var Le=String(Ae);return Le[I.R5]===1&&(Le="0"+Le),Le},"pad");return M.getUTCFullYear()+"-"+ue(M.getUTCMonth()+1)+"-"+ue(M.getUTCDate())+"T"+ue(M.getUTCHours())+":"+ue(M.getUTCMinutes())+":"+ue(M.getUTCSeconds())+"."+String((M.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}o(Tn,"_toISOStringPoly");function Pn(M,ue,Ae){var Le=M[I.R5];try{for(var et=0;et<Le&&!(et in M&&ue[I._S](Ae||M,M[et],et,M)===-1);et++);}catch(je){}}o(Pn,"arrForEach");function Sn(M,ue,Ae){if(M){if(M[w])return M[w](ue,Ae);var Le=M[I.R5],et=Ae||0;try{for(var je=Math.max(et>=0?et:Le-Math.abs(et),0);je<Le;je++)if(je in M&&M[je]===ue)return je}catch(ct){}}return-1}o(Sn,"arrIndexOf");function sr(M,ue,Ae){var Le;if(M){if(M[O])return M[O](ue,Ae);var et=M[I.R5],je=Ae||M;Le=new Array(et);try{for(var ct=0;ct<et;ct++)ct in M&&(Le[ct]=ue[I._S](je,M[ct],M))}catch(Dt){}}return Le}o(sr,"arrMap");function or(M,ue,Ae){var Le;if(M){if(M[H])return M[H](ue,Ae);var et=M[I.R5],je=0;if(arguments[I.R5]>=3)Le=arguments[2];else{for(;je<et&&!(je in M);)je++;Le=M[je++]}for(;je<et;)je in M&&(Le=ue(Le,M[je],je,M)),je++}return Le}o(or,"arrReduce");function vr(M){return M&&(M=T&&M[b]?M[b]():M[I.i7]?M[I.i7](/^\s+|(?=\s)\s+$/g,y.qS):M),M}o(vr,"strTrim");var lr=!{toString:null}.propertyIsEnumerable("toString"),pr=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function ft(M){var ue=typeof M;if(ue!==R.cb&&(ue!==R.fK||M===null)&&(0,v.ZU)("objKeys called on non-object"),!lr&&Z)return Z(M);var Ae=[];for(var Le in M)M&&R.CY[I._S](M,Le)&&Ae[I.MW](Le);if(lr)for(var et=pr[I.R5],je=0;je<et;je++)M&&R.CY[I._S](M,pr[je])&&Ae[I.MW](pr[je]);return Ae}o(ft,"objKeys");function Kt(M,ue,Ae,Le){if(q)try{var et={enumerable:!0,configurable:!0};return Ae&&(et.get=Ae),Le&&(et.set=Le),q(M,ue,et),!0}catch(je){}return!1}o(Kt,"objDefineAccessors");function rn(M){return M}o(rn,"_doNothing");function on(M){return Ee&&de(M,function(ue,Ae){(me(Ae)||mt(Ae))&&Ee(Ae)}),Vt(M)}o(on,"deepFreeze");var Vt=Ee||rn,En=z||rn;function jn(){var M=Date;return M.now?M.now():new M().getTime()}o(jn,"dateNow");function fr(M){return Ze(M)?M[I.I]:y.qS}o(fr,"getExceptionName");function Xn(M,ue,Ae,Le,et){var je=Ae;return M&&(je=M[ue],je!==Ae&&(!et||et(je))&&(!Le||Le(Ae))&&(je=Ae,M[ue]=je)),je}o(Xn,"setValue");function Dr(M,ue,Ae){var Le;return M?(Le=M[ue],!Le&&ae(Le)&&(Le=Te(Ae)?{}:Ae,M[ue]=Le)):Le=Te(Ae)?{}:Ae,Le}o(Dr,"getSetValue");function $r(M,ue){return ae(M)?ue:M}o($r,"getCfgValue");function Cr(M){return!M}o(Cr,"isNotTruthy");function Rr(M){return!!M}o(Rr,"isTruthy");function Fr(M){throw new Error(M)}o(Fr,"throwError");function xn(M,ue){var Ae=null,Le=null;return P(M)?Ae=M:Le=M,function(){var et=arguments;if(Ae&&(Le=Ae()),Le)return Le[ue][I.ZV](Le,et)}}o(xn,"_createProxyFunction");function Bn(M,ue,Ae){if(M&&ue&&mt(M)&&mt(ue)){var Le=o(function(je){if(tt(je)){var ct=ue[je];P(ct)?(!Ae||Ae(je,!0,ue,M))&&(M[je]=xn(ue,je)):(!Ae||Ae(je,!1,ue,M))&&(lt(M,je)&&delete M[je],Kt(M,je,function(){return ue[je]},function(Dt){ue[je]=Dt})||(M[je]=ct))}},"_loop_1");for(var et in ue)Le(et)}return M}o(Bn,"proxyAssign");function _r(M,ue,Ae,Le,et){M&&ue&&Ae&&(et!==!1||Te(M[ue]))&&(M[ue]=xn(Ae,Le))}o(_r,"proxyFunctionAs");function Kr(M,ue,Ae,Le){return M&&ue&&mt(M)&&me(Ae)&&Pn(Ae,function(et){tt(et)&&_r(M,et,ue,et,Le)}),M}o(Kr,"proxyFunctions");function Tr(M){return function(){function ue(){var Ae=this;M&&de(M,function(Le,et){Ae[Le]=et})}return o(ue,"class_1"),ue}()}o(Tr,"createClassFromInterface");function vi(M){return M&&R.rl&&(M=(0,R.Pw)((0,R.rl)({},M))),M}o(vi,"optimizeObject");function br(M,ue,Ae,Le,et,je){var ct=arguments,Dt=ct[0]||{},Rt=ct[I.R5],_t=!1,Ct=1;for(Rt>0&&B(Dt)&&(_t=Dt,Dt=ct[Ct]||{},Ct++),mt(Dt)||(Dt={});Ct<Rt;Ct++){var Ft=ct[Ct],Bt=me(Ft),Nt=mt(Ft);for(var kt in Ft){var Jn=Bt&&kt in Ft||Nt&&R.CY[I._S](Ft,kt);if(!!Jn){var An=Ft[kt],mr=void 0;if(_t&&An&&((mr=me(An))||Ye(An))){var qn=Dt[kt];mr?me(qn)||(qn=[]):Ye(qn)||(qn={}),An=br(_t,qn,An)}An!==void 0&&(Dt[kt]=An)}}}return Dt}o(br,"objExtend")},6041:(it,l,C)=>{"use strict";C.d(l,{qS:()=>R,Z:()=>v,oV:()=>I,DN:()=>y,mE:()=>W,Zh:()=>N,js:()=>m,hL:()=>w,yi:()=>O,uC:()=>H,$F:()=>b,f_:()=>$,C$:()=>F,ys:()=>j,cL:()=>q,kl:()=>Ee});var R="",v="channels",I="core",y="createPerfMgr",W="disabled",N="extensionConfig",m="extensions",w="processTelemetry",O="priority",H="eventsSent",b="eventsDiscarded",$="eventsSendRequest",F="perfEvent",j="errorToConsole",q="warnToConsole",Ee="getPerfMgr"},1880:(it,l,C)=>{"use strict";C.d(l,{f:()=>N});var R=C(1679),v=C(8096),I=C(6708),y=C(6041);function W(m,w,O,H){(0,I.tO)(m,function(b){if(b&&b[w])if(O)setTimeout(function(){return H(b)},0);else try{H(b)}catch($){}})}o(W,"_runListeners");var N=function(){function m(w){this.listeners=[];var O=!!(w||{}).perfEvtsSendAll;(0,R.Z)(m,this,function(H){H[v.g]=function(b){H.listeners[v.MW](b)},H[v.n7]=function(b){for(var $=(0,I.UA)(H[v.dE],b);$>-1;)H.listeners[v.cb]($,1),$=(0,I.UA)(H[v.dE],b)},H[y.uC]=function(b){W(H[v.dE],y.uC,!0,function($){$[y.uC](b)})},H[y.$F]=function(b,$){W(H[v.dE],y.$F,!0,function(F){F[y.$F](b,$)})},H[y.f_]=function(b,$){W(H[v.dE],y.f_,$,function(F){F[y.f_](b,$)})},H[y.C$]=function(b){b&&(O||!b[v.PL]())&&W(H[v.dE],y.C$,!1,function($){b[v.d]?setTimeout(function(){return $[y.C$](b)},0):$[y.C$](b)})}})}return o(m,"NotificationManager"),m.__ieDyn=1,m}()},9288:(it,l,C)=>{"use strict";C.d(l,{zn:()=>O,Jk:()=>H,Lm:()=>$,j5:()=>j});var R=C(1679),v=C(8096),I=C(6708),y=C(6041),W="ctx",N="ParentContextKey",m="ChildrenContextKey",w=null,O=function(){function q(Ee,z,Z){var ee=this,T=!1;if(ee.start=(0,I.m6)(),ee[v.I]=Ee,ee[v.d]=Z,ee[v.PL]=function(){return!1},(0,I.mf)(z)){var Y;T=(0,I.l_)(ee,"payload",function(){return!Y&&(0,I.mf)(z)&&(Y=z(),z=null),Y})}ee[v.T]=function(k){return k?k===q[N]||k===q[m]?ee[k]:(ee[W]||{})[k]:null},ee[v.wu]=function(k,le){if(k)if(k===q[N])ee[k]||(ee[v.PL]=function(){return!0}),ee[k]=le;else if(k===q[m])ee[k]=le;else{var J=ee[W]=ee[W]||{};J[k]=le}},ee[v.Km]=function(){var k=0,le=ee[v.T](q[m]);if((0,I.kJ)(le))for(var J=0;J<le[v.R5];J++){var fe=le[J];fe&&(k+=fe[v.Z_])}ee[v.Z_]=(0,I.m6)()-ee.start,ee.exTime=ee[v.Z_]-k,ee[v.Km]=function(){},!T&&(0,I.mf)(z)&&(ee.payload=z())}}return o(q,"PerfEvent"),q.ParentContextKey="parent",q.ChildrenContextKey="childEvts",q}(),H=function(){function q(Ee){this.ctx={},(0,R.Z)(q,this,function(z){z.create=function(Z,ee,T){return new O(Z,ee,T)},z.fire=function(Z){Z&&(Z[v.Km](),Ee&&(0,I.mf)(Ee[y.C$])&&Ee[y.C$](Z))},z[v.wu]=function(Z,ee){if(Z){var T=z[W]=z[W]||{};T[Z]=ee}},z[v.T]=function(Z){return(z[W]||{})[Z]}})}return o(q,"PerfManager"),q.__ieDyn=1,q}(),b="CoreUtils.doPerf";function $(q,Ee,z,Z,ee){if(q){var T=q;if(T[y.kl]&&(T=T[y.kl]()),T){var Y=void 0,k=T[v.T](b);try{if(Y=T.create(Ee(),Z,ee),Y){if(k&&Y[v.wu]&&(Y[v.wu](O[N],k),k[v.T]&&k[v.wu])){var le=k[v.T](O[m]);le||(le=[],k[v.wu](O[m],le)),le[v.MW](Y)}return T[v.wu](b,Y),z(Y)}}catch(J){Y&&Y[v.wu]&&Y[v.wu]("exception",J)}finally{Y&&T.fire(Y),T[v.wu](b,k)}}}return z()}o($,"doPerf");function F(q){w=q}o(F,"setGblPerfMgr");function j(){return w}o(j,"getGblPerfMgr")},1589:(it,l,C)=>{"use strict";C.d(l,{CD:()=>j,Bt:()=>q,xy:()=>Ee,jV:()=>z,Vi:()=>ee});var R=C(8096),v=C(5018),I=C(7630),y=C(6708),W=C(6041),N=C(9288),m=C(3833),w="TelemetryPluginChain",O="_hasRun",H="_getTelCtx",b=0;function $(T,Y,k){for(;T;){if(T[R.TO]()===k)return T;T=T[R.W2]()}return z([k],Y[R.TC]||{},Y)}o($,"_getNextProxyStart");function F(T,Y,k,le){var J=null,fe=[];le!==null&&(J=le?$(T,k,le):T);var De={_next:oe,ctx:{core:function(){return k},diagLog:function(){return(0,v.vH)(k,Y)},getCfg:function(){return Y},getExtCfg:Se,getConfig:D,hasNext:function(){return!!J},getNext:function(){return J},setNext:function(we){J=we},iterate:ze,onComplete:Oe}};function Oe(we,ve){for(var G=[],se=2;se<arguments.length;se++)G[se-2]=arguments[se];we&&fe[R.MW]({func:we,self:(0,y.o8)(ve)?De.ctx:ve,args:G})}o(Oe,"_addOnComplete");function oe(){var we=J;if(J=we?we[R.W2]():null,!we){var ve=fe;ve&&ve[R.R5]>0&&((0,y.tO)(ve,function(G){try{G.func[R._S](G.self,G.args)}catch(se){(0,v.kP)(k[R.eZ],2,73,"Unexpected Exception during onComplete - "+(0,I.eU)(se))}}),fe=[])}return we}o(oe,"_moveNext");function Se(we,ve,G){ve===void 0&&(ve={}),G===void 0&&(G=0);var se;if(Y){var Te=Y[W.Zh];Te&&we&&(se=Te[we])}if(!se)se=ve;else if((0,y.Kn)(ve)&&G!==0){var $e=(0,y.mm)(!0,ve,se);Y&&G===2&&(0,y.rW)(ve,function(ae){if((0,y.le)($e[ae])){var Xe=Y[ae];(0,y.le)(Xe)||($e[ae]=Xe)}}),se=$e}return se}o(Se,"_getExtCfg");function D(we,ve,G){G===void 0&&(G=!1);var se,Te=Se(we,null);return Te&&!(0,y.le)(Te[ve])?se=Te[ve]:Y&&!(0,y.le)(Y[ve])&&(se=Y[ve]),(0,y.le)(se)?G:se}o(D,"_getConfig");function ze(we){for(var ve;ve=De._next();){var G=ve[R.TO]();G&&we(G)}}return o(ze,"_iterateChain"),De}o(F,"_createInternalContext");function j(T,Y,k,le){var J=F(T,Y,k,le),fe=J.ctx;function De(oe){var Se=J._next();return Se&&Se[W.hL](oe,fe),!Se}o(De,"_processNext");function Oe(oe,Se){return oe===void 0&&(oe=null),(0,y.kJ)(oe)&&(oe=z(oe,Y,k,Se)),j(oe||fe[R.W2](),Y,k,Se)}return o(Oe,"_createNew"),fe[R.uL]=De,fe[R.zV]=Oe,fe}o(j,"createProcessTelemetryContext");function q(T,Y,k){var le=Y[R.TC]||{},J=F(T,le,Y,k),fe=J.ctx;function De(oe){var Se=J._next();return Se&&Se.unload(fe,oe),!Se}o(De,"_processNext");function Oe(oe,Se){return oe===void 0&&(oe=null),(0,y.kJ)(oe)&&(oe=z(oe,le,Y,Se)),q(oe||fe[R.W2](),Y,Se)}return o(Oe,"_createNew"),fe[R.uL]=De,fe[R.zV]=Oe,fe}o(q,"createProcessTelemetryUnloadContext");function Ee(T,Y,k){var le=Y[R.TC]||{},J=F(T,le,Y,k),fe=J.ctx;function De(oe){return fe.iterate(function(Se){(0,y.mf)(Se[R.Tu])&&Se[R.Tu](fe,oe)})}o(De,"_processNext");function Oe(oe,Se){return oe===void 0&&(oe=null),(0,y.kJ)(oe)&&(oe=z(oe,le,Y,Se)),Ee(oe||fe[R.W2](),Y,Se)}return o(Oe,"_createNew"),fe[R.uL]=De,fe[R.zV]=Oe,fe}o(Ee,"createProcessTelemetryUpdateContext");function z(T,Y,k,le){var J=null,fe=!le;if((0,y.kJ)(T)&&T[R.R5]>0){var De=null;(0,y.tO)(T,function(Oe){if(!fe&&le===Oe&&(fe=!0),fe&&Oe&&(0,y.mf)(Oe[W.hL])){var oe=Z(Oe,Y,k);J||(J=oe),De&&De._setNext(oe),De=oe}})}return le&&!J?z([le],Y,k):J}o(z,"createTelemetryProxyChain");function Z(T,Y,k){var le=null,J=(0,y.mf)(T[W.hL]),fe=(0,y.mf)(T[R.Jd]),De;T?De=T[R.pZ]+"-"+T[W.yi]+"-"+b++:De="Unknown-0-"+b++;var Oe={getPlugin:function(){return T},getNext:function(){return le},processTelemetry:D,unload:ze,update:we,_id:De,_setNext:function(ve){le=ve}};function oe(){var ve;return T&&(0,y.mf)(T[H])&&(ve=T[H]()),ve||(ve=j(Oe,Y,k)),ve}o(oe,"_getTelCtx");function Se(ve,G,se,Te,$e){var ae=!1,Xe=T?T[R.pZ]:w,lt=ve[O];return lt||(lt=ve[O]={}),ve.setNext(le),T&&(0,N.Lm)(ve[W.oV](),function(){return Xe+":"+se},function(){lt[De]=!0;try{var mt=le?le._id:W.qS;mt&&(lt[mt]=!1),ae=G(ve)}catch(U){var P=le?lt[le._id]:!0;P&&(ae=!0),(!le||!P)&&(0,v.kP)(ve[R.mc](),1,73,"Plugin ["+Xe+"] failed during "+se+" - "+(0,I.eU)(U)+", run flags: "+(0,I.eU)(lt))}},Te,$e),ae}o(Se,"_processChain");function D(ve,G){G=G||oe();function se(Te){if(!T||!J)return!1;var $e=(0,m.OY)(T);return $e[R.fi]||$e[W.mE]?!1:(fe&&T[R.Jd](le),T[W.hL](ve,Te),!0)}o(se,"_callProcessTelemetry"),Se(G,se,"processTelemetry",function(){return{item:ve}},!ve.sync)||G[R.uL](ve)}o(D,"_processTelemetry");function ze(ve,G){function se(){var Te=!1;if(T){var $e=(0,m.OY)(T),ae=T[W.oV]||$e[W.oV];T&&(!ae||ae===ve.core())&&!$e[R.fi]&&($e[W.oV]=null,$e[R.fi]=!0,$e[R.yl]=!1,T[R.fi]&&T[R.fi](ve,G)===!0&&(Te=!0))}return Te}o(se,"_callTeardown"),Se(ve,se,"unload",function(){},G[R.d])||ve[R.uL](G)}o(ze,"_unloadPlugin");function we(ve,G){function se(){var Te=!1;if(T){var $e=(0,m.OY)(T),ae=T[W.oV]||$e[W.oV];T&&(!ae||ae===ve.core())&&!$e[R.fi]&&T[R.Tu]&&T[R.Tu](ve,G)===!0&&(Te=!0)}return Te}o(se,"_callUpdate"),Se(ve,se,"update",function(){},!1)||ve[R.uL](G)}return o(we,"_updatePlugin"),(0,y.FL)(Oe)}o(Z,"createTelemetryPluginProxy");var ee=function(){function T(Y,k,le,J){var fe=this,De=j(Y,k,le,J);(0,y.Vb)(fe,De,(0,y.FY)(De))}return o(T,"ProcessTelemetryContext"),T}()},4878:(it,l,C)=>{"use strict";C.d(l,{az:()=>$,_l:()=>F,CN:()=>j,F6:()=>q,pZ:()=>Ee});var R=C(8096),v=C(7630),I=C(6708),y=C(6041),W=4294967296,N=4294967295,m=!1,w=123456789,O=987654321;function H(z){z<0&&(z>>>=0),w=123456789+z&N,O=987654321-z&N,m=!0}o(H,"_mwcSeed");function b(){try{var z=(0,I.m6)()&2147483647;H((Math.random()*W^z)+z)}catch(Z){}}o(b,"_autoSeedMwc");function $(z){return z>0?Math.floor(F()/N*(z+1))>>>0:0}o($,"randomValue");function F(z){var Z=0,ee=(0,v.MX)()||(0,v.gz)();return ee&&ee.getRandomValues&&(Z=ee.getRandomValues(new Uint32Array(1))[0]&N),Z===0&&(0,v.w1)()&&(m||b(),Z=q()&N),Z===0&&(Z=Math.floor(W*Math.random()|0)),z||(Z>>>=0),Z}o(F,"random32");function j(z){z?H(z):b()}o(j,"mwcRandomSeed");function q(z){O=36969*(O&65535)+(O>>16)&N,w=18e3*(w&65535)+(w>>16)&N;var Z=(O<<16)+(w&65535)>>>0&N|0;return z||(Z>>>=0),Z}o(q,"mwcRandom32");function Ee(z){z===void 0&&(z=22);for(var Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ee=F()>>>0,T=0,Y=y.qS;Y[R.R5]<z;)T++,Y+=Z.charAt(ee&63),ee>>>=6,T===5&&(ee=(F()<<2&4294967295|ee&3)>>>0,T=0);return Y}o(Ee,"newId")},3833:(it,l,C)=>{"use strict";C.d(l,{OY:()=>m,bP:()=>w,AA:()=>O,Yn:()=>b});var R=C(8096),v=C(5883),I=C(6708),y=C(6041),W=C(4206),N=(0,v.K)("plugin");function m($){return N.get($,"state",{},!0)}o(m,"_getPluginState");function w($,F){for(var j=[],q=null,Ee=$[R.W2](),z;Ee;){var Z=Ee[R.TO]();if(Z){q&&(0,I.mf)(q[R.Jd])&&(0,I.mf)(Z[y.hL])&&q[R.Jd](Z);var ee=!1;(0,I.mf)(Z[R.yl])?ee=Z[R.yl]():(z=m(Z),ee=z[R.yl]),ee||j[R.MW](Z),q=Z,Ee=Ee[R.W2]()}}(0,I.tO)(j,function(T){var Y=$[y.oV]();T[R.VL]($.getCfg(),Y,F,$[R.W2]()),z=m(T),!T[y.oV]&&!z[y.oV]&&(z[y.oV]=Y),z[R.yl]=!0,delete z[R.fi]})}o(w,"initializePlugins");function O($){return $.sort(function(F,j){var q=0;if(j){var Ee=(0,I.mf)(j[y.hL]);(0,I.mf)(F[y.hL])?q=Ee?F[y.yi]-j[y.yi]:1:Ee&&(q=-1)}else q=F?1:-1;return q})}o(O,"sortPlugins");function H($,F,j,q){var Ee=0;function z(){for(;Ee<$[_DYN_LENGTH];){var Z=$[Ee++];if(Z){var ee=Z._doUnload||Z[_DYN__DO_TEARDOWN];if(isFunction(ee)&&ee[_DYN_CALL](Z,F,j,z)===!0)return!0}}}return o(z,"_doUnload"),z()}o(H,"unloadComponents");function b($){var F={};return{getName:function(){return F[R.I]},setName:function(j){$&&$.setName(j),F[R.I]=j},getTraceId:function(){return F[R.nY]},setTraceId:function(j){$&&$.setTraceId(j),(0,W.jN)(j)&&(F[R.nY]=j)},getSpanId:function(){return F[R._d]},setSpanId:function(j){$&&$.setSpanId(j),(0,W.Lc)(j)&&(F[R._d]=j)},getTraceFlags:function(){return F[R.T0]},setTraceFlags:function(j){$&&$.setTraceFlags(j),F[R.T0]=j}}}o(b,"createDistributedTraceContext")},310:(it,l,C)=>{"use strict";C.d(l,{Y:()=>W});var R=C(8096),v=C(5018),I=C(7630),y=C(6708);function W(){var N=[];function m(O){O&&N[R.MW](O)}o(m,"_addHandler");function w(O,H){(0,y.tO)(N,function(b){try{b(O,H)}catch($){(0,v.kP)(O[R.mc](),2,73,"Unexpected error calling unload handler - "+(0,I.eU)($))}}),N=[]}return o(w,"_runHandlers"),{add:m,run:w}}o(W,"createUnloadHandlerContainer")},4206:(it,l,C)=>{"use strict";C.d(l,{SU:()=>j,j_:()=>q,jN:()=>Ee,Lc:()=>z,J6:()=>Z,Pn:()=>ee,aR:()=>T,lq:()=>Y});var R=C(8096),v=C(5843),I=C(7630),y=C(6708),W=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,N="00",m="ff",w="00000000000000000000000000000000",O="0000000000000000",H=1;function b(k,le,J){return k&&k[R.R5]===le&&k!==J?!!k.match(/^[\da-f]*$/):!1}o(b,"_isValid");function $(k,le,J){return b(k,le)?k:J}o($,"_formatValue");function F(k){(isNaN(k)||k<0||k>255)&&(k=1);for(var le=k.toString(16);le[R.R5]<2;)le="0"+le;return le}o(F,"_formatFlags");function j(k,le,J,fe){var De;return De={},De[R.PA]=b(fe,2,m)?fe:N,De[R.nY]=Ee(k)?k:(0,v.DO)(),De.spanId=z(le)?le:(0,v.DO)()[R.Jn](0,16),De.traceFlags=J>=0&&J<=255?J:1,De}o(j,"createTraceParent");function q(k){var le;if(!k||((0,y.kJ)(k)&&(k=k[0]||""),!k||!(0,y.HD)(k)||k[R.R5]>8192))return null;var J=W.exec((0,y.nd)(k));return!J||J[1]===m||J[2]===w||J[3]===O?null:(le={},le[R.PA]=J[1],le[R.nY]=J[2],le[R._d]=J[3],le[R.T0]=parseInt(J[4],16),le)}o(q,"parseTraceParent");function Ee(k){return b(k,32,w)}o(Ee,"isValidTraceId");function z(k){return b(k,16,O)}o(z,"isValidSpanId");function Z(k){return!(!k||!b(k[R.PA],2,m)||!b(k[R.nY],32,w)||!b(k[R._d],16,O)||!b(F(k[R.T0]),2))}o(Z,"isValidTraceParent");function ee(k){return Z(k)?(k[R.T0]&H)===H:!1}o(ee,"isSampledFlag");function T(k){if(k){var le=F(k[R.T0]);b(le,2)||(le="01");var J=k[R.PA]||N;return J!=="00"&&J!=="ff"&&(J=N),"".concat(J,"-").concat($(k.traceId,32,w),"-").concat($(k.spanId,16,O),"-").concat(le)}return""}o(T,"formatTraceParent");function Y(){var k="traceparent",le=q((0,I.ed)(k));return le||(le=q((0,I.pI)(k))),le}o(Y,"findW3cTraceParent")},8096:(it,l,C)=>{"use strict";C.d(l,{VL:()=>R,I:()=>v,tb:()=>I,pZ:()=>y,MW:()=>W,yl:()=>N,TC:()=>m,p$:()=>w,eZ:()=>O,R5:()=>H,Z_:()=>b,uL:()=>$,SD:()=>F,g:()=>j,n7:()=>q,LS:()=>Ee,Fc:()=>z,TO:()=>Z,kL:()=>ee,iC:()=>T,cb:()=>Y,fi:()=>k,Gc:()=>le,gU:()=>J,d:()=>fe,F3:()=>De,Tu:()=>Oe,W2:()=>oe,mc:()=>Se,Jd:()=>D,zV:()=>ze,Lk:()=>we,ou:()=>ve,zc:()=>G,qV:()=>se,w6:()=>Te,$h:()=>$e,Jn:()=>ae,xv:()=>Xe,ZV:()=>lt,i7:()=>mt,Fr:()=>P,jk:()=>U,T1:()=>re,_S:()=>de,P6:()=>Ue,Kn:()=>Pe,dE:()=>ce,PL:()=>Ce,T:()=>Me,wu:()=>Je,Km:()=>me,nY:()=>xe,_d:()=>Ze,T0:()=>tt,PA:()=>_e});var R="initialize",v="name",I="getNotifyMgr",y="identifier",W="push",N="isInitialized",m="config",w="instrumentationKey",O="logger",H="length",b="time",$="processNext",F="getProcessTelContext",j="addNotificationListener",q="removeNotificationListener",Ee="stopPollingInternalLogs",z="onComplete",Z="getPlugin",ee="flush",T="_extensions",Y="splice",k="teardown",le="messageId",J="message",fe="isAsync",De="_doTeardown",Oe="update",oe="getNext",Se="diagLog",D="setNextPlugin",ze="createNew",we="cookieCfg",ve="indexOf",G="substring",se="userAgent",Te="split",$e="setEnabled",ae="substr",Xe="nodeType",lt="apply",mt="replace",P="enableDebugExceptions",U="logInternalMessage",re="toLowerCase",de="call",Ue="type",Pe="handler",ce="listeners",Ce="isChildEvt",Me="getCtx",Je="setCtx",me="complete",xe="traceId",Ze="spanId",tt="traceFlags",_e="version"},4392:(it,l,C)=>{"use strict";C.d(l,{cb:()=>R,fK:()=>v,jA:()=>I,hB:()=>y,bO:()=>W,Pw:()=>m,V4:()=>w,rl:()=>O,yu:()=>H,RJ:()=>b,CY:()=>$});var R="function",v="object",I="undefined",y="prototype",W="hasOwnProperty",N="default",m=Object,w=m[y],O=m.assign,H=m.create,b=m.defineProperty,$=w[W]},2091:(it,l,C)=>{"use strict";C.d(l,{Rd:()=>I,ZU:()=>y,pu:()=>W});var R=C(4392),v=null;function I(N){N===void 0&&(N=!0);var m=N===!1?null:v;return m||(typeof globalThis!==R.jA&&(m=globalThis),!m&&typeof self!==R.jA&&(m=self),!m&&typeof window!==R.jA&&(m=window),!m&&typeof C.g!==R.jA&&(m=C.g),v=m),m}o(I,"getGlobal");function y(N){throw new TypeError(N)}o(y,"throwTypeError");function W(N){var m=R.yu;if(m)return m(N);if(N==null)return{};var w=typeof N;w!==R.fK&&w!==R.cb&&y("Object prototype may only be an Object:"+N);function O(){}return o(O,"tmpFunc"),O[R.hB]=N,new O}o(W,"objCreateFn")},1088:(it,l,C)=>{"use strict";C.d(l,{uc:()=>$,ne:()=>j,$h:()=>J});var R=C(4392),v=C(2091),I=((0,v.Rd)()||{}).Symbol,y=((0,v.Rd)()||{}).Reflect,W=!!I,N=!!y,m="decorate",w="metadata",O="getOwnPropertySymbols",H="iterator",b=o(function(oe){for(var Se,D=1,ze=arguments.length;D<ze;D++){Se=arguments[D];for(var we in Se)R.V4[R.bO].call(Se,we)&&(oe[we]=Se[we])}return oe},"__objAssignFnImpl"),$=R.rl||b,F=o(function(oe,Se){return F=R.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,ze){D.__proto__=ze}||function(D,ze){for(var we in ze)ze[R.bO](we)&&(D[we]=ze[we])},F(oe,Se)},"extendStaticsFn");function j(oe,Se){typeof Se!==R.cb&&Se!==null&&(0,v.ZU)("Class extends value "+String(Se)+" is not a constructor or null"),F(oe,Se);function D(){this.constructor=oe}o(D,"__"),oe[R.hB]=Se===null?(0,v.pu)(Se):(D[R.hB]=Se[R.hB],new D)}o(j,"__extendsFn");function q(oe,Se){var D={};for(var ze in oe)ObjHasOwnProperty.call(oe,ze)&&Se.indexOf(ze)<0&&(D[ze]=oe[ze]);if(oe!=null&&typeof ObjClass[O]===strShimFunction)for(var we=0,ve=ObjClass[O](oe);we<ve.length;we++)Se.indexOf(ve[we])<0&&ObjProto.propertyIsEnumerable.call(oe,ve[we])&&(D[ve[we]]=oe[ve[we]]);return D}o(q,"__restFn");function Ee(oe,Se,D,ze){var we=arguments.length,ve=we<3?Se:ze===null?ze=ObjClass.getOwnPropertyDescriptor(Se,D):ze,G;if(N&&typeof y[m]===strShimFunction)ve=y[m](oe,Se,D,ze);else for(var se=oe.length-1;se>=0;se--)(G=oe[se])&&(ve=(we<3?G(ve):we>3?G(Se,D,ve):G(Se,D))||ve);return we>3&&ve&&ObjDefineProperty(Se,D,ve),ve}o(Ee,"__decorateFn");function z(oe,Se){return function(D,ze){Se(D,ze,oe)}}o(z,"__paramFn");function Z(oe,Se){if(N&&y[w]===strShimFunction)return y[w](oe,Se)}o(Z,"__metadataFn");function ee(oe,Se){for(var D in oe)D!==strDefault&&!ObjHasOwnProperty.call(Se,D)&&T(Se,oe,D)}o(ee,"__exportStarFn");function T(oe,Se,D,ze){ze===void 0&&(ze=D),ObjCreate?ObjDefineProperty(oe,ze,{enumerable:!0,get:function(){return Se[D]}}):oe[ze]=Se[D]}o(T,"__createBindingFn");function Y(oe){var Se=typeof I===strShimFunction&&I[H],D=Se&&oe[Se],ze=0;if(D)return D.call(oe);if(oe&&typeof oe.length=="number")return{next:function(){return oe&&ze>=oe.length&&(oe=void 0),{value:oe&&oe[ze++],done:!oe}}};throwTypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}o(Y,"__valuesFn");function k(oe,Se){var D=typeof I===strShimFunction&&oe[I[H]];if(!D)return oe;var ze=D.call(oe),we,ve=[],G;try{for(;(Se===void 0||Se-- >0)&&!(we=ze.next()).done;)ve.push(we.value)}catch(se){G={error:se}}finally{try{we&&!we.done&&(D=ze.return)&&D.call(ze)}finally{if(G)throw G.error}}return ve}o(k,"__readFn");function le(){for(var oe=arguments,Se=0,D=0,ze=oe.length;D<ze;D++)Se+=oe[D].length;for(var we=Array(Se),ve=0,D=0;D<ze;D++)for(var G=oe[D],se=0,Te=G.length;se<Te;se++,ve++)we[ve]=G[se];return we}o(le,"__spreadArraysFn");function J(oe,Se){for(var D=0,ze=Se.length,we=oe.length;D<ze;D++,we++)oe[we]=Se[D];return oe}o(J,"__spreadArrayFn");function fe(oe,Se){return ObjDefineProperty?ObjDefineProperty(oe,"raw",{value:Se}):oe.raw=Se,oe}o(fe,"__makeTemplateObjectFn");function De(oe){if(oe&&oe.__esModule)return oe;var Se={};if(oe!=null)for(var D in oe)D!==strDefault&&Object.prototype.hasOwnProperty.call(oe,D)&&T(Se,oe,D);return ObjCreate?ObjDefineProperty(Se,strDefault,{enumerable:!0,value:oe}):Se[strDefault]=oe,Se}o(De,"__importStarFn");function Oe(oe){return oe&&oe.__esModule?oe:{strDefault:oe}}o(Oe,"__importDefaultFn")},3268:(it,l,C)=>{"use strict";C.r(l),C.d(l,{AppInsightsCore:()=>xo.F,ApplicationInsights:()=>lo,CoreUtils:()=>An.Tr,Sender:()=>La,SeverityLevel:()=>Fa,_InternalMessageId:()=>ua.v,arrForEach:()=>B.tO,isNullOrUndefined:()=>B.le,proxyFunctions:()=>B.Vb,throwError:()=>B._y});var R=C(1679),v=C(1088),I="AppInsightsPropertiesPlugin",y="AppInsightsChannelPlugin",W="ApplicationInsightsAnalytics",N="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",m="sampleRate",w="ProcessLegacy",O="http.method",H="https://dc.services.visualstudio.com",b="/v2/track",$="not_specified",F="iKey",j="split",q="length",Ee="toLowerCase",z="ingestionendpoint",Z="toString",ee="removeItem",T="name",Y="message",k="count",le="preTriggerDate",J="disabled",fe="interval",De="daysOfMonth",Oe="date",oe="getUTCDate",Se="stringify",D="pathname",ze="correlationHeaderExcludePatterns",we="indexOf",ve="extensionConfig",G="exceptions",se="parsedStack",Te="properties",$e="measurements",ae="sizeInBytes",Xe="typeName",lt="severityLevel",mt="problemGroup",P="isManual",U="CreateFromInterface",re="assembly",de="hasFullStack",Ue="level",Pe="method",ce="fileName",Ce="line",Me="duration",Je="receivedResponse",me="substring",xe="sanitizeKeyAndAddUniqueness",Ze="sanitizeException",tt="sanitizeProperties",_e="sanitizeMeasurements",B=C(6708),K=C(5018),Ye=C(7630),Jt;function Tn(S,g,E){var L=g[q],ie=Pn(S,g);if(ie[q]!==L){for(var ye=0,Be=ie;E[Be]!==void 0;)ye++,Be=ie[me](0,150-3)+rn(ye);ie=Be}return ie}o(Tn,"dataSanitizeKeyAndAddUniqueness");function Pn(S,g){var E;return g&&(g=(0,B.nd)(g[Z]()),g[q]>150&&(E=g[me](0,150),(0,K.kP)(S,2,57,"name is too long.  It has been truncated to "+150+" characters.",{name:g},!0))),E||g}o(Pn,"dataSanitizeKey");function Sn(S,g,E){E===void 0&&(E=1024);var L;return g&&(E=E||1024,g=(0,B.nd)(g),g.toString()[q]>E&&(L=g[Z]()[me](0,E),(0,K.kP)(S,2,61,"string value is too long. It has been truncated to "+E+" characters.",{value:g},!0))),L||g}o(Sn,"dataSanitizeString");function sr(S,g){return Kt(S,g,2048,66)}o(sr,"dataSanitizeUrl");function or(S,g){var E;return g&&g[q]>32768&&(E=g[me](0,32768),(0,K.kP)(S,2,56,"message is too long, it has been truncated to "+32768+" characters.",{message:g},!0)),E||g}o(or,"dataSanitizeMessage");function vr(S,g){var E;if(g){var L=""+g;L[q]>32768&&(E=L[me](0,32768),(0,K.kP)(S,2,52,"exception is too long, it has been truncated to "+32768+" characters.",{exception:g},!0))}return E||g}o(vr,"dataSanitizeException");function lr(S,g){if(g){var E={};(0,B.rW)(g,function(L,ie){if((0,B.Kn)(ie)&&(0,Ye.nS)())try{ie=(0,Ye.xA)()[Se](ie)}catch(ye){(0,K.kP)(S,2,49,"custom property is not valid",{exception:ye},!0)}ie=Sn(S,ie,8192),L=Tn(S,L,E),E[L]=ie}),g=E}return g}o(lr,"dataSanitizeProperties");function pr(S,g){if(g){var E={};(0,B.rW)(g,function(L,ie){L=Tn(S,L,E),E[L]=ie}),g=E}return g}o(pr,"dataSanitizeMeasurements");function ft(S,g){return g&&Kt(S,g,128,69)[Z]()}o(ft,"dataSanitizeId");function Kt(S,g,E,L){var ie;return g&&(g=(0,B.nd)(g),g[q]>E&&(ie=g[me](0,E),(0,K.kP)(S,2,L,"input is too long, it has been truncated to "+E+" characters.",{data:g},!0))),ie||g}o(Kt,"dataSanitizeInput");function rn(S){var g="00"+S;return g.substr(g[q]-3)}o(rn,"dsPadNumber");var on=(Jt={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768},Jt[xe]=Tn,Jt.sanitizeKey=Pn,Jt.sanitizeString=Sn,Jt.sanitizeUrl=sr,Jt.sanitizeMessage=or,Jt[Ze]=vr,Jt[tt]=lr,Jt[_e]=pr,Jt.sanitizeId=ft,Jt.sanitizeInput=Kt,Jt.padNumber=rn,Jt.trim=B.nd,Jt),Vt=function(){function S(g,E,L,ie){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var ye=this;ye.ver=2,ye[T]=Sn(g,E)||$,ye[Te]=lr(g,L),ye[$e]=pr(g,ie)}return o(S,"Event"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Event",S.dataType="EventData",S}(),En=function(){function S(g,E,L,ie,ye){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Be=this;Be.ver=2,E=E||$,Be[Y]=or(g,E),Be[Te]=lr(g,ie),Be[$e]=pr(g,ye),L&&(Be[lt]=L)}return o(S,"Trace"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Message",S.dataType="MessageData",S}(),jn="";function fr(S,g){return g===void 0&&(g=!1),S==null?g:S.toString()[Ee]()==="true"}o(fr,"stringToBoolOrDefault");function Xn(S){(isNaN(S)||S<0)&&(S=0),S=Math.round(S);var g=jn+S%1e3,E=jn+Math.floor(S/1e3)%60,L=jn+Math.floor(S/(1e3*60))%60,ie=jn+Math.floor(S/(1e3*60*60))%24,ye=Math.floor(S/(1e3*60*60*24));return g=g[q]===1?"00"+g:g[q]===2?"0"+g:g,E=E[q]<2?"0"+E:E,L=L[q]<2?"0"+L:L,ie=ie[q]<2?"0"+ie:ie,(ye>0?ye+".":jn)+ie+":"+L+":"+E+"."+g}o(Xn,"msToTimeSpan");function Dr(S,g){var E=null;return(0,B.tO)(S,function(L){if(L.identifier===g)return E=L,-1}),E}o(Dr,"getExtensionByName");function $r(S,g,E,L,ie){return!ie&&(0,B.HD)(S)&&(S==="Script error."||S==="Script error")}o($r,"isCrossOriginError");var Cr=function(){function S(g,E,L,ie,ye,Be,Ve){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ot=this;ot.ver=2,ot.id=ft(g,Ve),ot.url=sr(g,L),ot[T]=Sn(g,E)||$,isNaN(ie)||(ot[Me]=Xn(ie)),ot[Te]=lr(g,ye),ot[$e]=pr(g,Be)}return o(S,"PageView"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",S.dataType="PageviewData",S}(),Rr=function(){function S(g,E,L,ie,ye,Be,Ve){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ot=this;ot.ver=2,ot.url=sr(g,L),ot[T]=Sn(g,E)||$,ot[Te]=lr(g,ye),ot[$e]=pr(g,Be),Ve&&(ot.domProcessing=Ve.domProcessing,ot[Me]=Ve[Me],ot.networkConnect=Ve.networkConnect,ot.perfTotal=Ve.perfTotal,ot[Je]=Ve[Je],ot.sentRequest=Ve.sentRequest)}return o(S,"PageViewPerformance"),S.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",S.dataType="PageviewPerformanceData",S}(),Fr="<no_method>",xn="error",Bn="stack",_r="stackDetails",Kr="errorSrc",Tr="message",vi="description";function br(S,g){var E=S;return E&&!(0,B.HD)(E)&&(JSON&&JSON[Se]?(E=JSON[Se](S),g&&(!E||E==="{}")&&((0,B.mf)(S[Z])?E=S[Z]():E=""+S)):E=""+S+" - (Missing JSON.stringify)"),E||""}o(br,"_stringify");function M(S,g){var E=S;return S&&(E&&!(0,B.HD)(E)&&(E=S[Tr]||S[vi]||E),E&&!(0,B.HD)(E)&&(E=br(E,!0)),S.filename&&(E=E+" @"+(S.filename||"")+":"+(S.lineno||"?")+":"+(S.colno||"?"))),g&&g!=="String"&&g!=="Object"&&g!=="Error"&&(E||"")[we](g)===-1&&(E=g+": "+E),E||""}o(M,"_formatMessage");function ue(S){try{if((0,B.Kn)(S))return"hasFullStack"in S&&"typeName"in S}catch(g){}return!1}o(ue,"_isExceptionDetailsInternal");function Ae(S){try{if((0,B.Kn)(S))return"ver"in S&&"exceptions"in S&&"properties"in S}catch(g){}return!1}o(Ae,"_isExceptionInternal");function Le(S){return S&&S.src&&(0,B.HD)(S.src)&&S.obj&&(0,B.kJ)(S.obj)}o(Le,"_isStackDetails");function et(S){var g=S||"";(0,B.HD)(g)||((0,B.HD)(g[Bn])?g=g[Bn]:g=""+g);var E=g[j](`
`);return{src:g,obj:E}}o(et,"_convertStackObj");function je(S){for(var g=[],E=S[j](`
`),L=0;L<E[q];L++){var ie=E[L];E[L+1]&&(ie+="@"+E[L+1],L++),g.push(ie)}return{src:S,obj:g}}o(je,"_getOperaStack");function ct(S){var g=null;if(S)try{if(S[Bn])g=et(S[Bn]);else if(S[xn]&&S[xn][Bn])g=et(S[xn][Bn]);else if(S.exception&&S.exception[Bn])g=et(S.exception[Bn]);else if(Le(S))g=S;else if(Le(S[_r]))g=S[_r];else if(window&&window.opera&&S[Tr])g=je(S[Y]);else if(S.reason&&S.reason[Bn])g=et(S.reason[Bn]);else if((0,B.HD)(S))g=et(S);else{var E=S[Tr]||S[vi]||"";(0,B.HD)(S[Kr])&&(E&&(E+=`
`),E+=" from "+S[Kr]),E&&(g=et(E))}}catch(L){g=et(L)}return g||{src:"",obj:null}}o(ct,"_getStackFromErrorObj");function Dt(S){var g="";return S&&(S.obj?(0,B.tO)(S.obj,function(E){g+=E+`
`}):g=S.src||""),g}o(Dt,"_formatStackTrace");function Rt(S){var g,E=S.obj;if(E&&E[q]>0){g=[];var L=0,ie=0;(0,B.tO)(E,function(Rn){var wr=Rn[Z]();if(Nt.regex.test(wr)){var Fe=new Nt(wr,L++);ie+=Fe[ae],g.push(Fe)}});var ye=32*1024;if(ie>ye)for(var Be=0,Ve=g[q]-1,ot=0,dt=Be,At=Ve;Be<Ve;){var un=g[Be][ae],Wn=g[Ve][ae];if(ot+=un+Wn,ot>ye){var cn=At-dt+1;g.splice(dt,cn);break}dt=Be,At=Ve,Be++,Ve--}}return g}o(Rt,"_parseStack");function _t(S){var g="";if(S&&(g=S.typeName||S[T]||"",!g))try{var E=/function (.{1,200})\(/,L=E.exec(S.constructor[Z]());g=L&&L[q]>1?L[1]:""}catch(ie){}return g}o(_t,"_getErrorType");function Ct(S){if(S)try{if(!(0,B.HD)(S)){var g=_t(S),E=br(S,!1);return(!E||E==="{}")&&(S[xn]&&(S=S[xn],g=_t(S)),E=br(S,!0)),E[we](g)!==0&&g!=="String"?g+":"+E:E}}catch(L){}return""+(S||"")}o(Ct,"_formatErrorCode");var Ft=function(){function S(g,E,L,ie,ye,Be){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Ve=this;Ve.ver=2,Ae(E)?(Ve[G]=E[G]||[],Ve[Te]=E[Te],Ve[$e]=E[$e],E[lt]&&(Ve[lt]=E[lt]),E.id&&(Ve.id=E.id),E[mt]&&(Ve[mt]=E[mt]),(0,B.le)(E[P])||(Ve[P]=E[P])):(L||(L={}),Ve[G]=[new Bt(g,E,L)],Ve[Te]=lr(g,L),Ve[$e]=pr(g,ie),ye&&(Ve[lt]=ye),Be&&(Ve.id=Be))}return o(S,"Exception"),S.CreateAutoException=function(g,E,L,ie,ye,Be,Ve,ot){var dt,At=_t(ye||Be||g);return dt={},dt[Y]=M(g,At),dt.url=E,dt.lineNumber=L,dt.columnNumber=ie,dt.error=Ct(ye||Be||g),dt.evt=Ct(Be||g),dt[Xe]=At,dt.stackDetails=ct(Ve||ye||Be),dt.errorSrc=ot,dt},S.CreateFromInterface=function(g,E,L,ie){var ye=E[G]&&(0,B.Mr)(E[G],function(Ve){return Bt[U](g,Ve)}),Be=new S(g,(0,v.uc)((0,v.uc)({},E),{exceptions:ye}),L,ie);return Be},S.prototype.toInterface=function(){var g,E=this,L=E.exceptions,ie=E.properties,ye=E.measurements,Be=E.severityLevel,Ve=E.problemGroup,ot=E.id,dt=E.isManual,At=L instanceof Array&&(0,B.Mr)(L,function(un){return un.toInterface()})||void 0;return g={ver:"4.0"},g[G]=At,g.severityLevel=Be,g.properties=ie,g.measurements=ye,g.problemGroup=Ve,g.id=ot,g.isManual=dt,g},S.CreateSimpleException=function(g,E,L,ie,ye,Be){var Ve;return{exceptions:[(Ve={},Ve[de]=!0,Ve.message=g,Ve.stack=ye,Ve.typeName=E,Ve)]}},S.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",S.dataType="ExceptionData",S.formatError=Ct,S}(),Bt=function(){function S(g,E,L){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var ie=this;if(ue(E))ie[Xe]=E[Xe],ie[Y]=E[Y],ie[Bn]=E[Bn],ie[se]=E[se]||[],ie[de]=E[de];else{var ye=E,Be=ye&&ye.evt;(0,B.VZ)(ye)||(ye=ye[xn]||Be||ye),ie[Xe]=Sn(g,_t(ye))||$,ie[Y]=or(g,M(E||ye,ie[Xe]))||$;var Ve=E[_r]||ct(E);ie[se]=Rt(Ve),(0,B.kJ)(ie[se])&&(0,B.Mr)(ie[se],function(ot){return ot[re]=Sn(g,ot[re])}),ie[Bn]=vr(g,Dt(Ve)),ie.hasFullStack=(0,B.kJ)(ie.parsedStack)&&ie.parsedStack[q]>0,L&&(L[Xe]=L[Xe]||ie[Xe])}}return o(S,"_ExceptionDetails"),S.prototype.toInterface=function(){var g,E=this,L=E[se]instanceof Array&&(0,B.Mr)(E[se],function(ye){return ye.toInterface()}),ie=(g={id:E.id,outerId:E.outerId,typeName:E[Xe],message:E[Y],hasFullStack:E[de],stack:E[Bn]},g[se]=L||void 0,g);return ie},S.CreateFromInterface=function(g,E){var L=E[se]instanceof Array&&(0,B.Mr)(E[se],function(ye){return Nt[U](ye)})||E[se],ie=new S(g,(0,v.uc)((0,v.uc)({},E),{parsedStack:L}));return ie},S}(),Nt=function(){function S(g,E){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var L=this;if(L[ae]=0,typeof g=="string"){var ie=g;L[Ue]=E,L[Pe]=Fr,L[re]=(0,B.nd)(ie),L[ce]="",L[Ce]=0;var ye=ie.match(S.regex);ye&&ye[q]>=5&&(L[Pe]=(0,B.nd)(ye[2])||L[Pe],L[ce]=(0,B.nd)(ye[4]),L[Ce]=parseInt(ye[5])||0)}else L[Ue]=g[Ue],L[Pe]=g[Pe],L[re]=g[re],L[ce]=g[ce],L[Ce]=g[Ce],L[ae]=0;L.sizeInBytes+=L.method[q],L.sizeInBytes+=L.fileName[q],L.sizeInBytes+=L.assembly[q],L[ae]+=S.baseSize,L.sizeInBytes+=L.level.toString()[q],L.sizeInBytes+=L.line.toString()[q]}return o(S,"_StackFrame"),S.CreateFromInterface=function(g){return new S(g,null)},S.prototype.toInterface=function(){var g=this;return{level:g[Ue],method:g[Pe],assembly:g[re],fileName:g[ce],line:g[Ce]}},S.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,S.baseSize=58,S}(),kt=function(){function S(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return o(S,"DataPoint"),S}(),Jn=function(){function S(g,E,L,ie,ye,Be,Ve,ot,dt){this.aiDataContract={ver:1,metrics:1,properties:0};var At=this;At.ver=2;var un=new kt;un[k]=ie>0?ie:void 0,un.max=isNaN(Be)||Be===null?void 0:Be,un.min=isNaN(ye)||ye===null?void 0:ye,un[T]=Sn(g,E)||$,un.value=L,un.stdDev=isNaN(Ve)||Ve===null?void 0:Ve,At.metrics=[un],At[Te]=lr(g,ot),At[$e]=pr(g,dt)}return o(S,"Metric"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",S.dataType="MetricData",S}(),An=C(5843),mr=C(3242),qn=C(4878),cr=C(4869);function Gr(S){var g=null;if((0,B.mf)(Event))g=new Event(S);else{var E=(0,Ye.Me)();E&&E.createEvent&&(g=E.createEvent("Event"),g.initEvent(S,!0,!0))}return g}o(Gr,"createDomEvent");var zr=C(4873),Gn=(0,zr.cc)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),pi=C(2091),zt=(0,zr.By)({LocalStorage:0,SessionStorage:1}),Zn=(0,zr.By)({AI:0,AI_AND_W3C:1,W3C:2}),Dn=void 0,Cn=void 0;function fn(){return yi()?er(zt.LocalStorage):null}o(fn,"_getLocalStorageObject");function er(S){try{if((0,B.le)((0,pi.Rd)()))return null;var g=new Date()[Z](),E=(0,Ye.a8)(S===zt.LocalStorage?"localStorage":"sessionStorage");E.setItem(g,g);var L=E.getItem(g)!==g;if(E[ee](g),!L)return E}catch(ie){}return null}o(er,"_getVerifiedStorageObject");function Qn(){return Si()?er(zt.SessionStorage):null}o(Qn,"_getSessionStorageObject");function Nr(){Dn=!1,Cn=!1}o(Nr,"utlDisableStorage");function mi(){Dn=yi(!0),Cn=Si(!0)}o(mi,"utlEnableStorage");function yi(S){return(S||Dn===void 0)&&(Dn=!!er(zt.LocalStorage)),Dn}o(yi,"utlCanUseLocalStorage");function xi(S,g){var E=fn();if(E!==null)try{return E.getItem(g)}catch(L){Dn=!1,(0,K.kP)(S,2,1,"Browser failed read of local storage. "+(0,B.jj)(L),{exception:(0,Ye.eU)(L)})}return null}o(xi,"utlGetLocalStorage");function wi(S,g,E){var L=fn();if(L!==null)try{return L.setItem(g,E),!0}catch(ie){Dn=!1,(0,K.kP)(S,2,3,"Browser failed write to local storage. "+(0,B.jj)(ie),{exception:(0,Ye.eU)(ie)})}return!1}o(wi,"utlSetLocalStorage");function Or(S,g){var E=fn();if(E!==null)try{return E[ee](g),!0}catch(L){Dn=!1,(0,K.kP)(S,2,5,"Browser failed removal of local storage item. "+(0,B.jj)(L),{exception:(0,Ye.eU)(L)})}return!1}o(Or,"utlRemoveStorage");function Si(S){return(S||Cn===void 0)&&(Cn=!!er(zt.SessionStorage)),Cn}o(Si,"utlCanUseSessionStorage");function oa(){var S=[];return Si()&&(0,B.rW)((0,Ye.a8)("sessionStorage"),function(g){S.push(g)}),S}o(oa,"utlGetSessionStorageKeys");function Ji(S,g){var E=Qn();if(E!==null)try{return E.getItem(g)}catch(L){Cn=!1,(0,K.kP)(S,2,2,"Browser failed read of session storage. "+(0,B.jj)(L),{exception:(0,Ye.eU)(L)})}return null}o(Ji,"utlGetSessionStorage");function ki(S,g,E){var L=Qn();if(L!==null)try{return L.setItem(g,E),!0}catch(ie){Cn=!1,(0,K.kP)(S,2,4,"Browser failed write to session storage. "+(0,B.jj)(ie),{exception:(0,Ye.eU)(ie)})}return!1}o(ki,"utlSetSessionStorage");function ei(S,g){var E=Qn();if(E!==null)try{return E[ee](g),!0}catch(L){Cn=!1,(0,K.kP)(S,2,6,"Browser failed removal of session storage item. "+(0,B.jj)(L),{exception:(0,Ye.eU)(L)})}return!1}o(ei,"utlRemoveSessionStorage");var ti=(0,Ye.Me)()||{},ni=0,ea=[null,null,null,null,null];function Fi(S){var g=ni,E=ea,L=E[g];return ti.createElement?E[g]||(L=E[g]=ti.createElement("a")):L={host:nt(S,!0)},L.href=S,g++,g>=E[q]&&(g=0),ni=g,L}o(Fi,"urlParseUrl");function oi(S){var g,E=Fi(S);return E&&(g=E.href),g}o(oi,"urlGetAbsoluteUrl");function sa(S){var g,E=Fi(S);return E&&(g=E[D]),g}o(sa,"urlGetPathName");function ke(S,g){return S?S.toUpperCase()+" "+g:g}o(ke,"urlGetCompleteUrl");function nt(S,g){var E=yt(S,g)||"";if(E){var L=E.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(L!=null&&L[q]>3&&(0,B.HD)(L[2])&&L[2][q]>0)return L[2]+(L[3]||"")}return E}o(nt,"urlParseHost");function yt(S,g){var E=null;if(S){var L=S.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(L!=null&&L[q]>2&&(0,B.HD)(L[2])&&L[2][q]>0&&(E=L[2]||"",g&&L[q]>2)){var ie=(L[1]||"")[Ee](),ye=L[3]||"";(ie==="http"&&ye===":80"||ie==="https"&&ye===":443")&&(ye=""),E+=ye}}return E}o(yt,"urlParseFullHost");var rt=[H+b,"https://breeze.aimon.applicationinsights.io"+b,"https://dc-int.services.visualstudio.com"+b];function Lt(S){return(0,B.UA)(rt,S[Ee]())!==-1}o(Lt,"isInternalApplicationInsightsEndpoint");var Gt={NotSpecified:$,createDomEvent:Gr,disableStorage:Nr,isInternalApplicationInsightsEndpoint:Lt,canUseLocalStorage:yi,getStorage:xi,setStorage:wi,removeStorage:Or,canUseSessionStorage:Si,getSessionStorageKeys:oa,getSessionStorage:Ji,setSessionStorage:ki,removeSessionStorage:ei,disableCookies:An.oF,canUseCookies:An.vn,disallowsSameSiteNone:mr.UY,setCookie:An.d8,stringToBoolOrDefault:fr,getCookie:An.ej,deleteCookie:An.kT,trim:B.nd,newId:qn.pZ,random32:function(){return(0,qn._l)(!0)},generateW3CId:An.DO,isArray:B.kJ,isError:B.VZ,isDate:B.J_,toISOStringForIE8:B.Y6,getIEVersion:Ye.sA,msToTimeSpan:Xn,isCrossOriginError:$r,dump:Ye.eU,getExceptionName:B.jj,addEventHandler:cr.pZ,IsBeaconApiSupported:Ye.MF,getExtension:Dr},wt={parseUrl:Fi,getAbsoluteUrl:oi,getPathName:sa,getCompleteUrl:ke,parseHost:nt,parseFullHost:yt},Qt={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(S,g,E){if(!g||S&&S.disableCorrelationHeaders)return!1;if(S&&S[ze]){for(var L=0;L<S.correlationHeaderExcludePatterns[q];L++)if(S[ze][L].test(g))return!1}var ie=Fi(g).host[Ee]();if(ie&&(ie[we](":443")!==-1||ie[we](":80")!==-1)&&(ie=(yt(g,!0)||"")[Ee]()),(!S||!S.enableCorsCorrelation)&&ie&&ie!==E)return!1;var ye=S&&S.correlationHeaderDomains;if(ye){var Be;if((0,B.tO)(ye,function(dt){var At=new RegExp(dt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));Be=Be||At.test(ie)}),!Be)return!1}var Ve=S&&S.correlationHeaderExcludedDomains;if(!Ve||Ve[q]===0)return!0;for(var L=0;L<Ve[q];L++){var ot=new RegExp(Ve[L].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(ot.test(ie))return!1}return ie&&ie[q]>0},getCorrelationContext:function(S){if(S){var g=Qt.getCorrelationContextValue(S,Gn[1]);if(g&&g!==Qt.correlationIdPrefix)return g}},getCorrelationContextValue:function(S,g){if(S)for(var E=S[j](","),L=0;L<E[q];++L){var ie=E[L][j]("=");if(ie[q]===2&&ie[0]===g)return ie[1]}}};function Ut(S,g,E,L){var ie,ye=L,Be=L;if(g&&g[q]>0){var Ve=Fi(g);if(ie=Ve.host,!ye)if(Ve[D]!=null){var ot=Ve.pathname[q]===0?"/":Ve[D];ot.charAt(0)!=="/"&&(ot="/"+ot),Be=Ve[D],ye=Sn(S,E?E+" "+ot:ot)}else ye=Sn(S,g)}else ie=L,ye=L;return{target:ie,name:ye,data:Be}}o(Ut,"AjaxHelperParseDependencyPath");function pn(){var S=(0,Ye.r)();if(S&&S.now&&S.timing){var g=S.now()+S.timing.navigationStart;if(g>0)return g}return(0,B.m6)()}o(pn,"dateTimeUtilsNow");function _n(S,g){var E=null;return S!==0&&g!==0&&!(0,B.le)(S)&&!(0,B.le)(g)&&(E=g-S),E}o(_n,"dateTimeUtilsDuration");var tr={Now:pn,GetDuration:_n};function $n(S,g){var E=S||{};return{getName:function(){return E[_DYN_NAME]},setName:function(L){g&&g.setName(L),E[_DYN_NAME]=L},getTraceId:function(){return E.traceID},setTraceId:function(L){g&&g.setTraceId(L),isValidTraceId(L)&&(E.traceID=L)},getSpanId:function(){return E.parentID},setSpanId:function(L){g&&g.setSpanId(L),isValidSpanId(L)&&(E.parentID=L)},getTraceFlags:function(){return E.traceFlags},setTraceFlags:function(L){g&&g.setTraceFlags(L),E.traceFlags=L}}}o($n,"createDistributedTraceContextFromTrace");var nr=function(){function S(g,E,L,ie,ye,Be,Ve,ot,dt,At,un,Wn){dt===void 0&&(dt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var cn=this;cn.ver=2,cn.id=E,cn[Me]=Xn(ye),cn.success=Be,cn.resultCode=Ve+"",cn.type=Sn(g,dt);var Rn=Ut(g,L,ot,ie);cn.data=sr(g,ie)||Rn.data,cn.target=Sn(g,Rn.target),At&&(cn.target="".concat(cn.target," | ").concat(At)),cn[T]=Sn(g,Rn[T]),cn[Te]=lr(g,un),cn[$e]=pr(g,Wn)}return o(S,"RemoteDependencyData"),S.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",S.dataType="RemoteDependencyData",S}(),Hn=C(5883),jt=C(4063);function sn(S){var g="ai."+S+".";return function(E){return g+E}}o(sn,"_aiNameFunc");var yn=sn("application"),Xt=sn("device"),x=sn("location"),te=sn("operation"),Re=sn("session"),at=sn("user"),Et=sn("cloud"),Mt=sn("internal"),gn=function(S){(0,v.ne)(g,S);function g(){return S.call(this)||this}return o(g,"ContextTagKeys"),g}((0,B.hl)({applicationVersion:yn("ver"),applicationBuild:yn("build"),applicationTypeId:yn("typeId"),applicationId:yn("applicationId"),applicationLayer:yn("layer"),deviceId:Xt("id"),deviceIp:Xt("ip"),deviceLanguage:Xt("language"),deviceLocale:Xt("locale"),deviceModel:Xt("model"),deviceFriendlyName:Xt("friendlyName"),deviceNetwork:Xt("network"),deviceNetworkName:Xt("networkName"),deviceOEMName:Xt("oemName"),deviceOS:Xt("os"),deviceOSVersion:Xt("osVersion"),deviceRoleInstance:Xt("roleInstance"),deviceRoleName:Xt("roleName"),deviceScreenResolution:Xt("screenResolution"),deviceType:Xt("type"),deviceMachineName:Xt("machineName"),deviceVMName:Xt("vmName"),deviceBrowser:Xt("browser"),deviceBrowserVersion:Xt("browserVersion"),locationIp:x("ip"),locationCountry:x("country"),locationProvince:x("province"),locationCity:x("city"),operationId:te("id"),operationName:te("name"),operationParentId:te("parentId"),operationRootId:te("rootId"),operationSyntheticSource:te("syntheticSource"),operationCorrelationVector:te("correlationVector"),sessionId:Re("id"),sessionIsFirst:Re("isFirst"),sessionIsNew:Re("isNew"),userAccountAcquisitionDate:at("accountAcquisitionDate"),userAccountId:at("accountId"),userAgent:at("userAgent"),userId:at("id"),userStoreRegion:at("storeRegion"),userAuthUserId:at("authUserId"),userAnonymousUserAcquisitionDate:at("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:at("authUserAcquisitionDate"),cloudName:Et("name"),cloudRole:Et("role"),cloudRoleVer:Et("roleVer"),cloudRoleInstance:Et("roleInstance"),cloudEnvironment:Et("environment"),cloudLocation:Et("location"),cloudDeploymentUnit:Et("deploymentUnit"),internalNodeName:Mt("nodeName"),internalSdkVersion:Mt("sdkVersion"),internalAgentVersion:Mt("agentVersion"),internalSnippet:Mt("snippet"),internalSdkSrc:Mt("sdkSrc")})),vn={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},en=new gn,tn=function(){function S(g,E,L){var ie=this,ye=this;ye.ver=1,ye.sampleRate=100,ye.tags={},ye[T]=Sn(g,L)||$,ye.data=E,ye.time=(0,B.Y6)(new Date),ye.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return ie.sampleRate===100?4:1},tags:1,data:1}}return o(S,"Envelope"),S}(),mn=function(){function S(g,E){this.aiDataContract={baseType:1,baseData:1},this.baseType=g,this.baseData=E}return o(S,"Data"),S}(),$t="duration",St="tags",bn="deviceType",Fn="data",Nn="name",kn="traceID",Yt="length",Br="stringify",Er="measurements",Un="dataType",rr="envelopeType",Vn="toString",Hr="onLine",yr="isOnline",qr="enqueue",Qr="count",Yr="push",Ci="emitLineDelimitedJson",si="clear",_i="batchPayloads",ri="markAsSent",bi="clearSent",Lr="bufferOverride",Ei="BUFFER_KEY",Xr="SENT_BUFFER_KEY",li="MAX_BUFFER_SIZE",hr="namePrefix",Jr="maxBatchSizeInBytes",he="triggerSend",qe="diagLog",st="onunloadDisableBeacon",ut="isBeaconApiDisabled",Tt="_sender",Ot="_senderConfig",ln="enableSessionStorageBuffer",ge="_buffer",Ge="samplingPercentage",He="instrumentationKey",ht="endpointUrl",xt="customHeaders",Ht="disableXhr",an="onunloadDisableFetch",Ln="disableTelemetry",zn="baseType",ii="sampleRate",Ni="convertUndefined",Oi="_xhrReadyStateChange",ir="_onError",Bi="_onPartialSuccess",Hi="_onSuccess",Ti="itemsAccepted",va="itemsReceived",Vi="isRetryDisabled",ta="setRequestHeader",na="maxBatchInterval",Mi="eventsSendRequest",ji="disableInstrumentationKeyValidation",xr="getSamplingScore",Ui="getHashCodeScore",Yi="baseType",Yn="baseData",ur="properties",qi="true";function gr(S,g,E){return(0,B.sO)(S,g,E,B.fQ)}o(gr,"_setValueIf");function pa(S,g,E){var L=E[St]=E[St]||{},ie=g.ext=g.ext||{},ye=g[St]=g[St]||[],Be=ie.user;Be&&(gr(L,en.userAuthUserId,Be.authId),gr(L,en.userId,Be.id||Be.localId));var Ve=ie.app;Ve&&gr(L,en.sessionId,Ve.sesId);var ot=ie.device;ot&&(gr(L,en.deviceId,ot.id||ot.localId),gr(L,en[bn],ot.deviceClass),gr(L,en.deviceIp,ot.ip),gr(L,en.deviceModel,ot.model),gr(L,en[bn],ot[bn]));var dt=g.ext.web;if(dt){gr(L,en.deviceLanguage,dt.browserLang),gr(L,en.deviceBrowserVersion,dt.browserVer),gr(L,en.deviceBrowser,dt.browser);var At=E[Fn]=E[Fn]||{},un=At[Yn]=At[Yn]||{},Wn=un[ur]=un[ur]||{};gr(Wn,"domain",dt.domain),gr(Wn,"isManual",dt.isManual?qi:null),gr(Wn,"screenRes",dt.screenRes),gr(Wn,"userConsent",dt.userConsent?qi:null)}var cn=ie.os;cn&&gr(L,en.deviceOS,cn[Nn]);var Rn=ie.trace;Rn&&(gr(L,en.operationParentId,Rn.parentID),gr(L,en.operationName,Sn(S,Rn[Nn])),gr(L,en.operationId,Rn[kn]));for(var wr={},Fe=ye[Yt]-1;Fe>=0;Fe--){var ar=ye[Fe];(0,B.rW)(ar,function(Sr,Ar){wr[Sr]=Ar}),ye.splice(Fe,1)}(0,B.rW)(ye,function(Sr,Ar){wr[Sr]=Ar});var Mn=(0,v.uc)((0,v.uc)({},L),wr);Mn[en.internalSdkVersion]||(Mn[en.internalSdkVersion]="javascript:".concat(ma.Version)),E[St]=(0,B.Ax)(Mn)}o(pa,"_extractPartAExtensions");function Ii(S,g,E){(0,B.le)(S)||(0,B.rW)(S,function(L,ie){(0,B.hj)(ie)?E[L]=ie:(0,B.HD)(ie)?g[L]=ie:(0,Ye.nS)()&&(g[L]=(0,Ye.xA)()[Br](ie))})}o(Ii,"_extractPropsAndMeasurements");function ra(S,g){(0,B.le)(S)||(0,B.rW)(S,function(E,L){S[E]=L||g})}o(ra,"_convertPropsUndefinedToCustomDefinedValue");function Wi(S,g,E,L){var ie=new tn(S,L,g);gr(ie,"sampleRate",E[m]),(E[Yn]||{}).startTime&&(ie.time=(0,B.Y6)(E[Yn].startTime)),ie.iKey=E.iKey;var ye=E.iKey.replace(/-/g,"");return ie[Nn]=ie[Nn].replace("{0}",ye),pa(S,E,ie),E[St]=E[St]||[],(0,B.Ax)(ie)}o(Wi,"_createEnvelope");function $i(S,g){(0,B.le)(g[Yn])&&(0,K.kP)(S,1,46,"telemetryItem.baseData cannot be null.")}o($i,"EnvelopeCreatorInit");var ma={Version:"2.8.12"};function ja(S,g,E){$i(S,g);var L=g[Yn][Er]||{},ie=g[Yn][ur]||{};Ii(g[Fn],ie,L),(0,B.le)(E)||ra(ie,E);var ye=g[Yn];if((0,B.le)(ye))return(0,K.jV)(S,"Invalid input for dependency data"),null;var Be=ye[ur]&&ye[ur][O]?ye[ur][O]:"GET",Ve=new nr(S,ye.id,ye.target,ye[Nn],ye[$t],ye.success,ye.responseCode,Be,ye.type,ye.correlationContext,ie,L),ot=new mn(nr[Un],Ve);return Wi(S,nr[rr],g,ot)}o(ja,"DependencyEnvelopeCreator");function Ai(S,g,E){$i(S,g);var L={},ie={};g[Yi]!==Vt[Un]&&(L.baseTypeSource=g[Yi]),g[Yi]===Vt[Un]?(L=g[Yn][ur]||{},ie=g[Yn][Er]||{}):g[Yn]&&Ii(g[Yn],L,ie),Ii(g[Fn],L,ie),(0,B.le)(E)||ra(L,E);var ye=g[Yn][Nn],Be=new Vt(S,ye,L,ie),Ve=new mn(Vt[Un],Be);return Wi(S,Vt[rr],g,Ve)}o(Ai,"EventEnvelopeCreator");function Ta(S,g,E){$i(S,g);var L=g[Yn][Er]||{},ie=g[Yn][ur]||{};Ii(g[Fn],ie,L),(0,B.le)(E)||ra(ie,E);var ye=g[Yn],Be=Ft.CreateFromInterface(S,ye,ie,L),Ve=new mn(Ft[Un],Be);return Wi(S,Ft[rr],g,Ve)}o(Ta,"ExceptionEnvelopeCreator");function Ya(S,g,E){$i(S,g);var L=g[Yn],ie=L[ur]||{},ye=L[Er]||{};Ii(g[Fn],ie,ye),(0,B.le)(E)||ra(ie,E);var Be=new Jn(S,L[Nn],L.average,L.sampleCount,L.min,L.max,L.stdDev,ie,ye),Ve=new mn(Jn[Un],Be);return Wi(S,Jn[rr],g,Ve)}o(Ya,"MetricEnvelopeCreator");function qa(S,g,E){$i(S,g);var L,ie=g[Yn];!(0,B.le)(ie)&&!(0,B.le)(ie[ur])&&!(0,B.le)(ie[ur][$t])?(L=ie[ur][$t],delete ie[ur][$t]):!(0,B.le)(g[Fn])&&!(0,B.le)(g[Fn][$t])&&(L=g[Fn][$t],delete g[Fn][$t]);var ye=g[Yn],Be;((g.ext||{}).trace||{})[kn]&&(Be=g.ext.trace[kn]);var Ve=ye.id||Be,ot=ye[Nn],dt=ye.uri,At=ye[ur]||{},un=ye[Er]||{};if((0,B.le)(ye.refUri)||(At.refUri=ye.refUri),(0,B.le)(ye.pageType)||(At.pageType=ye.pageType),(0,B.le)(ye.isLoggedIn)||(At.isLoggedIn=ye.isLoggedIn[Vn]()),!(0,B.le)(ye[ur])){var Wn=ye[ur];(0,B.rW)(Wn,function(wr,Fe){At[wr]=Fe})}Ii(g[Fn],At,un),(0,B.le)(E)||ra(At,E);var cn=new Cr(S,ot,dt,L,At,un,Ve),Rn=new mn(Cr[Un],cn);return Wi(S,Cr[rr],g,Rn)}o(qa,"PageViewEnvelopeCreator");function Qa(S,g,E){$i(S,g);var L=g[Yn],ie=L[Nn],ye=L.uri||L.url,Be=L[ur]||{},Ve=L[Er]||{};Ii(g[Fn],Be,Ve),(0,B.le)(E)||ra(Be,E);var ot=new Rr(S,ie,ye,void 0,Be,Ve,L),dt=new mn(Rr[Un],ot);return Wi(S,Rr[rr],g,dt)}o(Qa,"PageViewPerformanceEnvelopeCreator");function Xa(S,g,E){$i(S,g);var L=g[Yn].message,ie=g[Yn].severityLevel,ye=g[Yn][ur]||{},Be=g[Yn][Er]||{};Ii(g[Fn],ye,Be),(0,B.le)(E)||ra(ye,E);var Ve=new En(S,L,ie,ye,Be),ot=new mn(En[Un],Ve);return Wi(S,En[rr],g,ot)}o(Xa,"TraceEnvelopeCreator");function Ma(S,g){(0,cr.QY)(S,null,null,g)}o(Ma,"_disableEvents");function Za(S){var g,E=(0,Ye.Me)(),L=(0,Ye.jW)(),ie=!1,ye=!0,Be=(0,cr.jU)((0,Hn.J)("OfflineListener"),S);try{if(ot((0,Ye.Jj)())&&(ie=!0),E){var Ve=E.body||E;Ve.ononline&&ot(Ve)&&(ie=!0)}ie&&L&&!(0,B.le)(L[Hr])&&(ye=L[Hr])}catch(cn){ie=!1}function ot(cn){var Rn=!1;return cn&&(Rn=(0,cr.XO)(cn,"online",dt,Be),Rn&&(0,cr.XO)(cn,"offline",At,Be)),Rn}o(ot,"_enableEvents");function dt(){ye=!0}o(dt,"_setOnline");function At(){ye=!1}o(At,"_setOffline");function un(){var cn=!0;return ie?cn=ye:L&&!(0,B.le)(L[Hr])&&(cn=L[Hr]),cn}o(un,"_isOnline");function Wn(){var cn=(0,Ye.Jj)();if(cn&&ie){if(Ma(cn,Be),E){var Rn=E.body||E;(0,B.o8)(Rn.ononline)||Ma(Rn,Be)}ie=!1}}return o(Wn,"_unload"),g={},g[yr]=un,g.isListening=function(){return ie},g.unload=Wn,g}o(Za,"createOfflineListener");var Ia=function(){function S(g,E){var L=[],ie=!1;this._get=function(){return L},this._set=function(ye){return L=ye,L},(0,R.Z)(S,this,function(ye){ye[qr]=function(Be){if(ye[Qr]()>=E.eventsLimitInMem()){ie||((0,K.kP)(g,2,105,"Maximum in-memory buffer size reached: "+ye[Qr](),!0),ie=!0);return}L[Yr](Be)},ye[Qr]=function(){return L[Yt]},ye.size=function(){for(var Be=L[Yt],Ve=0;Ve<L[Yt];Ve++)Be+=L[Ve][Yt];return E[Ci]()||(Be+=2),Be},ye[si]=function(){L=[],ie=!1},ye.getItems=function(){return L.slice(0)},ye[_i]=function(Be){if(Be&&Be[Yt]>0){var Ve=E[Ci]()?Be.join(`
`):"["+Be.join(",")+"]";return Ve}return null}})}return o(S,"BaseSendBuffer"),S.__ieDyn=1,S}(),ya=function(S){(0,v.ne)(g,S);function g(E,L){var ie=S.call(this,E,L)||this;return(0,R.Z)(g,ie,function(ye,Be){ye[ri]=function(Ve){Be[si]()},ye[bi]=function(Ve){}}),ie}return o(g,"ArraySendBuffer"),g.__ieDyn=1,g}(Ia),eo=function(S){(0,v.ne)(g,S);function g(E,L){var ie=S.call(this,E,L)||this,ye=!1,Be=L[Lr]()||{getItem:Ji,setItem:ki},Ve=Be.getItem,ot=Be.setItem;return(0,R.Z)(g,ie,function(dt,At){var un=wr(g[Ei]),Wn=wr(g[Xr]),cn=dt._set(un.concat(Wn));cn[Yt]>g[li]&&(cn[Yt]=g[li]),Fe(g[Xr],[]),Fe(g[Ei],cn),dt[qr]=function(ar){if(dt[Qr]()>=g[li]){ye||((0,K.kP)(E,2,67,"Maximum buffer size reached: "+dt[Qr](),!0),ye=!0);return}At[qr](ar),Fe(g[Ei],dt._get())},dt[si]=function(){At[si](),Fe(g[Ei],dt._get()),Fe(g[Xr],[]),ye=!1},dt[ri]=function(ar){Fe(g[Ei],dt._set(Rn(ar,dt._get())));var Mn=wr(g[Xr]);Mn instanceof Array&&ar instanceof Array&&(Mn=Mn.concat(ar),Mn[Yt]>g[li]&&((0,K.kP)(E,1,67,"Sent buffer reached its maximum size: "+Mn[Yt],!0),Mn[Yt]=g[li]),Fe(g[Xr],Mn))},dt[bi]=function(ar){var Mn=wr(g[Xr]);Mn=Rn(ar,Mn),Fe(g[Xr],Mn)};function Rn(ar,Mn){var Sr=[];return(0,B.tO)(Mn,function(Ar){!(0,B.mf)(Ar)&&(0,B.UA)(ar,Ar)===-1&&Sr[Yr](Ar)}),Sr}o(Rn,"_removePayloadsFromBuffer");function wr(ar){var Mn=ar;try{Mn=L[hr]&&L[hr]()?L[hr]()+"_"+Mn:Mn;var Sr=Ve(E,Mn);if(Sr){var Ar=(0,Ye.xA)().parse(Sr);if((0,B.HD)(Ar)&&(Ar=(0,Ye.xA)().parse(Ar)),Ar&&(0,B.kJ)(Ar))return Ar}}catch(di){(0,K.kP)(E,1,42," storage key: "+Mn+", "+(0,B.jj)(di),{exception:(0,Ye.eU)(di)})}return[]}o(wr,"_getBuffer");function Fe(ar,Mn){var Sr=ar;try{Sr=L[hr]&&L[hr]()?L[hr]()+"_"+Sr:Sr;var Ar=JSON[Br](Mn);ot(E,Sr,Ar)}catch(di){ot(E,Sr,JSON[Br]([])),(0,K.kP)(E,2,41," storage key: "+Sr+", "+(0,B.jj)(di)+". Buffer cleared",{exception:(0,Ye.eU)(di)})}}o(Fe,"_setBuffer")}),ie}return o(g,"SessionStorageSendBuffer"),g.BUFFER_KEY="AI_buffer",g.SENT_BUFFER_KEY="AI_sentBuffer",g.MAX_BUFFER_SIZE=2e3,g}(Ia),to=function(){function S(g){(0,R.Z)(S,this,function(E){E.serialize=function(Be){var Ve=L(Be,"root");try{return(0,Ye.xA)()[Br](Ve)}catch(ot){(0,K.kP)(g,1,48,ot&&(0,B.mf)(ot[Vn])?ot[Vn]():"Error serializing object",null,!0)}};function L(Be,Ve){var ot="__aiCircularRefCheck",dt={};if(!Be)return(0,K.kP)(g,1,48,"cannot serialize object because it is null or undefined",{name:Ve},!0),dt;if(Be[ot])return(0,K.kP)(g,2,50,"Circular reference detected while serializing object",{name:Ve},!0),dt;if(!Be.aiDataContract){if(Ve==="measurements")dt=ye(Be,"number",Ve);else if(Ve==="properties")dt=ye(Be,"string",Ve);else if(Ve==="tags")dt=ye(Be,"string",Ve);else if((0,B.kJ)(Be))dt=ie(Be,Ve);else{(0,K.kP)(g,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:Ve},!0);try{(0,Ye.xA)()[Br](Be),dt=Be}catch(At){(0,K.kP)(g,1,48,At&&(0,B.mf)(At[Vn])?At[Vn]():"Error serializing object",null,!0)}}return dt}return Be[ot]=!0,(0,B.rW)(Be.aiDataContract,function(At,un){var Wn=(0,B.mf)(un)?un()&1:un&1,cn=(0,B.mf)(un)?un()&4:un&4,Rn=un&2,wr=Be[At]!==void 0,Fe=(0,B.Kn)(Be[At])&&Be[At]!==null;if(Wn&&!wr&&!Rn)(0,K.kP)(g,1,24,"Missing required field specification. The field is required but not present on source",{field:At,name:Ve});else if(!cn){var ar=void 0;Fe?Rn?ar=ie(Be[At],At):ar=L(Be[At],At):ar=Be[At],ar!==void 0&&(dt[At]=ar)}}),delete Be[ot],dt}o(L,"_serializeObject");function ie(Be,Ve){var ot;if(Be)if(!(0,B.kJ)(Be))(0,K.kP)(g,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:Ve},!0);else{ot=[];for(var dt=0;dt<Be[Yt];dt++){var At=Be[dt],un=L(At,Ve+"["+dt+"]");ot[Yr](un)}}return ot}o(ie,"_serializeArray");function ye(Be,Ve,ot){var dt;return Be&&(dt={},(0,B.rW)(Be,function(At,un){if(Ve==="string")un===void 0?dt[At]="undefined":un===null?dt[At]="null":un[Vn]?dt[At]=un[Vn]():dt[At]="invalid field: toString() is not defined.";else if(Ve==="number")if(un===void 0)dt[At]="undefined";else if(un===null)dt[At]="null";else{var Wn=parseFloat(un);isNaN(Wn)?dt[At]="NaN":dt[At]=Wn}else dt[At]="invalid field: "+ot+" is of unknown type.",(0,K.kP)(g,1,dt[At],null,!0)})),dt}o(ye,"_serializeStringMap")})}return o(S,"Serializer"),S.__ieDyn=1,S}(),no=8,la=function(){function S(){}return o(S,"HashCodeScoreGenerator"),S.prototype.getHashCodeScore=function(g){var E=this.getHashCode(g)/S.INT_MAX_VALUE;return E*100},S.prototype.getHashCode=function(g){if(g==="")return 0;for(;g[Yt]<no;)g=g.concat(g);for(var E=5381,L=0;L<g[Yt];++L)E=(E<<5)+E+g.charCodeAt(L),E=E&E;return Math.abs(E)},S.INT_MAX_VALUE=2147483647,S}(),ro=function(){function S(){var g=this,E=new la,L=new gn;g[xr]=function(ie){var ye=0;return ie[St]&&ie[St][L.userId]?ye=E.getHashCodeScore(ie[St][L.userId]):ie.ext&&ie.ext.user&&ie.ext.user.id?ye=E[Ui](ie.ext.user.id):ie[St]&&ie[St][L.operationId]?ye=E.getHashCodeScore(ie[St][L.operationId]):ie.ext&&ie.ext.telemetryTrace&&ie.ext.telemetryTrace[kn]?ye=E.getHashCodeScore(ie.ext.telemetryTrace[kn]):ye=Math.random()*100,ye}}return o(S,"SamplingScoreGenerator"),S}(),Pa=function(){function S(g,E){this.INT_MAX_VALUE=2147483647;var L=E||(0,K.vH)(null);(g>100||g<0)&&(L.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:g},!0),g=100),this[ii]=g,this.samplingScoreGenerator=new ro}return o(S,"Sample"),S.prototype.isSampledIn=function(g){var E=this[ii],L=!1;return E==null||E>=100||g.baseType===Jn[Un]?!0:(L=this.samplingScoreGenerator[xr](g)<E,L)},S}(),ci,io=65e3;function ca(S){try{return S.responseText}catch(g){}return null}o(ca,"_getResponseText");function ui(){var S,g,E;return S={endpointUrl:function(){return H+b}},S[Ci]=function(){return!1},S[na]=function(){return 15e3},S[Jr]=function(){return 102400},S[Ln]=function(){return!1},S[ln]=function(){return!0},S[Lr]=function(){return!1},S[Vi]=function(){return!1},S[ut]=function(){return!0},S[Ht]=function(){return!1},S[an]=function(){return!1},S[st]=function(){return!1},S[He]=function(){return g},S[hr]=function(){return g},S[Ge]=function(){return 100},S[xt]=function(){return E},S[Ni]=function(){return g},S.eventsLimitInMem=function(){return 1e4},S}o(ui,"_getDefaultAppInsightsChannelConfig");var ao=(ci={},ci[Vt.dataType]=Ai,ci[En.dataType]=Xa,ci[Cr.dataType]=qa,ci[Rr.dataType]=Qa,ci[Ft.dataType]=Ta,ci[Jn.dataType]=Ya,ci[nr.dataType]=ja,ci),La=function(S){(0,v.ne)(g,S);function g(){var E=S.call(this)||this;E.priority=1001,E.identifier=y,E._senderConfig=ui();var L,ie,ye,Be,Ve,ot,dt,At,un=0,Wn,cn,Rn,wr;return(0,R.Z)(g,E,function(Fe,ar){po(),Fe.pause=function(){Ba(),Be=!0},Fe.resume=function(){Be&&(Be=!1,ie=null,Fe._buffer.size()>Fe._senderConfig[Jr]()&&Fe[he](!0,null,10),Ca())},Fe.flush=function(Ie,bt,Pt){if(Ie===void 0&&(Ie=!0),!Be){Ba();try{Fe[he](Ie,null,Pt||1)}catch(Zt){(0,K.kP)(Fe[qe](),1,22,"flush failed, telemetry will not be collected: "+(0,B.jj)(Zt),{exception:(0,Ye.eU)(Zt)})}}},Fe.onunloadFlush=function(){if(!Be)if((Fe._senderConfig[st]()===!1||Fe[Ot][ut]()===!1)&&(0,Ye.MF)())try{Fe[he](!0,di,2)}catch(Ie){(0,K.kP)(Fe[qe](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,B.jj)(Ie),{exception:(0,Ye.eU)(Ie)})}else Fe.flush()},Fe.addHeader=function(Ie,bt){At[Ie]=bt},Fe.initialize=function(Ie,bt,Pt,Zt){Fe.isInitialized()&&(0,K.kP)(Fe[qe](),1,28,"Sender is already initialized"),ar.initialize(Ie,bt,Pt,Zt);var In=Fe._getTelCtx(),Kn=Fe.identifier;ot=new to(bt.logger),L=0,ie=null,ye=0,Fe[Tt]=null,dt=0;var On=Fe[qe]();wr=(0,cr.jU)((0,Hn.J)("Sender"),bt.evtNamespace&&bt.evtNamespace()),Rn=Za(wr);var Ur=ui();(0,B.rW)(Ur,function(gi,Pr){Fe[Ot][gi]=function(){var ba=In.getConfig(Kn,gi,Pr());return!ba&&gi==="endpointUrl"&&(ba=Pr()),ba}});var hi=Fe[Ot][ln]()&&!!(Fe._senderConfig[Lr]()||Si());Fe[ge]=hi?new eo(On,Fe[Ot]):new ya(On,Fe[Ot]),Fe._sample=new Pa(Fe[Ot][Ge](),On),Pi(Ie)||(0,K.kP)(On,1,100,"Invalid Instrumentation key "+Ie[He]),!Lt(Fe._senderConfig.endpointUrl())&&Fe._senderConfig.customHeaders()&&Fe._senderConfig.customHeaders()[Yt]>0&&(0,B.tO)(Fe[Ot][xt](),function(gi){E.addHeader(gi.header,gi.value)});var Mr=Fe[Ot],Wr=null;!Mr[Ht]()&&(0,Ye.cp)()?Wr=_a:!Mr[Ht]()&&(0,Ye.Z3)()&&(Wr=fi),!Wr&&(0,Ye.JO)()&&(Wr=fo),Wn=Wr||fi,!Mr[ut]()&&(0,Ye.MF)()&&(Wr=Sa),Fe[Tt]=Wr||fi,!Mr[an]()&&(0,Ye.JO)(!0)?cn=uo:(0,Ye.MF)()?cn=Sa:!Mr[Ht]()&&(0,Ye.cp)()?cn=_a:!Mr[Ht]()&&(0,Ye.Z3)()?cn=fi:cn=Wn},Fe.processTelemetry=function(Ie,bt){bt=Fe._getTelCtx(bt);var Pt=bt[qe]();try{if(Fe[Ot][Ln]())return;if(!Ie){(0,K.kP)(Pt,1,7,"Cannot send empty telemetry");return}if(Ie.baseData&&!Ie[zn]){(0,K.kP)(Pt,1,70,"Cannot send telemetry without baseData and baseType");return}if(Ie[zn]||(Ie[zn]="EventData"),!Fe[Tt]){(0,K.kP)(Pt,1,28,"Sender was not initialized");return}if(Mn(Ie))Ie[m]=Fe._sample[ii];else{(0,K.kP)(Pt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Fe._sample[ii]});return}var Zt=Fe[Ot][Ni]()||void 0,In=Ie.iKey||Fe[Ot][He](),Kn=g.constructEnvelope(Ie,In,Pt,Zt);if(!Kn){(0,K.kP)(Pt,1,47,"Unable to create an AppInsights envelope");return}var On=!1;if(Ie[St]&&Ie[St][w]&&((0,B.tO)(Ie[St][w],function(Wr){try{Wr&&Wr(Kn)===!1&&(On=!0,(0,K.jV)(Pt,"Telemetry processor check returns false"))}catch(gi){(0,K.kP)(Pt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,B.jj)(gi),{exception:(0,Ye.eU)(gi)},!0)}}),delete Ie[St][w]),On)return;var Ur=ot.serialize(Kn),hi=Fe[ge],Mr=hi.size();Mr+Ur[Yt]>Fe[Ot][Jr]()&&(!Rn||Rn[yr]())&&Fe[he](!0,null,10),hi[qr](Ur),Ca()}catch(Wr){(0,K.kP)(Pt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,B.jj)(Wr),{exception:(0,Ye.eU)(Wr)})}Fe.processNext(Ie,bt)},Fe[Oi]=function(Ie,bt,Pt){Ie.readyState===4&&Sr(Ie.status,bt,Ie.responseURL,Pt,da(Ie),ca(Ie)||Ie.response)},Fe[he]=function(Ie,bt,Pt){if(Ie===void 0&&(Ie=!0),!Be)try{var Zt=Fe[ge];if(Fe[Ot][Ln]())Zt[si]();else{if(Zt[Qr]()>0){var In=Zt.getItems();vo(Pt||0,Ie),bt?bt.call(E,In,Ie):Fe[Tt](In,Ie)}ye=+new Date}Ba()}catch(On){var Kn=(0,Ye.sA)();(!Kn||Kn>9)&&(0,K.kP)(Fe[qe](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,B.jj)(On),{exception:(0,Ye.eU)(On)})}},Fe._doTeardown=function(Ie,bt){Fe.onunloadFlush(),Rn.unload(),po()},Fe[ir]=function(Ie,bt,Pt){(0,K.kP)(Fe[qe](),2,26,"Failed to send telemetry.",{message:bt}),Fe._buffer[bi](Ie)},Fe[Bi]=function(Ie,bt){for(var Pt=[],Zt=[],In=bt.errors.reverse(),Kn=0,On=In;Kn<On.length;Kn++){var Ur=On[Kn],hi=Ie.splice(Ur.index,1)[0];ho(Ur.statusCode)?Zt[Yr](hi):Pt[Yr](hi)}Ie[Yt]>0&&Fe[Hi](Ie,bt[Ti]),Pt[Yt]>0&&Fe[ir](Pt,da(null,["partial success",bt[Ti],"of",bt.itemsReceived].join(" "))),Zt[Yt]>0&&(Oa(Zt),(0,K.kP)(Fe[qe](),2,40,"Partial success. Delivered: "+Ie[Yt]+", Failed: "+Pt[Yt]+". Will retry to send "+Zt[Yt]+" our of "+bt[va]+" items"))},Fe[Hi]=function(Ie,bt){Fe._buffer[bi](Ie)},Fe._xdrOnLoad=function(Ie,bt){var Pt=ca(Ie);if(Ie&&(Pt+""=="200"||Pt===""))L=0,Fe[Hi](bt,0);else{var Zt=Na(Pt);Zt&&Zt.itemsReceived&&Zt.itemsReceived>Zt[Ti]&&!Fe[Ot][Vi]()?Fe[Bi](bt,Zt):Fe[ir](bt,ia(Ie))}};function Mn(Ie){return Fe._sample.isSampledIn(Ie)}o(Mn,"_isSampledIn");function Sr(Ie,bt,Pt,Zt,In,Kn){var On=null;if(Fe._appId||(On=Na(Kn),On&&On.appId&&(Fe._appId=On.appId)),(Ie<200||Ie>=300)&&Ie!==0){if((Ie===301||Ie===307||Ie===308)&&!Ar(Pt)){Fe[ir](bt,In);return}!Fe[Ot][Vi]()&&ho(Ie)?(Oa(bt),(0,K.kP)(Fe[qe](),2,40,". Response code "+Ie+". Will retry to send "+bt[Yt]+" items.")):Fe[ir](bt,In)}else if(Rn&&!Rn[yr]()){if(!Fe[Ot][Vi]()){var Ur=10;Oa(bt,Ur),(0,K.kP)(Fe[qe](),2,40,". Offline - Response Code: ".concat(Ie,". Offline status: ").concat(!Rn.isOnline(),". Will retry to send ").concat(bt.length," items."))}}else Ar(Pt),Ie===206?(On||(On=Na(Kn)),On&&!Fe[Ot][Vi]()?Fe[Bi](bt,On):Fe[ir](bt,In)):(L=0,Fe[Hi](bt,Zt))}o(Sr,"_checkResponsStatus");function Ar(Ie){return dt>=10?!1:!(0,B.le)(Ie)&&Ie!==""&&Ie!==Fe[Ot][ht]()?(Fe[Ot][ht]=function(){return Ie},++dt,!0):!1}o(Ar,"_checkAndUpdateEndPointUrl");function di(Ie,bt){cn?cn(Ie,!1):Sa(Ie,bt)}o(di,"_doUnloadSend");function co(Ie){var bt=(0,Ye.jW)(),Pt=Fe[ge],Zt=Fe[Ot][ht](),In=Fe._buffer[_i](Ie),Kn=new Blob([In],{type:"text/plain;charset=UTF-8"}),On=bt.sendBeacon(Zt,Kn);return On&&(Pt[ri](Ie),Fe._onSuccess(Ie,Ie[Yt])),On}o(co,"_doBeaconSend");function Sa(Ie,bt){if((0,B.kJ)(Ie)&&Ie[Yt]>0&&!co(Ie)){for(var Pt=[],Zt=0;Zt<Ie[Yt];Zt++){var In=Ie[Zt];co([In])||Pt[Yr](In)}Pt[Yt]>0&&(Wn&&Wn(Pt,!0),(0,K.kP)(Fe[qe](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}o(Sa,"_beaconSender");function fi(Ie,bt){var Pt=new XMLHttpRequest,Zt=Fe[Ot][ht]();try{Pt[N]=!0}catch(Kn){}Pt.open("POST",Zt,bt),Pt[ta]("Content-type","application/json"),Lt(Zt)&&Pt[ta](Gn[6],Gn[7]),(0,B.tO)((0,B.FY)(At),function(Kn){Pt[ta](Kn,At[Kn])}),Pt.onreadystatechange=function(){return Fe._xhrReadyStateChange(Pt,Ie,Ie[Yt])},Pt.onerror=function(Kn){return Fe[ir](Ie,da(Pt),Kn)};var In=Fe._buffer[_i](Ie);Pt.send(In),Fe._buffer[ri](Ie)}o(fi,"_xhrSender");function uo(Ie,bt){if((0,B.kJ)(Ie)){for(var Pt=Ie[Yt],Zt=0;Zt<Ie[Yt];Zt++)Pt+=Ie[Zt][Yt];un+Pt<=io?Zr(Ie,!1):(0,Ye.MF)()?Sa(Ie,bt):(Wn&&Wn(Ie,!0),(0,K.kP)(Fe[qe](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}o(uo,"_fetchKeepAliveSender");function fo(Ie,bt){Zr(Ie,!0)}o(fo,"_fetchSender");function Zr(Ie,bt){var Pt,Zt=Fe[Ot][ht](),In=Fe._buffer[_i](Ie),Kn=new Blob([In],{type:"application/json"}),On=new Headers,Ur=In[Yt],hi=!1,Mr=!1;Lt(Zt)&&On.append(Gn[6],Gn[7]),(0,B.tO)((0,B.FY)(At),function(Pr){On.append(Pr,At[Pr])});var Wr=(Pt={method:"POST",headers:On,body:Kn},Pt[N]=!0,Pt);bt||(Wr.keepalive=!0,hi=!0,un+=Ur);var gi=new Request(Zt,Wr);try{gi[N]=!0}catch(Pr){}Fe._buffer[ri](Ie);try{fetch(gi).then(function(Pr){bt||(un-=Ur,Ur=0),Mr||(Mr=!0,Pr.ok?Pr.text().then(function(ba){Sr(Pr.status,Ie,Pr.url,Ie[Yt],Pr.statusText,ba)}):Fe[ir](Ie,Pr.statusText))}).catch(function(Pr){bt||(un-=Ur,Ur=0),Mr||(Mr=!0,Fe[ir](Ie,Pr.message))})}catch(Pr){Mr||Fe[ir](Ie,(0,Ye.eU)(Pr))}hi&&!Mr&&(Mr=!0,Fe._onSuccess(Ie,Ie[Yt]))}o(Zr,"_doFetchSender");function Na(Ie){try{if(Ie&&Ie!==""){var bt=(0,Ye.xA)().parse(Ie);if(bt&&bt.itemsReceived&&bt.itemsReceived>=bt[Ti]&&bt.itemsReceived-bt.itemsAccepted===bt.errors[Yt])return bt}}catch(Pt){(0,K.kP)(Fe[qe](),1,43,"Cannot parse the response. "+(0,B.jj)(Pt),{response:Ie})}return null}o(Na,"_parseResponse");function Oa(Ie,bt){if(bt===void 0&&(bt=1),!(!Ie||Ie[Yt]===0)){var Pt=Fe[ge];Pt[bi](Ie),L++;for(var Zt=0,In=Ie;Zt<In.length;Zt++){var Kn=In[Zt];Pt[qr](Kn)}Vr(bt),Ca()}}o(Oa,"_resendPayload");function Vr(Ie){var bt=10,Pt;if(L<=1)Pt=bt;else{var Zt=(Math.pow(2,L)-1)/2,In=Math.floor(Math.random()*Zt*bt)+1;In=Ie*In,Pt=Math.max(Math.min(In,3600),bt)}var Kn=(0,B.m6)()+Pt*1e3;ie=Kn}o(Vr,"_setRetryTime");function Ca(){if(!Ve&&!Be){var Ie=ie?Math.max(0,ie-(0,B.m6)()):0,bt=Math.max(Fe[Ot][na](),Ie);Ve=setTimeout(function(){Ve=null,Fe[he](!0,null,1)},bt)}}o(Ca,"_setupTimer");function Ba(){clearTimeout(Ve),Ve=null,ie=null}o(Ba,"_clearScheduledTimer");function ho(Ie){return Ie===401||Ie===403||Ie===408||Ie===429||Ie===500||Ie===502||Ie===503||Ie===504}o(ho,"_isRetriable");function da(Ie,bt){return Ie?"XMLHttpRequest,Status:"+Ie.status+",Response:"+ca(Ie)||0||0:bt}o(da,"_formatErrorMessageXhr");function _a(Ie,bt){var Pt=Fe[ge],Zt=(0,Ye.Jj)(),In=new XDomainRequest;In.onload=function(){return Fe._xdrOnLoad(In,Ie)},In.onerror=function(hi){return Fe[ir](Ie,ia(In),hi)};var Kn=Zt&&Zt.location&&Zt.location.protocol||"";if(Fe[Ot][ht]().lastIndexOf(Kn,0)!==0){(0,K.kP)(Fe[qe](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),Pt[si]();return}var On=Fe[Ot][ht]().replace(/^(https?:)/,"");In.open("POST",On);var Ur=Pt[_i](Ie);In.send(Ur),Pt[ri](Ie)}o(_a,"_xdrSender");function ia(Ie,bt){return Ie?"XDomainRequest,Response:"+ca(Ie)||0:bt}o(ia,"_formatErrorMessageXdr");function go(){var Ie="getNotifyMgr";return Fe.core[Ie]?Fe.core[Ie]():Fe.core._notificationManager}o(go,"_getNotifyMgr");function vo(Ie,bt){var Pt=go();if(Pt&&Pt[Mi])try{Pt[Mi](Ie,bt)}catch(Zt){(0,K.kP)(Fe[qe](),1,74,"send request notification failed: "+(0,B.jj)(Zt),{exception:(0,Ye.eU)(Zt)})}}o(vo,"_notifySendRequest");function Pi(Ie){var bt=(0,B.le)(Ie[ji])?!1:Ie[ji];if(bt)return!0;var Pt="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Zt=new RegExp(Pt);return Zt.test(Ie[He])}o(Pi,"_validateInstrumentationKey");function po(){Fe[Tt]=null,Fe[ge]=null,Fe._appId=null,Fe._sample=null,At={},Rn=null,L=0,ie=null,ye=null,Be=!1,Ve=null,ot=null,dt=0,un=0,Wn=null,cn=null,wr=null}o(po,"_initDefaults")}),E}return o(g,"Sender"),g.constructEnvelope=function(E,L,ie,ye){var Be;L!==E.iKey&&!(0,B.le)(L)?Be=(0,v.uc)((0,v.uc)({},E),{iKey:L}):Be=E;var Ve=ao[Be.baseType]||Ai;return Ve(ie,Be,ye)},g}(jt.i),oo=";",so="=";function xa(S){if(!S)return{};var g=S[j](oo),E=(0,B.Xz)(g,function(ie,ye){var Be=ye[j](so);if(Be[q]===2){var Ve=Be[0][Ee](),ot=Be[1];ie[Ve]=ot}return ie},{});if((0,B.FY)(E)[q]>0){if(E.endpointsuffix){var L=E.location?E.location+".":"";E[z]=E[z]||"https://"+L+"dc."+E.endpointsuffix}E[z]=E[z]||H}return E}o(xa,"parseConnectionString");var Lo={parse:xa},xo=C(5121),wa="instrumentationKey",ka="connectionString",Ke="diagnosticLogInterval",ua=C(7310),Fa=(0,zr.By)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),lo=function(){function S(g){var E=new xo.F;((0,B.le)(g)||(0,B.le)(g[wa])&&(0,B.le)(g[ka]))&&(0,B._y)("Invalid input configuration"),(0,R.Z)(S,this,function(L){if(g[ka]){var ie=xa(g[ka]),ye=ie.ingestionendpoint;g.endpointUrl=ye?ye+b:g.endpointUrl,g[wa]=ie.instrumentationkey||g[wa]}L.config=g,Be(),L.initialize=Be,L.getSKUDefaults=function(){L.config[Ke]=L.config[Ke]&&L.config[Ke]>0?L.config[Ke]:1e4},L.getSKUDefaults(),(0,B.Vb)(L,E,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb"]);function Be(){E.initialize(L.config,[new La]),E.pollInternalLogs()}o(Be,"_initialize")})}return o(S,"ApplicationInsights"),S.__ieDyn=1,S}()},1679:(it,l,C)=>{"use strict";C.d(l,{Z:()=>mt});/*!
 * Microsoft Dynamic Proto Utility, 1.1.9
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var R,v="undefined",I="constructor",y="prototype",W="function",N="_dynInstFuncs",m="_isDynProxy",w="_dynClass",O="_dynCls$",H="_dynInstChk",b=H,$="_dfOpts",F="_unknown_",j="__proto__",q="_dyn"+j,Ee="__dynProto$Gbl",z="_dynInstProto",Z="useBaseInst",ee="setInstFuncs",T=Object,Y=T.getPrototypeOf,k=T.getOwnPropertyNames;function le(){var P;return typeof globalThis!==v&&(P=globalThis),!P&&typeof self!==v&&(P=self),!P&&typeof window!==v&&(P=window),!P&&typeof C.g!==v&&(P=C.g),P||{}}o(le,"_getGlobal");var J=le(),fe=J[Ee]||(J[Ee]={o:(R={},R[ee]=!0,R[Z]=!0,R),n:1e3});function De(P,U){return P&&T[y].hasOwnProperty.call(P,U)}o(De,"_hasOwnProperty");function Oe(P){return P&&(P===T[y]||P===Array[y])}o(Oe,"_isObjectOrArrayPrototype");function oe(P){return Oe(P)||P===Function[y]}o(oe,"_isObjectArrayOrFunctionPrototype");function Se(P){var U;if(P){if(Y)return Y(P);var re=P[j]||P[y]||(P[I]?P[I][y]:null);U=P[q]||re,De(P,q)||(delete P[z],U=P[q]=P[z]||P[q],P[z]=re)}return U}o(Se,"_getObjProto");function D(P,U){var re=[];if(k)re=k(P);else for(var de in P)typeof de=="string"&&De(P,de)&&re.push(de);if(re&&re.length>0)for(var Ue=0;Ue<re.length;Ue++)U(re[Ue])}o(D,"_forEachProp");function ze(P,U,re){return U!==I&&typeof P[U]===W&&(re||De(P,U))}o(ze,"_isDynamicCandidate");function we(P){throw new TypeError("DynamicProto: "+P)}o(we,"_throwTypeError");function ve(P){var U={};return D(P,function(re){!U[re]&&ze(P,re,!1)&&(U[re]=P[re])}),U}o(ve,"_getInstanceFuncs");function G(P,U){for(var re=P.length-1;re>=0;re--)if(P[re]===U)return!0;return!1}o(G,"_hasVisited");function se(P,U,re,de){function Ue(Me,Je,me){var xe=Je[me];if(xe[m]&&de){var Ze=Me[N]||{};Ze[b]!==!1&&(xe=(Ze[Je[w]]||{})[me]||xe)}return function(){return xe.apply(Me,arguments)}}o(Ue,"_instFuncProxy");var Pe={};D(re,function(Me){Pe[Me]=Ue(U,re,Me)});for(var ce=Se(P),Ce=[];ce&&!oe(ce)&&!G(Ce,ce);)D(ce,function(Me){!Pe[Me]&&ze(ce,Me,!Y)&&(Pe[Me]=Ue(U,ce,Me))}),Ce.push(ce),ce=Se(ce);return Pe}o(se,"_getBaseFuncs");function Te(P,U,re,de){var Ue=null;if(P&&De(re,w)){var Pe=P[N]||{};if(Ue=(Pe[re[w]]||{})[U],Ue||we("Missing ["+U+"] "+W),!Ue[H]&&Pe[b]!==!1){for(var ce=!De(P,U),Ce=Se(P),Me=[];ce&&Ce&&!oe(Ce)&&!G(Me,Ce);){var Je=Ce[U];if(Je){ce=Je===de;break}Me.push(Ce),Ce=Se(Ce)}try{ce&&(P[U]=Ue),Ue[H]=1}catch(me){Pe[b]=!1}}}return Ue}o(Te,"_getInstFunc");function $e(P,U,re){var de=U[P];return de===re&&(de=Se(U)[P]),typeof de!==W&&we("["+P+"] is not a "+W),de}o($e,"_getProtoFunc");function ae(P,U,re,de,Ue){function Pe(Me,Je){var me=o(function(){var xe=Te(this,Je,Me,me)||$e(Je,Me,me);return xe.apply(this,arguments)},"dynProtoProxy");return me[m]=1,me}if(o(Pe,"_createDynamicPrototype"),!Oe(P)){var ce=re[N]=re[N]||{},Ce=ce[U]=ce[U]||{};ce[b]!==!1&&(ce[b]=!!Ue),D(re,function(Me){ze(re,Me,!1)&&re[Me]!==de[Me]&&(Ce[Me]=re[Me],delete re[Me],(!De(P,Me)||P[Me]&&!P[Me][m])&&(P[Me]=Pe(P,Me)))})}}o(ae,"_populatePrototype");function Xe(P,U){if(Y){for(var re=[],de=Se(U);de&&!oe(de)&&!G(re,de);){if(de===P)return!0;re.push(de),de=Se(de)}return!1}return!0}o(Xe,"_checkPrototype");function lt(P,U){return De(P,y)?P.name||U||F:((P||{})[I]||{}).name||U||F}o(lt,"_getObjName");function mt(P,U,re,de){De(P,y)||we("theClass is an invalid class definition.");var Ue=P[y];Xe(Ue,U)||we("["+lt(P)+"] not in hierarchy of ["+lt(U)+"]");var Pe=null;De(Ue,w)?Pe=Ue[w]:(Pe=O+lt(P,"_")+"$"+fe.n,fe.n++,Ue[w]=Pe);var ce=mt[$],Ce=!!ce[Z];Ce&&de&&de[Z]!==void 0&&(Ce=!!de[Z]);var Me=ve(U),Je=se(Ue,U,Me,Ce);re(U,Je);var me=!!Y&&!!ce[ee];me&&de&&(me=!!de[ee]),ae(Ue,Pe,U,Me,me!==!1)}o(mt,"dynamicProto"),mt[$]=fe.o},6232:(it,l,C)=>{"use strict";const R=C(8641),v=C(8692),I=C(1474),y=C(5870),W=o((N,m={})=>{let w=[];if(Array.isArray(N))for(let O of N){let H=W.create(O,m);Array.isArray(H)?w.push(...H):w.push(H)}else w=[].concat(W.create(N,m));return m&&m.expand===!0&&m.nodupes===!0&&(w=[...new Set(w)]),w},"braces");W.parse=(N,m={})=>y(N,m),W.stringify=(N,m={})=>R(typeof N=="string"?W.parse(N,m):N,m),W.compile=(N,m={})=>(typeof N=="string"&&(N=W.parse(N,m)),v(N,m)),W.expand=(N,m={})=>{typeof N=="string"&&(N=W.parse(N,m));let w=I(N,m);return m.noempty===!0&&(w=w.filter(Boolean)),m.nodupes===!0&&(w=[...new Set(w)]),w},W.create=(N,m={})=>N===""||N.length<3?[N]:m.expand!==!0?W.compile(N,m):W.expand(N,m),it.exports=W},8692:(it,l,C)=>{"use strict";const R=C(1516),v=C(3596),I=o((y,W={})=>{let N=o((m,w={})=>{let O=v.isInvalidBrace(w),H=m.invalid===!0&&W.escapeInvalid===!0,b=O===!0||H===!0,$=W.escapeInvalid===!0?"\\":"",F="";if(m.isOpen===!0||m.isClose===!0)return $+m.value;if(m.type==="open")return b?$+m.value:"(";if(m.type==="close")return b?$+m.value:")";if(m.type==="comma")return m.prev.type==="comma"?"":b?m.value:"|";if(m.value)return m.value;if(m.nodes&&m.ranges>0){let j=v.reduce(m.nodes),q=R(...j,{...W,wrap:!1,toRegex:!0});if(q.length!==0)return j.length>1&&q.length>1?`(${q})`:q}if(m.nodes)for(let j of m.nodes)F+=N(j,m);return F},"walk");return N(y)},"compile");it.exports=I},7007:it=>{"use strict";it.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}},1474:(it,l,C)=>{"use strict";const R=C(1516),v=C(8641),I=C(3596),y=o((N="",m="",w=!1)=>{let O=[];if(N=[].concat(N),m=[].concat(m),!m.length)return N;if(!N.length)return w?I.flatten(m).map(H=>`{${H}}`):m;for(let H of N)if(Array.isArray(H))for(let b of H)O.push(y(b,m,w));else for(let b of m)w===!0&&typeof b=="string"&&(b=`{${b}}`),O.push(Array.isArray(b)?y(H,b,w):H+b);return I.flatten(O)},"append"),W=o((N,m={})=>{let w=m.rangeLimit===void 0?1e3:m.rangeLimit,O=o((H,b={})=>{H.queue=[];let $=b,F=b.queue;for(;$.type!=="brace"&&$.type!=="root"&&$.parent;)$=$.parent,F=$.queue;if(H.invalid||H.dollar){F.push(y(F.pop(),v(H,m)));return}if(H.type==="brace"&&H.invalid!==!0&&H.nodes.length===2){F.push(y(F.pop(),["{}"]));return}if(H.nodes&&H.ranges>0){let z=I.reduce(H.nodes);if(I.exceedsLimit(...z,m.step,w))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let Z=R(...z,m);Z.length===0&&(Z=v(H,m)),F.push(y(F.pop(),Z)),H.nodes=[];return}let j=I.encloseBrace(H),q=H.queue,Ee=H;for(;Ee.type!=="brace"&&Ee.type!=="root"&&Ee.parent;)Ee=Ee.parent,q=Ee.queue;for(let z=0;z<H.nodes.length;z++){let Z=H.nodes[z];if(Z.type==="comma"&&H.type==="brace"){z===1&&q.push(""),q.push("");continue}if(Z.type==="close"){F.push(y(F.pop(),q,j));continue}if(Z.value&&Z.type!=="open"){q.push(y(q.pop(),Z.value));continue}Z.nodes&&O(Z,H)}return q},"walk");return I.flatten(O(N))},"expand");it.exports=W},5870:(it,l,C)=>{"use strict";const R=C(8641),{MAX_LENGTH:v,CHAR_BACKSLASH:I,CHAR_BACKTICK:y,CHAR_COMMA:W,CHAR_DOT:N,CHAR_LEFT_PARENTHESES:m,CHAR_RIGHT_PARENTHESES:w,CHAR_LEFT_CURLY_BRACE:O,CHAR_RIGHT_CURLY_BRACE:H,CHAR_LEFT_SQUARE_BRACKET:b,CHAR_RIGHT_SQUARE_BRACKET:$,CHAR_DOUBLE_QUOTE:F,CHAR_SINGLE_QUOTE:j,CHAR_NO_BREAK_SPACE:q,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Ee}=C(7007),z=o((Z,ee={})=>{if(typeof Z!="string")throw new TypeError("Expected a string");let T=ee||{},Y=typeof T.maxLength=="number"?Math.min(v,T.maxLength):v;if(Z.length>Y)throw new SyntaxError(`Input length (${Z.length}), exceeds max characters (${Y})`);let k={type:"root",input:Z,nodes:[]},le=[k],J=k,fe=k,De=0,Oe=Z.length,oe=0,Se=0,D,ze={};const we=o(()=>Z[oe++],"advance"),ve=o(G=>{if(G.type==="text"&&fe.type==="dot"&&(fe.type="text"),fe&&fe.type==="text"&&G.type==="text"){fe.value+=G.value;return}return J.nodes.push(G),G.parent=J,G.prev=fe,fe=G,G},"push");for(ve({type:"bos"});oe<Oe;)if(J=le[le.length-1],D=we(),!(D===Ee||D===q)){if(D===I){ve({type:"text",value:(ee.keepEscaping?D:"")+we()});continue}if(D===$){ve({type:"text",value:"\\"+D});continue}if(D===b){De++;let G=!0,se;for(;oe<Oe&&(se=we());){if(D+=se,se===b){De++;continue}if(se===I){D+=we();continue}if(se===$&&(De--,De===0))break}ve({type:"text",value:D});continue}if(D===m){J=ve({type:"paren",nodes:[]}),le.push(J),ve({type:"text",value:D});continue}if(D===w){if(J.type!=="paren"){ve({type:"text",value:D});continue}J=le.pop(),ve({type:"text",value:D}),J=le[le.length-1];continue}if(D===F||D===j||D===y){let G=D,se;for(ee.keepQuotes!==!0&&(D="");oe<Oe&&(se=we());){if(se===I){D+=se+we();continue}if(se===G){ee.keepQuotes===!0&&(D+=se);break}D+=se}ve({type:"text",value:D});continue}if(D===O){Se++;let G=fe.value&&fe.value.slice(-1)==="$"||J.dollar===!0;J=ve({type:"brace",open:!0,close:!1,dollar:G,depth:Se,commas:0,ranges:0,nodes:[]}),le.push(J),ve({type:"open",value:D});continue}if(D===H){if(J.type!=="brace"){ve({type:"text",value:D});continue}let G="close";J=le.pop(),J.close=!0,ve({type:G,value:D}),Se--,J=le[le.length-1];continue}if(D===W&&Se>0){if(J.ranges>0){J.ranges=0;let G=J.nodes.shift();J.nodes=[G,{type:"text",value:R(J)}]}ve({type:"comma",value:D}),J.commas++;continue}if(D===N&&Se>0&&J.commas===0){let G=J.nodes;if(Se===0||G.length===0){ve({type:"text",value:D});continue}if(fe.type==="dot"){if(J.range=[],fe.value+=D,fe.type="range",J.nodes.length!==3&&J.nodes.length!==5){J.invalid=!0,J.ranges=0,fe.type="text";continue}J.ranges++,J.args=[];continue}if(fe.type==="range"){G.pop();let se=G[G.length-1];se.value+=fe.value+D,fe=se,J.ranges--;continue}ve({type:"dot",value:D});continue}ve({type:"text",value:D})}do if(J=le.pop(),J.type!=="root"){J.nodes.forEach(Te=>{Te.nodes||(Te.type==="open"&&(Te.isOpen=!0),Te.type==="close"&&(Te.isClose=!0),Te.nodes||(Te.type="text"),Te.invalid=!0)});let G=le[le.length-1],se=G.nodes.indexOf(J);G.nodes.splice(se,1,...J.nodes)}while(le.length>0);return ve({type:"eos"}),k},"parse");it.exports=z},8641:(it,l,C)=>{"use strict";const R=C(3596);it.exports=(v,I={})=>{let y=o((W,N={})=>{let m=I.escapeInvalid&&R.isInvalidBrace(N),w=W.invalid===!0&&I.escapeInvalid===!0,O="";if(W.value)return(m||w)&&R.isOpenOrClose(W)?"\\"+W.value:W.value;if(W.value)return W.value;if(W.nodes)for(let H of W.nodes)O+=y(H);return O},"stringify");return y(v)}},3596:(it,l)=>{"use strict";l.isInteger=C=>typeof C=="number"?Number.isInteger(C):typeof C=="string"&&C.trim()!==""?Number.isInteger(Number(C)):!1,l.find=(C,R)=>C.nodes.find(v=>v.type===R),l.exceedsLimit=(C,R,v=1,I)=>I===!1||!l.isInteger(C)||!l.isInteger(R)?!1:(Number(R)-Number(C))/Number(v)>=I,l.escapeNode=(C,R=0,v)=>{let I=C.nodes[R];!I||(v&&I.type===v||I.type==="open"||I.type==="close")&&I.escaped!==!0&&(I.value="\\"+I.value,I.escaped=!0)},l.encloseBrace=C=>C.type!=="brace"?!1:C.commas>>0+C.ranges>>0==0?(C.invalid=!0,!0):!1,l.isInvalidBrace=C=>C.type!=="brace"?!1:C.invalid===!0||C.dollar?!0:C.commas>>0+C.ranges>>0==0||C.open!==!0||C.close!==!0?(C.invalid=!0,!0):!1,l.isOpenOrClose=C=>C.type==="open"||C.type==="close"?!0:C.open===!0||C.close===!0,l.reduce=C=>C.reduce((R,v)=>(v.type==="text"&&R.push(v.value),v.type==="range"&&(v.type="text"),R),[]),l.flatten=(...C)=>{const R=[],v=o(I=>{for(let y=0;y<I.length;y++){let W=I[y];Array.isArray(W)?v(W,R):W!==void 0&&R.push(W)}return R},"flat");return v(C),R}},1516:(it,l,C)=>{"use strict";/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const R=C(6529),v=C(2999),I=o(T=>T!==null&&typeof T=="object"&&!Array.isArray(T),"isObject"),y=o(T=>Y=>T===!0?Number(Y):String(Y),"transform"),W=o(T=>typeof T=="number"||typeof T=="string"&&T!=="","isValidValue"),N=o(T=>Number.isInteger(+T),"isNumber"),m=o(T=>{let Y=`${T}`,k=-1;if(Y[0]==="-"&&(Y=Y.slice(1)),Y==="0")return!1;for(;Y[++k]==="0";);return k>0},"zeros"),w=o((T,Y,k)=>typeof T=="string"||typeof Y=="string"?!0:k.stringify===!0,"stringify"),O=o((T,Y,k)=>{if(Y>0){let le=T[0]==="-"?"-":"";le&&(T=T.slice(1)),T=le+T.padStart(le?Y-1:Y,"0")}return k===!1?String(T):T},"pad"),H=o((T,Y)=>{let k=T[0]==="-"?"-":"";for(k&&(T=T.slice(1),Y--);T.length<Y;)T="0"+T;return k?"-"+T:T},"toMaxLen"),b=o((T,Y)=>{T.negatives.sort((De,Oe)=>De<Oe?-1:De>Oe?1:0),T.positives.sort((De,Oe)=>De<Oe?-1:De>Oe?1:0);let k=Y.capture?"":"?:",le="",J="",fe;return T.positives.length&&(le=T.positives.join("|")),T.negatives.length&&(J=`-(${k}${T.negatives.join("|")})`),le&&J?fe=`${le}|${J}`:fe=le||J,Y.wrap?`(${k}${fe})`:fe},"toSequence"),$=o((T,Y,k,le)=>{if(k)return v(T,Y,{wrap:!1,...le});let J=String.fromCharCode(T);if(T===Y)return J;let fe=String.fromCharCode(Y);return`[${J}-${fe}]`},"toRange"),F=o((T,Y,k)=>{if(Array.isArray(T)){let le=k.wrap===!0,J=k.capture?"":"?:";return le?`(${J}${T.join("|")})`:T.join("|")}return v(T,Y,k)},"toRegex"),j=o((...T)=>new RangeError("Invalid range arguments: "+R.inspect(...T)),"rangeError"),q=o((T,Y,k)=>{if(k.strictRanges===!0)throw j([T,Y]);return[]},"invalidRange"),Ee=o((T,Y)=>{if(Y.strictRanges===!0)throw new TypeError(`Expected step "${T}" to be a number`);return[]},"invalidStep"),z=o((T,Y,k=1,le={})=>{let J=Number(T),fe=Number(Y);if(!Number.isInteger(J)||!Number.isInteger(fe)){if(le.strictRanges===!0)throw j([T,Y]);return[]}J===0&&(J=0),fe===0&&(fe=0);let De=J>fe,Oe=String(T),oe=String(Y),Se=String(k);k=Math.max(Math.abs(k),1);let D=m(Oe)||m(oe)||m(Se),ze=D?Math.max(Oe.length,oe.length,Se.length):0,we=D===!1&&w(T,Y,le)===!1,ve=le.transform||y(we);if(le.toRegex&&k===1)return $(H(T,ze),H(Y,ze),!0,le);let G={negatives:[],positives:[]},se=o(ae=>G[ae<0?"negatives":"positives"].push(Math.abs(ae)),"push"),Te=[],$e=0;for(;De?J>=fe:J<=fe;)le.toRegex===!0&&k>1?se(J):Te.push(O(ve(J,$e),ze,we)),J=De?J-k:J+k,$e++;return le.toRegex===!0?k>1?b(G,le):F(Te,null,{wrap:!1,...le}):Te},"fillNumbers"),Z=o((T,Y,k=1,le={})=>{if(!N(T)&&T.length>1||!N(Y)&&Y.length>1)return q(T,Y,le);let J=le.transform||(we=>String.fromCharCode(we)),fe=`${T}`.charCodeAt(0),De=`${Y}`.charCodeAt(0),Oe=fe>De,oe=Math.min(fe,De),Se=Math.max(fe,De);if(le.toRegex&&k===1)return $(oe,Se,!1,le);let D=[],ze=0;for(;Oe?fe>=De:fe<=De;)D.push(J(fe,ze)),fe=Oe?fe-k:fe+k,ze++;return le.toRegex===!0?F(D,null,{wrap:!1,options:le}):D},"fillLetters"),ee=o((T,Y,k,le={})=>{if(Y==null&&W(T))return[T];if(!W(T)||!W(Y))return q(T,Y,le);if(typeof k=="function")return ee(T,Y,1,{transform:k});if(I(k))return ee(T,Y,0,k);let J={...le};return J.capture===!0&&(J.wrap=!0),k=k||J.step||1,N(k)?N(T)&&N(Y)?z(T,Y,k,J):Z(T,Y,Math.max(Math.abs(k),1),J):k!=null&&!I(k)?Ee(k,J):ee(T,Y,1,k)},"fill");it.exports=ee},3338:it=>{"use strict";/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */it.exports=function(l){return typeof l=="number"?l-l==0:typeof l=="string"&&l.trim()!==""?Number.isFinite?Number.isFinite(+l):isFinite(+l):!1}},5179:(it,l,C)=>{it=C.nmd(it);var R=200,v="__lodash_hash_undefined__",I=1,y=2,W=9007199254740991,N="[object Arguments]",m="[object Array]",w="[object AsyncFunction]",O="[object Boolean]",H="[object Date]",b="[object Error]",$="[object Function]",F="[object GeneratorFunction]",j="[object Map]",q="[object Number]",Ee="[object Null]",z="[object Object]",Z="[object Promise]",ee="[object Proxy]",T="[object RegExp]",Y="[object Set]",k="[object String]",le="[object Symbol]",J="[object Undefined]",fe="[object WeakMap]",De="[object ArrayBuffer]",Oe="[object DataView]",oe="[object Float32Array]",Se="[object Float64Array]",D="[object Int8Array]",ze="[object Int16Array]",we="[object Int32Array]",ve="[object Uint8Array]",G="[object Uint8ClampedArray]",se="[object Uint16Array]",Te="[object Uint32Array]",$e=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,Xe=/^(?:0|[1-9]\d*)$/,lt={};lt[oe]=lt[Se]=lt[D]=lt[ze]=lt[we]=lt[ve]=lt[G]=lt[se]=lt[Te]=!0,lt[N]=lt[m]=lt[De]=lt[O]=lt[Oe]=lt[H]=lt[b]=lt[$]=lt[j]=lt[q]=lt[z]=lt[T]=lt[Y]=lt[k]=lt[fe]=!1;var mt=typeof C.g=="object"&&C.g&&C.g.Object===Object&&C.g,P=typeof self=="object"&&self&&self.Object===Object&&self,U=mt||P||Function("return this")(),re=l&&!l.nodeType&&l,de=re&&!0&&it&&!it.nodeType&&it,Ue=de&&de.exports===re,Pe=Ue&&mt.process,ce=function(){try{return Pe&&Pe.binding&&Pe.binding("util")}catch(x){}}(),Ce=ce&&ce.isTypedArray;function Me(x,te){for(var Re=-1,at=x==null?0:x.length,Et=0,Mt=[];++Re<at;){var gn=x[Re];te(gn,Re,x)&&(Mt[Et++]=gn)}return Mt}o(Me,"arrayFilter");function Je(x,te){for(var Re=-1,at=te.length,Et=x.length;++Re<at;)x[Et+Re]=te[Re];return x}o(Je,"arrayPush");function me(x,te){for(var Re=-1,at=x==null?0:x.length;++Re<at;)if(te(x[Re],Re,x))return!0;return!1}o(me,"arraySome");function xe(x,te){for(var Re=-1,at=Array(x);++Re<x;)at[Re]=te(Re);return at}o(xe,"baseTimes");function Ze(x){return function(te){return x(te)}}o(Ze,"baseUnary");function tt(x,te){return x.has(te)}o(tt,"cacheHas");function _e(x,te){return x==null?void 0:x[te]}o(_e,"getValue");function B(x){var te=-1,Re=Array(x.size);return x.forEach(function(at,Et){Re[++te]=[Et,at]}),Re}o(B,"mapToArray");function K(x,te){return function(Re){return x(te(Re))}}o(K,"overArg");function Ye(x){var te=-1,Re=Array(x.size);return x.forEach(function(at){Re[++te]=at}),Re}o(Ye,"setToArray");var Jt=Array.prototype,Tn=Function.prototype,Pn=Object.prototype,Sn=U["__core-js_shared__"],sr=Tn.toString,or=Pn.hasOwnProperty,vr=function(){var x=/[^.]+$/.exec(Sn&&Sn.keys&&Sn.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),lr=Pn.toString,pr=RegExp("^"+sr.call(or).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ft=Ue?U.Buffer:void 0,Kt=U.Symbol,rn=U.Uint8Array,on=Pn.propertyIsEnumerable,Vt=Jt.splice,En=Kt?Kt.toStringTag:void 0,jn=Object.getOwnPropertySymbols,fr=ft?ft.isBuffer:void 0,Xn=K(Object.keys,Object),Dr=ni(U,"DataView"),$r=ni(U,"Map"),Cr=ni(U,"Promise"),Rr=ni(U,"Set"),Fr=ni(U,"WeakMap"),xn=ni(Object,"create"),Bn=Lt(Dr),_r=Lt($r),Kr=Lt(Cr),Tr=Lt(Rr),vi=Lt(Fr),br=Kt?Kt.prototype:void 0,M=br?br.valueOf:void 0;function ue(x){var te=-1,Re=x==null?0:x.length;for(this.clear();++te<Re;){var at=x[te];this.set(at[0],at[1])}}o(ue,"Hash");function Ae(){this.__data__=xn?xn(null):{},this.size=0}o(Ae,"hashClear");function Le(x){var te=this.has(x)&&delete this.__data__[x];return this.size-=te?1:0,te}o(Le,"hashDelete");function et(x){var te=this.__data__;if(xn){var Re=te[x];return Re===v?void 0:Re}return or.call(te,x)?te[x]:void 0}o(et,"hashGet");function je(x){var te=this.__data__;return xn?te[x]!==void 0:or.call(te,x)}o(je,"hashHas");function ct(x,te){var Re=this.__data__;return this.size+=this.has(x)?0:1,Re[x]=xn&&te===void 0?v:te,this}o(ct,"hashSet"),ue.prototype.clear=Ae,ue.prototype.delete=Le,ue.prototype.get=et,ue.prototype.has=je,ue.prototype.set=ct;function Dt(x){var te=-1,Re=x==null?0:x.length;for(this.clear();++te<Re;){var at=x[te];this.set(at[0],at[1])}}o(Dt,"ListCache");function Rt(){this.__data__=[],this.size=0}o(Rt,"listCacheClear");function _t(x){var te=this.__data__,Re=er(te,x);if(Re<0)return!1;var at=te.length-1;return Re==at?te.pop():Vt.call(te,Re,1),--this.size,!0}o(_t,"listCacheDelete");function Ct(x){var te=this.__data__,Re=er(te,x);return Re<0?void 0:te[Re][1]}o(Ct,"listCacheGet");function Ft(x){return er(this.__data__,x)>-1}o(Ft,"listCacheHas");function Bt(x,te){var Re=this.__data__,at=er(Re,x);return at<0?(++this.size,Re.push([x,te])):Re[at][1]=te,this}o(Bt,"listCacheSet"),Dt.prototype.clear=Rt,Dt.prototype.delete=_t,Dt.prototype.get=Ct,Dt.prototype.has=Ft,Dt.prototype.set=Bt;function Nt(x){var te=-1,Re=x==null?0:x.length;for(this.clear();++te<Re;){var at=x[te];this.set(at[0],at[1])}}o(Nt,"MapCache");function kt(){this.size=0,this.__data__={hash:new ue,map:new($r||Dt),string:new ue}}o(kt,"mapCacheClear");function Jn(x){var te=ti(this,x).delete(x);return this.size-=te?1:0,te}o(Jn,"mapCacheDelete");function An(x){return ti(this,x).get(x)}o(An,"mapCacheGet");function mr(x){return ti(this,x).has(x)}o(mr,"mapCacheHas");function qn(x,te){var Re=ti(this,x),at=Re.size;return Re.set(x,te),this.size+=Re.size==at?0:1,this}o(qn,"mapCacheSet"),Nt.prototype.clear=kt,Nt.prototype.delete=Jn,Nt.prototype.get=An,Nt.prototype.has=mr,Nt.prototype.set=qn;function cr(x){var te=-1,Re=x==null?0:x.length;for(this.__data__=new Nt;++te<Re;)this.add(x[te])}o(cr,"SetCache");function Gr(x){return this.__data__.set(x,v),this}o(Gr,"setCacheAdd");function zr(x){return this.__data__.has(x)}o(zr,"setCacheHas"),cr.prototype.add=cr.prototype.push=Gr,cr.prototype.has=zr;function Gn(x){var te=this.__data__=new Dt(x);this.size=te.size}o(Gn,"Stack");function pi(){this.__data__=new Dt,this.size=0}o(pi,"stackClear");function zt(x){var te=this.__data__,Re=te.delete(x);return this.size=te.size,Re}o(zt,"stackDelete");function Zn(x){return this.__data__.get(x)}o(Zn,"stackGet");function Dn(x){return this.__data__.has(x)}o(Dn,"stackHas");function Cn(x,te){var Re=this.__data__;if(Re instanceof Dt){var at=Re.__data__;if(!$r||at.length<R-1)return at.push([x,te]),this.size=++Re.size,this;Re=this.__data__=new Nt(at)}return Re.set(x,te),this.size=Re.size,this}o(Cn,"stackSet"),Gn.prototype.clear=pi,Gn.prototype.delete=zt,Gn.prototype.get=Zn,Gn.prototype.has=Dn,Gn.prototype.set=Cn;function fn(x,te){var Re=Qt(x),at=!Re&&wt(x),Et=!Re&&!at&&pn(x),Mt=!Re&&!at&&!Et&&jt(x),gn=Re||at||Et||Mt,vn=gn?xe(x.length,String):[],en=vn.length;for(var tn in x)(te||or.call(x,tn))&&!(gn&&(tn=="length"||Et&&(tn=="offset"||tn=="parent")||Mt&&(tn=="buffer"||tn=="byteLength"||tn=="byteOffset")||sa(tn,en)))&&vn.push(tn);return vn}o(fn,"arrayLikeKeys");function er(x,te){for(var Re=x.length;Re--;)if(Gt(x[Re][0],te))return Re;return-1}o(er,"assocIndexOf");function Qn(x,te,Re){var at=te(x);return Qt(x)?at:Je(at,Re(x))}o(Qn,"baseGetAllKeys");function Nr(x){return x==null?x===void 0?J:Ee:En&&En in Object(x)?ea(x):rt(x)}o(Nr,"baseGetTag");function mi(x){return Hn(x)&&Nr(x)==N}o(mi,"baseIsArguments");function yi(x,te,Re,at,Et){return x===te?!0:x==null||te==null||!Hn(x)&&!Hn(te)?x!==x&&te!==te:xi(x,te,Re,at,yi,Et)}o(yi,"baseIsEqual");function xi(x,te,Re,at,Et,Mt){var gn=Qt(x),vn=Qt(te),en=gn?m:oi(x),tn=vn?m:oi(te);en=en==N?z:en,tn=tn==N?z:tn;var mn=en==z,$t=tn==z,St=en==tn;if(St&&pn(x)){if(!pn(te))return!1;gn=!0,mn=!1}if(St&&!mn)return Mt||(Mt=new Gn),gn||jt(x)?oa(x,te,Re,at,Et,Mt):Ji(x,te,en,Re,at,Et,Mt);if(!(Re&I)){var bn=mn&&or.call(x,"__wrapped__"),Fn=$t&&or.call(te,"__wrapped__");if(bn||Fn){var Nn=bn?x.value():x,kn=Fn?te.value():te;return Mt||(Mt=new Gn),Et(Nn,kn,Re,at,Mt)}}return St?(Mt||(Mt=new Gn),ki(x,te,Re,at,Et,Mt)):!1}o(xi,"baseIsEqualDeep");function wi(x){if(!nr(x)||nt(x))return!1;var te=tr(x)?pr:ae;return te.test(Lt(x))}o(wi,"baseIsNative");function Or(x){return Hn(x)&&$n(x.length)&&!!lt[Nr(x)]}o(Or,"baseIsTypedArray");function Si(x){if(!yt(x))return Xn(x);var te=[];for(var Re in Object(x))or.call(x,Re)&&Re!="constructor"&&te.push(Re);return te}o(Si,"baseKeys");function oa(x,te,Re,at,Et,Mt){var gn=Re&I,vn=x.length,en=te.length;if(vn!=en&&!(gn&&en>vn))return!1;var tn=Mt.get(x);if(tn&&Mt.get(te))return tn==te;var mn=-1,$t=!0,St=Re&y?new cr:void 0;for(Mt.set(x,te),Mt.set(te,x);++mn<vn;){var bn=x[mn],Fn=te[mn];if(at)var Nn=gn?at(Fn,bn,mn,te,x,Mt):at(bn,Fn,mn,x,te,Mt);if(Nn!==void 0){if(Nn)continue;$t=!1;break}if(St){if(!me(te,function(kn,Yt){if(!tt(St,Yt)&&(bn===kn||Et(bn,kn,Re,at,Mt)))return St.push(Yt)})){$t=!1;break}}else if(!(bn===Fn||Et(bn,Fn,Re,at,Mt))){$t=!1;break}}return Mt.delete(x),Mt.delete(te),$t}o(oa,"equalArrays");function Ji(x,te,Re,at,Et,Mt,gn){switch(Re){case Oe:if(x.byteLength!=te.byteLength||x.byteOffset!=te.byteOffset)return!1;x=x.buffer,te=te.buffer;case De:return!(x.byteLength!=te.byteLength||!Mt(new rn(x),new rn(te)));case O:case H:case q:return Gt(+x,+te);case b:return x.name==te.name&&x.message==te.message;case T:case k:return x==te+"";case j:var vn=B;case Y:var en=at&I;if(vn||(vn=Ye),x.size!=te.size&&!en)return!1;var tn=gn.get(x);if(tn)return tn==te;at|=y,gn.set(x,te);var mn=oa(vn(x),vn(te),at,Et,Mt,gn);return gn.delete(x),mn;case le:if(M)return M.call(x)==M.call(te)}return!1}o(Ji,"equalByTag");function ki(x,te,Re,at,Et,Mt){var gn=Re&I,vn=ei(x),en=vn.length,tn=ei(te),mn=tn.length;if(en!=mn&&!gn)return!1;for(var $t=en;$t--;){var St=vn[$t];if(!(gn?St in te:or.call(te,St)))return!1}var bn=Mt.get(x);if(bn&&Mt.get(te))return bn==te;var Fn=!0;Mt.set(x,te),Mt.set(te,x);for(var Nn=gn;++$t<en;){St=vn[$t];var kn=x[St],Yt=te[St];if(at)var Br=gn?at(Yt,kn,St,te,x,Mt):at(kn,Yt,St,x,te,Mt);if(!(Br===void 0?kn===Yt||Et(kn,Yt,Re,at,Mt):Br)){Fn=!1;break}Nn||(Nn=St=="constructor")}if(Fn&&!Nn){var Er=x.constructor,Un=te.constructor;Er!=Un&&"constructor"in x&&"constructor"in te&&!(typeof Er=="function"&&Er instanceof Er&&typeof Un=="function"&&Un instanceof Un)&&(Fn=!1)}return Mt.delete(x),Mt.delete(te),Fn}o(ki,"equalObjects");function ei(x){return Qn(x,sn,Fi)}o(ei,"getAllKeys");function ti(x,te){var Re=x.__data__;return ke(te)?Re[typeof te=="string"?"string":"hash"]:Re.map}o(ti,"getMapData");function ni(x,te){var Re=_e(x,te);return wi(Re)?Re:void 0}o(ni,"getNative");function ea(x){var te=or.call(x,En),Re=x[En];try{x[En]=void 0;var at=!0}catch(Mt){}var Et=lr.call(x);return at&&(te?x[En]=Re:delete x[En]),Et}o(ea,"getRawTag");var Fi=jn?function(x){return x==null?[]:(x=Object(x),Me(jn(x),function(te){return on.call(x,te)}))}:yn,oi=Nr;(Dr&&oi(new Dr(new ArrayBuffer(1)))!=Oe||$r&&oi(new $r)!=j||Cr&&oi(Cr.resolve())!=Z||Rr&&oi(new Rr)!=Y||Fr&&oi(new Fr)!=fe)&&(oi=o(function(x){var te=Nr(x),Re=te==z?x.constructor:void 0,at=Re?Lt(Re):"";if(at)switch(at){case Bn:return Oe;case _r:return j;case Kr:return Z;case Tr:return Y;case vi:return fe}return te},"getTag"));function sa(x,te){return te=te==null?W:te,!!te&&(typeof x=="number"||Xe.test(x))&&x>-1&&x%1==0&&x<te}o(sa,"isIndex");function ke(x){var te=typeof x;return te=="string"||te=="number"||te=="symbol"||te=="boolean"?x!=="__proto__":x===null}o(ke,"isKeyable");function nt(x){return!!vr&&vr in x}o(nt,"isMasked");function yt(x){var te=x&&x.constructor,Re=typeof te=="function"&&te.prototype||Pn;return x===Re}o(yt,"isPrototype");function rt(x){return lr.call(x)}o(rt,"objectToString");function Lt(x){if(x!=null){try{return sr.call(x)}catch(te){}try{return x+""}catch(te){}}return""}o(Lt,"toSource");function Gt(x,te){return x===te||x!==x&&te!==te}o(Gt,"eq");var wt=mi(function(){return arguments}())?mi:function(x){return Hn(x)&&or.call(x,"callee")&&!on.call(x,"callee")},Qt=Array.isArray;function Ut(x){return x!=null&&$n(x.length)&&!tr(x)}o(Ut,"isArrayLike");var pn=fr||Xt;function _n(x,te){return yi(x,te)}o(_n,"isEqual");function tr(x){if(!nr(x))return!1;var te=Nr(x);return te==$||te==F||te==w||te==ee}o(tr,"isFunction");function $n(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=W}o($n,"isLength");function nr(x){var te=typeof x;return x!=null&&(te=="object"||te=="function")}o(nr,"isObject");function Hn(x){return x!=null&&typeof x=="object"}o(Hn,"isObjectLike");var jt=Ce?Ze(Ce):Or;function sn(x){return Ut(x)?fn(x):Si(x)}o(sn,"keys");function yn(){return[]}o(yn,"stubArray");function Xt(){return!1}o(Xt,"stubFalse"),it.exports=_n},919:(it,l,C)=>{"use strict";const R=C(6391),v=C(6232),I=C(6796),y=C(292),W=o(m=>m===""||m==="./","isEmptyString"),N=o((m,w,O)=>{w=[].concat(w),m=[].concat(m);let H=new Set,b=new Set,$=new Set,F=0,j=o(z=>{$.add(z.output),O&&O.onResult&&O.onResult(z)},"onResult");for(let z=0;z<w.length;z++){let Z=I(String(w[z]),{...O,onResult:j},!0),ee=Z.state.negated||Z.state.negatedExtglob;ee&&F++;for(let T of m){let Y=Z(T,!0);!(ee?!Y.isMatch:Y.isMatch)||(ee?H.add(Y.output):(H.delete(Y.output),b.add(Y.output)))}}let Ee=(F===w.length?[...$]:[...b]).filter(z=>!H.has(z));if(O&&Ee.length===0){if(O.failglob===!0)throw new Error(`No matches found for "${w.join(", ")}"`);if(O.nonull===!0||O.nullglob===!0)return O.unescape?w.map(z=>z.replace(/\\/g,"")):w}return Ee},"micromatch");N.match=N,N.matcher=(m,w)=>I(m,w),N.isMatch=(m,w,O)=>I(w,O)(m),N.any=N.isMatch,N.not=(m,w,O={})=>{w=[].concat(w).map(String);let H=new Set,b=[],$=o(j=>{O.onResult&&O.onResult(j),b.push(j.output)},"onResult"),F=new Set(N(m,w,{...O,onResult:$}));for(let j of b)F.has(j)||H.add(j);return[...H]},N.contains=(m,w,O)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${R.inspect(m)}"`);if(Array.isArray(w))return w.some(H=>N.contains(m,H,O));if(typeof w=="string"){if(W(m)||W(w))return!1;if(m.includes(w)||m.startsWith("./")&&m.slice(2).includes(w))return!0}return N.isMatch(m,w,{...O,contains:!0})},N.matchKeys=(m,w,O)=>{if(!y.isObject(m))throw new TypeError("Expected the first argument to be an object");let H=N(Object.keys(m),w,O),b={};for(let $ of H)b[$]=m[$];return b},N.some=(m,w,O)=>{let H=[].concat(m);for(let b of[].concat(w)){let $=I(String(b),O);if(H.some(F=>$(F)))return!0}return!1},N.every=(m,w,O)=>{let H=[].concat(m);for(let b of[].concat(w)){let $=I(String(b),O);if(!H.every(F=>$(F)))return!1}return!0},N.all=(m,w,O)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${R.inspect(m)}"`);return[].concat(w).every(H=>I(H,O)(m))},N.capture=(m,w,O)=>{let H=y.isWindows(O),$=I.makeRe(String(m),{...O,capture:!0}).exec(H?y.toPosixSlashes(w):w);if($)return $.slice(1).map(F=>F===void 0?"":F)},N.makeRe=(...m)=>I.makeRe(...m),N.scan=(...m)=>I.scan(...m),N.parse=(m,w)=>{let O=[];for(let H of[].concat(m||[]))for(let b of v(String(H),w))O.push(I.parse(b,w));return O},N.braces=(m,w)=>{if(typeof m!="string")throw new TypeError("Expected a string");return w&&w.nobrace===!0||!/\{.*\}/.test(m)?[m]:v(m,w)},N.braceExpand=(m,w)=>{if(typeof m!="string")throw new TypeError("Expected a string");return N.braces(m,{...w,expand:!0})},it.exports=N},6796:(it,l,C)=>{"use strict";it.exports=C(5761)},3889:(it,l,C)=>{"use strict";const R=C(6470),v="\\\\/",I=`[^${v}]`,y="\\.",W="\\+",N="\\?",m="\\/",w="(?=.)",O="[^/]",H=`(?:${m}|$)`,b=`(?:^|${m})`,$=`${y}{1,2}${H}`,F=`(?!${y})`,j=`(?!${b}${$})`,q=`(?!${y}{0,1}${H})`,Ee=`(?!${$})`,z=`[^.${m}]`,Z=`${O}*?`,ee={DOT_LITERAL:y,PLUS_LITERAL:W,QMARK_LITERAL:N,SLASH_LITERAL:m,ONE_CHAR:w,QMARK:O,END_ANCHOR:H,DOTS_SLASH:$,NO_DOT:F,NO_DOTS:j,NO_DOT_SLASH:q,NO_DOTS_SLASH:Ee,QMARK_NO_DOT:z,STAR:Z,START_ANCHOR:b},T={...ee,SLASH_LITERAL:`[${v}]`,QMARK:I,STAR:`${I}*?`,DOTS_SLASH:`${y}{1,2}(?:[${v}]|$)`,NO_DOT:`(?!${y})`,NO_DOTS:`(?!(?:^|[${v}])${y}{1,2}(?:[${v}]|$))`,NO_DOT_SLASH:`(?!${y}{0,1}(?:[${v}]|$))`,NO_DOTS_SLASH:`(?!${y}{1,2}(?:[${v}]|$))`,QMARK_NO_DOT:`[^.${v}]`,START_ANCHOR:`(?:^|[${v}])`,END_ANCHOR:`(?:[${v}]|$)`},Y={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};it.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Y,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:R.sep,extglobChars(k){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${k.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(k){return k===!0?T:ee}}},3969:(it,l,C)=>{"use strict";const R=C(3889),v=C(292),{MAX_LENGTH:I,POSIX_REGEX_SOURCE:y,REGEX_NON_SPECIAL_CHARS:W,REGEX_SPECIAL_CHARS_BACKREF:N,REPLACEMENTS:m}=R,w=o((b,$)=>{if(typeof $.expandRange=="function")return $.expandRange(...b,$);b.sort();const F=`[${b.join("-")}]`;try{new RegExp(F)}catch(j){return b.map(q=>v.escapeRegex(q)).join("..")}return F},"expandRange"),O=o((b,$)=>`Missing ${b}: "${$}" - use "\\\\${$}" to match literal characters`,"syntaxError"),H=o((b,$)=>{if(typeof b!="string")throw new TypeError("Expected a string");b=m[b]||b;const F={...$},j=typeof F.maxLength=="number"?Math.min(I,F.maxLength):I;let q=b.length;if(q>j)throw new SyntaxError(`Input length: ${q}, exceeds maximum allowed length: ${j}`);const Ee={type:"bos",value:"",output:F.prepend||""},z=[Ee],Z=F.capture?"":"?:",ee=v.isWindows($),T=R.globChars(ee),Y=R.extglobChars(T),{DOT_LITERAL:k,PLUS_LITERAL:le,SLASH_LITERAL:J,ONE_CHAR:fe,DOTS_SLASH:De,NO_DOT:Oe,NO_DOT_SLASH:oe,NO_DOTS_SLASH:Se,QMARK:D,QMARK_NO_DOT:ze,STAR:we,START_ANCHOR:ve}=T,G=o(_e=>`(${Z}(?:(?!${ve}${_e.dot?De:k}).)*?)`,"globstar"),se=F.dot?"":Oe,Te=F.dot?D:ze;let $e=F.bash===!0?G(F):we;F.capture&&($e=`(${$e})`),typeof F.noext=="boolean"&&(F.noextglob=F.noext);const ae={input:b,index:-1,start:0,dot:F.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:z};b=v.removePrefix(b,ae),q=b.length;const Xe=[],lt=[],mt=[];let P=Ee,U;const re=o(()=>ae.index===q-1,"eos"),de=ae.peek=(_e=1)=>b[ae.index+_e],Ue=ae.advance=()=>b[++ae.index]||"",Pe=o(()=>b.slice(ae.index+1),"remaining"),ce=o((_e="",B=0)=>{ae.consumed+=_e,ae.index+=B},"consume"),Ce=o(_e=>{ae.output+=_e.output!=null?_e.output:_e.value,ce(_e.value)},"append"),Me=o(()=>{let _e=1;for(;de()==="!"&&(de(2)!=="("||de(3)==="?");)Ue(),ae.start++,_e++;return _e%2==0?!1:(ae.negated=!0,ae.start++,!0)},"negate"),Je=o(_e=>{ae[_e]++,mt.push(_e)},"increment"),me=o(_e=>{ae[_e]--,mt.pop()},"decrement"),xe=o(_e=>{if(P.type==="globstar"){const B=ae.braces>0&&(_e.type==="comma"||_e.type==="brace"),K=_e.extglob===!0||Xe.length&&(_e.type==="pipe"||_e.type==="paren");_e.type!=="slash"&&_e.type!=="paren"&&!B&&!K&&(ae.output=ae.output.slice(0,-P.output.length),P.type="star",P.value="*",P.output=$e,ae.output+=P.output)}if(Xe.length&&_e.type!=="paren"&&(Xe[Xe.length-1].inner+=_e.value),(_e.value||_e.output)&&Ce(_e),P&&P.type==="text"&&_e.type==="text"){P.value+=_e.value,P.output=(P.output||"")+_e.value;return}_e.prev=P,z.push(_e),P=_e},"push"),Ze=o((_e,B)=>{const K={...Y[B],conditions:1,inner:""};K.prev=P,K.parens=ae.parens,K.output=ae.output;const Ye=(F.capture?"(":"")+K.open;Je("parens"),xe({type:_e,value:B,output:ae.output?"":fe}),xe({type:"paren",extglob:!0,value:Ue(),output:Ye}),Xe.push(K)},"extglobOpen"),tt=o(_e=>{let B=_e.close+(F.capture?")":""),K;if(_e.type==="negate"){let Ye=$e;if(_e.inner&&_e.inner.length>1&&_e.inner.includes("/")&&(Ye=G(F)),(Ye!==$e||re()||/^\)+$/.test(Pe()))&&(B=_e.close=`)$))${Ye}`),_e.inner.includes("*")&&(K=Pe())&&/^\.[^\\/.]+$/.test(K)){const Jt=H(K,{...$,fastpaths:!1}).output;B=_e.close=`)${Jt})${Ye})`}_e.prev.type==="bos"&&(ae.negatedExtglob=!0)}xe({type:"paren",extglob:!0,value:U,output:B}),me("parens")},"extglobClose");if(F.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(b)){let _e=!1,B=b.replace(N,(K,Ye,Jt,Tn,Pn,Sn)=>Tn==="\\"?(_e=!0,K):Tn==="?"?Ye?Ye+Tn+(Pn?D.repeat(Pn.length):""):Sn===0?Te+(Pn?D.repeat(Pn.length):""):D.repeat(Jt.length):Tn==="."?k.repeat(Jt.length):Tn==="*"?Ye?Ye+Tn+(Pn?$e:""):$e:Ye?K:`\\${K}`);return _e===!0&&(F.unescape===!0?B=B.replace(/\\/g,""):B=B.replace(/\\+/g,K=>K.length%2==0?"\\\\":K?"\\":"")),B===b&&F.contains===!0?(ae.output=b,ae):(ae.output=v.wrapOutput(B,ae,$),ae)}for(;!re();){if(U=Ue(),U==="\0")continue;if(U==="\\"){const K=de();if(K==="/"&&F.bash!==!0||K==="."||K===";")continue;if(!K){U+="\\",xe({type:"text",value:U});continue}const Ye=/^\\+/.exec(Pe());let Jt=0;if(Ye&&Ye[0].length>2&&(Jt=Ye[0].length,ae.index+=Jt,Jt%2!=0&&(U+="\\")),F.unescape===!0?U=Ue():U+=Ue(),ae.brackets===0){xe({type:"text",value:U});continue}}if(ae.brackets>0&&(U!=="]"||P.value==="["||P.value==="[^")){if(F.posix!==!1&&U===":"){const K=P.value.slice(1);if(K.includes("[")&&(P.posix=!0,K.includes(":"))){const Ye=P.value.lastIndexOf("["),Jt=P.value.slice(0,Ye),Tn=P.value.slice(Ye+2),Pn=y[Tn];if(Pn){P.value=Jt+Pn,ae.backtrack=!0,Ue(),!Ee.output&&z.indexOf(P)===1&&(Ee.output=fe);continue}}}(U==="["&&de()!==":"||U==="-"&&de()==="]")&&(U=`\\${U}`),U==="]"&&(P.value==="["||P.value==="[^")&&(U=`\\${U}`),F.posix===!0&&U==="!"&&P.value==="["&&(U="^"),P.value+=U,Ce({value:U});continue}if(ae.quotes===1&&U!=='"'){U=v.escapeRegex(U),P.value+=U,Ce({value:U});continue}if(U==='"'){ae.quotes=ae.quotes===1?0:1,F.keepQuotes===!0&&xe({type:"text",value:U});continue}if(U==="("){Je("parens"),xe({type:"paren",value:U});continue}if(U===")"){if(ae.parens===0&&F.strictBrackets===!0)throw new SyntaxError(O("opening","("));const K=Xe[Xe.length-1];if(K&&ae.parens===K.parens+1){tt(Xe.pop());continue}xe({type:"paren",value:U,output:ae.parens?")":"\\)"}),me("parens");continue}if(U==="["){if(F.nobracket===!0||!Pe().includes("]")){if(F.nobracket!==!0&&F.strictBrackets===!0)throw new SyntaxError(O("closing","]"));U=`\\${U}`}else Je("brackets");xe({type:"bracket",value:U});continue}if(U==="]"){if(F.nobracket===!0||P&&P.type==="bracket"&&P.value.length===1){xe({type:"text",value:U,output:`\\${U}`});continue}if(ae.brackets===0){if(F.strictBrackets===!0)throw new SyntaxError(O("opening","["));xe({type:"text",value:U,output:`\\${U}`});continue}me("brackets");const K=P.value.slice(1);if(P.posix!==!0&&K[0]==="^"&&!K.includes("/")&&(U=`/${U}`),P.value+=U,Ce({value:U}),F.literalBrackets===!1||v.hasRegexChars(K))continue;const Ye=v.escapeRegex(P.value);if(ae.output=ae.output.slice(0,-P.value.length),F.literalBrackets===!0){ae.output+=Ye,P.value=Ye;continue}P.value=`(${Z}${Ye}|${P.value})`,ae.output+=P.value;continue}if(U==="{"&&F.nobrace!==!0){Je("braces");const K={type:"brace",value:U,output:"(",outputIndex:ae.output.length,tokensIndex:ae.tokens.length};lt.push(K),xe(K);continue}if(U==="}"){const K=lt[lt.length-1];if(F.nobrace===!0||!K){xe({type:"text",value:U,output:U});continue}let Ye=")";if(K.dots===!0){const Jt=z.slice(),Tn=[];for(let Pn=Jt.length-1;Pn>=0&&(z.pop(),Jt[Pn].type!=="brace");Pn--)Jt[Pn].type!=="dots"&&Tn.unshift(Jt[Pn].value);Ye=w(Tn,F),ae.backtrack=!0}if(K.comma!==!0&&K.dots!==!0){const Jt=ae.output.slice(0,K.outputIndex),Tn=ae.tokens.slice(K.tokensIndex);K.value=K.output="\\{",U=Ye="\\}",ae.output=Jt;for(const Pn of Tn)ae.output+=Pn.output||Pn.value}xe({type:"brace",value:U,output:Ye}),me("braces"),lt.pop();continue}if(U==="|"){Xe.length>0&&Xe[Xe.length-1].conditions++,xe({type:"text",value:U});continue}if(U===","){let K=U;const Ye=lt[lt.length-1];Ye&&mt[mt.length-1]==="braces"&&(Ye.comma=!0,K="|"),xe({type:"comma",value:U,output:K});continue}if(U==="/"){if(P.type==="dot"&&ae.index===ae.start+1){ae.start=ae.index+1,ae.consumed="",ae.output="",z.pop(),P=Ee;continue}xe({type:"slash",value:U,output:J});continue}if(U==="."){if(ae.braces>0&&P.type==="dot"){P.value==="."&&(P.output=k);const K=lt[lt.length-1];P.type="dots",P.output+=U,P.value+=U,K.dots=!0;continue}if(ae.braces+ae.parens===0&&P.type!=="bos"&&P.type!=="slash"){xe({type:"text",value:U,output:k});continue}xe({type:"dot",value:U,output:k});continue}if(U==="?"){if(!(P&&P.value==="(")&&F.noextglob!==!0&&de()==="("&&de(2)!=="?"){Ze("qmark",U);continue}if(P&&P.type==="paren"){const Ye=de();let Jt=U;if(Ye==="<"&&!v.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(P.value==="("&&!/[!=<:]/.test(Ye)||Ye==="<"&&!/<([!=]|\w+>)/.test(Pe()))&&(Jt=`\\${U}`),xe({type:"text",value:U,output:Jt});continue}if(F.dot!==!0&&(P.type==="slash"||P.type==="bos")){xe({type:"qmark",value:U,output:ze});continue}xe({type:"qmark",value:U,output:D});continue}if(U==="!"){if(F.noextglob!==!0&&de()==="("&&(de(2)!=="?"||!/[!=<:]/.test(de(3)))){Ze("negate",U);continue}if(F.nonegate!==!0&&ae.index===0){Me();continue}}if(U==="+"){if(F.noextglob!==!0&&de()==="("&&de(2)!=="?"){Ze("plus",U);continue}if(P&&P.value==="("||F.regex===!1){xe({type:"plus",value:U,output:le});continue}if(P&&(P.type==="bracket"||P.type==="paren"||P.type==="brace")||ae.parens>0){xe({type:"plus",value:U});continue}xe({type:"plus",value:le});continue}if(U==="@"){if(F.noextglob!==!0&&de()==="("&&de(2)!=="?"){xe({type:"at",extglob:!0,value:U,output:""});continue}xe({type:"text",value:U});continue}if(U!=="*"){(U==="$"||U==="^")&&(U=`\\${U}`);const K=W.exec(Pe());K&&(U+=K[0],ae.index+=K[0].length),xe({type:"text",value:U});continue}if(P&&(P.type==="globstar"||P.star===!0)){P.type="star",P.star=!0,P.value+=U,P.output=$e,ae.backtrack=!0,ae.globstar=!0,ce(U);continue}let _e=Pe();if(F.noextglob!==!0&&/^\([^?]/.test(_e)){Ze("star",U);continue}if(P.type==="star"){if(F.noglobstar===!0){ce(U);continue}const K=P.prev,Ye=K.prev,Jt=K.type==="slash"||K.type==="bos",Tn=Ye&&(Ye.type==="star"||Ye.type==="globstar");if(F.bash===!0&&(!Jt||_e[0]&&_e[0]!=="/")){xe({type:"star",value:U,output:""});continue}const Pn=ae.braces>0&&(K.type==="comma"||K.type==="brace"),Sn=Xe.length&&(K.type==="pipe"||K.type==="paren");if(!Jt&&K.type!=="paren"&&!Pn&&!Sn){xe({type:"star",value:U,output:""});continue}for(;_e.slice(0,3)==="/**";){const sr=b[ae.index+4];if(sr&&sr!=="/")break;_e=_e.slice(3),ce("/**",3)}if(K.type==="bos"&&re()){P.type="globstar",P.value+=U,P.output=G(F),ae.output=P.output,ae.globstar=!0,ce(U);continue}if(K.type==="slash"&&K.prev.type!=="bos"&&!Tn&&re()){ae.output=ae.output.slice(0,-(K.output+P.output).length),K.output=`(?:${K.output}`,P.type="globstar",P.output=G(F)+(F.strictSlashes?")":"|$)"),P.value+=U,ae.globstar=!0,ae.output+=K.output+P.output,ce(U);continue}if(K.type==="slash"&&K.prev.type!=="bos"&&_e[0]==="/"){const sr=_e[1]!==void 0?"|$":"";ae.output=ae.output.slice(0,-(K.output+P.output).length),K.output=`(?:${K.output}`,P.type="globstar",P.output=`${G(F)}${J}|${J}${sr})`,P.value+=U,ae.output+=K.output+P.output,ae.globstar=!0,ce(U+Ue()),xe({type:"slash",value:"/",output:""});continue}if(K.type==="bos"&&_e[0]==="/"){P.type="globstar",P.value+=U,P.output=`(?:^|${J}|${G(F)}${J})`,ae.output=P.output,ae.globstar=!0,ce(U+Ue()),xe({type:"slash",value:"/",output:""});continue}ae.output=ae.output.slice(0,-P.output.length),P.type="globstar",P.output=G(F),P.value+=U,ae.output+=P.output,ae.globstar=!0,ce(U);continue}const B={type:"star",value:U,output:$e};if(F.bash===!0){B.output=".*?",(P.type==="bos"||P.type==="slash")&&(B.output=se+B.output),xe(B);continue}if(P&&(P.type==="bracket"||P.type==="paren")&&F.regex===!0){B.output=U,xe(B);continue}(ae.index===ae.start||P.type==="slash"||P.type==="dot")&&(P.type==="dot"?(ae.output+=oe,P.output+=oe):F.dot===!0?(ae.output+=Se,P.output+=Se):(ae.output+=se,P.output+=se),de()!=="*"&&(ae.output+=fe,P.output+=fe)),xe(B)}for(;ae.brackets>0;){if(F.strictBrackets===!0)throw new SyntaxError(O("closing","]"));ae.output=v.escapeLast(ae.output,"["),me("brackets")}for(;ae.parens>0;){if(F.strictBrackets===!0)throw new SyntaxError(O("closing",")"));ae.output=v.escapeLast(ae.output,"("),me("parens")}for(;ae.braces>0;){if(F.strictBrackets===!0)throw new SyntaxError(O("closing","}"));ae.output=v.escapeLast(ae.output,"{"),me("braces")}if(F.strictSlashes!==!0&&(P.type==="star"||P.type==="bracket")&&xe({type:"maybe_slash",value:"",output:`${J}?`}),ae.backtrack===!0){ae.output="";for(const _e of ae.tokens)ae.output+=_e.output!=null?_e.output:_e.value,_e.suffix&&(ae.output+=_e.suffix)}return ae},"parse");H.fastpaths=(b,$)=>{const F={...$},j=typeof F.maxLength=="number"?Math.min(I,F.maxLength):I,q=b.length;if(q>j)throw new SyntaxError(`Input length: ${q}, exceeds maximum allowed length: ${j}`);b=m[b]||b;const Ee=v.isWindows($),{DOT_LITERAL:z,SLASH_LITERAL:Z,ONE_CHAR:ee,DOTS_SLASH:T,NO_DOT:Y,NO_DOTS:k,NO_DOTS_SLASH:le,STAR:J,START_ANCHOR:fe}=R.globChars(Ee),De=F.dot?k:Y,Oe=F.dot?le:Y,oe=F.capture?"":"?:",Se={negated:!1,prefix:""};let D=F.bash===!0?".*?":J;F.capture&&(D=`(${D})`);const ze=o(se=>se.noglobstar===!0?D:`(${oe}(?:(?!${fe}${se.dot?T:z}).)*?)`,"globstar"),we=o(se=>{switch(se){case"*":return`${De}${ee}${D}`;case".*":return`${z}${ee}${D}`;case"*.*":return`${De}${D}${z}${ee}${D}`;case"*/*":return`${De}${D}${Z}${ee}${Oe}${D}`;case"**":return De+ze(F);case"**/*":return`(?:${De}${ze(F)}${Z})?${Oe}${ee}${D}`;case"**/*.*":return`(?:${De}${ze(F)}${Z})?${Oe}${D}${z}${ee}${D}`;case"**/.*":return`(?:${De}${ze(F)}${Z})?${z}${ee}${D}`;default:{const Te=/^(.*?)\.(\w+)$/.exec(se);if(!Te)return;const $e=we(Te[1]);return $e?$e+z+Te[2]:void 0}}},"create"),ve=v.removePrefix(b,Se);let G=we(ve);return G&&F.strictSlashes!==!0&&(G+=`${Z}?`),G},it.exports=H},5761:(it,l,C)=>{"use strict";const R=C(6470),v=C(9826),I=C(3969),y=C(292),W=C(3889),N=o(w=>w&&typeof w=="object"&&!Array.isArray(w),"isObject"),m=o((w,O,H=!1)=>{if(Array.isArray(w)){const Z=w.map(T=>m(T,O,H));return o(T=>{for(const Y of Z){const k=Y(T);if(k)return k}return!1},"arrayMatcher")}const b=N(w)&&w.tokens&&w.input;if(w===""||typeof w!="string"&&!b)throw new TypeError("Expected pattern to be a non-empty string");const $=O||{},F=y.isWindows(O),j=b?m.compileRe(w,O):m.makeRe(w,O,!1,!0),q=j.state;delete j.state;let Ee=o(()=>!1,"isIgnored");if($.ignore){const Z={...O,ignore:null,onMatch:null,onResult:null};Ee=m($.ignore,Z,H)}const z=o((Z,ee=!1)=>{const{isMatch:T,match:Y,output:k}=m.test(Z,j,O,{glob:w,posix:F}),le={glob:w,state:q,regex:j,posix:F,input:Z,output:k,match:Y,isMatch:T};return typeof $.onResult=="function"&&$.onResult(le),T===!1?(le.isMatch=!1,ee?le:!1):Ee(Z)?(typeof $.onIgnore=="function"&&$.onIgnore(le),le.isMatch=!1,ee?le:!1):(typeof $.onMatch=="function"&&$.onMatch(le),ee?le:!0)},"matcher");return H&&(z.state=q),z},"picomatch");m.test=(w,O,H,{glob:b,posix:$}={})=>{if(typeof w!="string")throw new TypeError("Expected input to be a string");if(w==="")return{isMatch:!1,output:""};const F=H||{},j=F.format||($?y.toPosixSlashes:null);let q=w===b,Ee=q&&j?j(w):w;return q===!1&&(Ee=j?j(w):w,q=Ee===b),(q===!1||F.capture===!0)&&(F.matchBase===!0||F.basename===!0?q=m.matchBase(w,O,H,$):q=O.exec(Ee)),{isMatch:Boolean(q),match:q,output:Ee}},m.matchBase=(w,O,H,b=y.isWindows(H))=>(O instanceof RegExp?O:m.makeRe(O,H)).test(R.basename(w)),m.isMatch=(w,O,H)=>m(O,H)(w),m.parse=(w,O)=>Array.isArray(w)?w.map(H=>m.parse(H,O)):I(w,{...O,fastpaths:!1}),m.scan=(w,O)=>v(w,O),m.compileRe=(w,O,H=!1,b=!1)=>{if(H===!0)return w.output;const $=O||{},F=$.contains?"":"^",j=$.contains?"":"$";let q=`${F}(?:${w.output})${j}`;w&&w.negated===!0&&(q=`^(?!${q}).*$`);const Ee=m.toRegex(q,O);return b===!0&&(Ee.state=w),Ee},m.makeRe=(w,O={},H=!1,b=!1)=>{if(!w||typeof w!="string")throw new TypeError("Expected a non-empty string");let $={negated:!1,fastpaths:!0};return O.fastpaths!==!1&&(w[0]==="."||w[0]==="*")&&($.output=I.fastpaths(w,O)),$.output||($=I(w,O)),m.compileRe($,O,H,b)},m.toRegex=(w,O)=>{try{const H=O||{};return new RegExp(w,H.flags||(H.nocase?"i":""))}catch(H){if(O&&O.debug===!0)throw H;return/$^/}},m.constants=W,it.exports=m},9826:(it,l,C)=>{"use strict";const R=C(292),{CHAR_ASTERISK:v,CHAR_AT:I,CHAR_BACKWARD_SLASH:y,CHAR_COMMA:W,CHAR_DOT:N,CHAR_EXCLAMATION_MARK:m,CHAR_FORWARD_SLASH:w,CHAR_LEFT_CURLY_BRACE:O,CHAR_LEFT_PARENTHESES:H,CHAR_LEFT_SQUARE_BRACKET:b,CHAR_PLUS:$,CHAR_QUESTION_MARK:F,CHAR_RIGHT_CURLY_BRACE:j,CHAR_RIGHT_PARENTHESES:q,CHAR_RIGHT_SQUARE_BRACKET:Ee}=C(3889),z=o(T=>T===w||T===y,"isPathSeparator"),Z=o(T=>{T.isPrefix!==!0&&(T.depth=T.isGlobstar?1/0:1)},"depth"),ee=o((T,Y)=>{const k=Y||{},le=T.length-1,J=k.parts===!0||k.scanToEnd===!0,fe=[],De=[],Oe=[];let oe=T,Se=-1,D=0,ze=0,we=!1,ve=!1,G=!1,se=!1,Te=!1,$e=!1,ae=!1,Xe=!1,lt=!1,mt=!1,P=0,U,re,de={value:"",depth:0,isGlob:!1};const Ue=o(()=>Se>=le,"eos"),Pe=o(()=>oe.charCodeAt(Se+1),"peek"),ce=o(()=>(U=re,oe.charCodeAt(++Se)),"advance");for(;Se<le;){re=ce();let xe;if(re===y){ae=de.backslashes=!0,re=ce(),re===O&&($e=!0);continue}if($e===!0||re===O){for(P++;Ue()!==!0&&(re=ce());){if(re===y){ae=de.backslashes=!0,ce();continue}if(re===O){P++;continue}if($e!==!0&&re===N&&(re=ce())===N){if(we=de.isBrace=!0,G=de.isGlob=!0,mt=!0,J===!0)continue;break}if($e!==!0&&re===W){if(we=de.isBrace=!0,G=de.isGlob=!0,mt=!0,J===!0)continue;break}if(re===j&&(P--,P===0)){$e=!1,we=de.isBrace=!0,mt=!0;break}}if(J===!0)continue;break}if(re===w){if(fe.push(Se),De.push(de),de={value:"",depth:0,isGlob:!1},mt===!0)continue;if(U===N&&Se===D+1){D+=2;continue}ze=Se+1;continue}if(k.noext!==!0&&(re===$||re===I||re===v||re===F||re===m)===!0&&Pe()===H){if(G=de.isGlob=!0,se=de.isExtglob=!0,mt=!0,re===m&&Se===D&&(lt=!0),J===!0){for(;Ue()!==!0&&(re=ce());){if(re===y){ae=de.backslashes=!0,re=ce();continue}if(re===q){G=de.isGlob=!0,mt=!0;break}}continue}break}if(re===v){if(U===v&&(Te=de.isGlobstar=!0),G=de.isGlob=!0,mt=!0,J===!0)continue;break}if(re===F){if(G=de.isGlob=!0,mt=!0,J===!0)continue;break}if(re===b){for(;Ue()!==!0&&(xe=ce());){if(xe===y){ae=de.backslashes=!0,ce();continue}if(xe===Ee){ve=de.isBracket=!0,G=de.isGlob=!0,mt=!0;break}}if(J===!0)continue;break}if(k.nonegate!==!0&&re===m&&Se===D){Xe=de.negated=!0,D++;continue}if(k.noparen!==!0&&re===H){if(G=de.isGlob=!0,J===!0){for(;Ue()!==!0&&(re=ce());){if(re===H){ae=de.backslashes=!0,re=ce();continue}if(re===q){mt=!0;break}}continue}break}if(G===!0){if(mt=!0,J===!0)continue;break}}k.noext===!0&&(se=!1,G=!1);let Ce=oe,Me="",Je="";D>0&&(Me=oe.slice(0,D),oe=oe.slice(D),ze-=D),Ce&&G===!0&&ze>0?(Ce=oe.slice(0,ze),Je=oe.slice(ze)):G===!0?(Ce="",Je=oe):Ce=oe,Ce&&Ce!==""&&Ce!=="/"&&Ce!==oe&&z(Ce.charCodeAt(Ce.length-1))&&(Ce=Ce.slice(0,-1)),k.unescape===!0&&(Je&&(Je=R.removeBackslashes(Je)),Ce&&ae===!0&&(Ce=R.removeBackslashes(Ce)));const me={prefix:Me,input:T,start:D,base:Ce,glob:Je,isBrace:we,isBracket:ve,isGlob:G,isExtglob:se,isGlobstar:Te,negated:Xe,negatedExtglob:lt};if(k.tokens===!0&&(me.maxDepth=0,z(re)||De.push(de),me.tokens=De),k.parts===!0||k.tokens===!0){let xe;for(let Ze=0;Ze<fe.length;Ze++){const tt=xe?xe+1:D,_e=fe[Ze],B=T.slice(tt,_e);k.tokens&&(Ze===0&&D!==0?(De[Ze].isPrefix=!0,De[Ze].value=Me):De[Ze].value=B,Z(De[Ze]),me.maxDepth+=De[Ze].depth),(Ze!==0||B!=="")&&Oe.push(B),xe=_e}if(xe&&xe+1<T.length){const Ze=T.slice(xe+1);Oe.push(Ze),k.tokens&&(De[De.length-1].value=Ze,Z(De[De.length-1]),me.maxDepth+=De[De.length-1].depth)}me.slashes=fe,me.parts=Oe}return me},"scan");it.exports=ee},292:(it,l,C)=>{"use strict";var R=C(6038);const v=C(6470),I=R.platform==="win32",{REGEX_BACKSLASH:y,REGEX_REMOVE_BACKSLASH:W,REGEX_SPECIAL_CHARS:N,REGEX_SPECIAL_CHARS_GLOBAL:m}=C(3889);l.isObject=w=>w!==null&&typeof w=="object"&&!Array.isArray(w),l.hasRegexChars=w=>N.test(w),l.isRegexChar=w=>w.length===1&&l.hasRegexChars(w),l.escapeRegex=w=>w.replace(m,"\\$1"),l.toPosixSlashes=w=>w.replace(y,"/"),l.removeBackslashes=w=>w.replace(W,O=>O==="\\"?"":O),l.supportsLookbehinds=()=>{const w=R.version.slice(1).split(".").map(Number);return w.length===3&&w[0]>=9||w[0]===8&&w[1]>=10},l.isWindows=w=>w&&typeof w.windows=="boolean"?w.windows:I===!0||v.sep==="\\",l.escapeLast=(w,O,H)=>{const b=w.lastIndexOf(O,H);return b===-1?w:w[b-1]==="\\"?l.escapeLast(w,O,b-1):`${w.slice(0,b)}\\${w.slice(b)}`},l.removePrefix=(w,O={})=>{let H=w;return H.startsWith("./")&&(H=H.slice(2),O.prefix="./"),H},l.wrapOutput=(w,O={},H={})=>{const b=H.contains?"":"^",$=H.contains?"":"$";let F=`${b}(?:${w})${$}`;return O.negated===!0&&(F=`(?:^(?!${F}).*$)`),F}},6038:it=>{var l=it.exports={},C,R;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function I(){throw new Error("clearTimeout has not been defined")}o(I,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?C=setTimeout:C=v}catch(j){C=v}try{typeof clearTimeout=="function"?R=clearTimeout:R=I}catch(j){R=I}}();function y(j){if(C===setTimeout)return setTimeout(j,0);if((C===v||!C)&&setTimeout)return C=setTimeout,setTimeout(j,0);try{return C(j,0)}catch(q){try{return C.call(null,j,0)}catch(Ee){return C.call(this,j,0)}}}o(y,"runTimeout");function W(j){if(R===clearTimeout)return clearTimeout(j);if((R===I||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(j);try{return R(j)}catch(q){try{return R.call(null,j)}catch(Ee){return R.call(this,j)}}}o(W,"runClearTimeout");var N=[],m=!1,w,O=-1;function H(){!m||!w||(m=!1,w.length?N=w.concat(N):O=-1,N.length&&b())}o(H,"cleanUpNextTick");function b(){if(!m){var j=y(H);m=!0;for(var q=N.length;q;){for(w=N,N=[];++O<q;)w&&w[O].run();O=-1,q=N.length}w=null,m=!1,W(j)}}o(b,"drainQueue"),l.nextTick=function(j){var q=new Array(arguments.length-1);if(arguments.length>1)for(var Ee=1;Ee<arguments.length;Ee++)q[Ee-1]=arguments[Ee];N.push(new $(j,q)),N.length===1&&!m&&y(b)};function $(j,q){this.fun=j,this.array=q}o($,"Item"),$.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function F(){}o(F,"noop"),l.on=F,l.addListener=F,l.once=F,l.off=F,l.removeListener=F,l.removeAllListeners=F,l.emit=F,l.prependListener=F,l.prependOnceListener=F,l.listeners=function(j){return[]},l.binding=function(j){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(j){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},2999:(it,l,C)=>{"use strict";/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const R=C(3338),v=o((z,Z,ee)=>{if(R(z)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(Z===void 0||z===Z)return String(z);if(R(Z)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let T={relaxZeros:!0,...ee};typeof T.strictZeros=="boolean"&&(T.relaxZeros=T.strictZeros===!1);let Y=String(T.relaxZeros),k=String(T.shorthand),le=String(T.capture),J=String(T.wrap),fe=z+":"+Z+"="+Y+k+le+J;if(v.cache.hasOwnProperty(fe))return v.cache[fe].result;let De=Math.min(z,Z),Oe=Math.max(z,Z);if(Math.abs(De-Oe)===1){let we=z+"|"+Z;return T.capture?`(${we})`:T.wrap===!1?we:`(?:${we})`}let oe=q(z)||q(Z),Se={min:z,max:Z,a:De,b:Oe},D=[],ze=[];if(oe&&(Se.isPadded=oe,Se.maxLen=String(Se.max).length),De<0){let we=Oe<0?Math.abs(Oe):1;ze=N(we,Math.abs(De),Se,T),De=Se.a=0}return Oe>=0&&(D=N(De,Oe,Se,T)),Se.negatives=ze,Se.positives=D,Se.result=I(ze,D,T),T.capture===!0?Se.result=`(${Se.result})`:T.wrap!==!1&&D.length+ze.length>1&&(Se.result=`(?:${Se.result})`),v.cache[fe]=Se,Se.result},"toRegexRange");function I(z,Z,ee){let T=m(z,Z,"-",!1,ee)||[],Y=m(Z,z,"",!1,ee)||[],k=m(z,Z,"-?",!0,ee)||[];return T.concat(k).concat(Y).join("|")}o(I,"collatePatterns");function y(z,Z){let ee=1,T=1,Y=b(z,ee),k=new Set([Z]);for(;z<=Y&&Y<=Z;)k.add(Y),ee+=1,Y=b(z,ee);for(Y=$(Z+1,T)-1;z<Y&&Y<=Z;)k.add(Y),T+=1,Y=$(Z+1,T)-1;return k=[...k],k.sort(O),k}o(y,"splitToRanges");function W(z,Z,ee){if(z===Z)return{pattern:z,count:[],digits:0};let T=w(z,Z),Y=T.length,k="",le=0;for(let J=0;J<Y;J++){let[fe,De]=T[J];fe===De?k+=fe:fe!=="0"||De!=="9"?k+=j(fe,De,ee):le++}return le&&(k+=ee.shorthand===!0?"\\d":"[0-9]"),{pattern:k,count:[le],digits:Y}}o(W,"rangeToPattern");function N(z,Z,ee,T){let Y=y(z,Z),k=[],le=z,J;for(let fe=0;fe<Y.length;fe++){let De=Y[fe],Oe=W(String(le),String(De),T),oe="";if(!ee.isPadded&&J&&J.pattern===Oe.pattern){J.count.length>1&&J.count.pop(),J.count.push(Oe.count[0]),J.string=J.pattern+F(J.count),le=De+1;continue}ee.isPadded&&(oe=Ee(De,ee,T)),Oe.string=oe+Oe.pattern+F(Oe.count),k.push(Oe),le=De+1,J=Oe}return k}o(N,"splitToPatterns");function m(z,Z,ee,T,Y){let k=[];for(let le of z){let{string:J}=le;!T&&!H(Z,"string",J)&&k.push(ee+J),T&&H(Z,"string",J)&&k.push(ee+J)}return k}o(m,"filterPatterns");function w(z,Z){let ee=[];for(let T=0;T<z.length;T++)ee.push([z[T],Z[T]]);return ee}o(w,"zip");function O(z,Z){return z>Z?1:Z>z?-1:0}o(O,"compare");function H(z,Z,ee){return z.some(T=>T[Z]===ee)}o(H,"contains");function b(z,Z){return Number(String(z).slice(0,-Z)+"9".repeat(Z))}o(b,"countNines");function $(z,Z){return z-z%Math.pow(10,Z)}o($,"countZeros");function F(z){let[Z=0,ee=""]=z;return ee||Z>1?`{${Z+(ee?","+ee:"")}}`:""}o(F,"toQuantifier");function j(z,Z,ee){return`[${z}${Z-z==1?"":"-"}${Z}]`}o(j,"toCharacterClass");function q(z){return/^-?(0+)\d/.test(z)}o(q,"hasPadding");function Ee(z,Z,ee){if(!Z.isPadded)return z;let T=Math.abs(Z.maxLen-String(z).length),Y=ee.relaxZeros!==!1;switch(T){case 0:return"";case 1:return Y?"0?":"0";case 2:return Y?"0{0,2}":"00";default:return Y?`0{0,${T}}`:`0{${T}}`}}o(Ee,"padZeros"),v.cache={},v.clearCache=()=>v.cache={},it.exports=v},6724:()=>{},6470:(it,l,C)=>{"use strict";var R=C(4155);function v(N){if(typeof N!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(N))}o(v,"assertPath");function I(N,m){for(var w="",O=0,H=-1,b=0,$,F=0;F<=N.length;++F){if(F<N.length)$=N.charCodeAt(F);else{if($===47)break;$=47}if($===47){if(!(H===F-1||b===1))if(H!==F-1&&b===2){if(w.length<2||O!==2||w.charCodeAt(w.length-1)!==46||w.charCodeAt(w.length-2)!==46){if(w.length>2){var j=w.lastIndexOf("/");if(j!==w.length-1){j===-1?(w="",O=0):(w=w.slice(0,j),O=w.length-1-w.lastIndexOf("/")),H=F,b=0;continue}}else if(w.length===2||w.length===1){w="",O=0,H=F,b=0;continue}}m&&(w.length>0?w+="/..":w="..",O=2)}else w.length>0?w+="/"+N.slice(H+1,F):w=N.slice(H+1,F),O=F-H-1;H=F,b=0}else $===46&&b!==-1?++b:b=-1}return w}o(I,"normalizeStringPosix");function y(N,m){var w=m.dir||m.root,O=m.base||(m.name||"")+(m.ext||"");return w?w===m.root?w+O:w+N+O:O}o(y,"_format");var W={resolve:o(function(){for(var m="",w=!1,O,H=arguments.length-1;H>=-1&&!w;H--){var b;H>=0?b=arguments[H]:(O===void 0&&(O=R.cwd()),b=O),v(b),b.length!==0&&(m=b+"/"+m,w=b.charCodeAt(0)===47)}return m=I(m,!w),w?m.length>0?"/"+m:"/":m.length>0?m:"."},"resolve"),normalize:o(function(m){if(v(m),m.length===0)return".";var w=m.charCodeAt(0)===47,O=m.charCodeAt(m.length-1)===47;return m=I(m,!w),m.length===0&&!w&&(m="."),m.length>0&&O&&(m+="/"),w?"/"+m:m},"normalize"),isAbsolute:o(function(m){return v(m),m.length>0&&m.charCodeAt(0)===47},"isAbsolute"),join:o(function(){if(arguments.length===0)return".";for(var m,w=0;w<arguments.length;++w){var O=arguments[w];v(O),O.length>0&&(m===void 0?m=O:m+="/"+O)}return m===void 0?".":W.normalize(m)},"join"),relative:o(function(m,w){if(v(m),v(w),m===w||(m=W.resolve(m),w=W.resolve(w),m===w))return"";for(var O=1;O<m.length&&m.charCodeAt(O)===47;++O);for(var H=m.length,b=H-O,$=1;$<w.length&&w.charCodeAt($)===47;++$);for(var F=w.length,j=F-$,q=b<j?b:j,Ee=-1,z=0;z<=q;++z){if(z===q){if(j>q){if(w.charCodeAt($+z)===47)return w.slice($+z+1);if(z===0)return w.slice($+z)}else b>q&&(m.charCodeAt(O+z)===47?Ee=z:z===0&&(Ee=0));break}var Z=m.charCodeAt(O+z),ee=w.charCodeAt($+z);if(Z!==ee)break;Z===47&&(Ee=z)}var T="";for(z=O+Ee+1;z<=H;++z)(z===H||m.charCodeAt(z)===47)&&(T.length===0?T+="..":T+="/..");return T.length>0?T+w.slice($+Ee):($+=Ee,w.charCodeAt($)===47&&++$,w.slice($))},"relative"),_makeLong:o(function(m){return m},"_makeLong"),dirname:o(function(m){if(v(m),m.length===0)return".";for(var w=m.charCodeAt(0),O=w===47,H=-1,b=!0,$=m.length-1;$>=1;--$)if(w=m.charCodeAt($),w===47){if(!b){H=$;break}}else b=!1;return H===-1?O?"/":".":O&&H===1?"//":m.slice(0,H)},"dirname"),basename:o(function(m,w){if(w!==void 0&&typeof w!="string")throw new TypeError('"ext" argument must be a string');v(m);var O=0,H=-1,b=!0,$;if(w!==void 0&&w.length>0&&w.length<=m.length){if(w.length===m.length&&w===m)return"";var F=w.length-1,j=-1;for($=m.length-1;$>=0;--$){var q=m.charCodeAt($);if(q===47){if(!b){O=$+1;break}}else j===-1&&(b=!1,j=$+1),F>=0&&(q===w.charCodeAt(F)?--F==-1&&(H=$):(F=-1,H=j))}return O===H?H=j:H===-1&&(H=m.length),m.slice(O,H)}else{for($=m.length-1;$>=0;--$)if(m.charCodeAt($)===47){if(!b){O=$+1;break}}else H===-1&&(b=!1,H=$+1);return H===-1?"":m.slice(O,H)}},"basename"),extname:o(function(m){v(m);for(var w=-1,O=0,H=-1,b=!0,$=0,F=m.length-1;F>=0;--F){var j=m.charCodeAt(F);if(j===47){if(!b){O=F+1;break}continue}H===-1&&(b=!1,H=F+1),j===46?w===-1?w=F:$!==1&&($=1):w!==-1&&($=-1)}return w===-1||H===-1||$===0||$===1&&w===H-1&&w===O+1?"":m.slice(w,H)},"extname"),format:o(function(m){if(m===null||typeof m!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof m);return y("/",m)},"format"),parse:o(function(m){v(m);var w={root:"",dir:"",base:"",ext:"",name:""};if(m.length===0)return w;var O=m.charCodeAt(0),H=O===47,b;H?(w.root="/",b=1):b=0;for(var $=-1,F=0,j=-1,q=!0,Ee=m.length-1,z=0;Ee>=b;--Ee){if(O=m.charCodeAt(Ee),O===47){if(!q){F=Ee+1;break}continue}j===-1&&(q=!1,j=Ee+1),O===46?$===-1?$=Ee:z!==1&&(z=1):$!==-1&&(z=-1)}return $===-1||j===-1||z===0||z===1&&$===j-1&&$===F+1?j!==-1&&(F===0&&H?w.base=w.name=m.slice(1,j):w.base=w.name=m.slice(F,j)):(F===0&&H?(w.name=m.slice(1,$),w.base=m.slice(1,j)):(w.name=m.slice(F,$),w.base=m.slice(F,j)),w.ext=m.slice($,j)),F>0?w.dir=m.slice(0,F-1):H&&(w.dir="/"),w},"parse"),sep:"/",delimiter:":",win32:null,posix:null};W.posix=W,it.exports=W},4155:it=>{var l=it.exports={},C,R;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function I(){throw new Error("clearTimeout has not been defined")}o(I,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?C=setTimeout:C=v}catch(j){C=v}try{typeof clearTimeout=="function"?R=clearTimeout:R=I}catch(j){R=I}}();function y(j){if(C===setTimeout)return setTimeout(j,0);if((C===v||!C)&&setTimeout)return C=setTimeout,setTimeout(j,0);try{return C(j,0)}catch(q){try{return C.call(null,j,0)}catch(Ee){return C.call(this,j,0)}}}o(y,"runTimeout");function W(j){if(R===clearTimeout)return clearTimeout(j);if((R===I||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(j);try{return R(j)}catch(q){try{return R.call(null,j)}catch(Ee){return R.call(this,j)}}}o(W,"runClearTimeout");var N=[],m=!1,w,O=-1;function H(){!m||!w||(m=!1,w.length?N=w.concat(N):O=-1,N.length&&b())}o(H,"cleanUpNextTick");function b(){if(!m){var j=y(H);m=!0;for(var q=N.length;q;){for(w=N,N=[];++O<q;)w&&w[O].run();O=-1,q=N.length}w=null,m=!1,W(j)}}o(b,"drainQueue"),l.nextTick=function(j){var q=new Array(arguments.length-1);if(arguments.length>1)for(var Ee=1;Ee<arguments.length;Ee++)q[Ee-1]=arguments[Ee];N.push(new $(j,q)),N.length===1&&!m&&y(b)};function $(j,q){this.fun=j,this.array=q}o($,"Item"),$.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function F(){}o(F,"noop"),l.on=F,l.addListener=F,l.once=F,l.off=F,l.removeListener=F,l.removeAllListeners=F,l.emit=F,l.prependListener=F,l.prependOnceListener=F,l.listeners=function(j){return[]},l.binding=function(j){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(j){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},6529:()=>{},6391:()=>{}},Va={};function dr(it){var l=Va[it];if(l!==void 0)return l.exports;var C=Va[it]={id:it,loaded:!1,exports:{}};return Io[it](C,C.exports,dr),C.loaded=!0,C.exports}o(dr,"__webpack_require__"),(()=>{dr.n=it=>{var l=it&&it.__esModule?()=>it.default:()=>it;return dr.d(l,{a:l}),l}})(),(()=>{dr.d=(it,l)=>{for(var C in l)dr.o(l,C)&&!dr.o(it,C)&&Object.defineProperty(it,C,{enumerable:!0,get:l[C]})}})(),(()=>{dr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(it){if(typeof window=="object")return window}}()})(),(()=>{dr.o=(it,l)=>Object.prototype.hasOwnProperty.call(it,l)})(),(()=>{dr.r=it=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(it,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(it,"__esModule",{value:!0})}})(),(()=>{dr.nmd=it=>(it.paths=[],it.children||(it.children=[]),it)})();var Po={};(()=>{"use strict";dr.r(Po),dr.d(Po,{AllowedProviderExtensionIds:()=>Qo,StateKeys:()=>ga,activate:()=>Ec,ensureProvidersRegistered:()=>kr,getOpenActionsService:()=>Ro,getState:()=>nl,isPreRelease:()=>bc,updateState:()=>qo});var it={};dr.r(it),dr.d(it,{max:()=>Pl,min:()=>Il});const l=require("vscode"),C=new TextDecoder,R=new TextEncoder,v=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function I(t){const e=R.encode(t),n=new Array(e.length);for(let r=0;r<e.length;++r)n[r]=v[e[r]];return n.join("")}o(I,"encodeUtf8Hex");function y(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const n=new Uint8Array(e.map(r=>parseInt(r,16)));return C.decode(n)}o(y,"decodeUtf8Hex");const W=/^[0-9a-f]{40}$/i;function N(t){return t!==void 0&&W.test(t)}o(N,"isSha");const m=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function w(t){return m.test(t)}o(w,"isValidBranchName");function O(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}o(O,"shortenRef");const H=47;function b(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}o(b,"asKey");function $(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}o($,"asFileKey");function F(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}o(F,"asFileStorageKey");function j(t){const e=typeof t=="string"?t:t.path;let n=0,r=-1,i=!0;for(let a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===H){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?"":e.slice(n,r)}o(j,"basename");function q(t){const e=t.path;if(e.length===1)return"/";let n,r=-1,i=!0;for(let a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===H){if(!i){r=a;break}}else i=!1;return r===-1?"/":e.slice(0,r)}o(q,"dirname");function Ee(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}o(Ee,"getParent");function z(t,e){const n=typeof e=="string"?e:e.path;return n.startsWith(t.path)?l.Uri.joinPath(t,n.substr(t.path.length)):l.Uri.joinPath(t,n)}o(z,"joinRelativePath");function Z(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),ee(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):ee(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}o(Z,"isChild");function ee(t,e){if(typeof t=="string")return e=typeof e=="string"?e:e.path,e.startsWith("/")||(e=`/${e}`),e.length===1||t.startsWith(e.endsWith("/")?e:`${e}/`);if(typeof e=="string"){e.startsWith("/")||(e=`/${e}`);const n=typeof t=="string"?t:t.path;return e.length===1||n.startsWith(e.endsWith("/")?e:`${e}/`)}return e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}o(ee,"isDescendent");function T(t){return t&&typeof t=="object"&&"scheme"in t}o(T,"isSerializedUri");function Y(t){return t.split("/").map(e=>encodeURIComponent(e)).join("/")}o(Y,"encodeURIComponentExceptSlashes");var k;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs",t.baseVirtualWorkspaceUri=l.Uri.parse(`${t.scheme}://`);function e(d){const{authority:f}=d,h=f.indexOf(t.authoritySeparator);return h!==-1?f.substr(0,h):f}o(e,"getProviderId"),t.getProviderId=e;function n(d){return d.scheme!==t.scheme?d:d.with({scheme:e(d)})}o(n,"getProviderUri"),t.getProviderUri=n;function r(d,f){const h=new Map,p=l.workspace.textDocuments;if(p.length===0)return h;for(const _ of p)_.uri.scheme===d&&f.some(ne=>ee(_.uri,ne))&&h.set(b(_.uri),_.uri);return h}o(r,"getOpenUris"),t.getOpenUris=r;function i(d){return d.scheme===t.scheme?d:d.with({scheme:t.scheme})}o(i,"getVirtualUri"),t.getVirtualUri=i;function a(d,f){const[h,p]=d.authority.split(t.authoritySeparator);let _;if(p)try{const ne=JSON.parse(y(p));_=f?f(ne):ne}catch{}return{scheme:h,metadata:_}}o(a,"decodeAuthority"),t.decodeAuthority=a;function s(d,f){const h=f?`${t.authoritySeparator}${I(JSON.stringify(f))}`:"";return`${d}${h}`}o(s,"encodeAuthority"),t.encodeAuthority=s;function c(d){return d.authority.indexOf(t.authoritySeparator)===-1}o(c,"isCanonicalUri"),t.isCanonicalUri=c;function u(){var d,f;return(f=(d=l.workspace.workspaceFolders)==null?void 0:d.every(h=>h.uri.scheme===t.scheme))!=null?f:!1}o(u,"isVirtualWorkspace"),t.isVirtualWorkspace=u})(k||(k={}));var le;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(le||(le={}));var J;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(J||(J={}));var fe;(function(t){function e(n){return n!==void 0&&n.type===oe.Active}o(e,"isActive"),t.isActive=e})(fe||(fe={}));var De;(function(t){function e(n){const r=k.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:Oe.Latest};if(N(r.idx))return{type:Oe.SHA,sha:r.idx}}}o(e,"decode"),t.decode=e})(De||(De={}));var Oe;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(Oe||(Oe={}));var oe;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(oe||(oe={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(oe||(oe={}));var Se;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(Se||(Se={}));var D;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(D||(D={}));var ze;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})(ze||(ze={}));var we;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(we||(we={}));var ve;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(ve||(ve={}));var G;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(G||(G={}));var se;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(se||(se={}));var Te;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(Te||(Te={}));var $e;(function(t){t.Browse="browse",t.Edit="edit"})($e||($e={}));var ae;(function(t){t.CommitFailedError="CommitFailedError",t.DetachedHEADError="DetachedHEADError",t.CommitToProtectedBranchError="CommitToProtectedBranchError",t.CommitToArchivedRepositoryError="CommitToArchivedRepositoryError",t.InvalidBranchNameError="InvalidBranchNameError",t.InvalidCredentialsError="InvalidCredentialsError",t.MergeConflictError="MergeConflictError",t.NothingToCommitError="NothingToCommitError",t.SyncConflictsError="SyncConflictsError",t.SyncOrFetchError="SyncOrFetchError",t.UnresolvedConflictsError="UnresolvedConflictsError",t.InvalidRepositoryError="InvalidRepositoryError",t.Unknown="Unknown"})(ae||(ae={}));class Xe extends Error{constructor(e,n,r){super(typeof e=="string"?e:e.message);this.messageOrError=e,this.errorCode=n,this.action=r}static CommitFailedError(){return new Xe("Failed to create and push commit",ae.CommitFailedError)}static DetachedHEADError(e){return new Xe(e,ae.DetachedHEADError)}static CommitToProtectedBranchError(e){return new Xe(e,ae.CommitToProtectedBranchError)}static CommitToArchivedRepositoryError(e){return new Xe(e,ae.CommitToArchivedRepositoryError)}static InvalidBranchNameError(e,n=!1){const r=n?`Branch '${e}' already exists`:`Invalid branch name '${e}'`;return new Xe(r,ae.InvalidBranchNameError)}static InvalidCredentialsError(e,n){return new Xe(e,ae.InvalidCredentialsError,n)}static MergeConflictError(e){return new Xe(e,ae.MergeConflictError)}static NothingToCommitError(e){return new Xe(e,ae.NothingToCommitError)}static SyncOrFetchError(e=!1){const n=e?"Unable to sync the repository":"Unable to fetch the repository";return new Xe(n,ae.SyncOrFetchError)}static SyncConflictsError(){const e="Sync operation will result in conflicts";return new Xe(e,ae.SyncConflictsError)}static UnresolvedConflictsError(){return new Xe("You have unresolved merge conflicts.",ae.UnresolvedConflictsError)}static InvalidRepositoryError(){return new Xe("The current repository is invalid",ae.InvalidRepositoryError)}static asVirtualProviderErrorCode(e){return e instanceof Error&&"messageOrError"in e&&"errorCode"in e?e.errorCode:ae.Unknown}}o(Xe,"VirtualProviderError");const lt=6;var mt;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(mt||(mt={}));var P;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(P||(P={})),function(t){function e(n){return n===t.None||n===t.Latest||n===t.Match||n===t.TipPlusLatest?n:t.None}o(e,"sanitize"),t.sanitize=e}(P||(P={}));var U;(function(t){t.Browse="browse",t.Edit="edit"})(U||(U={})),function(t){function e(r){return r===t.Browse||r===t.Edit?r:t.Edit}o(e,"sanitize"),t.sanitize=e;function n(r){return r===t.Browse?t.Edit:t.Browse}o(n,"toggle"),t.toggle=n}(U||(U={}));var re;(function(t){function e(n,r){return n.display===r.display&&n.index===r.index}o(e,"equals"),t.equals=e})(re||(re={}));var de;(function(t){const e=new Map([[se.Branch,P.None],[se.RemoteBranch,P.None],[se.PullRequestBranch,P.Match],[se.PullRequestRemoteBranch,P.Match],[se.Commit,P.Match],[se.Tag,P.Match]]),n=new Map([[se.Branch,U.Edit],[se.RemoteBranch,U.Edit],[se.PullRequestBranch,U.Browse],[se.PullRequestRemoteBranch,U.Browse],[se.Commit,U.Browse],[se.Tag,U.Browse]]);function r(a){var s,c;return{display:(s=n.get(a))!=null?s:U.Edit,index:(c=e.get(a))!=null?c:P.None}}o(r,"getDefault"),t.getDefault=r;function i(a){switch(a){case se.Branch:case se.RemoteBranch:return{display:U.Browse,index:P.Latest};case se.PullRequestBranch:case se.PullRequestRemoteBranch:return{display:U.Browse,index:P.Match};case se.Commit:case se.Tag:return{display:U.Browse,index:P.Match};default:return{display:U.Edit,index:P.None}}}o(i,"getIndexDefault"),t.getIndexDefault=i})(de||(de={}));const Ue=null;var Pe=dr(5179),ce=dr.n(Pe);const Ce="modes",Me="indexMemento";class Je{constructor(){this._onDidChange=new l.EventEmitter,this._onDidChangeAny=new l.EventEmitter,this.memoryState=new Map}static configure(e,n){me.configPrefix=e,me.state=n.workspaceState,n.subscriptions.push(l.workspace.onDidChangeConfiguration(me.onConfigurationChanged,me))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(Ce),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(Ce,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(Me),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}getEffective(e,n,r){const i=this.inspect(e,n);return i===void 0&&r!==void 0?r:(i==null?void 0:i.workspaceFolderValue)!==void 0?i.workspaceFolderValue:(i==null?void 0:i.workspaceValue)!==void 0?i.workspaceValue:i==null?void 0:i.globalValue}get(e,n,r){return r===void 0?l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e):l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e,r)}getMode(e,n,r){var i;const a=e.toString();let s=this.modes!==void 0?this.modes[a]:void 0;if(s!==void 0)return{display:U.sanitize(s.display),index:P.sanitize(s.index)};if(s=this.memoryState.get(a),s!==void 0)return s;if(n===se.Branch||n===se.RemoteBranch)switch((i=l.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:i.get("branch")){case"none":return{display:U.Edit,index:P.None};case"latest":return{display:U.Browse,index:P.Latest};case"tipPlusLatest":return{display:U.Edit,index:P.TipPlusLatest}}if(!r)return de.getDefault(n)}setMode(e,n){const r=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(r,n),Promise.resolve()):(this.modes[r]=n,this._state.update(Ce,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=n,this._state.update(Me,this.indexMemento))}getAny(e,n,r){return r===void 0?l.workspace.getConfiguration(void 0,n).get(e):l.workspace.getConfiguration(void 0,n).get(e,r)}changed(e,n,r){var i;return(i=e==null?void 0:e.affectsConfiguration(`${this.configPrefix}.${n}`,r))!=null?i:!0}inspect(e,n){return l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).inspect(e===void 0?this.configPrefix:e)}inspectAny(e,n){return l.workspace.getConfiguration(void 0,n).inspect(e)}async migrate(e,n,r){const i=me.inspect(e);if(i===void 0)return!1;let a=!1;return i.globalValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),a=!0),i.workspaceValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),a=!0),i.workspaceFolderValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder),a=!0),!a&&r.fallbackValue!==void 0&&(await this.update(n,r.fallbackValue,l.ConfigurationTarget.Global),a=!0),a}async migrateIfMissing(e,n,r){const i=me.inspect(e);if(i===void 0)return;const a=me.inspect(n);i.globalValue!==void 0&&(a===void 0||a.globalValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(a===void 0||a.workspaceValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(a===void 0||a.workspaceFolderValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,n,r){return l.workspace.getConfiguration(this.configPrefix).update(e,n,r)}updateAny(e,n,r,i){return l.workspace.getConfiguration(void 0,r===l.ConfigurationTarget.Global?void 0:i).update(e,n,r)}updateEffective(e,n){const r=me.inspect(e);return r.workspaceFolderValue!==void 0?n===r.workspaceFolderValue?Promise.resolve(void 0):me.update(e,n,l.ConfigurationTarget.WorkspaceFolder):r.workspaceValue!==void 0?n===r.workspaceValue?Promise.resolve(void 0):me.update(e,n,l.ConfigurationTarget.Workspace):r.globalValue===n||r.globalValue===void 0&&n===r.defaultValue?Promise.resolve(void 0):me.update(e,ce()(n,r.defaultValue)?void 0:n,l.ConfigurationTarget.Global)}}o(Je,"Configuration");const me=new Je,xe="";var Ze;(function(t){t.Off="off",t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug"})(Ze||(Ze={}));var tt;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(tt||(tt={}));const _e="[RemoteHub]",B=o(class{static configure(t,e,n){this._isDebugging=t.extensionMode===l.ExtensionMode.Development,this.outputChannelName=e,this.logLevel=n}static enabled(t){return this.level>=this.toOrderedLevel(t)}static get logLevel(){return this._logLevel}static set logLevel(t){var e,n;this._logLevel=t,this.level=this.toOrderedLevel(t),t===Ze.Off?((e=this.output)==null||e.dispose(),this.output=void 0):this.output=(n=this.output)!=null?n:l.window.createOutputChannel(this.outputChannelName)}static toOrderedLevel(t){switch(t){case Ze.Off:return 0;case Ze.Error:return 1;case Ze.Warn:return 2;case Ze.Info:return 3;case Ze.Debug:return 4}}static get isDebugging(){return this._isDebugging}static debug(t,...e){B.isDebugging&&console.log(this.timestamp,_e,t!=null?t:xe,...e),!(this.output===void 0||this.level<4)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:xe}${this.toLoggableParams(!0,e)}`)}static error(t,e,...n){if(!(this.level<1&&!B.isDebugging)){if(e===void 0){const r=t instanceof Error?t.stack:void 0;if(r){const i=/.*\s*?at\s(.+?)\s/.exec(r);i!==null&&(e=i[1])}}B.isDebugging&&console.error(this.timestamp,_e,e!=null?e:xe,...n,t),!(this.output===void 0||this.level<1)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:xe}${this.toLoggableParams(!1,n)}
${String(t)}`)}}static log(t,...e){B.isDebugging&&console.log(this.timestamp,_e,t!=null?t:xe,...e),!(this.output===void 0||this.level<3)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:xe}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){B.isDebugging&&console.warn(this.timestamp,_e,t!=null?t:xe,...e),!(this.output===void 0||this.level<2)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:xe}${this.toLoggableParams(!1,e)}`)}static showOutputChannel(){var t;(t=this.output)==null||t.show()}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof l.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,n,r;let i;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;i=(e=t.prototype.constructor.name)!=null?e:xe}else i=(r=(n=t.constructor)==null?void 0:n.name)!=null?r:xe;const a=i.indexOf("_");return a===-1?i:i.substr(a+1)}static get timestamp(){const t=new Date;return`[${t.toISOString().replace(/T/," ").replace(/\..+/,xe)}:${`00${t.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!B.isDebugging)return xe;const n=e.map(r=>this.toLoggable(r)).join(", ");return n.length!==0?` \u2014 ${n}`:xe}},"_Logger");let K=B;K.level=0,K._logLevel=Ze.Off;const Ye=new TextDecoder,Jt=new TextEncoder;async function Tn(t){const e=typeof t=="string"?Jt.encode(t):t;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const r=new lr;r.update(e),n=r.digest()}return globalThis.btoa(encodeURIComponent(Ye.decode(n)))}o(Tn,"sha1");async function Pn(t){const e=await globalThis.crypto.subtle.digest({name:"sha-256"},t);return Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join("")}o(Pn,"sha256");var Sn;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(Sn||(Sn={}));function sr(t,e,n=32){const r=n-e,i=~((1<<r)-1);return(t<<e|(i&t)>>>r)>>>0}o(sr,"leftRotate");function or(t,e=0,n=t.byteLength,r=0){for(let i=0;i<n;i++)t[e+i]=r}o(or,"fill");const vr=o(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let n=this._buffLen,r=0;const i=t.byteLength;for(;r<i;){const a=Math.min(64-n,i-r);for(let s=0;s<a;s++)e[n++]=t[r++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,or(this._buff,this._buffLen),this._buffLen>56&&(this._step(),or(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=vr._bigBlock32,e=this._buffDV;for(let f=0;f<64;f+=4)t.setUint32(f,e.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)t.setUint32(f,sr(t.getUint32(f-12,!1)^t.getUint32(f-32,!1)^t.getUint32(f-56,!1)^t.getUint32(f-64,!1),1),!1);let n=this._h0,r=this._h1,i=this._h2,a=this._h3,s=this._h4,c,u,d;for(let f=0;f<80;f++)f<20?(c=r&i|~r&a,u=1518500249):f<40?(c=r^i^a,u=1859775393):f<60?(c=r&i|r&a|i&a,u=2400959708):(c=r^i^a,u=3395469782),d=sr(n,5)+c+s+u+t.getUint32(f*4,!1)&4294967295,s=a,a=i,i=sr(r,30),r=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+a&4294967295,this._h4=this._h4+s&4294967295}},"_SHA1Computer");let lr=vr;lr._bigBlock32=new DataView(new ArrayBuffer(320));function pr(t){const e=globalThis.atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}o(pr,"fromBase64");const{fromCharCode:ft}=String;function Kt(t){let e;if(typeof t=="string")e=t;else{e="";for(let n=0,{length:r}=t;n<r;n++)e+=ft(t[n])}return globalThis.btoa(e)}o(Kt,"toBase64");function rn(t,e){if(t===e)return-1;let n=0;for(;t[n]===e[n];)n++;return n}o(rn,"indexOfDifference");function on(t){return t.replace(/[\\{}*+?|^$.[\]()]/g,"\\$&")}o(on,"escapeRegExpCharacters");let Vt;var En;(function(t){function e(n){const r=fr(n);return Vt=l.env.uiKind===l.UIKind.Web,K.warn(`Running on the ${Vt?"web":"desktop"}${n.extensionRuntime!==l.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${r}; storageUri=${n.globalStorageUri.toString(!0)}`),r}o(e,"configure"),t.configure=e})(En||(En={}));const jn=/\/workspaceStorage\/(?<id>[^/]+)/i;function fr(t){var e;if(t.storageUri===void 0)return"";const n=jn.exec(t.storageUri.path);let r;if((e=n==null?void 0:n.groups)==null?void 0:e.id)r=n.groups.id;else{r=t.storageUri.path;const i=rn(t.globalStorageUri.path,r),a=`/${t.extension.id}`;r.endsWith(a)?r=r.slice(i,-a.length):r=r.substr(i)}return/-[0-9]$/.test(r)?r.slice(0,-2):r}o(fr,"getWorkspaceId");var Xn;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasRecentRepositories="remoteHub:hasRecentRepositories",t.HasSearchIndexes="gitHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",t.HasPullRequestExtension="gitHub:hasPullRequestExtension"})(Xn||(Xn={}));const Dr=new Map;function $r(t){return t==="isWeb"?isWeb:t==="remoteName"?env.remoteName:t==="virtualWorkspace"?VirtualProviderUtils.isVirtualWorkspace():t.startsWith("config.")?configuration.getAny(t.substring(7)):Dr.get(t)}o($r,"getContext");function Cr(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}o(Cr,"isSupportedContextKey");async function Rr(t,e){Dr.set(t,e),!t.startsWith("continueOn:")&&await l.commands.executeCommand("setContext",t,e)}o(Rr,"setContext");const Fr=o(async(t,e,n)=>{const r=await Promise.resolve().then(dr.bind(dr,850)),i=await Promise.resolve().then(dr.bind(dr,5229)),a=new r.AppInsightsCore,s=new i.PostChannel,c={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){c.extensionConfig={};const f={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[s.identifier]=f}const d=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(c,[]),a.addTelemetryInitializer(f=>{var h,p;!d||(f.ext=(h=f.ext)!=null?h:{},f.ext.utc=(p=f.ext.utc)!=null?p:{},f.ext.utc.flags=8462029)}),a},"getAICore"),xn=o(async(t,e,n)=>{const r=await Fr(t,e,n);return{logEvent:(a,s)=>{try{r==null||r.track({name:a,baseData:{name:a,properties:s==null?void 0:s.properties,measurements:s==null?void 0:s.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{r==null||r.unload()}catch(a){throw new Error(`Failed to flush app insights!
`+a.message)}}}},"oneDataSystemClientFactory");var Bn;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(Bn||(Bn={}));class _r{constructor(e,n){this._instantiationStatus=Bn.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Bn.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Bn.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===Bn.NOT_INSTANTIATED&&(this._instantiationStatus=Bn.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=Bn.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=Bn.INSTANTIATED}))}}o(_r,"BaseTelemetrySender");class Kr{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}internalSendTelemetryException(e,n,r,i){i?this.telemetrySender.sendErrorData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryException(e,n,r){this.internalSendTelemetryException(e,n,r,!1)}sendDangerousTelemetryException(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryException(e,n,r,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}}o(Kr,"BaseTelemetryReporter");class Tr{static applyReplacements(e,n){for(const r of Object.keys(e))for(const i of n)i.lookup.test(r)&&(i.replacementString!==void 0?e[r]=i.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.7"}}static getInstance(){return Tr._instance||(Tr._instance=new Tr),Tr._instance}}o(Tr,"TelemetryUtil");const vi=o(async(t,e)=>{let n;try{const i=await Promise.resolve().then(dr.bind(dr,3268));n=new i.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0})}catch(i){return Promise.reject(i)}return{logEvent:(i,a)=>{const s={...a==null?void 0:a.properties,...a==null?void 0:a.measurements};(e==null?void 0:e.length)&&Tr.applyReplacements(s,e),n==null||n.track({name:i,data:s})},flush:async()=>{n==null||n.flush()}}},"webAppInsightsClientFactory");function br(t){if(t.userAgentData){const e=t.userAgentData.brands[t.userAgentData.brands.length-1];return`${t.userAgentData.platform} - ${e==null?void 0:e.brand} v${e==null?void 0:e.version}}`}else return t.appVersion}o(br,"getBrowserRelease");class M extends Kr{constructor(e,n){let r=o(s=>vi(s,n),"clientFactory");Tr.shouldUseOneDataSystemSDK(e)&&(r=o(s=>xn(s,l),"clientFactory"));const i={release:br(navigator),platform:"web",architecture:"web"},a=new _r(e,r);if(e&&e.indexOf("AIF")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,l,{additionalCommonProperties:Tr.getAdditionalCommonProperties(i)})}}o(M,"TelemetryReporter");const ue="Type of classified event does not match event properties",Ae=o(class{constructor(t){this.context=t,this.sharedProperties={},Ae._instance=this,this.reporter=new M(Ae.ingestionKey)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==ue&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,n){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},n)}sendErrorEvent(t,e,n){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},n)}sendException(t,e,n){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},n)}setSharedProperty(t,e){this.sharedProperties[t]=e}reportWorkbenchLoadResult(t){const e="_codespaces.webeditor.connectWorkspace";l.env.appHost==="github.dev"&&(K.debug(`Executing ${e}`),t={...t,errorDetail:t.errorDetail instanceof Error?t.errorDetail.name:void 0},l.commands.executeCommand(e,t).then(n=>{},n=>{K.debug(`Failed to execute ${e}`,n)}))}},"_TelemetryService");let Le=Ae;Le.ingestionKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255";function et(t,e){const n=l.l10n.t("Report Issue"),r=l.l10n.t("Reload");l.window.showErrorMessage(l.l10n.t("The {0} extension failed to activate.",t.extension.packageJSON.displayName),{modal:!0,detail:l.l10n.t("Please try reloading the window, or report an issue.")},r,n).then(i=>{i===n?l.commands.executeCommand("workbench.action.openIssueReporter",{extensionId:t.extension.id,issueTitle:"Extension activation failed",issueBody:e instanceof Error?e.toString():void 0}):i===r&&l.commands.executeCommand("workbench.action.reloadWindow")})}o(et,"handleExtensionActivationError");function je(t){const e=performance.now()*.001;let n=Math.floor(e),r=Math.floor(e%1*1e9);return t!==void 0&&(n=n-t[0],r=r-t[1],r<0&&(n--,r+=1e9)),[n,r]}o(je,"hrtime");let ct=0;function Dt(){return ct===Number.MAX_SAFE_INTEGER&&(ct=0),++ct}o(Dt,"getNextInstanceId");const Rt=o(class{constructor(t,e,...n){this.context=t,this.instance=`[${Dt().toString().padStart(5)}] `;var r,i,a,s,c,u;let d;if(typeof(e==null?void 0:e.log)=="boolean"?d=e.log?{}:void 0:d=(r=e==null?void 0:e.log)!=null?r:{},this.logLevel=(i=e==null?void 0:e.logLevel)!=null?i:Ze.Info,this.time=je(),d){if(!K.enabled(this.logLevel))return;n.length?Ct(this.logLevel,`${this.instance}${(a=d.prefix)!=null?a:""}${t}${(s=d.message)!=null?s:""}`,...n):Ct(this.logLevel,`${this.instance}${(c=d.prefix)!=null?c:""}${t}${(u=d.message)!=null?u:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:je(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=je()}stop(t){this.restart(t)}logCore(t,e,n){var r,i,a,s,c,u,d;if(!K.enabled(this.logLevel))return;let f="";if(this.step){const[ne,A]=je(this.step.time),X=ne*1e3+Math.floor(A/1e6);f=`${this.step.label?`${this.step.label} took `:""}${X} ms`}if(!n){Ct(this.logLevel,`${this.instance}${(r=e==null?void 0:e.prefix)!=null?r:""}${t}${(i=e==null?void 0:e.message)!=null?i:""}${f?` ${f}`:""}${(a=e==null?void 0:e.suffix)!=null?a:""}`);return}const[h,p]=je(this.time),_=h*1e3+Math.floor(p/1e6);Ct(_>500?Ze.Warn:this.logLevel,`${this.instance}${(s=e==null?void 0:e.prefix)!=null?s:""}${t}${(c=e==null?void 0:e.message)!=null?c:""}${(u=e==null?void 0:e.took)!=null?u:" took "}${_} ms${f?` (${f})`:""}${(d=e==null?void 0:e.suffix)!=null?d:""}`)}static start(t,e,...n){var r;(r=Rt.watches.get(t))==null||r.log(),Rt.watches.set(t,new Rt(t,e,...n))}static log(t,e){var n;(n=Rt.watches.get(t))==null||n.log(e)}static stop(t,e){var n;(n=Rt.watches.get(t))==null||n.stop(e),Rt.watches.delete(t)}},"_Stopwatch");let _t=Rt;_t.watches=new Map;function Ct(t,e,...n){switch(t){case Ze.Warn:K.warn(e,...n);break;case Ze.Info:K.log(e,...n);break;default:K.debug(e,...n);break}}o(Ct,"log");class Ft{constructor(e){this.providerService=e}async provideCanonicalUri(e,n){var r,i;if(n.targetScheme==="https")switch(e.scheme){case k.scheme:{const a=this.providerService.getRepository(e);if(!a)return;const s=await this.providerService.getRepositoryContext(a,"http");return s.uri?l.Uri.parse(s.uri.endsWith(".git")?s.uri.slice(0,-4):s.uri):void 0}default:return(i=(r=this.providerService).getHttpsCloneUri)==null?void 0:i.call(r,e)}}}o(Ft,"CanonicalUriProvider"),Ft.SupportedSchemes=["https","ssh",k.scheme];class Bt{constructor(e){this.providerService=e,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=l.Disposable.from(e.onDidChangeRepositories(n=>{for(const r of n.added)this.repositoryOpened(r);for(const r of n.removed)this.repositoryClosed(r)}),me.onDidChange(n=>{for(const r of this.services.values()){const i=r.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",i.uri)&&r.service.updateIndexMode().catch(a=>{K.error(a)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const n=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(n,1)}}async repositoryOpened(e){const n=b(e.uri);if(!this.handledRepositories.has(n)){this.handledRepositories.add(n);for(const r of this.providers){const i=await r.createNavigationService(this.providerService,e);if(i!==void 0){const a=i();this.services.set(n,{service:a});break}}}}repositoryClosed(e){const n=b(e.uri);this.handledRepositories.delete(n);const r=this.services.get(n);r!==void 0&&(r.service.dispose(),this.services.delete(b(e.uri)))}}o(Bt,"CodeNavigationServices");const Nt=globalThis.fetch;async function kt(t,e,n){const r=new AbortController;n.onCancellationRequested(()=>r.abort());try{return await globalThis.fetch(t,{...e,signal:r.signal})}catch(i){throw n.isCancellationRequested?new CancellationError:i}}o(kt,"fetchWithCancellation");async function Jn(t,e,n,r,i){if(n===0)throw new CancellationError;const a=new CancellationTokenSource;r.onCancellationRequested(()=>a.cancel());try{const s=await kt(t,e,a.token);if(s.body){const c=[];let u=0;const d=s.body.getReader();let f=3;for(;;){let{done:h,value:p}=await d.read();if(h){const ne=c.reduce((pe,Q)=>pe+Q.length,0),A=new Uint8Array(ne);let X=0;for(const pe of c)A.set(pe,X),X+=pe.length;return A}p&&(c.push(p),u+=p.length);const _=Math.floor(u/(1024*1024));if(f<_){f=_;const ne={message:_+" MB"};i.report(ne)}if(n!==void 0&&u>n)throw d.cancel(),a.cancel(),new Error("LIMIT_HIT")}}}catch(s){throw r.isCancellationRequested?new CancellationError:s}throw new CancellationError}o(Jn,"fetchUInt8ArrayWithMaxSizeAndCancellation");const An=globalThis.crypto;function mr(){return An.randomUUID()}o(mr,"uuid");/*! (c) Andrea Giammarchi - ISC */var qn={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;qn.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,n,r){"use strict";var i=e.create,a=e.defineProperty,s=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,u=/\+/g,d={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},f={append:function(Q,be){ne(this._ungap,Q,be)},delete:function(Q){delete this._ungap[Q]},get:function(Q){return this.has(Q)?this._ungap[Q][0]:null},getAll:function(Q){return this.has(Q)?this._ungap[Q].slice(0):[]},has:function(Q){return Q in this._ungap},set:function(Q,be){this._ungap[Q]=[n(be)]},forEach:function(Q,be){var Ne=this;for(var We in Ne._ungap)Ne._ungap[We].forEach(Qe,We);function Qe(It){Q.call(be,It,n(We),Ne)}o(Qe,"invoke")},toJSON:function(){return{}},toString:function(){var Q=[];for(var be in this._ungap)for(var Ne=X(be),We=0,Qe=this._ungap[be];We<Qe.length;We++)Q.push(Ne+"="+X(Qe[We]));return Q.join("&")}};for(var h in f)a(p.prototype,h,{configurable:!0,writable:!0,value:f[h]});qn.URLSearchParams=p;function p(Q){var be=i(null);switch(a(this,"_ungap",{value:be}),!0){case!Q:break;case typeof Q=="string":Q.charAt(0)==="?"&&(Q=Q.slice(1));for(var Ne=Q.split("&"),We=0,Qe=Ne.length;We<Qe;We++){var It=Ne[We],vt=It.indexOf("=");-1<vt?ne(be,A(It.slice(0,vt)),A(It.slice(vt+1))):It.length&&ne(be,A(It),"")}break;case r(Q):for(var We=0,Qe=Q.length;We<Qe;We++){var It=Q[We];ne(be,It[0],It[1])}break;case"forEach"in Q:Q.forEach(_,be);break;default:for(var qt in Q)ne(be,qt,Q[qt])}}o(p,"URLSearchParams");function _(Q,be){ne(this,be,Q)}o(_,"addEach");function ne(Q,be,Ne){var We=r(Ne)?Ne.join(","):Ne;be in Q?Q[be].push(We):Q[be]=[We]}o(ne,"appendTo");function A(Q){return decodeURIComponent(Q.replace(c,"%25").replace(u," "))}o(A,"decode");function X(Q){return encodeURIComponent(Q).replace(s,pe)}o(X,"encode");function pe(Q){return d[Q]}o(pe,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(r){}"forEach"in t||(t.forEach=o(function(i,a){var s=this,c=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(u){!u.length||u in c||(c[u]=s.getAll(u)).forEach(function(d){i.call(a,d,u,s)})})},"forEach")),"keys"in t||(t.keys=o(function(){return n(this,function(i,a){this.push(a)})},"keys")),"values"in t||(t.values=o(function(){return n(this,function(i,a){this.push(i)})},"values")),"entries"in t||(t.entries=o(function(){return n(this,function(i,a){this.push([a,i])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=o(function(){for(var i=this.entries(),a=i.next(),s=a.done,c=[],u=Object.create(null),d,f,h;!s;)h=a.value,f=h[0],c.push(f),f in u||(u[f]=[]),u[f].push(h[1]),a=i.next(),s=a.done;for(c.sort(),d=0;d<c.length;d++)this.delete(c[d]);for(d=0;d<c.length;d++)f=c[d],this.append(f,u[f].shift())},"sort"));function n(r,i){var a=[];return r.forEach(i,a),e?a[Symbol.iterator]():{next:function(){var s=a.shift();return{done:s===void 0,value:s}}}}o(n,"iterator"),function(r){var i=r.defineProperty,a=r.getOwnPropertyDescriptor,s=o(function(h){function p(A,X){t.append.call(this,A,X),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}o(p,"append");function _(A){t.delete.call(this,A),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}o(_,"del");function ne(A,X){t.set.call(this,A,X),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}return o(ne,"set"),function(A,X){return A.append=p,A.delete=_,A.set=ne,i(A,"_usp",{configurable:!0,writable:!0,value:X})}},"createSearchParamsPollute"),c=o(function(h){return function(p,_){return i(p,"_searchParams",{configurable:!0,writable:!0,value:h(_,p)}),_}},"createSearchParamsCreate"),u=o(function(h){var p=h.append;h.append=t.append,URLSearchParams.call(h,h._usp.search.slice(1)),h.append=p},"updateSearchParams"),d=o(function(h,p){if(!(h instanceof p))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+p.name)},"verifySearchParams"),f=o(function(h){var p=h.prototype,_=a(p,"searchParams"),ne=a(p,"href"),A=a(p,"search"),X;!_&&A&&A.set&&(X=c(s(A)),r.defineProperties(p,{href:{get:function(){return ne.get.call(this)},set:function(pe){var Q=this._searchParams;ne.set.call(this,pe),Q&&u(Q)}},search:{get:function(){return A.get.call(this)},set:function(pe){var Q=this._searchParams;A.set.call(this,pe),Q&&u(Q)}},searchParams:{get:function(){return d(this,h),this._searchParams||X(this,new URLSearchParams(this.search.slice(1)))},set:function(pe){d(this,h),X(this,pe)}}}))},"upgradeClass");try{f(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&f(URL)}catch(h){}}(Object)})(qn.URLSearchParams.prototype,Object);const cr=qn.URLSearchParams,Gr=60,zr=Gr*60,Gn=zr*24,pi=Gn*7,zt=Gn*30,Zn=Gn*365;function Dn(t,e){typeof t!="number"&&(t=t.getTime());const n=Math.round((new Date().getTime()-t)/1e3);if(n<-30)return l.l10n.t("in {0}",Dn(new Date().getTime()+n*1e3,{ago:!1,short:e==null?void 0:e.short}));if(n<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?l.l10n.t("secs ago"):l.l10n.t("A few seconds ago"):(e==null?void 0:e.short)?l.l10n.t("now"):l.l10n.t("Just now");let r;return n<Gr?(r=n,(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec ago",r):l.l10n.t("{0} second ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs ago",r):l.l10n.t("{0} seconds ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec",r):l.l10n.t("{0} second",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs",r):l.l10n.t("{0} seconds",r)):n<zr?(r=Math.floor(n/Gr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min ago",r):l.l10n.t("{0} minute ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins ago",r):l.l10n.t("{0} minutes ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min",r):l.l10n.t("{0} minute",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins",r):l.l10n.t("{0} minutes",r)):n<Gn?(r=Math.floor(n/zr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr ago",r):l.l10n.t("{0} hour ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs ago",r):l.l10n.t("{0} hours ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr",r):l.l10n.t("{0} hour",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs",r):l.l10n.t("{0} hours",r)):n<pi?(r=Math.floor(n/Gn),(e==null?void 0:e.ago)?r===1?l.l10n.t("{0} day ago",r):l.l10n.t("{0} days ago",r):r===1?l.l10n.t("{0} day",r):l.l10n.t("{0} days",r)):n<zt?(r=Math.floor(n/pi),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk ago",r):l.l10n.t("{0} week ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks ago",r):l.l10n.t("{0} weeks ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk",r):l.l10n.t("{0} week",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks",r):l.l10n.t("{0} weeks",r)):n<Zn?(r=Math.floor(n/zt),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo ago",r):l.l10n.t("{0} month ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos ago",r):l.l10n.t("{0} months ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo",r):l.l10n.t("{0} month",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos",r):l.l10n.t("{0} months",r)):(r=Math.floor(n/Zn),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr ago",r):l.l10n.t("{0} year ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs ago",r):l.l10n.t("{0} years ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr",r):l.l10n.t("{0} year",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs",r):l.l10n.t("{0} years",r))}o(Dn,"fromNow");var Cn,fn;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(fn||(fn={}));class er{constructor(){this[Cn]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=fn.None){const r=this._map.get(e);if(!!r)return n!==fn.None&&this.touch(r,n),r.value}set(e,n,r=fn.None){let i=this._map.get(e);if(i)i.value=n,r!==fn.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case fn.None:this.addItemLast(i);break;case fn.First:this.addItemFirst(i);break;case fn.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){const r=this._state;let i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}[(Cn=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==fn.First&&n!==fn.Last)){if(n===fn.First){if(e===this._head)return;const r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===fn.Last){if(e===this._tail)return;const r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(const[n,r]of e)this.set(n,r)}}o(er,"LinkedMap");class Qn extends er{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=fn.AsNew){return super.get(e,n)}peek(e){return super.get(e,fn.None)}set(e,n){return super.set(e,n,fn.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}o(Qn,"LRUCache");class Nr{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,n=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,i)=>{this.resolver=r,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const r=this.task;return this.task=void 0,r()}})),this.timeout=setTimeout(()=>{var r;this.timeout=void 0,(r=this.resolver)==null||r.call(this,void 0)},n),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}o(Nr,"TaskDebouncer");const mi=Symbol("QuickPickGoBack");var yi;(function(t){async function e(n,r,i,a,s){const c=[],u=n.getRemoteWorkspaceSourceProviders();c.push(...u.map(_=>new xi(_)));const d=await n.getRecentWorkspaceSourceProviders();if(d){const _=await d.provideSources();if(_){const ne=_.reduce((A,X)=>("providerId"in X&&A.push({label:`${X.icon?`${X.icon} `:""}${X.name}`,description:X.description,detail:X.detail,url:X.url,workspace:X.url?void 0:X.workspace,buttons:[Or.OpenInNewWindow],showMore:void 0}),A),[]);c.push({label:l.l10n.t("recently opened"),kind:l.QuickPickItemKind.Separator},...ne)}}const f=l.window.createQuickPick(),h=[];let p=r;try{for(;;){const _=await new Promise(ne=>{h.push(f.onDidHide(()=>ne(void 0)),f.onDidChangeValue(A=>{A=A.trim(),A.length===0?f.items=c:f.activeItems.length===0||f.activeItems[0]instanceof wi?f.items=[new wi(n,A),...c]:f.items=c}),f.onDidAccept(()=>{if(f.activeItems.length!==0){const[A]=f.activeItems;(!(A instanceof wi)||A.validate())&&ne(A)}}),f.onDidChangeActive(()=>{if(p!==void 0||!(s==null?void 0:s.allowAddToWorkspace))return;const[A]=f.activeItems;let X=!0;if(A===void 0?X=Boolean(f.value):X=A instanceof wi,X){if(f.buttons.length===1)return;f.buttons=[Or.AddToWorkspace]}else{if(f.buttons.length===0)return;f.buttons=[]}}),f.onDidTriggerButton(A=>{if(A===Or.AddToWorkspace){const[X]=f.activeItems;if(!(X instanceof wi))return;X.validate()&&(p=ze.AddToWorkspace,ne(X))}}),f.onDidTriggerItemButton(A=>{switch(A.button){case Or.OpenInNewWindow:p=ze.NewWindow,ne(A.item);break;default:break}})),f.title=a,f.placeholder=i,f.matchOnDescription=!0,f.items=c,f.sortByLabel=!1,f.show()});if(_ instanceof xi){const ne=await _.show(p,_.placeholder,a,s);if(ne===mi)continue;const[A,X]=ne;if(A&&"showMore"in A&&A.showMore!==void 0)continue;return[A,X]}if(!(_&&"showMore"in _&&_.showMore!==void 0))return[_,p]}}finally{f.dispose(),h.forEach(_=>void _.dispose())}}o(e,"show"),t.show=e})(yi||(yi={}));class xi{constructor(e){this.provider=e}get label(){return`${this.provider.icon?`${this.provider.icon} `:""}${this.provider.label}`}get placeholder(){return this.provider.placeholder}async show(e,n,r,i){const a=l.window.createQuickPick(),s=new Nr(500),c=[s];async function u(X,pe,Q,be,Ne){const We=await X.provideSources(pe,Q,be,Ne);return We==null?void 0:We.map(Qe=>"showMore"in Qe?{label:Qe.label,showMore:Qe.showMore}:"kind"in Qe?Qe:{label:`${Qe.icon?`${Qe.icon} `:""}${Qe.name}`,description:Qe.description,detail:Qe.detail,url:Qe.url,workspace:Qe.workspace,buttons:[Or.OpenInNewWindow]})}o(u,"getItems");async function d(X){var pe;_=void 0;const Q=a.activeItems;a.items=(pe=X!=null?X:await A)!=null?pe:[],p&&Q.length!==0&&(a.activeItems=a.items.filter(be=>Q.some(Ne=>Ne.url===be.url))),a.busy=!1}o(d,"setItems");let f,h;if(this.provider.provideOrganization&&this.provider.provideProject){if(f=await this.provider.provideOrganization(),!f)return[void 0,void 0];if(h=await this.provider.provideProject(f),!h)return[void 0,void 0]}let p=!1,_,ne=e,A=u(this.provider,f,h,void 0,{sort:"updated"});try{const X=await new Promise(pe=>{c.push(a.onDidHide(()=>pe(void 0)),a.onDidChangeValue(Q=>{p=!1,Q=Q.trim(),a.busy=!0;const be=s.debounce(Q?()=>u(this.provider,f,h,Q,{sort:"stars"}):()=>A);_===void 0&&(_=be.then(Ne=>d(Ne)))}),a.onDidAccept(async()=>{var Q;if(a.activeItems.length!==0){const[be]=a.activeItems;if("showMore"in be){await((Q=be.showMore)==null?void 0:Q.call(be)),A=u(this.provider,f,h,void 0,{sort:"updated"}),await d(await A);return}pe(be)}}),a.onDidChangeActive(()=>{if(p=a.activeItems.length!==0,ne!==void 0||!(i==null?void 0:i.allowAddToWorkspace))return;const[Q]=a.activeItems;if(Q===void 0){if(a.buttons.length===1)return;a.buttons=[l.QuickInputButtons.Back]}else{if(a.buttons.length===2)return;a.buttons=[l.QuickInputButtons.Back,Or.AddToWorkspace]}}),a.onDidTriggerButton(Q=>{if(Q===l.QuickInputButtons.Back){pe(mi);return}if(Q===Or.AddToWorkspace){const[be]=a.activeItems;if(be===void 0)return;ne=ze.AddToWorkspace,pe(be)}}),a.onDidTriggerItemButton(Q=>{switch(Q.button){case Or.OpenInNewWindow:ne=ze.NewWindow,pe(Q.item);break;default:break}})),a.title=r,a.placeholder=n,a.matchOnDetail=!0,a.sortByLabel=!1,a.buttons=[l.QuickInputButtons.Back],a.busy=!0,a.show(),_=s.debounce(()=>A,0).then(Q=>d(Q))});return X===mi?X:[X,ne]}finally{a.dispose(),c.forEach(X=>void X.dispose())}}}o(xi,"RemoteSourceProviderPickerItem");class wi{constructor(e,n){this.url=n,this.alwaysShow=!0,this.canOpenResult=e.canOpenRemoteUrl(n)}get buttons(){return[Or.OpenInNewWindow]}get label(){if(this.canOpenResult){const{provider:e,urlType:n}=this.canOpenResult;switch(n){case G.Branch:return l.l10n.t("Open Branch from {0} Repository",e.name);case G.Tag:return l.l10n.t("Open Tag from {0} Repository",e.name);case G.Commit:return l.l10n.t("Open Commit from {0} Repository",e.name);case G.File:return l.l10n.t("Open File from {0} Repository",e.name);case G.PullRequest:return l.l10n.t("Open Pull Request from {0} Repository",e.name);default:return l.l10n.t("Open {0} Repository",e.name)}}return l.l10n.t("Enter a Remote Url")}get description(){return this.url}validate(){return this.canOpenResult!==void 0}}o(wi,"RemoteUrlQuickPickItem");var Or;(function(t){t.AddToWorkspace={iconPath:new l.ThemeIcon("plus"),tooltip:l.l10n.t("Add to Workspace")},t.OpenInNewWindow={iconPath:new l.ThemeIcon("empty-window"),tooltip:l.l10n.t("Open in New Window")}})(Or||(Or={}));function Si(t,e){return t.reduce((r,i)=>{const a=e(i),s=r.get(a);return s===void 0?r.set(a,[i]):s.push(i),r},new Map)}o(Si,"groupBy");function oa(t){let e=0;for(const n of t){if(n===0)return!0;if(e++,e>8e3)break}return!1}o(oa,"isBinary");function Ji(t,e,n=r=>r){return[...t.reduce((i,a)=>{const s=e(a),c=i.get(s);if(c===void 0)i.set(s,a);else{const u=n(c,a);u!==void 0&&i.set(s,u)}return i},new Map).values()]}o(Ji,"uniqueBy");function ki(t,e){switch(t){case J.Branch:case J.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case J.Tag:return"$(tag)";case J.Commit:return"$(git-commit)"}}o(ki,"headTypeToCodicon");function ei(t){switch(t){case oe.Active:return"$(layers-active)";case oe.Match:return"$(layers-dot)";case oe.Indexed:return"$(layers)"}}o(ei,"indexTypeToCodicon");function ti(t,e){switch(t){case J.Branch:case J.RemoteBranch:return e?new l.ThemeIcon("git-pull-request"):new l.ThemeIcon("git-branch");case J.Tag:return new l.ThemeIcon("tag");case J.Commit:return new l.ThemeIcon("git-commit")}}o(ti,"headTypeToThemeIcon");function*ni(t,e){for(const n of t)yield*e(n)}o(ni,"flatMap");function*ea(t,e){for(const n of t)e(n)&&(yield n)}o(ea,"filter");function*Fi(t,e){for(const n of t){const r=e(n);r!=null&&(yield r)}}o(Fi,"filterMap");function oi(t,e){for(const n of t)if(e(n))return n}o(oi,"find");function sa(t,e){let n="";const r=t[Symbol.iterator]();let i=r.next();if(i.done)return n;for(;;){const a=i.value.toString();if(i=r.next(),i.done){n+=a;break}n+=a,n+=e}return n}o(sa,"join");function*ke(t,e){for(const n of t)yield e(n)}o(ke,"map");function nt(t,e){for(const n of t)if(e(n))return!0;return!1}o(nt,"some");function*yt(...t){for(const e of t)for(const n of e)yield n}o(yt,"union");function*rt(t){const e=new Set;for(const n of t)e.has(n)||(e.add(n),yield n)}o(rt,"unique");const Lt="";function Gt(...t){if(t.length===1){const e=t[0];return e===void 0?Lt:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(Gt,"defaultResolver");function wt(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$serialize$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:Gt)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];const d=o(()=>i.apply(this,s),"run");return u===void 0?u=d():u=u.then(d,d),this[c]=u,u}}}o(wt,"serialize");let Qt=0;function Ut(){return Qt===Number.MAX_SAFE_INTEGER&&(Qt=0),String(++Qt)}o(Ut,"getNextLockId");class pn{constructor(){this.id=Ut()}async synchronize(e){let n;const r=this.promise;this.promise=new Promise(i=>n=i),await r;try{return await e()}finally{n()}}}o(pn,"Lock");class _n{constructor(e){this.lock=new pn,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,n){let r;const i=new _t(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:Ze.Debug});let a;await this.lock.synchronize(async()=>{this.writer&&await this.writer,a=new Promise(s=>r=s),this.readers.add(a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),a!==void 0&&this.readers.delete(a),r()}}async synchronizeWrite(e,n){let r;const i=new _t(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:Ze.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const a=[...this.readers];this.readers.clear(),await Promise.all(a)}this.writer=new Promise(a=>r=a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),r(),this.writer=void 0}}}o(_n,"ReaderWriterLock");class tr{constructor(){this.locks=new Map}async synchronizeRead(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new _n(String(e)),this.locks.set(e,i)),i.synchronizeRead(n,r)}async synchronizeWrite(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new _n(String(e)),this.locks.set(e,i)),i.synchronizeWrite(n,r)}}o(tr,"KeyedReaderWriterLock");const $n=o(class{constructor(t,e,n,r,i){this.providerService=t,this.storageService=e,this.changeStore=n,this.workspaceId=r,this.context=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new _n("WorkspaceRepositories"),this.disposable=l.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this),me.onDidChange(this.onConfigurationChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await l.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void l.window.showTextDocument(t)}onConfigurationChanged(t){if(!me.changed(t,"experimental.syncRecentList"))return;const e=me.get("experimental.syncRecentList")===!0?[$n.storageKey]:[];this.context.globalState.setKeysForSync(e)}onChangeStoreChanged(t){const e=Ji(t.map(n=>n.rootUri),n=>b(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((r,i)=>i.timestamp-r.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(t){const n=b(t);e=e.filter(r=>b(r.canonicalUri)===n)}return e}async getCore(){return this.fromStorage(await this.storageService.get($n.storageKey))}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(t){const e=await this.getRecents();if(e.length!==0)return e.filter(n=>n.provider.id===t)}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),n=`${t.workspaceId}/${b(t.uri)}`,r=e.get(n);if(r===void 0)return;const i=this.changeStore.getScopedChangeStore(r),a=await i.getChanges(r.uri);if(a.length!==0){const s={title:l.l10n.t("Yes")},c={title:l.l10n.t("No"),isCloseAffordance:!0};if(await l.window.showWarningMessage(a.length===1?l.l10n.t(`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):l.l10n.t(`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,a.length),{modal:!0},s,c)!==s)return;await i.discardAll(r.uri)}this.cache.clear(),e.delete(n);try{await this.storageService.store($n.storageKey,this.toStorage(e))}catch(s){throw K.error(s,"Failed to save workspace repositories"),s}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const n of t){const[{HEAD:r,pullRequest:i},a]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),s=await this.changeStore.getChanges(n.uri);e.set(`${this.workspaceId}/${b(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:r.type,name:r.name},idx:(a==null?void 0:a.type)&&oe.hasIndex(a.type)?{type:a.type}:void 0,pullRequest:i?{id:i.id}:void 0,changes:sn(s),timestamp:Date.now()})}try{await this.storageService.store($n.storageKey,this.toStorage(e))}catch(n){throw K.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&T(r)?l.Uri.from(r):r);return new Map(e.workspaceRepositories)}catch(e){return K.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:$n.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let nr=$n;nr.storageKey="workspaceRepositories",nr.storageSchemaVersion=1;function Hn(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}o(Hn,"hasChanges");function jt(t){return Hn(t.changes)}o(jt,"hasUncommittedChanges");function sn(t){let e=0,n=0,r=0;for(const i of t)switch(i.type){case D.Created:e++;break;case D.Changed:n++;break;case D.Deleted:r++;break}return e||n||r?{added:e,changed:n,deleted:r,timestamp:Date.now()}:void 0}o(sn,"toChangesSummary");function yn(t,e,{compact:n=!0,preamble:r,separator:i=", ",short:a=!1,single:s=!1}={}){if(!Hn(e))return t===J.Branch||t===J.RemoteBranch?l.l10n.t("Everything up to date"):l.l10n.t("No uncommitted changes");const{added:c,changed:u,deleted:d}=e;if(s){const h=c+u+d;return h===1?l.l10n.t("{0} change",h):l.l10n.t("{0} changes",h)}let f=`${r!=null?r:""}`;return(c||!n)&&(f+=a?`+${c}`:c===1?l.l10n.t("{0} file added",c):l.l10n.t("{0} files added",c),(u||d||!n)&&(f+=i)),(u||!n)&&(f+=a?`~${u}`:u===1?l.l10n.t("{0} file changed",u):l.l10n.t("{0} files changed",u),(d||!n)&&(f+=i)),(d||!n)&&(f+=a?`-${d}`:d===1?l.l10n.t("{0} file deleted",d):l.l10n.t("{0} files deleted",d)),f}o(yn,"formatChangesSummary");class Xt extends Error{constructor(e){var n;const r=typeof e=="string"?e:Vn.getProviderId(e);super(`No provider registered with ${r}`);this.id=r,(n=Error.captureStackTrace)==null||n.call(Error,this,Xt)}}o(Xt,"ProviderNotFoundError");class x{constructor(e,n,r,i,a){this.providerService=e,this.uri=n,this.id=r,this.name=i,this.provider={id:a.id,name:a.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}o(x,"VirtualRepository");var te;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(te||(te={}));var Re;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(Re||(Re={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(Re||(Re={}));var at;(function(t){function e(n){return n!==void 0&&n.type===3}o(e,"isActive"),t.isActive=e})(at||(at={}));var Et;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(Et||(Et={}));var Mt;(function(t){function e(n){const r=k.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:1};if(N(r.idx))return{type:2,sha:r.idx}}}o(e,"decode"),t.decode=e})(Mt||(Mt={}));function gn(t){return t!==void 0&&typeof t.then=="function"}o(gn,"isPromise");const vn="";function en(...t){if(t.length===1){const e=t[0];return e===void 0?vn:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(en,"gate_defaultResolver");function tn(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$gate$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:en)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];if(u===void 0){let d;try{if(d=i.apply(this,s),d==null||!gn(d))return d;this[c]=u=d.then(f=>(this[c]=void 0,f)).catch(f=>{throw this[c]=void 0,f})}catch(f){throw this[c]=void 0,f}}return u}}}o(tn,"gate");var mn=Object.defineProperty,$t=Object.getOwnPropertyDescriptor,St=o((t,e,n,r)=>{for(var i=r>1?void 0:r?$t(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&mn(e,n,i),i},"__decorateClass");class bn{constructor(){this.hasShownRepositoryNotValidMessage=!1}async showRepositoryNotValidMessage(){if(this.hasShownRepositoryNotValidMessage)return;this.hasShownRepositoryNotValidMessage=!0;const e=l.l10n.t("Open Repository");await l.window.showErrorMessage(l.l10n.t("The current workspace is not a valid repository. Would you like to open another repository?"),{modal:!0},e)===e&&l.commands.executeCommand("remoteHub.openRepository")}showGitHubStatus500Message(){return l.window.showErrorMessage(l.l10n.t("GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),l.l10n.t("OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate");await l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&e()}async showStatus403Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials do not have the required access."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate"),r=l.l10n.t("The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await l.window.showErrorMessage(r,n)===n&&e()}async showProviderNotFoundMessage(e){const n=Fn.get(e.id);if(n&&l.extensions.getExtension(n[0])===void 0){const r=l.l10n.t("Install");if(await l.window.showInformationMessage(l.l10n.t("Extension '{0}' is not installed. Would you like to install the extension and reload the window to open this workspace?",n[1]),{modal:!0},r)!==r)return;await l.commands.executeCommand("workbench.extensions.installExtension",n[0]),await l.commands.executeCommand("workbench.action.reloadWindow")}}}o(bn,"Messages"),St([tn(()=>"")],bn.prototype,"showRepositoryNotValidMessage",1),St([tn(()=>"")],bn.prototype,"showGitHubStatus500Message",1),St([tn(()=>"")],bn.prototype,"showStatus401Message",1),St([tn(()=>"")],bn.prototype,"showStatus403Message",1),St([tn()],bn.prototype,"showProviderNotFoundMessage",1);const Fn=new Map([["github",["GitHub.remotehub","GitHub Repositories"]],["azurerepos",["ms-vscode.azure-repos","Azure Repos"]]]),Nn=new bn;async function kn(t,e,n){var r,i,a,s,c;if(Le.instance.publicLog2("openWorkspace",{location:e.location}),e.location===ze.AddToWorkspace){const d=(i=(r=l.workspace.workspaceFolders)==null?void 0:r.length)!=null?i:0;return void l.workspace.updateWorkspaceFolders(d,0,{uri:e.uri,name:e.name})}if(e.location===ze.CurrentWindow&&!(n==null?void 0:n.skipChangesPrompt)){const d=await t.getWorkspaceProvidersWithChanges();if(d.length){const f={title:l.l10n.t("Continue")},h={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(Vt?l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(_=>_.name).join(", ")):l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(_=>_.name).join(", ")),{modal:!0},f,h)!==f){Le.instance.publicLog2("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const u=l.env.remoteName?!0:void 0;return e.filesToOpen&&(e.location===ze.CurrentWindow&&u===void 0&&((a=l.workspace.workspaceFolders)==null?void 0:a.length)===1&&l.workspace.workspaceFolders[0].uri.toString()===e.uri.toString()?await((s=Ro())==null?void 0:s.openPendingFiles(e.uri,e.filesToOpen)):await((c=Ro())==null?void 0:c.setPendingFilesToOpen(e.uri,e.filesToOpen))),Le.instance.publicLog2("openWorkspace.success",{location:e.location,forceLocalWindow:String(u)}),void l.commands.executeCommand("vscode.openFolder",e.uri,{forceNewWindow:e.location===ze.NewWindow,forceLocalWindow:u})}o(kn,"openWorkspace");var Yt=dr(6724),Br=Object.defineProperty,Er=Object.getOwnPropertyDescriptor,Un=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Er(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Br(e,n,i),i},"providers_decorateClass");const rr=o(class{constructor(t,e){this.telemetryService=t,this.workspaceState=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new l.EventEmitter,this._onDidChangeChangeStore=new l.EventEmitter,this._onDidChangeWorkspaceRepositories=new l.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new l.EventEmitter,this._onDidChangeRepository=new l.EventEmitter,this._onDidSyncRepository=new l.EventEmitter,this._onDidRefresh=new l.EventEmitter,this._onWillRefresh=new l.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=l.Disposable.from(l.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeChangeStore(){return this._onDidChangeChangeStore.event}get onDidChangeWorkspaceRepositories(){return this._onDidChangeWorkspaceRepositories.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(b(t.uri));!e||(K.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}addRepository(t){const e=b(t.uri);if(t.uri.scheme!==rr.scheme||this._repositories.has(e))return;const n=this.getProvider(t.uri);if(!n)return;this._repositories.set(e,null);const{repo:r,name:i}=this.getVirtualUriMetadata(t.uri),a=new x(this,t.uri,r,i,n);this._repositories.set(e,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.publicLog2("repository.opened",{provider:n.id,repositories:this._repositories.size.toString()})}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added)this.addRepository(e);if(t.removed.length)for(const e of t.removed){const n=b(e.uri);if(e.uri.scheme!==rr.scheme||!this._repositories.has(n))continue;const r=this._repositories.get(n);this._repositories.delete(n),r&&(this._onDidChangeRepositories.fire({added:[],removed:[r]}),this.telemetryService.publicLog2("repository.closed",{repositories:this._repositories.size.toString()}))}Rr(Xn.HasVirtualFolders,this._repositories.size!==0),Rr(Xn.VirtualFolderProviders,sa(rt(ke(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...ke(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,n,r,i,a,s,c){var u;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const d={id:t,name:e,provider:n,fs:r,storage:i,changeStore:a,metadataStore:s,workspaceRepositories:c};this._providers.set(t,d);const f=l.Disposable.from(d.metadataStore.onDidChange(h=>this.onMetadataChanged(h)),d.changeStore.onDidChange(h=>this._onDidChangeChangeStore.fire(h)),d.workspaceRepositories.onDidChange(async()=>{const h=await this.workspaceRepositoriesGetRepositories();Rr(Xn.HasRecentRepositories,h.length>0),this._onDidChangeWorkspaceRepositories.fire()}));return this._onDidChangeProviders.fire({added:[d],removed:[]}),this.telemetryService.publicLog2("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(u=l.workspace.workspaceFolders)!=null?u:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const h=[];for(const[p,_]of[...this._repositories])(_==null?void 0:_.provider.id)===t&&(this._repositories.delete(p),h.push(_));this._onDidChangeRepositories.fire({added:[],removed:h}),this._onDidChangeProviders.fire({added:[],removed:[d]}),f.dispose()}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const n of this._providers.values()){t.push(...ke(this.getRepositories(n.id),i=>i.uri));const r=this._indexProviders.get(n.id);r!==void 0&&e.push(r)}this._onWillRefresh.fire(t),t.forEach(n=>this.getMetadataStore(n).refresh()),e.forEach(n=>n.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){var n;const r=l.workspace.getWorkspaceFolder(t);if(!r||r.uri.scheme!==rr.scheme)return;const i=(n=this._repositories.get(b(r.uri)))!=null?n:this.addRepository(r);if(!(e!==void 0&&(i==null?void 0:i.provider.id)!==e))return i!=null?i:void 0}getRepositories(t){return ea(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const n=typeof t=="string"?t:rr.getProviderId(t),r=this._providers.get(n);return e!==void 0&&(r==null?void 0:r.id)!==e?!1:r!==void 0}getProvider(t){const e=typeof t=="string"?t:rr.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.provider;if(n)return n;throw new Xt(t)}getChangeStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.changeStore;if(n)return n;throw new Xt(t)}getMetadataStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.metadataStore;if(n)return n;throw new Xt(t)}getWorkspaceRepositories(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.workspaceRepositories;if(n)return n;throw new Xt(t)}getFileSystemProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.fs;if(n)return n;throw new Xt(t)}getStorageService(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.storage;if(n)return n;throw new Xt(t)}async getRecentWorkspaceSourceProviders(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.getRemoteWorkspaceSourceProvider(e.id);t.push(...n!=null?n:[])}if(t.length!==0)return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:l.l10n.t("Choose a recent repository"),provideSources:function(e,n,r,i){return t.sort((a,s)=>s.timestamp-a.timestamp).map(a=>({providerId:a.provider.id,name:a.name,icon:"$(repo)",description:Dn(a.timestamp,{ago:!0}),detail:`${a.provider.name}${a.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${a.pullRequest.id}`:""}${k.isCanonicalUri(a.uri)?"":`\xA0\xA0\u2022\xA0\xA0${ki(a.ref.type)} ${a.ref.name}`}\xA0\xA0\u2022\xA0\xA0${yn(a.ref.type,a.changes)}${a.idx?`\xA0\xA0\u2022\xA0\xA0${ei(a.idx.type)}`:""}`,workspace:{uri:a.uri,name:a.name,location:ze.CurrentWindow}}))}}}getRemoteWorkspaceSourceProviders(t){var e,n,r,i;return t?(i=(r=(e=this.getProvider(t))==null?void 0:(n=e.provider).getRemoteWorkspaceSourceProviders)==null?void 0:r.call(n))!=null?i:[]:[...ni(this._providers.values(),a=>{var s,c,u;return(u=(c=(s=a.provider).getRemoteWorkspaceSourceProviders)==null?void 0:c.call(s))!=null?u:[]})]}async getWorkspaceProvidersWithChanges(){var t,e;const n=new Map;for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])if(r.uri.scheme===k.scheme&&await this.getChangeStore(r.uri).hasChanges(r.uri)){const i=(e=this.getRepository(r.uri))==null?void 0:e.provider;if(!i)continue;n.set(i.id,i)}return[...n.values()]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new Xt(t);return e==null?void 0:e.provider.getAuthentication(t)}getHttpsCloneUri(t){var e,n;const r=this.canOpenRemoteUrl(t.toString());return(n=r==null?void 0:(e=r.provider.provider).getHttpsCloneUri)==null?void 0:n.call(e,t)}canOpenRemoteUrl(t,e){if(e){const n=this.getProvider(e),r=n==null?void 0:n.provider.canOpenRemoteUrl(t);return r!==void 0?{provider:n,urlType:r}:void 0}for(const n of this._providers.values()){const r=n.provider.canOpenRemoteUrl(t);if(r!==void 0)return{provider:n,urlType:r}}}async createWorkspaceForRemoteUrl(t,e,n=ze.CurrentWindow){var r;const i=this.canOpenRemoteUrl(t,e);return(r=i==null?void 0:i.provider)==null?void 0:r.provider.createWorkspaceForRemoteUrl(t,n)}async openWorkspace(t,e){return kn(this,t,e)}createProviderUri(t,e,n){return k.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(rr.baseVirtualWorkspaceUri,e,n))}createRelativeProviderUri(t,e){return k.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const n=this.getProviderRootUri(t);let r=`${n.path}/`;r.endsWith("/")&&(r=r.slice(0,-1));const i=n.with({path:`${n.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===rr.scheme?k.getVirtualUri(i):i}createRelativeVirtualUri(t,e){return k.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,n){return this.getRepositoryProvider(t).createVirtualUri(rr.baseVirtualWorkspaceUri,e,n)}async getBestRemoteUri(t,e,n){const{provider:r,repo:i,ref:a}=this.getVirtualUriMetadata(t);if(e===te.Repository)return this.getRemoteUri(r.id,{repo:i,path:n});if(e===te.PullRequest||e===void 0&&(a==null?void 0:a.type)===we.PullRequest){if((a==null?void 0:a.type)===we.PullRequest)return this.getRemoteUri(r.id,{repo:i,pullRequest:{id:a.id},path:n});const{pullRequest:s}=await this.getMetadata(t);if(e===te.PullRequest&&s)return this.getRemoteUri(r.id,{repo:i,pullRequest:{id:s.id},path:n})}if(e===te.Branch||e===void 0&&(a==null?void 0:a.type)===we.Branch){if((a==null?void 0:a.type)===we.Branch)return this.getRemoteUri(r.id,{repo:i,branch:a.id,path:n});const{HEAD:s}=await this.getMetadata(t);if(s.type===J.Branch||s.type===J.RemoteBranch&&e===te.Branch)return this.getRemoteUri(r.id,{repo:i,branch:s.branch.name,path:n})}if(e===te.Tag||e===void 0&&(a==null?void 0:a.type)===we.Tag){if((a==null?void 0:a.type)===we.Tag)return this.getRemoteUri(r.id,{repo:i,tag:a.id,path:n});const{HEAD:s}=await this.getMetadata(t);if(s.type===J.Tag)return this.getRemoteUri(r.id,{repo:i,tag:s.detached.name,path:n})}if(e===te.Commit||e===void 0&&((a==null?void 0:a.type)===we.Commit||(a==null?void 0:a.type)===we.Tree&&N(a.id))){if((a==null?void 0:a.type)===we.Commit||(a==null?void 0:a.type)===we.Tree&&N(a.id))return this.getRemoteUri(r.id,{repo:i,sha:a.id,path:n});const{HEAD:s}=await this.getMetadata(t);if(e===te.Commit||s.type===J.Commit)return this.getRemoteUri(r.id,{repo:i,sha:s.sha,path:n})}if(e===void 0&&(a==null?void 0:a.type)===we.Tree&&!N(a.id))return this.getRemoteUri(r.id,{repo:i,branch:a.id,path:n});if(e===void 0)return this.getRemoteUri(r.id,{repo:i,path:n})}getCanonicalUri(t){let{authority:e}=t;const n=e.indexOf(rr.authoritySeparator);return n!==-1&&(e=e.substr(0,n)),t.with({authority:e})}getRemoteUri(t,e){return this.getRepositoryProvider(t).getRemoteUri(e)}getProviderRootUri(t){return t=k.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=k.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=k.getVirtualUri(this.getProviderRootUri(t));let{authority:n}=e;const r=n.indexOf(rr.authoritySeparator);return r!==-1&&(n=n.substr(0,r)),e.with({authority:n})}getVirtualRootUri(t){return k.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=l.workspace.getWorkspaceFolder(k.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,n){var r,i;const a=this.getChangeStore(t);return(i=(r=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:i.call(r,t,e,n,a)}async getCommitOperations(t,e){const n=this.getChangeStore(t);let r;return(e==null?void 0:e.staged)?(r=await n.getStagedChanges(t),r.length===0&&e.staged==="auto"&&(r=await n.getChanges(t))):r=await n.getChanges(t),r.map(a=>{const s=this.getRelativeFilePath(t,a.uri);switch(a.type){case D.Created:case D.Changed:return{type:a.type,path:s,fileType:a.fileType,content:n.readFile(a.uri).then(async c=>{if(!c)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content undefined"}),new Error("No working content for created or changed commit operation");if(await Tn(c)!==a.hash)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content hash mismatch"}),new Error("Working file content hash does not match expected file content hash");return c})};case D.Deleted:return{type:a.type,path:s,fileType:a.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,n){return me.getMode(this.getVirtualRootUri(t),e,Boolean(n))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.id;return n?this._indexProviders.get(n):void 0}async getMetadataCore(t){const e=b(t);let n=this.pendingMetadataRequests.get(e);if(n)return n;let{revision:r,cachedMetadata:i}=await this.getMetadataStore(t).get(t);if(i!==void 0)return i;await this.getChangeStore(t).hasChanges(t)||(r=void 0);const a=this.getProvider(t);if(!a)throw new Xt(t);const s=Mt.decode(t);(s==null?void 0:s.type)===Et.SHA&&(r=s.sha);try{n=a.provider.createMetadata(t,r),this.pendingMetadataRequests.set(e,n);const c=await n;return await this.updateMetadataCore(t,c,{silent:!0}),c}catch(c){throw Xe.asVirtualProviderErrorCode(c)===ae.InvalidRepositoryError&&Nn.showRepositoryNotValidMessage(),c}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const n=new _t(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.getMetadataStore(t).set(k.getVirtualUri(t),e.HEAD.sha,e)}finally{n.stop()}}updateMetadataCore(t,e,n){return this.getMetadataStore(t).set(k.getVirtualUri(t),e.HEAD.sha,e,n)}async getRepositoryContext(t,e="http"){var n;e=e!=null?e:me.get("gitProtocol");let{HEAD:r,cloneUrl:i}=await this.getMetadata(t.uri);if(((n=r.branch)==null?void 0:n.remote)!==void 0){const a=this.getRemoteUri(t.provider.id,{repo:r.branch.remote.repo});return{cloneUrl:i}=await this.getMetadata(a),{uri:e==="http"?i.http:i.ssh,ref:r.branch.name,name:r.branch.remote.name}}return{uri:e==="http"?i.http:i.ssh,ref:r.name,name:t.name}}async clone(t){const{uri:e,ref:n}=await this.getRepositoryContext(t);if(!e)throw new Error("No url found for clone");let r=`${l.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(e)}`;if(n!==void 0&&(r+=`&ref=${encodeURIComponent(n)}`),Vt)return l.Uri.parse(r);const i=o(async a=>{try{await a.activate(),await l.commands.executeCommand("git.clone",e,void 0,{ref:n})}catch(s){K.error(s,"Unable to clone repository");const c=l.l10n.t("Could not clone your repository as Git is not installed."),u=l.l10n.t("Download Git");await l.window.showErrorMessage(c,{modal:!0},u)===u&&await l.commands.executeCommand("vscode.open",l.Uri.parse("https://aka.ms/vscode-download-git"))}},"cloneRepository");if(l.workspace.isTrusted){const a=l.extensions.getExtension("vscode.git");if(a)await i(a);else throw new Error("Git extension not found")}else return l.Uri.parse(`${r}&windowId=_blank`)}createBranch(t,e,n,r){return this.getRepositoryProvider(t).createBranch(t,e,n,r)}createAndPushCommit(t,e,n,r,i,a){return this.getRepositoryProvider(t).createAndPushCommit(t,e,n,r,i,a)}createPullRequest(t,e,n,r,i,a){return this.getRepositoryProvider(t).createPullRequest(t,e,n,r,i,a)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}async fetchOrSync(t){await this.getChangeStore(t).hasChanges(t)?await this.fetch(t):await this.sync(t,{reason:"invoked"})}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranch(t,e){return this.getRepositoryProvider(t).getBranch(t,e)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.getCommits(t,e)}compareCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.compareCommits(t,e)}getFileContent(t,e,n){return this.getRepositoryProvider(t).getFileContent(t,e,n)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,n,r;return(r=(n=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:n.call(e,t))!=null?r:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSubmodules(t){var e,n;return(n=(e=this.getRepositoryProvider(t)).getSubmodules)==null?void 0:n.call(e,t)}getSnapshots(t,e){var n,r;return(r=(n=this.getIndexProvider(t))==null?void 0:n.getSnapshots(t,e))!=null?r:Promise.resolve([])}async getTarGz(t,e,n){var r,i;return(i=(r=this.getRepositoryProvider(t)).getTarGz)==null?void 0:i.call(r,t,e,n)}async loadWorkspaceContents(t){return await kr(this,t),this.getRepositoryProvider(t).loadWorkspaceContents(t)}switchTo(t,e,n){return this.getRepositoryProvider(t).switchTo(t,e,n)}async sync(t,e){const n=this._repositories.get(b(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const r=this.getProvider(t),i=this.getIndexProvider(t);if(r===void 0)throw new Xt(t);let{to:a,reason:s,...c}=e!=null?e:{};a===void 0&&i&&(a=await i.resolveIndexRef(t,s==="user"));const u=this.getChangeStore(t);if(await u.hasMergeConflicts(t))throw Xe.UnresolvedConflictsError();return await r.provider.sync(t,u,{conflictResolution:ve.Abort,...c,to:a})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}changeStoreApplyChangeset(t,e,n){return this.getChangeStore(t).applyChangeset(t,e,n)}changeStoreCreateFile(t,e){return this.getChangeStore(t).createFile(t,e)}changeStoreCreateDirectory(t){return this.getChangeStore(t).createDirectory(t)}changeStoreDeleteDirectory(t){return this.getChangeStore(t).deleteDirectory(t)}changeStoreDeleteFile(t){return this.getChangeStore(t).deleteFile(t)}changeStoreExportDebugInfo(){var t;for(const e of(t=l.workspace.workspaceFolders)!=null?t:[])this.getChangeStore(e.uri).exportDebugInfo(e.uri)}changeStoreGetChange(t){return this.getChangeStore(t).getChange(t)}changeStoreGetChanges(t,e){return this.getChangeStore(t).getChanges(this.stripUriScope(t),e)}changeStoreGetScopedChangeStore(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedChangeStore(n)}changeStoreGetScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedUri(t,n)}changeStoreHasChanges(t){return this.getChangeStore(t).hasChanges(this.stripUriScope(t))}changeStoreMaybeHasChanges(t,e){return this.getChangeStore(t).maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}changeStoreReadFile(t){return this.getChangeStore(t).readFile(t)}changeStoreResolveDiffCommand(t,e,n,r){return this.getChangeStore(t).resolveDiffCommand(t,e,n,r)}changeStoreStat(t){return this.getChangeStore(t).stat(t)}changeStoreUpdateDirectoryEntries(t,e){return this.getChangeStore(t).updateDirectoryEntries(t,e)}changeStoreWriteFile(t,e,n,r){return this.getChangeStore(t).writeFile(t,e,n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}getFromStorage(t,e){return this.getStorageService(t).get(e)}async storeInStorage(t,e,n){return this.getStorageService(t).store(e,n)}async deleteFromStorage(t,e){return this.getStorageService(t).delete(e)}async workspaceRepositoriesGetRepositoriesByCanonicalUri(){const t=await this.workspaceRepositoriesGetRepositories();return Si(t.sort((e,n)=>n.timestamp-e.timestamp),e=>b(e.canonicalUri))}workspaceRepositoriesRemoveRepository(t){return this.getWorkspaceRepositories(t.uri).remove(t)}workspaceRepositoriesRefresh(){for(const[,t]of this._providers.entries())t.workspaceRepositories.refresh()}async workspaceRepositoriesGetRepositories(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.get();t.push(...n.filter(r=>r.provider.id===e.id))}return t}provideFileSearchResults(t,e,n){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,n)}provideTextSearchResults(t,e,n,r){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,n,r)}static getProviderId(t){const{authority:e}=t,n=e.indexOf(rr.authoritySeparator);return n!==-1?e.substr(0,n):e}static isCanonicalUri(t){return t.authority.indexOf(rr.authoritySeparator)===-1}},"_VirtualProviderService");let Vn=rr;Vn.scheme="vscode-vfs",Vn.authoritySeparator="+",Vn.baseVirtualWorkspaceUri=l.Uri.parse(`${rr.scheme}://`),Un([wt()],Vn.prototype,"getMetadataCore",1);function Hr(t,e,n){async function r(s,c){await kr(t,void 0);const[u,d]=typeof s=="string"?[{url:s,workspace:void 0}]:await yi.show(t,c,l.l10n.t("Enter a remote url, or select a remote provider"),c===ze.AddToWorkspace?l.l10n.t("Add Remote Repository to Workspace"):l.l10n.t("Open Remote Repository"),{allowAddToWorkspace:!1});if(!u){n.publicLog2("openRepository.abort",{reason:"abandoned"});return}try{let f;if(u.workspace)f=u.workspace,f.location=d!=null?d:f.location;else if(f=await t.createWorkspaceForRemoteUrl(u.url,void 0,d!=null?d:c),!f){n.publicLog2("openRepository.abort",{reason:"aborted invalid url"});return}await kn(t,f)}catch(f){if(n.sendException(f),Xe.asVirtualProviderErrorCode(f)===ae.InvalidCredentialsError){const{action:h}=f;if(h){Nn.showStatus401Message(()=>h());return}}K.error(f)}}o(r,"openRepository");async function i(s,c){const u=c?t.repositories.filter(d=>d.provider.id===c):t.repositories;if(u.length!==0){if(u.length>1){const d=await l.window.showQuickPick(u.map(f=>({label:f.name,description:f.provider.name,repository:f})),{placeHolder:s});return d?d.repository:void 0}return u[0]}}o(i,"getRepository");async function a(s,c,u=!1){var d;const f=await i(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(f===void 0)return;const h=Ci(c);if(!h)return;const p=s.getRelativeFilePath(h.uri),_=await s.getMetadata(f.uri),ne=((d=_.HEAD.branch)==null?void 0:d.name)===_.defaultBranch.name||_.pullRequest?await s.getBestRemoteUri(f.uri,te.Branch,p):await s.getBestRemoteUri(f.uri,void 0,p);if(ne===void 0)return;const A=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",X=h.type===Qr.File?`${_i(h.range)}`:`${ri(h.cellIndex,h.range)}`;return ne.with({authority:`${A}/${ne.authority}`,fragment:u?X:void 0,path:Y(ne.path)})}return o(a,"getLink"),[l.commands.registerCommand("remoteHub.openRepository",s=>(n.publicLog2("command.openRepository"),r(s))),l.commands.registerCommand("remoteHub.continueOn.openRepository",s=>(n.publicLog2("command.continueOn.openRepository"),r(s))),l.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn",async()=>l.commands.executeCommand("_workbench.editSessions.actions.continueEditSession")),l.commands.registerCommand("remoteHub.openOnDesktop",async()=>{if(!Vt)return;const s=await i(l.l10n.t("Choose which repository to open on the desktop"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c!==void 0)return n.publicLog2("command.openOnDesktop"),l.Uri.parse(`${l.env.uriScheme}://${e}/open?url=${encodeURIComponent(c.toString(!0))}`)}),l.commands.registerCommand("remoteHub.clone",async()=>{const s=await i(l.l10n.t("Choose which repository to clone"),void 0);if(s!==void 0){if(n.publicLog2("command.clone"),await t.changeStoreHasChanges(s.uri)&&l.workspace.getConfiguration("workbench.experimental.editSessions").get("autoResume")==="off"){const c={title:l.l10n.t("Continue")},u={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},c,u)!==c){n.publicLog2("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}return t.clone(s)}}),l.commands.registerCommand("remoteHub.continueEditSession.openOnWeb",async()=>{if(Vt)return;const s=await i(l.l10n.t("Choose which repository to open on the web"));if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev";return c.with({authority:`${u}/${c.authority}`})}),l.commands.registerCommand("remoteHub.openOnWeb",async()=>{if(Vt)return;const s=await i(l.l10n.t("Choose which repository to open on the web"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",d=c.with({authority:`${u}/${c.authority}`});n.publicLog2("command.openOnWeb"),l.env.openExternal(d)}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkFile",async()=>{const s=await i(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",d=c.with({authority:`${u}/${c.authority}`});await l.env.clipboard.writeText(d.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLink",async s=>{const c=await a(t,s,!0);c&&await l.env.clipboard.writeText(c.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkWithoutRange",async s=>{const c=await a(t,s,!1);c&&await l.env.clipboard.writeText(c.toString(!0))}),l.commands.registerCommand("remoteHub.goToRepository",async()=>{n.publicLog2("command.goToRepository");const s=await i(l.l10n.t("Choose which repository to open on the remote"));if(!s)return;const c={provider:s.provider,repo:s.id};return l.commands.executeCommand("remoteHub.openOnRemote",c)}),l.commands.registerCommand("remoteHub.openOnRemote",async s=>{n.publicLog2("command.openOnRemote");const{provider:c,...u}=s,d=t.getRemoteUri(c.id,u);if(d){await l.env.openExternal(d);return}l.window.showErrorMessage(l.l10n.t("Unable to open the resource on {0}",s.provider.name))}),l.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),l.commands.registerCommand("remoteHub.enableDebugLogging",()=>me.updateEffective("logLevel",Ze.Debug)),l.commands.registerCommand("remoteHub.disableDebugLogging",()=>me.updateEffective("logLevel",Ze.Warn)),l.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{t.changeStoreExportDebugInfo()}),l.commands.registerCommand("remoteHub.setContext",async(s,c)=>{if(!s.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await Rr(s,c)}),l.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const s={title:l.l10n.t("Continue Working On...")};await l.window.showInformationMessage(l.l10n.t("Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},s)===s&&await l.commands.executeCommand("remoteHub.continueOn")}),l.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>Vt?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}o(Hr,"registerCommands");function yr(t){return t}o(yr,"command");async function qr(t,e){return l.commands.executeCommand(t,e)}o(qr,"executeCommand");var Qr;(function(t){t[t.File=1]="File",t[t.Notebook=2]="Notebook"})(Qr||(Qr={}));function Yr(t){return t instanceof l.Uri?{fileUri:t,lineNumber:void 0}:t!==void 0&&"lineNumber"in t&&"uri"in t?{fileUri:t.uri,lineNumber:t.lineNumber}:{fileUri:void 0,lineNumber:void 0}}o(Yr,"extractContext");function Ci(t){var e,n,r;let i;const{fileUri:a,lineNumber:s}=Yr(t),c=a!=null?a:(e=l.window.activeTextEditor)==null?void 0:e.document.uri;if(c){if(c.scheme==="vscode-notebook-cell"&&((n=l.window.activeNotebookEditor)==null?void 0:n.notebook.uri.fsPath)===c.fsPath){const u=l.window.activeNotebookEditor.notebook.getCells().find(f=>f.document.uri.fragment===(c==null?void 0:c.fragment)),d=(r=u==null?void 0:u.index)!=null?r:l.window.activeNotebookEditor.selection.start;return i=si(s),{type:2,uri:c,cellIndex:d,range:i}}return i=si(s),{type:1,uri:c,range:i}}if(l.window.activeNotebookEditor)return{type:2,uri:l.window.activeNotebookEditor.notebook.uri,cellIndex:l.window.activeNotebookEditor.selection.start,range:void 0}}o(Ci,"getFileAndPosition");function si(t){var e;return t!==void 0&&(!l.window.activeTextEditor||l.window.activeTextEditor.selection.isEmpty||!l.window.activeTextEditor.selection.contains(new l.Position(t-1,0)))?new l.Range(t-1,0,t-1,1):(e=l.window.activeTextEditor)==null?void 0:e.selection}o(si,"getRangeOrSelectionForLink");function _i(t){if(!t)return"";let e=`L${t.start.line+1}`;return t.start.line!==t.end.line&&(e+=`-L${t.end.line+1}`),e}o(_i,"rangeString");function ri(t,e){if(t===void 0)return"";if(!e)return`C${t+1}`;let n=`C${t+1}:L${e.start.line+1}`;return e.start.line!==e.end.line&&(n+=`-L${e.end.line+1}`),n}o(ri,"notebookCellRangeString");function bi(t,e,n){return new ut(new hr(t),new hr(e)).ComputeDiff(n).changes}o(bi,"stringDiff");class Lr{constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}o(Lr,"DiffChange");var Ei;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(Ei||(Ei={}));function Xr(t,e){return(e<<5)-e+t|0}o(Xr,"numberHash");function li(t,e){e=Xr(149417,e);for(let n=0,r=t.length;n<r;n++)e=Xr(t.charCodeAt(n),e);return e}o(li,"stringHash");class hr{constructor(e){this.source=e}getElements(){const e=this.source,n=new Int32Array(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}}o(hr,"StringDiffSequence");class Jr{static Assert(e,n){if(!e)throw new Error(n)}}o(Jr,"Debug");class he{static Copy(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}static Copy2(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}}o(he,"MyArray");var qe;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(qe||(qe={}));class st{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Lr(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}o(st,"DiffChangeHelper");class ut{constructor(e,n,r=null){this.ContinueProcessingPredicate=r,this._originalSequence=e,this._modifiedSequence=n;const[i,a,s]=ut._getElements(e),[c,u,d]=ut._getElements(n);this._hasStrings=s&&d,this._originalStringElements=i,this._originalElementsOrHash=a,this._modifiedStringElements=c,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const n=e.getElements();if(ut._isStringArray(n)){const r=new Int32Array(n.length);for(let i=0,a=n.length;i<a;i++)r[i]=li(n[i],0);return[n,r,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}ElementsAreStrictEqual(e,n){if(!this.ElementsAreEqual(e,n))return!1;const r=ut._getStrictElement(this._originalSequence,e),i=ut._getStrictElement(this._modifiedSequence,n);return r===i}static _getStrictElement(e,n){return typeof e.getStrictElement=="function"?e.getStrictElement(n):null}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,r,i,a){const s=[!1];let c=this.ComputeDiffRecursive(e,n,r,i,s);return a&&(c=this.PrettifyChanges(c)),{quitEarly:s[0],changes:c}}ComputeDiffRecursive(e,n,r,i,a){for(a[0]=!1;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let h;return r<=i?(Jr.Assert(e===n+1,"originalStart should only be one more than originalEnd"),h=[new Lr(e,0,r,i-r+1)]):e<=n?(Jr.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new Lr(e,n-e+1,r,0)]):(Jr.Assert(e===n+1,"originalStart should only be one more than originalEnd"),Jr.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const s=[0],c=[0],u=this.ComputeRecursionPoint(e,n,r,i,s,c,a),d=s[0],f=c[0];if(u!==null)return u;if(!a[0]){const h=this.ComputeDiffRecursive(e,d,r,f,a);let p=[];return a[0]?p=[new Lr(d+1,n-(d+1)+1,f+1,i-(f+1)+1)]:p=this.ComputeDiffRecursive(d+1,n,f+1,i,a),this.ConcatenateChanges(h,p)}return[new Lr(e,n-e+1,r,i-r+1)]}WALKTRACE(e,n,r,i,a,s,c,u,d,f,h,p,_,ne,A,X,pe,Q){let be=null,Ne=null,We=new st,Qe=n,It=r,vt=_[0]-X[0]-i,qt=-1073741824,hn=this.m_forwardHistory.length-1;do{const nn=vt+e;nn===Qe||nn<It&&d[nn-1]<d[nn+1]?(h=d[nn+1],ne=h-vt-i,h<qt&&We.MarkNextChange(),qt=h,We.AddModifiedElement(h+1,ne),vt=nn+1-e):(h=d[nn-1]+1,ne=h-vt-i,h<qt&&We.MarkNextChange(),qt=h-1,We.AddOriginalElement(h,ne+1),vt=nn-1-e),hn>=0&&(d=this.m_forwardHistory[hn],e=d[0],Qe=1,It=d.length-1)}while(--hn>=-1);if(be=We.getReverseChanges(),Q[0]){let nn=_[0]+1,Wt=X[0]+1;if(be!==null&&be.length>0){const dn=be[be.length-1];nn=Math.max(nn,dn.getOriginalEnd()),Wt=Math.max(Wt,dn.getModifiedEnd())}Ne=[new Lr(nn,p-nn+1,Wt,A-Wt+1)]}else{We=new st,Qe=s,It=c,vt=_[0]-X[0]-u,qt=1073741824,hn=pe?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const nn=vt+a;nn===Qe||nn<It&&f[nn-1]>=f[nn+1]?(h=f[nn+1]-1,ne=h-vt-u,h>qt&&We.MarkNextChange(),qt=h+1,We.AddOriginalElement(h+1,ne+1),vt=nn+1-a):(h=f[nn-1],ne=h-vt-u,h>qt&&We.MarkNextChange(),qt=h,We.AddModifiedElement(h+1,ne+1),vt=nn-1-a),hn>=0&&(f=this.m_reverseHistory[hn],a=f[0],Qe=1,It=f.length-1)}while(--hn>=-1);Ne=We.getChanges()}return this.ConcatenateChanges(be,Ne)}ComputeRecursionPoint(e,n,r,i,a,s,c){let u=0,d=0,f=0,h=0,p=0,_=0;e--,r--,a[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const ne=n-e+(i-r),A=ne+1,X=new Int32Array(A),pe=new Int32Array(A),Q=i-r,be=n-e,Ne=e-r,We=n-i,It=(be-Q)%2==0;X[Q]=e,pe[be]=n,c[0]=!1;for(let vt=1;vt<=ne/2+1;vt++){let qt=0,hn=0;f=this.ClipDiagonalBound(Q-vt,vt,Q,A),h=this.ClipDiagonalBound(Q+vt,vt,Q,A);for(let Wt=f;Wt<=h;Wt+=2){Wt===f||Wt<h&&X[Wt-1]<X[Wt+1]?u=X[Wt+1]:u=X[Wt-1]+1,d=u-(Wt-Q)-Ne;const dn=u;for(;u<n&&d<i&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(X[Wt]=u,u+d>qt+hn&&(qt=u,hn=d),!It&&Math.abs(Wt-be)<=vt-1&&u>=pe[Wt])return a[0]=u,s[0]=d,dn<=pe[Wt]&&1447>0&&vt<=1447+1?this.WALKTRACE(Q,f,h,Ne,be,p,_,We,X,pe,u,n,a,d,i,s,It,c):null}const nn=(qt-e+(hn-r)-vt)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(qt,nn))return c[0]=!0,a[0]=qt,s[0]=hn,nn>0&&1447>0&&vt<=1447+1?this.WALKTRACE(Q,f,h,Ne,be,p,_,We,X,pe,u,n,a,d,i,s,It,c):(e++,r++,[new Lr(e,n-e+1,r,i-r+1)]);p=this.ClipDiagonalBound(be-vt,vt,be,A),_=this.ClipDiagonalBound(be+vt,vt,be,A);for(let Wt=p;Wt<=_;Wt+=2){Wt===p||Wt<_&&pe[Wt-1]>=pe[Wt+1]?u=pe[Wt+1]-1:u=pe[Wt-1],d=u-(Wt-be)-We;const dn=u;for(;u>e&&d>r&&this.ElementsAreEqual(u,d);)u--,d--;if(pe[Wt]=u,It&&Math.abs(Wt-Q)<=vt&&u<=X[Wt])return a[0]=u,s[0]=d,dn>=X[Wt]&&1447>0&&vt<=1447+1?this.WALKTRACE(Q,f,h,Ne,be,p,_,We,X,pe,u,n,a,d,i,s,It,c):null}if(vt<=1447){let Wt=new Int32Array(h-f+2);Wt[0]=Q-f+1,he.Copy2(X,f,Wt,1,h-f+1),this.m_forwardHistory.push(Wt),Wt=new Int32Array(_-p+2),Wt[0]=be-p+1,he.Copy2(pe,p,Wt,1,_-p+1),this.m_reverseHistory.push(Wt)}}return this.WALKTRACE(Q,f,h,Ne,be,p,_,We,X,pe,u,n,a,d,i,s,It,c)}PrettifyChanges(e){for(let n=0;n<e.length;n++){const r=e[n],i=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,a=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,s=r.originalLength>0,c=r.modifiedLength>0;for(;r.originalStart+r.originalLength<i&&r.modifiedStart+r.modifiedLength<a&&(!s||this.OriginalElementsAreEqual(r.originalStart,r.originalStart+r.originalLength))&&(!c||this.ModifiedElementsAreEqual(r.modifiedStart,r.modifiedStart+r.modifiedLength));){const d=this.ElementsAreStrictEqual(r.originalStart,r.modifiedStart);if(this.ElementsAreStrictEqual(r.originalStart+r.originalLength,r.modifiedStart+r.modifiedLength)&&!d)break;r.originalStart++,r.modifiedStart++}let u=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],u)){e[n]=u[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){const r=e[n];let i=0,a=0;if(n>0){const h=e[n-1];i=h.originalStart+h.originalLength,a=h.modifiedStart+h.modifiedLength}const s=r.originalLength>0,c=r.modifiedLength>0;let u=0,d=this._boundaryScore(r.originalStart,r.originalLength,r.modifiedStart,r.modifiedLength);for(let h=1;;h++){const p=r.originalStart-h,_=r.modifiedStart-h;if(p<i||_<a||s&&!this.OriginalElementsAreEqual(p,p+r.originalLength)||c&&!this.ModifiedElementsAreEqual(_,_+r.modifiedLength))break;const A=(p===i&&_===a?5:0)+this._boundaryScore(p,r.originalLength,_,r.modifiedLength);A>d&&(d=A,u=h)}r.originalStart-=u,r.modifiedStart-=u;const f=[null];if(n>0&&this.ChangesOverlap(e[n-1],e[n],f)){e[n-1]=f[0],e.splice(n,1),n++;continue}}if(this._hasStrings)for(let n=1,r=e.length;n<r;n++){const i=e[n-1],a=e[n],s=a.originalStart-i.originalStart-i.originalLength,c=i.originalStart,u=a.originalStart+a.originalLength,d=u-c,f=i.modifiedStart,h=a.modifiedStart+a.modifiedLength,p=h-f;if(s<5&&d<20&&p<20){const _=this._findBetterContiguousSequence(c,d,f,p,s);if(_){const[ne,A]=_;(ne!==i.originalStart+i.originalLength||A!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=ne-i.originalStart,i.modifiedLength=A-i.modifiedStart,a.originalStart=ne+s,a.modifiedStart=A+s,a.originalLength=u-a.originalStart,a.modifiedLength=h-a.modifiedStart)}}}return e}_findBetterContiguousSequence(e,n,r,i,a){if(n<a||i<a)return null;const s=e+n-a+1,c=r+i-a+1;let u=0,d=0,f=0;for(let h=e;h<s;h++)for(let p=r;p<c;p++){const _=this._contiguousSequenceScore(h,p,a);_>0&&_>u&&(u=_,d=h,f=p)}return u>0?[d,f]:null}_contiguousSequenceScore(e,n,r){let i=0;for(let a=0;a<r;a++){if(!this.ElementsAreEqual(e+a,n+a))return 0;i+=this._originalStringElements[e+a].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._OriginalIsBoundary(r-1)||this._OriginalIsBoundary(r))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._ModifiedIsBoundary(r-1)||this._ModifiedIsBoundary(r))return!0}return!1}_boundaryScore(e,n,r,i){const a=this._OriginalRegionIsBoundary(e,n)?1:0,s=this._ModifiedRegionIsBoundary(r,i)?1:0;return a+s}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){const i=new Array(e.length+n.length-1);return he.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],he.Copy(n,1,i,e.length,n.length-1),i}else{const i=new Array(e.length+n.length);return he.Copy(e,0,i,0,e.length),he.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(Jr.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),Jr.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){const i=e.originalStart;let a=e.originalLength;const s=e.modifiedStart;let c=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(a=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(c=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new Lr(i,a,s,c),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;const a=r,s=i-r-1,c=n%2==0;if(e<0){const u=a%2==0;return c===u?0:1}else{const u=s%2==0;return c===u?i-1:i-2}}}o(ut,"LcsDiff");var Tt;(function(t){function e(r,i){return r instanceof He?i:new l.Position(i.line,i.character)}o(e,"makePosition"),t.makePosition=e;function n(r,i){return r instanceof He?i:new l.Range(i.start.line,i.start.character,i.end.line,i.end.character)}o(n,"makeRange"),t.makeRange=n})(Tt||(Tt={}));var Ot;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(Ot||(Ot={}));const ln=o(class{constructor(t,e,n,r){this.diffCache=new Qn(32),this.indexDocumentCache=new Qn(32),this.codeDocumentCache=new Qn(32),this.providerService=t,this.rootUri=e,this.index=n,this.code=r,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const i=await this.getIndexDocument(e);return i===void 0?!0:this.getDiff(1,i,t).length!==0}async mapPositionFromCodeToIndex(t,e){const n=t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===D.Created||i===D.Deleted)return;const a=await this.getIndexDocument(n);if(a===void 0)return;const s=this.getDiff(2,a,t);if(s.length===0)return e;const c=t.offsetAt(new l.Position(e.line,e.character));let u=c;for(const p of s){if(p.modifiedStart<=c&&c<p.modifiedStart+p.modifiedLength)return;if(u<p.modifiedStart)break;u=u-(p.modifiedLength-p.originalLength)}const d=a.positionAt(u),f=this.getWordAtOffset(a.lineAt(d.line).text,d.character),h=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(f===void 0||h===void 0||f!==h))return new l.Position(d.line,d.character)}async mapRangeFromIndexToCode(t,e){const n=t instanceof l.Uri?t:t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===D.Created||i===D.Deleted)return;const[a,s]=await Promise.all([this.getIndexDocument(n),this.getCodeDocument(t)]);if(a===void 0||s===void 0)return;const c=this.getDiff(1,a,s);if(c.length===0)return e;const u=a.offsetAt(e.start);let d=u;const f=a.offsetAt(e.end);let h=f;for(const X of c){if(h<X.originalStart)break;const pe=X.modifiedLength-X.originalLength;if(X.originalStart<=u){if(u<X.originalStart+X.originalLength)return;d+=pe}else if(f<X.originalStart+X.originalLength)return;if(X.originalStart<=f){if(f<X.originalStart+X.originalLength)return;h+=pe}}const p=s.positionAt(d),_=s.positionAt(h),ne=a.getText(e),A=s.getText(Tt.makeRange(s,{start:p,end:_}));if(ne===A)return new l.Range(p.line,p.character,_.line,_.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof l.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,n){let r=t.get(e.toString());if(r!==null)return r!==void 0||(r=this._getDocument(e,n),t.set(e.toString(),r),r.then(i=>{i===void 0&&t.set(e.toString(),null)},void 0)),r}async _getDocument(t,e){const n=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,n).then(r=>new He(t,Number.MAX_VALUE,ln.textDecoder.decode(r)),()=>{})}getDiff(t,e,n){if(e.uri.toString()!==n.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${n.uri.toString()}) are pointing to a different document`);const r=`${t}${e.uri.toString()}`;let i=this.diffCache.get(r);return i!==void 0&&i.original===e.version&&i.modified===n.version||(i={original:e.version,modified:n.version,changes:bi(e.getText(),n.getText(),!0)},this.diffCache.set(r,i)),i.changes}getWordAtOffset(t,e){let n="findStart",r=0,i=t.length,a=0;for(;a<t.length&&n!=="endFound";){switch(a===e&&(n="findEnd"),t[a]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(n){case"findStart":r=a+1;break;case"findEnd":i=a,n="endFound";break}break}a++}return n==="endFound"?t.substring(r,i):void 0}},"_DiffMapper");let ge=ln;ge.textDecoder=new TextDecoder("utf8");var Ge;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(Ge||(Ge={}));class He{static computeLineOffsets(e,n,r=0){const i=n?[r]:[];for(let a=0;a<e.length;a++){const s=e.charCodeAt(a);(s===13||s===10)&&(s===13&&a+1<e.length&&e.charCodeAt(a+1)===10&&a++,i.push(r+a+1))}return i}constructor(e,n,r){this._content=r,this.uri=e,this.version=n,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=He.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}lineAt(e){const n=this.getLineOffsets();if(e>=n.length)return{lineNumber:e,text:""};const r=n[e],i=n[e+1];if(i===void 0)return{lineNumber:e,text:this._content.substring(r)};const a=this._content.substring(r,i);let s=a.length-1;for(;s>=0&&(a[s]===`
`||a[s]==="\r");)s--;return{lineNumber:e,text:a.substr(0,s+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){const s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}const a=r-1;return{line:a,character:e-n[a]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}o(He,"TextDocument");var ht;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(ht||(ht={}));var xt;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(xt||(xt={}));var Ht;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=xt.MAX_VALUE),i===Number.MAX_VALUE&&(i=xt.MAX_VALUE),{line:r,character:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.objectLiteral(i)&&Ke.uinteger(i.line)&&Ke.uinteger(i.character)}o(n,"is"),t.is=n})(Ht||(Ht={}));var an;(function(t){function e(r,i,a,s){if(Ke.uinteger(r)&&Ke.uinteger(i)&&Ke.uinteger(a)&&Ke.uinteger(s))return{start:Ht.create(r,i),end:Ht.create(a,s)};if(Ht.is(r)&&Ht.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments["+r+", "+i+", "+a+", "+s+"]")}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.objectLiteral(i)&&Ht.is(i.start)&&Ht.is(i.end)}o(n,"is"),t.is=n})(an||(an={}));var Ln;(function(t){function e(r,i){return{uri:r,range:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&an.is(i.range)&&(Ke.string(i.uri)||Ke.undefined(i.uri))}o(n,"is"),t.is=n})(Ln||(Ln={}));var zn;(function(t){function e(r,i,a,s){return{targetUri:r,targetRange:i,targetSelectionRange:a,originSelectionRange:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&an.is(i.targetRange)&&Ke.string(i.targetUri)&&(an.is(i.targetSelectionRange)||Ke.undefined(i.targetSelectionRange))&&(an.is(i.originSelectionRange)||Ke.undefined(i.originSelectionRange))}o(n,"is"),t.is=n})(zn||(zn={}));var ii;(function(t){function e(r,i,a,s){return{red:r,green:i,blue:a,alpha:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.numberRange(i.red,0,1)&&Ke.numberRange(i.green,0,1)&&Ke.numberRange(i.blue,0,1)&&Ke.numberRange(i.alpha,0,1)}o(n,"is"),t.is=n})(ii||(ii={}));var Ni;(function(t){function e(r,i){return{range:r,color:i}}o(e,"create"),t.create=e;function n(r){var i=r;return an.is(i.range)&&ii.is(i.color)}o(n,"is"),t.is=n})(Ni||(Ni={}));var Oi;(function(t){function e(r,i,a){return{label:r,textEdit:i,additionalTextEdits:a}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.string(i.label)&&(Ke.undefined(i.textEdit)||Mi.is(i))&&(Ke.undefined(i.additionalTextEdits)||Ke.typedArray(i.additionalTextEdits,Mi.is))}o(n,"is"),t.is=n})(Oi||(Oi={}));var ir;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(ir||(ir={}));var Bi;(function(t){function e(r,i,a,s,c){var u={startLine:r,endLine:i};return Ke.defined(a)&&(u.startCharacter=a),Ke.defined(s)&&(u.endCharacter=s),Ke.defined(c)&&(u.kind=c),u}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.uinteger(i.startLine)&&Ke.uinteger(i.startLine)&&(Ke.undefined(i.startCharacter)||Ke.uinteger(i.startCharacter))&&(Ke.undefined(i.endCharacter)||Ke.uinteger(i.endCharacter))&&(Ke.undefined(i.kind)||Ke.string(i.kind))}o(n,"is"),t.is=n})(Bi||(Bi={}));var Hi;(function(t){function e(r,i){return{location:r,message:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ln.is(i.location)&&Ke.string(i.message)}o(n,"is"),t.is=n})(Hi||(Hi={}));var Ti;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(Ti||(Ti={}));var va;(function(t){t.Unnecessary=1,t.Deprecated=2})(va||(va={}));var Vi;(function(t){function e(n){var r=n;return r!=null&&Ke.string(r.href)}o(e,"is"),t.is=e})(Vi||(Vi={}));var ta;(function(t){function e(r,i,a,s,c,u){var d={range:r,message:i};return Ke.defined(a)&&(d.severity=a),Ke.defined(s)&&(d.code=s),Ke.defined(c)&&(d.source=c),Ke.defined(u)&&(d.relatedInformation=u),d}o(e,"create"),t.create=e;function n(r){var i,a=r;return Ke.defined(a)&&an.is(a.range)&&Ke.string(a.message)&&(Ke.number(a.severity)||Ke.undefined(a.severity))&&(Ke.integer(a.code)||Ke.string(a.code)||Ke.undefined(a.code))&&(Ke.undefined(a.codeDescription)||Ke.string((i=a.codeDescription)===null||i===void 0?void 0:i.href))&&(Ke.string(a.source)||Ke.undefined(a.source))&&(Ke.undefined(a.relatedInformation)||Ke.typedArray(a.relatedInformation,Hi.is))}o(n,"is"),t.is=n})(ta||(ta={}));var na;(function(t){function e(r,i){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var c={title:r,command:i};return Ke.defined(a)&&a.length>0&&(c.arguments=a),c}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.title)&&Ke.string(i.command)}o(n,"is"),t.is=n})(na||(na={}));var Mi;(function(t){function e(a,s){return{range:a,newText:s}}o(e,"replace"),t.replace=e;function n(a,s){return{range:{start:a,end:a},newText:s}}o(n,"insert"),t.insert=n;function r(a){return{range:a,newText:""}}o(r,"del"),t.del=r;function i(a){var s=a;return Ke.objectLiteral(s)&&Ke.string(s.newText)&&an.is(s.range)}o(i,"is"),t.is=i})(Mi||(Mi={}));var ji;(function(t){function e(r,i,a){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),a!==void 0&&(s.description=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&Ke.objectLiteral(i)&&Ke.string(i.label)&&(Ke.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Ke.string(i.description)||i.description===void 0)}o(n,"is"),t.is=n})(ji||(ji={}));var xr;(function(t){function e(n){var r=n;return typeof r=="string"}o(e,"is"),t.is=e})(xr||(xr={}));var Ui;(function(t){function e(a,s,c){return{range:a,newText:s,annotationId:c}}o(e,"replace"),t.replace=e;function n(a,s,c){return{range:{start:a,end:a},newText:s,annotationId:c}}o(n,"insert"),t.insert=n;function r(a,s){return{range:a,newText:"",annotationId:s}}o(r,"del"),t.del=r;function i(a){var s=a;return Mi.is(s)&&(ji.is(s.annotationId)||xr.is(s.annotationId))}o(i,"is"),t.is=i})(Ui||(Ui={}));var Yi;(function(t){function e(r,i){return{textDocument:r,edits:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&ma.is(i.textDocument)&&Array.isArray(i.edits)}o(n,"is"),t.is=n})(Yi||(Yi={}));var Yn;(function(t){function e(r,i,a){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&Ke.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Ke.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ke.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||xr.is(i.annotationId))}o(n,"is"),t.is=n})(Yn||(Yn={}));var ur;(function(t){function e(r,i,a,s){var c={kind:"rename",oldUri:r,newUri:i};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),s!==void 0&&(c.annotationId=s),c}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&Ke.string(i.oldUri)&&Ke.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Ke.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ke.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||xr.is(i.annotationId))}o(n,"is"),t.is=n})(ur||(ur={}));var qi;(function(t){function e(r,i,a){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&Ke.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Ke.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Ke.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||xr.is(i.annotationId))}o(n,"is"),t.is=n})(qi||(qi={}));var gr;(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return Ke.string(i.kind)?Yn.is(i)||ur.is(i)||qi.is(i):Yi.is(i)}))}o(e,"is"),t.is=e})(gr||(gr={}));var pa=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,a;if(r===void 0?i=Mi.insert(e,n):xr.is(r)?(a=r,i=Ui.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=Ui.insert(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.replace=function(e,n,r){var i,a;if(r===void 0?i=Mi.replace(e,n):xr.is(r)?(a=r,i=Ui.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=Ui.replace(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=Mi.del(e):xr.is(n)?(i=n,r=Ui.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=Ui.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),Ii=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(xr.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),ra=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Ii(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(Yi.is(r)){var i=new pa(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new pa(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(ma.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],a={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(a),r=new pa(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new pa(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Ii,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ji.is(n)||xr.is(n)?i=n:r=n;var a,s;if(i===void 0?a=Yn.create(e,r):(s=xr.is(i)?i:this._changeAnnotations.manage(i),a=Yn.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;ji.is(r)||xr.is(r)?a=r:i=r;var s,c;if(a===void 0?s=ur.create(e,n,i):(c=xr.is(a)?a:this._changeAnnotations.manage(a),s=ur.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ji.is(n)||xr.is(n)?i=n:r=n;var a,s;if(i===void 0?a=qi.create(e,r):(s=xr.is(i)?i:this._changeAnnotations.manage(i),a=qi.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t}(),Wi;(function(t){function e(r){return{uri:r}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)}o(n,"is"),t.is=n})(Wi||(Wi={}));var $i;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)&&Ke.integer(i.version)}o(n,"is"),t.is=n})($i||($i={}));var ma;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)&&(i.version===null||Ke.integer(i.version))}o(n,"is"),t.is=n})(ma||(ma={}));var ja;(function(t){function e(r,i,a,s){return{uri:r,languageId:i,version:a,text:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)&&Ke.string(i.languageId)&&Ke.integer(i.version)&&Ke.string(i.text)}o(n,"is"),t.is=n})(ja||(ja={}));var Ai;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(Ai||(Ai={})),function(t){function e(n){var r=n;return r===t.PlainText||r===t.Markdown}o(e,"is"),t.is=e}(Ai||(Ai={}));var Ta;(function(t){function e(n){var r=n;return Ke.objectLiteral(n)&&Ai.is(r.kind)&&Ke.string(r.value)}o(e,"is"),t.is=e})(Ta||(Ta={}));var Ya;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(Ya||(Ya={}));var qa;(function(t){t.PlainText=1,t.Snippet=2})(qa||(qa={}));var Qa;(function(t){t.Deprecated=1})(Qa||(Qa={}));var Xa;(function(t){function e(r,i,a){return{newText:r,insert:i,replace:a}}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ke.string(i.newText)&&an.is(i.insert)&&an.is(i.replace)}o(n,"is"),t.is=n})(Xa||(Xa={}));var Ma;(function(t){t.asIs=1,t.adjustIndentation=2})(Ma||(Ma={}));var Za;(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(Za||(Za={}));var Ia;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}o(e,"create"),t.create=e})(Ia||(Ia={}));var ya;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return Ke.string(i)||Ke.objectLiteral(i)&&Ke.string(i.language)&&Ke.string(i.value)}o(n,"is"),t.is=n})(ya||(ya={}));var eo;(function(t){function e(n){var r=n;return!!r&&Ke.objectLiteral(r)&&(Ta.is(r.contents)||ya.is(r.contents)||Ke.typedArray(r.contents,ya.is))&&(n.range===void 0||an.is(n.range))}o(e,"is"),t.is=e})(eo||(eo={}));var to;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}o(e,"create"),t.create=e})(to||(to={}));var no;(function(t){function e(n,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s={label:n};return Ke.defined(r)&&(s.documentation=r),Ke.defined(i)?s.parameters=i:s.parameters=[],s}o(e,"create"),t.create=e})(no||(no={}));var la;(function(t){t.Text=1,t.Read=2,t.Write=3})(la||(la={}));var ro;(function(t){function e(n,r){var i={range:n};return Ke.number(r)&&(i.kind=r),i}o(e,"create"),t.create=e})(ro||(ro={}));var Pa;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Pa||(Pa={}));var ci;(function(t){t.Deprecated=1})(ci||(ci={}));var io;(function(t){function e(n,r,i,a,s){var c={name:n,kind:r,location:{uri:a,range:i}};return s&&(c.containerName=s),c}o(e,"create"),t.create=e})(io||(io={}));var ca;(function(t){function e(r,i,a,s,c,u){var d={name:r,detail:i,kind:a,range:s,selectionRange:c};return u!==void 0&&(d.children=u),d}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ke.string(i.name)&&Ke.number(i.kind)&&an.is(i.range)&&an.is(i.selectionRange)&&(i.detail===void 0||Ke.string(i.detail))&&(i.deprecated===void 0||Ke.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}o(n,"is"),t.is=n})(ca||(ca={}));var ui;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(ui||(ui={}));var ao;(function(t){function e(r,i){var a={diagnostics:r};return i!=null&&(a.only=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.typedArray(i.diagnostics,ta.is)&&(i.only===void 0||Ke.typedArray(i.only,Ke.string))}o(n,"is"),t.is=n})(ao||(ao={}));var La;(function(t){function e(r,i,a){var s={title:r},c=!0;return typeof i=="string"?(c=!1,s.kind=i):na.is(i)?s.command=i:s.edit=i,c&&a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ke.string(i.title)&&(i.diagnostics===void 0||Ke.typedArray(i.diagnostics,ta.is))&&(i.kind===void 0||Ke.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||na.is(i.command))&&(i.isPreferred===void 0||Ke.boolean(i.isPreferred))&&(i.edit===void 0||gr.is(i.edit))}o(n,"is"),t.is=n})(La||(La={}));var oo;(function(t){function e(r,i){var a={range:r};return Ke.defined(i)&&(a.data=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&an.is(i.range)&&(Ke.undefined(i.command)||na.is(i.command))}o(n,"is"),t.is=n})(oo||(oo={}));var so;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.uinteger(i.tabSize)&&Ke.boolean(i.insertSpaces)}o(n,"is"),t.is=n})(so||(so={}));var xa;(function(t){function e(r,i,a){return{range:r,target:i,data:a}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&an.is(i.range)&&(Ke.undefined(i.target)||Ke.string(i.target))}o(n,"is"),t.is=n})(xa||(xa={}));var Lo;(function(t){function e(r,i){return{range:r,parent:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&an.is(i.range)&&(i.parent===void 0||t.is(i.parent))}o(n,"is"),t.is=n})(Lo||(Lo={}));var xo=null,wa;(function(t){function e(a,s,c,u){return new ka(a,s,c,u)}o(e,"create"),t.create=e;function n(a){var s=a;return!!(Ke.defined(s)&&Ke.string(s.uri)&&(Ke.undefined(s.languageId)||Ke.string(s.languageId))&&Ke.uinteger(s.lineCount)&&Ke.func(s.getText)&&Ke.func(s.positionAt)&&Ke.func(s.offsetAt))}o(n,"is"),t.is=n;function r(a,s){for(var c=a.getText(),u=i(s,function(ne,A){var X=ne.range.start.line-A.range.start.line;return X===0?ne.range.start.character-A.range.start.character:X}),d=c.length,f=u.length-1;f>=0;f--){var h=u[f],p=a.offsetAt(h.range.start),_=a.offsetAt(h.range.end);if(_<=d)c=c.substring(0,p)+h.newText+c.substring(_,c.length);else throw new Error("Overlapping edit");d=p}return c}o(r,"applyEdits"),t.applyEdits=r;function i(a,s){if(a.length<=1)return a;var c=a.length/2|0,u=a.slice(0,c),d=a.slice(c);i(u,s),i(d,s);for(var f=0,h=0,p=0;f<u.length&&h<d.length;){var _=s(u[f],d[h]);_<=0?a[p++]=u[f++]:a[p++]=d[h++]}for(;f<u.length;)a[p++]=u[f++];for(;h<d.length;)a[p++]=d[h++];return a}o(i,"mergeSort")})(wa||(wa={}));var ka=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var a=n.charAt(i);r=a==="\r"||a===`
`,a==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Ht.create(0,e);for(;r<i;){var a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}var s=r-1;return Ht.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),Ke;(function(t){var e=Object.prototype.toString;function n(_){return typeof _!="undefined"}o(n,"defined"),t.defined=n;function r(_){return typeof _=="undefined"}o(r,"undefined"),t.undefined=r;function i(_){return _===!0||_===!1}o(i,"boolean"),t.boolean=i;function a(_){return e.call(_)==="[object String]"}o(a,"string"),t.string=a;function s(_){return e.call(_)==="[object Number]"}o(s,"number"),t.number=s;function c(_,ne,A){return e.call(_)==="[object Number]"&&ne<=_&&_<=A}o(c,"numberRange"),t.numberRange=c;function u(_){return e.call(_)==="[object Number]"&&-2147483648<=_&&_<=2147483647}o(u,"integer"),t.integer=u;function d(_){return e.call(_)==="[object Number]"&&0<=_&&_<=2147483647}o(d,"uinteger"),t.uinteger=d;function f(_){return e.call(_)==="[object Function]"}o(f,"func"),t.func=f;function h(_){return _!==null&&typeof _=="object"}o(h,"objectLiteral"),t.objectLiteral=h;function p(_,ne){return Array.isArray(_)&&_.every(ne)}o(p,"typedArray"),t.typedArray=p})(Ke||(Ke={}));var ua;(function(t){function e(r){return typeof r=="string"||r instanceof String}o(e,"string"),t.string=e;function n(r){return typeof r=="number"||r instanceof Number}o(n,"number"),t.number=n})(ua||(ua={}));var Fa;(function(t){function e(n){const r=n;return r!=null&&(ua.number(r.value)||ua.string(r.value))&&ua.string(r.target)}o(e,"is"),t.is=e})(Fa||(Fa={}));class lo extends l.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}}o(lo,"ProtocolDiagnostic");var S;(function(t){const e=Object.prototype.toString;function n(f){return typeof f!="undefined"}o(n,"defined"),t.defined=n;function r(f){return f===!0||f===!1}o(r,"boolean"),t.boolean=r;function i(f){return e.call(f)==="[object String]"}o(i,"string"),t.string=i;function a(f){return e.call(f)==="[object Number]"}o(a,"number"),t.number=a;function s(f){return f!==null&&typeof f=="object"}o(s,"objectLiteral"),t.objectLiteral=s;function c(f){return Array.isArray(f)}o(c,"array"),t.array=c;function u(f){return c(f)&&f.every(h=>i(h))}o(u,"stringArray"),t.stringArray=u;function d(f,h){return Array.isArray(f)&&f.every(h)}o(d,"typedArray"),t.typedArray=d})(S||(S={}));var g;(function(t){function e(n){const r=n;return r&&S.string(r.language)&&S.string(r.value)}o(e,"is"),t.is=e})(g||(g={}));function E(t){const e=o(V=>l.Uri.parse(V),"nullConverter"),n=t!=null?t:e;function r(V){return n(V)}o(r,"asUri");function i(V){return V.map(a)}o(i,"asDiagnostics");function a(V){const pt=new lo(h(V.range),V.message,_(V.severity),V.data);return V.code!==void 0&&(Vi.is(V.codeDescription)?pt.code={value:V.code,target:r(V.codeDescription.href)}:Fa.is(V.code)?(pt.hasDiagnosticCode=!0,pt.code={value:V.code.value,target:r(V.code.target)}):pt.code=V.code),V.source&&(pt.source=V.source),V.relatedInformation&&(pt.relatedInformation=s(V.relatedInformation)),Array.isArray(V.tags)&&(pt.tags=u(V.tags)),pt}o(a,"asDiagnostic");function s(V){return V.map(c)}o(s,"asRelatedInformation");function c(V){return new l.DiagnosticRelatedInformation(vt(V.location),V.message)}o(c,"asDiagnosticRelatedInformation");function u(V){if(!V)return;const pt=[];for(const wn of V){const jr=d(wn);jr!==void 0&&pt.push(jr)}return pt.length>0?pt:void 0}o(u,"asDiagnosticTags");function d(V){switch(V){case va.Unnecessary:return l.DiagnosticTag.Unnecessary;case va.Deprecated:return l.DiagnosticTag.Deprecated;default:return}}o(d,"asDiagnosticTag");function f(V){if(!!V)return new l.Position(V.line,V.character)}o(f,"asPosition");function h(V){if(!!V)return new l.Range(f(V.start),f(V.end))}o(h,"asRange");function p(V){return V.map(pt=>h(pt))}o(p,"asRanges");function _(V){if(V==null)return l.DiagnosticSeverity.Error;switch(V){case Ti.Error:return l.DiagnosticSeverity.Error;case Ti.Warning:return l.DiagnosticSeverity.Warning;case Ti.Information:return l.DiagnosticSeverity.Information;case Ti.Hint:return l.DiagnosticSeverity.Hint}return l.DiagnosticSeverity.Error}o(_,"asDiagnosticSeverity");function ne(V){if(S.string(V))return new l.MarkdownString(V);if(g.is(V))return new l.MarkdownString().appendCodeblock(V.value,V.language);if(Array.isArray(V)){const wn=[];for(const jr of V){const Ja=new l.MarkdownString;g.is(jr)?Ja.appendCodeblock(jr.value,jr.language):Ja.appendMarkdown(jr),wn.push(Ja)}return wn}let pt;switch(V.kind){case Ai.Markdown:return new l.MarkdownString(V.value);case Ai.PlainText:return pt=new l.MarkdownString,pt.appendText(V.value),pt;default:return pt=new l.MarkdownString,pt.appendText(`Unsupported Markup content received. Kind is: ${V.kind}`),pt}}o(ne,"asHoverContent");function A(V){if(S.string(V))return V;switch(V.kind){case Ai.Markdown:return new l.MarkdownString(V.value);case Ai.PlainText:return V.value;default:return`Unsupported Markup content received. Kind is: ${V.kind}`}}o(A,"asDocumentation");function X(V){if(!!V)return new l.Hover(ne(V.contents),h(V.range))}o(X,"asHover");function pe(V){if(!!V)return new l.TextEdit(h(V.range),V.newText)}o(pe,"asTextEdit");function Q(V){if(!!V)return V.map(pe)}o(Q,"asTextEdits");function be(V){if(!V)return;const pt=new l.SignatureHelp;return S.number(V.activeSignature)?pt.activeSignature=V.activeSignature:pt.activeSignature=0,S.number(V.activeParameter)?pt.activeParameter=V.activeParameter:pt.activeParameter=0,V.signatures&&(pt.signatures=Ne(V.signatures)),pt}o(be,"asSignatureHelp");function Ne(V){return V.map(We)}o(Ne,"asSignatureInformations");function We(V){const pt=new l.SignatureInformation(V.label);return V.documentation!==void 0&&(pt.documentation=A(V.documentation)),V.parameters!==void 0&&(pt.parameters=Qe(V.parameters)),V.activeParameter!==void 0&&(pt.activeParameter=V.activeParameter),pt}o(We,"asSignatureInformation");function Qe(V){return V.map(It)}o(Qe,"asParameterInformations");function It(V){const pt=new l.ParameterInformation(V.label);return V.documentation&&(pt.documentation=A(V.documentation)),pt}o(It,"asParameterInformation");function vt(V){if(!!V)return new l.Location(n(V.uri),h(V.range))}o(vt,"asLocation");function qt(V){if(!!V)return Wt(V)}o(qt,"asDeclarationResult");function hn(V){if(!!V)return Wt(V)}o(hn,"asDefinitionResult");function nn(V){if(!V)return;const pt={targetUri:n(V.targetUri),targetRange:h(V.targetSelectionRange),originSelectionRange:h(V.originSelectionRange),targetSelectionRange:h(V.targetSelectionRange)};if(!pt.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return pt}o(nn,"asLocationLink");function Wt(V){if(!!V)return S.array(V)?V.length===0?[]:zn.is(V[0])?V.map(jr=>nn(jr)):V.map(wn=>vt(wn)):zn.is(V)?[nn(V)]:vt(V)}o(Wt,"asLocationResult");function dn(V){if(!!V)return V.map(pt=>vt(pt))}o(dn,"asReferences");function Ir(V){if(!!V)return V.map(Di)}o(Ir,"asDocumentHighlights");function Di(V){const pt=new l.DocumentHighlight(h(V.range));return S.number(V.kind)&&(pt.kind=Ri(V.kind)),pt}o(Di,"asDocumentHighlight");function Ri(V){switch(V){case la.Text:return l.DocumentHighlightKind.Text;case la.Read:return l.DocumentHighlightKind.Read;case la.Write:return l.DocumentHighlightKind.Write}return l.DocumentHighlightKind.Text}o(Ri,"asDocumentHighlightKind");function aa(V,pt){if(!!V)return V.map(wn=>al(wn,pt))}o(aa,"asSymbolInformations");function Li(V){return V<=Pa.TypeParameter?V-1:l.SymbolKind.Property}o(Li,"asSymbolKind");function Ra(V){switch(V){case ci.Deprecated:return l.SymbolTag.Deprecated;default:return}}o(Ra,"asSymbolTag");function Mo(V){if(V==null)return;const pt=[];for(const wn of V){const jr=Ra(wn);jr!==void 0&&pt.push(jr)}return pt.length===0?void 0:pt}o(Mo,"asSymbolTags");function al(V,pt){const wn=new l.SymbolInformation(V.name,Li(V.kind),h(V.location.range),V.location.uri?n(V.location.uri):pt);return ol(wn,V),V.containerName&&(wn.containerName=V.containerName),wn}o(al,"asSymbolInformation");function Mc(V){if(V!=null)return V.map(es)}o(Mc,"asDocumentSymbols");function es(V){var pt;const wn=new l.DocumentSymbol(V.name,(pt=V.detail)!=null?pt:"",Li(V.kind),h(V.range),h(V.selectionRange));if(ol(wn,V),V.children!==void 0&&V.children.length>0){const jr=[];for(const Ja of V.children)jr.push(es(Ja));wn.children=jr}return wn}o(es,"asDocumentSymbol");function ol(V,pt){V.tags=Mo(pt.tags),pt.deprecated&&(V.tags?V.tags.includes(l.SymbolTag.Deprecated)||(V.tags=V.tags.concat(l.SymbolTag.Deprecated)):V.tags=[l.SymbolTag.Deprecated])}o(ol,"fillTags");function ts(V){const pt={title:V.title,command:V.command};return V.arguments&&(pt.arguments=V.arguments),pt}o(ts,"asCommand");function Ic(V){if(!!V)return V.map(ts)}o(Ic,"asCommands");const Zi=new Map;Zi.set(ui.Empty,l.CodeActionKind.Empty),Zi.set(ui.QuickFix,l.CodeActionKind.QuickFix),Zi.set(ui.Refactor,l.CodeActionKind.Refactor),Zi.set(ui.RefactorExtract,l.CodeActionKind.RefactorExtract),Zi.set(ui.RefactorInline,l.CodeActionKind.RefactorInline),Zi.set(ui.RefactorRewrite,l.CodeActionKind.RefactorRewrite),Zi.set(ui.Source,l.CodeActionKind.Source),Zi.set(ui.SourceOrganizeImports,l.CodeActionKind.SourceOrganizeImports);function ns(V){if(V==null)return;let pt=Zi.get(V);if(pt)return pt;const wn=V.split(".");pt=l.CodeActionKind.Empty;for(const jr of wn)pt=pt.append(jr);return pt}o(ns,"asCodeActionKind");function Pc(V){if(V!=null)return V.map(pt=>ns(pt))}o(Pc,"asCodeActionKinds");function Lc(V){if(V==null)return;const pt=new l.CodeAction(V.title);return V.kind!==void 0&&(pt.kind=ns(V.kind)),V.diagnostics&&(pt.diagnostics=i(V.diagnostics)),V.edit&&(pt.edit=sl(V.edit)),V.command&&(pt.command=ts(V.command)),V.isPreferred!==void 0&&(pt.isPreferred=V.isPreferred),pt}o(Lc,"asCodeAction");function sl(V){if(!V)return;const pt=new l.WorkspaceEdit;return V.documentChanges?V.documentChanges.forEach(wn=>{if(Yn.is(wn))pt.createFile(n(wn.uri),wn.options);else if(ur.is(wn))pt.renameFile(n(wn.oldUri),n(wn.newUri),wn.options);else if(qi.is(wn))pt.deleteFile(n(wn.uri),wn.options);else if(Yi.is(wn))pt.set(n(wn.textDocument.uri),Q(wn.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(wn,void 0,4)}`)}):V.changes&&Object.keys(V.changes).forEach(wn=>{pt.set(n(wn),Q(V.changes[wn]))}),pt}o(sl,"asWorkspaceEdit");function ll(V){return new l.Color(V.red,V.green,V.blue,V.alpha)}o(ll,"asColor");function cl(V){return new l.ColorInformation(h(V.range),ll(V.color))}o(cl,"asColorInformation");function xc(V){if(Array.isArray(V))return V.map(cl)}o(xc,"asColorInformations");function ul(V){const pt=new l.ColorPresentation(V.label);return pt.additionalTextEdits=Q(V.additionalTextEdits),V.textEdit&&(pt.textEdit=pe(V.textEdit)),pt}o(ul,"asColorPresentation");function kc(V){if(Array.isArray(V))return V.map(ul)}o(kc,"asColorPresentations");function dl(V){if(V)switch(V){case ir.Comment:return l.FoldingRangeKind.Comment;case ir.Imports:return l.FoldingRangeKind.Imports;case ir.Region:return l.FoldingRangeKind.Region}}o(dl,"asFoldingRangeKind");function fl(V){return new l.FoldingRange(V.startLine,V.endLine,dl(V.kind))}o(fl,"asFoldingRange");function Fc(V){if(Array.isArray(V))return V.map(fl)}o(Fc,"asFoldingRanges");function rs(V){return new l.SelectionRange(h(V.range),V.parent?rs(V.parent):void 0)}o(rs,"asSelectionRange");function Nc(V){if(!Array.isArray(V))return[];const pt=[];for(const wn of V)pt.push(rs(wn));return pt}return o(Nc,"asSelectionRanges"),{asUri:r,asDiagnostics:i,asDiagnostic:a,asRange:h,asRanges:p,asPosition:f,asDiagnosticSeverity:_,asDiagnosticTag:d,asHover:X,asTextEdit:pe,asTextEdits:Q,asSignatureHelp:be,asSignatureInformations:Ne,asSignatureInformation:We,asParameterInformations:Qe,asParameterInformation:It,asDeclarationResult:qt,asDefinitionResult:hn,asLocation:vt,asReferences:dn,asDocumentHighlights:Ir,asDocumentHighlight:Di,asDocumentHighlightKind:Ri,asSymbolKind:Li,asSymbolTag:Ra,asSymbolTags:Mo,asSymbolInformations:aa,asSymbolInformation:al,asDocumentSymbols:Mc,asDocumentSymbol:es,asCommand:ts,asCommands:Ic,asCodeAction:Lc,asCodeActionKind:ns,asCodeActionKinds:Pc,asWorkspaceEdit:sl,asFoldingRangeKind:dl,asFoldingRange:fl,asFoldingRanges:Fc,asColor:ll,asColorInformation:cl,asColorInformations:xc,asColorPresentation:ul,asColorPresentations:kc,asSelectionRange:rs,asSelectionRanges:Nc}}o(E,"createConverter");var L;(function(t){function e(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(e,"externalUri"),t.externalUri=e;function n(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(n,"externalIndexUri"),t.externalIndexUri=n})(L||(L={}));var ie;(function(t){function e(i){if(i.HEAD.type===J.Branch||i.HEAD.type===J.RemoteBranch)return i.HEAD.name}o(e,"getBranchName"),t.getBranchName=e;function n(i){if(i.HEAD.type!==J.Branch)return;if(i.pullRequest!==void 0)return i.HEAD.name;const a=i.HEAD.name;return a===void 0||a.startsWith("refs/heads/")?a:`refs/heads/${a}`}o(n,"getIndexBranchName"),t.getIndexBranchName=n;async function r(i,a,s=ot.timeout){const c=await i.getMetadata(a),u=L.externalIndexUri(i,c),d=t.getIndexBranchName(c);if(!(u===void 0||d===void 0))return ot.getIndexedTip(u,d,{authentication:i.getAuthentication(a)},s)}o(r,"getIndexedTip"),t.getIndexedTip=r})(ie||(ie={}));var ye;(function(t){const e=new Qn(1024);function n(s,c,u){let d=e.get(u);return d!==void 0||(d=s.getCommit(c,u),e.set(u,d)),d}o(n,"get"),t.get=n;async function r(s,c,u){const d=[];for(const h of u)d.push(n(s,c,h));const f=[];for(const h of await Promise.all(d))h!==void 0&&f.push(h);return f}o(r,"all"),t.all=r;function i(s,c){const u=s.commitDate,d=c.commitDate;return u===void 0&&d===void 0?0:u===void 0?1:d===void 0?-1:u<d?1:u>d?-1:0}o(i,"sort"),t.sort=i;function a(s){const c=s.authorName!==void 0?`  \u2022  ${s.authorName}`:"",u=s.commitDate!==void 0?`  \u2022  ${Dn(s.commitDate,{ago:!0})}`:"",d=s.branchName!==void 0?` - ${s.branchName}`:"",f=s.tags!==void 0?typeof s.tags=="string"?`  \u2022  ${s.tags}`:`  \u2022  ${s.tags.join(" ")}`:"";return{author:c,date:u,branch:d,tag:f}}o(a,"getCommitInfo"),t.getCommitInfo=a})(ye||(ye={}));var Be;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(Be||(Be={}));var Ve;(function(t){function e(r){return{workspaceId:r.WorkspaceId,snapshotId:r.SnapshotId,state:r.State,commitId:r.commitId.toLowerCase(),branchName:n(r.BranchName),creationDate:new Date(r._ts*1e3)}}o(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function n(r){if(r!==null)return r.startsWith("refs/heads/")?r.substr(11):r}o(n,"getBranchName")})(Ve||(Ve={}));var ot;(function(t){t.timeout=5*60*1e3;const e=new Qn(32),n=new Qn(32);async function r(h,p,_,ne=t.timeout){const A=await i(h,p,_,ne);if(!(A===void 0||A.length===0))return A[0]}o(r,"getIndexedTip"),t.getIndexedTip=r;async function i(h,p,_,ne=t.timeout){const A=c(h,p);let X=e.get(A);if(X===void 0||X!==void 0&&Date.now()-X.time>ne){const pe=At.getAllWorkspaceSnapshots(h,_,p);X={time:Date.now(),promise:pe,snapshots:void 0},e.set(A,X)}if(X.snapshots!==null){if(X.snapshots===void 0){let pe=await X.promise;if(pe===void 0){X.snapshots=null;return}pe.sort((Q,be)=>be.creationDate.getTime()-Q.creationDate.getTime()),pe=pe.filter(Q=>Q.state===5||Q.state===3),X.snapshots=pe}return X.snapshots}}o(i,"all"),t.all=i;async function a(h,p,_,ne,A=t.timeout){const X=s(h,p);let pe=n.get(X);if(pe===null)return;if(pe!==void 0)return pe;const Q=c(h,_),be=e.get(Q);if(be!==void 0&&Date.now()-be.time<=A){if(be.snapshots===null)return;const Ne=be.snapshots!==void 0?be.snapshots:await i(h,_,ne);if(Ne!==void 0){for(const We of Ne)if(We.commitId===p)return n.set(X,We),We}return}if(pe=await At.getWorkspaceSnapshot(p,ne),pe===void 0){n.set(X,null);return}return n.set(X,pe),pe}o(a,"single"),t.single=a;function s(h,p){return`${h.toString()}/${p}`}o(s,"getSingleCacheKey");function c(h,p){return p!==void 0?`${p}\\${h.toString()}`:h.toString()}o(c,"getAllCacheKey");async function u(h,p,_,ne=t.timeout){return await a(h,p,void 0,_,ne)!==void 0}o(u,"exists"),t.exists=u;async function d(h,p,_,ne=t.timeout){return await i(h,p,_,ne)!==void 0}o(d,"branch"),t.branch=d;async function f(h,p,_){const ne=new Map(_.map(pe=>[pe.commitId,pe])),A=await ye.all(h,p.uri,_.map(pe=>pe.commitId));if(A.length===0)return;const X=[];for(const pe of A){const Q=ne.get(pe.hash);Q!==void 0&&X.push({...Q,commit:pe})}if(X.length!==0)return X}o(f,"resolve"),t.resolve=f})(ot||(ot={}));var dt;(function(t){function e(n=!1){return{hoverProvider:n,declarationProvider:n,definitionProvider:n,typeDefinitionProvider:n,referencesProvider:n,documentSymbolProvider:n,foldingRangeProvider:n,diagnosticProvider:n,workspaceSymbolProvider:n}}o(e,"create"),t.create=e})(dt||(dt={}));var At;(function(t){const e="v0.1",n="https://prod.richnav.vsengsaas.visualstudio.com/api";async function r(Q,be,Ne){var We;const Qe=await Nt(Q,{method:"POST",body:JSON.stringify(be),headers:{"Content-Type":"application/json",...(await Ne.authentication).getRichNavigationHeaders(),"x-correlation-id":(We=Ne.correlationId)!=null?We:mr()}});if(!!Qe.ok)return Qe.json()}o(r,"postRequest");async function i(Q,be,Ne){const We=await Nt(Q,{method:"POST",body:be,headers:(await Ne.authentication).getRichNavigationHeaders()});if(!!We.ok)return await We.json()}o(i,"postForm");function a(Q,be){return`${n}/${e}/HttpLanguageService/${Q}/${be}`}o(a,"makeRequestUrl");async function s(Q,be){const Ne=await Nt(`${n}/${e}/WorkspaceSnapshot?commitId=${Q}`,{headers:(await be.authentication).getRichNavigationHeaders()});if(Ne.ok){const We=await Ne.json();return{workspaceId:We.workspaceId,snapshotId:We.snapshotId,state:We.state,commitId:Q.toLowerCase(),branchName:void 0,creationDate:new Date}}}o(s,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=s;async function c(Q,be,Ne){const We=new cr;We.append("uriString",Q.toString(!0)),Ne!==void 0&&We.append("branchName",Ne);try{const Qe=await i(`${n}/${e}/WorkspaceSnapshot/all`,We,be);return Qe===void 0?void 0:Qe.map(Ve.asWorkspaceSnapshot)}catch(Qe){K.error(Qe);return}}o(c,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=c;async function u(Q,be,Ne){const We=new cr;We.append("uriString",Q.toString(!0)),Ne!==void 0&&We.append("branchName",Ne);try{const Qe=await i(`${n}/${e}/WorkspaceSnapshot/latest`,We,be);return Qe===void 0?void 0:Ve.asWorkspaceSnapshot(Qe)}catch(Qe){K.error(Qe);return}}o(u,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=u;async function d(Q,be,Ne){try{return r(a(Q,"textDocument/capabilities"),be,Ne)}catch(We){K.error(We);return}}o(d,"capabilities"),t.capabilities=d;async function f(Q,be,Ne){try{return r(a(Q,"textDocument/hover"),be,Ne)}catch(We){K.error(We);return}}o(f,"provideHover"),t.provideHover=f;async function h(Q,be,Ne){try{return r(a(Q,"textDocument/definition"),be,Ne)}catch(We){K.error(We);return}}o(h,"provideDefinition"),t.provideDefinition=h;async function p(Q,be,Ne){try{return r(a(Q,"textDocument/declaration"),be,Ne)}catch(We){K.error(We);return}}o(p,"provideDeclaration"),t.provideDeclaration=p;async function _(Q,be,Ne){try{return r(a(Q,"textDocument/typeDefinition"),be,Ne)}catch(We){K.error(We);return}}o(_,"provideTypeDefinition"),t.provideTypeDefinition=_;async function ne(Q,be,Ne){try{return r(a(Q,"textDocument/references"),be,Ne)}catch(We){K.error(We);return}}o(ne,"provideReferences"),t.provideReferences=ne;async function A(Q,be,Ne){try{return r(a(Q,"textDocument/foldingRange"),be,Ne)}catch(We){K.error(We);return}}o(A,"providerFoldingRanges"),t.providerFoldingRanges=A;async function X(Q,be,Ne){if(be=="")return;const We=await Nt(`${n}/${e}/Search/${Q}/${be}`,{headers:(await Ne.authentication).getRichNavigationHeaders()});if(We.ok)return await We.json()}o(X,"provideWorkspaceSymbols"),t.provideWorkspaceSymbols=X;async function pe(Q,be,Ne){const We=l.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${Q}/${be}/assets/designtime`,query:`id=${Ne}`});try{const Qe=await Nt(We.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}});return Qe.ok?Qe.text():void 0}catch(Qe){K.error(Qe);return}}o(pe,"getDesignTimeFileContent"),t.getDesignTimeFileContent=pe})(At||(At={}));class un{constructor(e,n){this.providerService=e,this.telemetryService=n,this.metadata=new Map;const r=[];r.push(this.providerService.onDidChangeRepositories(i=>{var a;for(const s of i.added){const c=s.uri,u=me.getIndexMemento(c);if(u!==void 0){const d=L.externalIndexUri(this.providerService,c);d!==void 0&&(typeof((a=u.branch)==null?void 0:a.name)=="string"?ot.all(d,u.branch.name,{authentication:this.providerService.getAuthentication(c)}).catch(void 0):typeof u.ref=="string"&&N(u.ref)&&ot.single(d,u.ref,void 0,{authentication:this.providerService.getAuthentication(c)}).catch(void 0))}this.providerService.getMetadata(c).then(d=>{const f={},h=d.pullRequest===void 0?ie.getIndexBranchName(d):void 0;h!==void 0?f.branch={name:h}:f.ref=d.HEAD.sha,me.setIndexMemento(c,f).then(void 0,void 0)},void 0)}})),r.push(this.providerService.onDidChangeRepository(i=>{const a=i.repository.uri,s=b(a);this.metadata.delete(s),this.getIndexMetadata(a).catch(void 0)})),this.disposable=l.Disposable.from(...r)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,n){const r=await this.providerService.getModeRefType(e),i=Mt.decode(e);if(i!==void 0){if(i.type===Et.Latest)return r===se.Branch?this.getIndexedTip(e,n?0:ot.timeout):void 0;if(i.type===Et.SHA){const s=L.externalIndexUri(this.providerService,e);return s===void 0?void 0:await ot.exists(s,i.sha,{authentication:this.providerService.getAuthentication(e)},n?0:ot.timeout)?i.sha:void 0}}if(this.providerService.getModeConfig(e,r).index===P.Latest)return this.getIndexedTip(e,n?0:ot.timeout)}refresh(e){for(const n of e)this.metadata.delete(n.toString())}getIndexMetadata(e){const n=this.providerService.getVirtualRootUri(e),r=b(n);let i=this.metadata.get(r);return i!==void 0||(i=this.createIndexMetadata(e),this.metadata.set(r,i)),i}async getIndexedTip(e,n=ot.timeout){const r=await ie.getIndexedTip(this.providerService,e,n);return r!==void 0?r.commitId:void 0}async createIndexMetadata(e){const n=new _t(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const r=L.externalIndexUri(this.providerService,e);if(r===void 0)return;n.logStep("Getting metadata");const i=this.providerService.getMetadata(e),a=this.providerService.getModeRefType(e,i),s=await i;n.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const c=this.providerService.getAuthentication(e),u=s.pullRequest===void 0?ie.getIndexBranchName(s):void 0,d=await ot.single(r,s.HEAD.sha,u,{authentication:this.providerService.getAuthentication(e)});if(s.HEAD.type===J.Branch||s.HEAD.type===J.RemoteBranch){const _=Mt.decode(e);if(_!==void 0)return n.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),d===void 0?_.type===Et.Latest?(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await ot.branch(r,u,{authentication:this.providerService.getAuthentication(e)})?{type:Re.Indexed}:{type:Re.NotIndexed}):{type:Re.NotIndexed}:_.type===Et.Latest||_.type===Et.SHA?{type:Re.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}:{type:Re.Match,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}}n.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const h=this.providerService.getModeConfig(e,await a),p=this.providerService.getVirtualUriMetadata(e);if((h.index===P.Latest||h.index===P.Match)&&d!==void 0)return{type:Re.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(h.index===P.TipPlusLatest&&p.provider.id==="github"){if(d!==void 0&&d.commitId===s.HEAD.sha)return{type:Re.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(s.HEAD.type===J.Branch&&u!==void 0){n.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const _=await ot.all(r,u,{authentication:c});if(_!==void 0&&_.length>0)return{type:Re.Active,sha:this.computeClosestIndex(e,s.HEAD.sha,_),branch:{name:u}}}}return d!==void 0?{type:Re.Indexed}:s.HEAD.type===J.Branch&&(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await ot.branch(r,u,{authentication:c}))?{type:Re.Indexed}:{type:Re.NotIndexed}}finally{n.stop()}}async computeClosestIndex(e,n,r){if(r.length===0)throw new Error("At least on snapshot should exist");const i=new Set(r.map(f=>f.commitId)),a=await this.providerService.getCommits(e,{ref:n,limit:100});if(a===void 0)return;let s;for(const f of a.commits)if(f.hash===n){s=f;break}if(s===void 0)return;const c=new Map(a.commits.map(f=>[f.hash,f])),u=[s];let d;for(;u.length>0;){for(d=u.shift();d!==void 0&&!i.has(d.hash);)if(d.parents.length>0){for(let f=1;f<d.parents.length;f++){const h=c.get(d.parents[f]);h!==void 0&&u.push(h)}d=c.get(d.parents[0])}if(d!==void 0)break}return d!==void 0?d.hash:void 0}async getSnapshots(e,n){const r=L.externalIndexUri(this.providerService,e);if(r===void 0)return[];const i=await ot.all(r,void 0,{authentication:this.providerService.getAuthentication(e)});if(i===void 0)return[];const a=[];for(const s of i)s.branchName!==void 0&&a.push({workspaceId:s.workspaceId,snapshotId:s.snapshotId,hash:s.commitId,branch:{name:s.branchName}});return a}async getStatusBarContributions(e){const n=await this.providerService.getMetadata(e),[r,i]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,n)]),a=this.providerService.getModeConfig(e,i);if(r===void 0)return[];const{HEAD:s}=n,c=[];if(r!==void 0){let u;const d=[`${O(s.sha)}`];if(r.type===Re.Active){const f=await r.sha;a.index===P.Latest||a.index===P.Match?(u=a.display===U.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",d.push(l.l10n.t(`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):a.index===P.TipPlusLatest&&(u="$(layers-dot)",f!==n.HEAD.sha?d.push(l.l10n.t("The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):d.push(l.l10n.t("The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else r.type===Re.Match?(u="$(layers)",d.push(l.l10n.t(`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):r.type===Re.Indexed&&(u="$(layers)",d.push(l.l10n.t(`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));u&&c.push(yr({command:"remoteHub.indexMode.select",title:u,tooltip:d.join(`
`),arguments:[{uri:e}]}))}return c}}o(un,"RichNavIndexProvider");var Wn;(function(t){let e;function n(){return e=l.window.createStatusBarItem(l.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,l.window.onDidChangeActiveTextEditor(()=>{u()}),l.commands.registerCommand("remoteHub.indexMode.select",f=>{d(f).catch(h=>K.log("Selecting index mode failed.",h))})]}o(n,"create"),t.create=n;const r=new Map;function i(f){r.set(f.key(),f)}o(i,"addService"),t.addService=i;function a(f){r.delete(f.key())}o(a,"removeService"),t.removeService=a;function s(f){return r.get(b(f))}o(s,"getService");async function c(f){for(const h of r.values())if(await h.handles(f))return h}o(c,"getServiceForDocument");async function u(){try{let f=o(function(ne){const A=ne.lastIndexOf("/");return A<=0?ne:ne.substr(A+1)},"basename");const h=l.window.activeTextEditor;if(h===void 0){e.hide();return}const p=await c(h.document);if(p===void 0){e.hide();return}const _=await p.isDocumentIndexed(h.document);_===ar.Indexed?(e.text="$(compass)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",f(h.document.uri.path))),e.show()):_===ar.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",f(h.document.uri.path))),e.show()):e.hide()}catch(f){e.hide()}}o(u,"updateStatusBarItem"),t.updateStatusBarItem=u;async function d(f){var h;const p=f.uri,_=s(p);if(_===void 0)return;const[ne,A,X,pe]=await Promise.all([_.getBranchName(),_.getMetadata(),_.getIndexMetadata(),_.getModeRefType(p)]);if(X===void 0||!Re.hasIndex(X.type))return;let Q,be=!1;const Ne=Mt.decode(p);(Ne==null?void 0:Ne.type)===Et.Latest||(Ne==null?void 0:Ne.type)===Et.SHA?(be=!0,Q={display:U.Browse,index:Ne.type===Et.Latest?P.Latest:P.Match}):Q=(h=_.getCurrentIndexMode())!=null?h:_.getModeConfig(p,pe);const We=_.getUriMetadata(),Qe=l.l10n.t("{0} current","$(check)"),It={indexKind:"disable",label:l.l10n.t("Disable"),description:Q.index===P.None?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Disable rich navigation.")};let vt,qt;if(pe===se.PullRequestBranch||pe===se.PullRequestRemoteBranch||pe===se.Commit||pe===se.Tag){const hn={indexKind:"match",label:l.l10n.t("Current indexed commit - readonly"),description:Q.index===P.Match&&Q.display===U.Browse?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be read-only.")},nn={indexKind:"match+writeable",label:l.l10n.t("Current indexed commit - writable"),description:Q.index===P.Match&&Q.display===U.Edit?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be writable.")};let Wt=We.provider.id==="github";Wt&&(Wt=A.HEAD.type===J.RemoteBranch?A.HEAD.branch.remote.accessLevel>=le.Write:!0);const dn=Wt?[hn,nn,It]:[hn,It];qt=await l.window.showQuickPick(dn,{placeHolder:"Pick a rich navigation mode"})}else if(pe===se.Branch||pe===se.RemoteBranch){const hn={indexKind:"latest",label:l.l10n.t("Latest indexed commit"),description:Q.index===P.Latest?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation on the latest indexed commit. Files will be read-only.")},nn={indexKind:"tip+latest",label:l.l10n.t("Current commit & latest index"),description:Q.index===P.TipPlusLatest?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation on the current commit using the latest index. Files will be writeable.")},Wt=We.provider.id==="github"?[hn,nn,It]:[hn,It];qt=await l.window.showQuickPick(Wt,{placeHolder:l.l10n.t("Pick a rich navigation mode for branch {0}",ne)})}if(qt!==void 0&&(qt.indexKind==="disable"?vt={display:U.Edit,index:P.None}:qt.indexKind==="match"?vt={display:U.Browse,index:P.Match}:qt.indexKind==="match+writeable"?vt={display:U.Edit,index:P.Match}:qt.indexKind==="tip+latest"?vt={display:U.Edit,index:P.TipPlusLatest}:qt.indexKind==="latest"&&(vt={display:U.Browse,index:P.Latest}),vt!==void 0&&!re.equals(Q,vt))){if(await _.hasChanges()&&vt.display===U.Browse){await l.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0});return}if(await _.updateIndexMode(vt),be){const hn=await _.getNonIndexedWorkspaceDescriptor();hn!==void 0&&kn(_.getProviderService(),hn)}}}o(d,"toggleIndexMode")})(Wn||(Wn={}));class cn{constructor(e){this.telemetryService=e}static createStatus(){return Wn.create()}async createNavigationService(e,n){const r=await e.getIndexMetadata(n.uri);if(!(r===void 0||r.type===Re.NotIndexed))return()=>new Sr(e,n,this.telemetryService)}}o(cn,"RichNavServiceProvider");var Rn;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function n(i){const a=e.exec(i);if(a===null||a.length!==5)return;const s={v:1,w:a[1],s:a[2],a:a[3]};return l.Uri.from({scheme:Fe.scheme,authority:I(JSON.stringify(s)),path:a[4]})}o(n,"toVSCode"),t.toVSCode=n;function r(i){if(i.scheme!==Fe.scheme)return;let a;try{return a=JSON.parse(y(i.authority)),a===void 0?void 0:{workspaceId:a.w,snapshotId:a.s,assetId:`${a.a}${i.path}`}}catch{return}}o(r,"toRichNavComponents"),t.toRichNavComponents=r})(Rn||(Rn={}));const wr=o(class{constructor(){this._onDidChangeFile=new l.EventEmitter,this.cache=new Qn(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return wr.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return{type:l.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:l.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw l.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return e.content}writeFile(t,e,n){throw l.FileSystemError.NoPermissions()}delete(t,e){throw l.FileSystemError.NoPermissions()}rename(t,e,n){throw l.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==wr.scheme)return;const n=Rn.toRichNavComponents(t);if(n===void 0)return;const r=await At.getDesignTimeFileContent(n.workspaceId,n.snapshotId,n.assetId);if(r!==void 0)return e={content:this.textEncoder.encode(r),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let Fe=wr;Fe.scheme="vsck-fs",Fe.emptyDisposable={dispose:()=>{}};var ar;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(ar||(ar={}));const Mn=o(class{static registerCapability(t,e,n){var r;const i=this.disabledCapabilities.get(t);if(i==null?void 0:i[e])return!1;const a=this.localCapabilities.get(t);return(a==null?void 0:a[e])?!1:(r=n[e])!=null?r:!1}constructor(t,e,n){this.providerService=t,this.repository=e,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const r=o((a=!1)=>{const s=this.repository.uri;a||(this.metadata=this.providerService.getMetadata(s),this.indexMetadata=this.providerService.getIndexMetadata(s)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(s,this.metadata)]).then(async c=>{var u,d;const[f,h,p]=this.currentlyResolved,[_,ne,A]=c,X=this.providerService.getModeConfig(s,A);if(f!==void 0&&h!==void 0&&p!==void 0&&f.HEAD.sha===_.HEAD.sha&&ne!==void 0&&h.type===ne.type&&p.index===X.index&&p.display===X.display){const Q=(h==null?void 0:h.type)===Re.Active?await h.sha:void 0,be=(ne==null?void 0:ne.type)===Re.Active?await ne.sha:void 0;if(Q===be)return}const pe={newDisplayMode:X.display,newIndexMode:X.index,newIndexType:(ne==null?void 0:ne.type)===void 0?"undefined":Re[ne==null?void 0:ne.type],currentDisplayMode:(u=p==null?void 0:p.display)!=null?u:"undefined",currentIndexMode:(d=p==null?void 0:p.index)!=null?d:"undefined",currentIndexType:(h==null?void 0:h.type)===void 0?"undefined":Re[h==null?void 0:h.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",pe),this.currentlyResolved=[_,ne,X];for(const Q of this.registeredFeatures.values())Q.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,at.isActive(ne)){const Q=L.externalIndexUri(this.providerService,_),be=await ne.sha;if(Q!==void 0&&be!==void 0){const Ne=await ot.single(Q,be,ie.getIndexBranchName(_),{authentication:this.providerService.getAuthentication(s)});Ne!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:Ne.snapshotId}),this.workspaceSnapshot=Ne,this.documentListeners=this.installDocumentListeners(),((X==null?void 0:X.display)===U.Edit||_.HEAD.sha!==be)&&(this.mapper=new ge(this.providerService,s,be,_.HEAD.sha)))}}await Wn.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new Qn(2048),this.knownDesignTimeFiles=new Set;const i=[];i.push(this.providerService.onDidChangeRepository(a=>{b(a.repository.uri)===b(this.repository.uri)&&r()})),i.push(this.providerService.onDidRefresh(a=>{for(const s of a)if(b(s)===b(this.repository.uri)){r();break}})),this.environmentListeners=l.Disposable.from(...i),r(!0),Wn.addService(this),this.indexMetadata.then(async a=>{var s;const c=this.repository.uri;let u=!1;const d=Mt.decode(this.repository.uri);if(d!==void 0&&a!==void 0&&(d.type===Et.Latest&&a.type!==Re.Active||d.type===Et.SHA&&(a.type!==Re.Active||await a.sha!==d.sha))&&(u=!0),!u){await this.metadata;const f=await this.providerService.getModeRefType(c,this.metadata),h=(s=this.currentlyResolved[2])!=null?s:this.providerService.getModeConfig(c,f,!0);h!==void 0&&h.display===U.Browse&&a!==void 0&&h.index!==P.None&&a.type!==Re.Active?u=!0:(a==null?void 0:a.type)===Re.Active&&await a.sha===void 0&&((h==null?void 0:h.display)===U.Browse,u=!0)}u&&l.window.showWarningMessage(l.l10n.t("The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),Mn.fileSystemProvider===void 0&&(Mn.fileSystemProvider=new Fe,l.workspace.registerFileSystemProvider(Fe.scheme,Mn.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],n=t!==void 0;if(t===void 0){const r=this.repository.uri,i=await this.providerService.getModeRefType(r,this.metadata);t=this.providerService.getModeConfig(r,i),await new Promise(a=>setTimeout(a,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===P.Latest){await Promise.all([this.metadata,this.indexMetadata]);const r=await this.getIndexedTip();if(r===void 0)return;await this.sync(r.hash)}else t.index===P.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());n&&await me.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return b(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),Wn.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==Vn.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return ie.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getProviderService(){return this.providerService}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:n}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:n}),location:ze.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===Re.NotIndexed||this.workspaceSnapshot===void 0)return 0;const n=this.pendingCapabilitiesRequests.get(t.uri.toString());return n!==void 0&&await n,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=L.externalIndexUri(this.providerService,t),n=ie.getIndexBranchName(t);if(e===void 0||n===void 0)return;const r=await ot.getIndexedTip(e,n,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(r===void 0)return;const i=await ye.get(this.providerService,this.repository.uri,r.commitId);if(i!==void 0)return{...i,branchName:n}}hasChanges(){return this.providerService.getChangeStore(this.repository.uri).hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,n=L.externalIndexUri(this.providerService,e);if(n===void 0)return;const[r,i]=await Promise.all([ye.get(this.providerService,this.repository.uri,t),ot.single(n,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(r===void 0||i===void 0))return{...r,branchName:i.branchName}}installDocumentListeners(){const t=[],e=o(async n=>{const r=n.uri.scheme;if(Vn.scheme!==r&&Fe.scheme!==r)return;const i=n.uri.toString();if(r===Vn.scheme&&!i.startsWith(this.repositoryRoot)||r===Fe.scheme&&!this.knownDesignTimeFiles.has(i)||this.pendingCapabilitiesRequests.has(i))return;const a=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(a===void 0)return;let s=this.capabilitiesCache.get(i);if(s!==null){if(s===void 0){const c=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(i,c),s=await c,this.pendingCapabilitiesRequests.delete(i),this.capabilitiesCache.set(i,s===void 0?null:s)}s===void 0||!l.workspace.textDocuments.some(c=>c===n)||this.registerProviders(n,s,a)}},"openHandler");return t.push(l.workspace.onDidOpenTextDocument(e)),l.workspace.textDocuments.forEach(e),t.push(l.workspace.onDidCloseTextDocument(n=>{const r=n.uri.toString(),i=this.registeredFeatures.get(r);i!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),i.dispose()),this.pendingCapabilitiesRequests.delete(r)})),l.Disposable.from(...t)}registerProviders(t,e,n){if(this.workspaceSnapshot===void 0)return;const r=this.workspaceSnapshot,i=t.languageId,s=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],c=[],u=new Promise((A,X)=>{const pe=`/${r.snapshotId}/source/`;this.metadata.then(Q=>{A(E(be=>{const Ne=l.Uri.parse(be);if(Q===void 0)return Ne;try{if(Ne.scheme==="vsck"&&Ne.authority===r.workspaceId&&Ne.path.startsWith(pe))return this.repository.createRelativeUri(Ne.path.substr(pe.length));const We=Rn.toVSCode(be);return We!==void 0?(this.knownDesignTimeFiles.add(We.toString()),We):Ne}catch(We){return Ne}}))},X)}),d=new RegExp(`^vsck:\\/\\/${r.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function f(A){const X=d.exec(A);return X===null||X.length===2}o(f,"designTimeFilter");function h(A){if(A==null)return A;if(Array.isArray(A)){if(A.length===0)return[];const X=A[0];return typeof X.uri=="string"?A.filter(be=>f(be.uri)):typeof X.targetUri=="string"?A.filter(be=>f(be.targetUri)):[]}return d.exec(A.uri)===null?A:void 0}o(h,"filterDesignTimeFiles");async function p(A,X,pe){var Q,be,Ne;if(pe==null||A===void 0)return pe;const We=new Map(l.workspace.textDocuments.map(It=>[It.uri.toString(!0),It]));if(Array.isArray(pe)){const It=[],vt=[];if(pe.length===0)return[];for(const qt of pe){const hn=qt;if(hn.uri instanceof l.Uri){const nn=await A.mapRangeFromIndexToCode((Q=We.get(hn.uri.toString()))!=null?Q:hn.uri,hn.range);nn!==void 0&&It.push(new l.Location(hn.uri,nn))}else{const nn=qt,Wt=(be=We.get(nn.targetUri.toString()))!=null?be:nn.targetUri,dn=nn.originSelectionRange?await A.mapRangeFromIndexToCode(X,nn.originSelectionRange):void 0;if(dn!==void 0||nn.originSelectionRange===void 0){const Ir=await A.mapRangeFromIndexToCode(Wt,nn.targetRange);if(Ir!==void 0){const Di=nn.targetSelectionRange?await A.mapRangeFromIndexToCode(Wt,nn.targetSelectionRange):void 0;(Di!==void 0||nn.targetSelectionRange===void 0)&&vt.push({targetUri:nn.targetUri,targetRange:Ir,targetSelectionRange:Di,originSelectionRange:dn})}}}}return It.length>0?It:vt}const Qe=await A.mapRangeFromIndexToCode((Ne=We.get(pe.uri.toString()))!=null?Ne:pe.uri,pe.range);if(Qe!==void 0)return new l.Location(pe.uri,Qe)}o(p,"mapLocations");const _=o(A=>({authentication:this.providerService.getAuthentication(A.uri),correlationId:mr()}),"getRestApiOptions"),ne=o((A,X)=>{const pe={method:A,correlationId:X.correlationId};this.telemetryService.publicLog2("codex.restAPICall",pe)},"sendTelemetry");Mn.registerCapability(i,"hoverProvider",e)&&c.push(l.languages.registerHoverProvider(s,{provideHover:async(A,X)=>{const pe=await this.createTextDocumentPositionParams(A,X);if(pe===void 0)return;const Q=_(A);return ne("codex.provideHover",Q),(await u).asHover(await At.provideHover(n,pe,Q))}})),Mn.registerCapability(i,"definitionProvider",e)&&c.push(l.languages.registerDefinitionProvider(s,{provideDefinition:async(A,X)=>{const pe=await this.createTextDocumentPositionParams(A,X);if(pe===void 0)return;const Q=_(A);return ne("codex.provideDefinition",Q),p(this.mapper,A,(await u).asDefinitionResult(h(await At.provideDefinition(n,pe,Q))))}})),Mn.registerCapability(i,"declarationProvider",e)&&c.push(l.languages.registerDeclarationProvider(s,{provideDeclaration:async(A,X)=>{const pe=await this.createTextDocumentPositionParams(A,X);if(pe===void 0)return;const Q=_(A);return ne("codex.provideDeclaration",Q),p(this.mapper,A,(await u).asDeclarationResult(h(await At.provideDeclaration(n,pe,Q))))}})),Mn.registerCapability(i,"typeDefinitionProvider",e)&&c.push(l.languages.registerTypeDefinitionProvider(s,{provideTypeDefinition:async(A,X)=>{const pe=await this.createTextDocumentPositionParams(A,X);if(pe===void 0)return;const Q=_(A);return ne("codex.provideTypeDefinition",Q),p(this.mapper,A,(await u).asDefinitionResult(h(await At.provideTypeDefinition(n,pe,Q))))}})),Mn.registerCapability(i,"referencesProvider",e)&&c.push(l.languages.registerReferenceProvider(s,{provideReferences:async(A,X,pe)=>{const Q=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(A,X):X;if(Q===void 0)return;const be={position:{line:Q.line,character:Q.character},textDocument:{uri:this.createRichNavDocumentUri(A.uri).toString(!0)},context:{includeDeclaration:pe.includeDeclaration}},Ne=_(A);return ne("codex.provideReferences",Ne),p(this.mapper,A,(await u).asReferences(h(await At.provideReferences(n,be,Ne))))}})),Mn.registerCapability(i,"foldingRangeProvider",e)&&c.push(l.languages.registerFoldingRangeProvider(s,{provideFoldingRanges:async A=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(A))return;const X=_(A);return ne("codex.provideFoldingRanges",X),(await u).asFoldingRanges(await At.providerFoldingRanges(n,this.createTextDocumentParams(A.uri),X))}})),Mn.registerCapability(i,"workspaceSymbolProvider",e)&&c.push(l.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:async A=>{const X=_(t),pe=await At.provideWorkspaceSymbols(n,A,X);if(pe!==void 0)return(await u).asSymbolInformations(pe)}})),this.registeredFeatures.set(t.uri.toString(),l.Disposable.from(...c)),Wn.updateStatusBarItem()}async capabilities(t){var e;const n=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(n!==void 0)return(e=await At.capabilities(n,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)}))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const n=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(n!==void 0)return{position:{line:n.line,character:n.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===Fe.scheme){const r=Rn.toRichNavComponents(t);return r===void 0?t:l.Uri.file(r.assetId)}const e=this.repository.uri.toString(!0),n=t.toString(!0);return l.Uri.file(n.substr(e.length))}},"_RichNavService");let Sr=Mn;Sr.localCapabilities=new Map([["javascript",Object.assign(dt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(dt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(dt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(dt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),Sr.disabledCapabilities=new Map([["javascript",Object.assign(dt.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(dt.create(),{declarationProvider:!0})],["typescript",Object.assign(dt.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(dt.create(),{declarationProvider:!0})]]);var Ar=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),di=o((t,e,n)=>(Ar(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),co=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),Sa=o((t,e,n,r)=>(Ar(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"__privateSet"),fi;class uo{constructor(e){co(this,fi,void 0),Sa(this,fi,e)}async provideEditSessionIdentity(e,n){await kr(di(this,fi),e.uri);const r=di(this,fi).getRepository(e.uri);if(!r||n.isCancellationRequested)return null;const{uri:i,ref:a}=await di(this,fi).getRepositoryContext(r,"http"),s=await di(this,fi).getMetadata(r.uri);return JSON.stringify({remote:i!=null?i:s.cloneUrl.http,ref:a,sha:s.HEAD.sha})}provideEditSessionIdentityMatch(e,n){try{const r=this.normalizeEditSessionIdentity(e),i=this.normalizeEditSessionIdentity(n);return r.remote===i.remote&&r.ref===i.ref&&r.sha===i.sha?l.EditSessionIdentityMatch.Complete:r.remote===i.remote&&r.ref===i.ref&&r.sha!==i.sha?l.EditSessionIdentityMatch.Partial:l.EditSessionIdentityMatch.None}catch(r){return l.EditSessionIdentityMatch.Partial}}normalizeEditSessionIdentity(e){var n,r,i;let{remote:a,ref:s,sha:c}=JSON.parse(e);return a=(i=(r=(n=di(this,fi)).getHttpsCloneUri)==null?void 0:r.call(n,a))!=null?i:typeof a=="string"&&a.endsWith(".git")?a.slice(0,a.length-4):a,{remote:a,ref:s,sha:c}}}o(uo,"EditSessionIdentityProvider"),fi=new WeakMap;var fo=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"extensionApi_accessCheck"),Zr=o((t,e,n)=>(fo(t,e,"read from private field"),n?n.call(t):e.get(t)),"extensionApi_privateGet"),Na=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"extensionApi_privateAdd"),Oa=o((t,e,n,r)=>(fo(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"extensionApi_privateSet"),Vr;class Ca{constructor(e){Na(this,Vr,void 0),Oa(this,Vr,e),this.registerApiCommands()}registerApiCommands(){l.commands.registerCommand("remoteHub.api.getRepositoryContext",async e=>{if(!e)throw new Error("Please specify a repository uri.");await kr(Zr(this,Vr),e);const n=Zr(this,Vr).getRepository(e);if(!n)throw new Error(`Unable to acquire repository context for ${e.toString(!0)}.`);return Zr(this,Vr).getRepositoryContext(n)})}async getMetadata(e){const n=Zr(this,Vr).getVirtualUriMetadata(e);if(n===void 0)return;const{provider:r,repo:i}=n;return{provider:{id:r.id,name:r.name},repo:i,getRevision:async()=>{const{HEAD:a}=await Zr(this,Vr).getMetadata(e);return{type:a.type,name:a.name,revision:a.sha}}}}getProvider(e){return Zr(this,Vr).getRegisteredProvider(e)}getProviderUri(e){return k.getProviderUri(e)}getProviderRootUri(e){return Zr(this,Vr).getProviderRootUri(e)}isProviderUri(e,n){return e.scheme!==Vn.scheme&&Zr(this,Vr).hasProvider(e,n)}getVirtualUri(e){return k.getVirtualUri(e)}getVirtualWorkspaceUri(e){return Zr(this,Vr).getVirtualWorkspaceUri(e)}async loadWorkspaceContents(e){if(e.scheme!==k.scheme)return!1;await kr(Zr(this,Vr),e);const n=Zr(this,Vr).getProviderRootUri(e);if(n.scheme!=="github")return!1;const r=new _t(`RemoteHub.loadWorkspaceContents(${n.toString()})`,{log:!1,logLevel:Ze.Debug}),i=await Zr(this,Vr).loadWorkspaceContents(n);return r.stop(),i}}o(Ca,"ExtensionApi"),Vr=new WeakMap;var Ba=Object.defineProperty,ho=Object.getOwnPropertyDescriptor,da=o((t,e,n,r)=>{for(var i=r>1?void 0:r?ho(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Ba(e,n,i),i},"fs_decorateClass");const _a=l.FileSystemError.FileNotFound().code;class ia{constructor(e){this.providerService=e,this._onDidChangeFile=new l.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.syncedRootUris=new Set,this.disposable=l.Disposable.from(l.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),l.workspace.registerFileSearchProvider(this.scheme,this),l.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),e.onDidChangeChangeStore(n=>{const r=n.map(i=>{switch(i.type){case D.Created:return{type:l.FileChangeType.Created,uri:i.uri};case D.Changed:return{type:l.FileChangeType.Changed,uri:i.uri};case D.Deleted:return{type:l.FileChangeType.Deleted,uri:i.uri}}});setTimeout(()=>this._onDidChangeFile.fire(r),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return Vn.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(n=>n.scheme===this.scheme),e.length!==0&&(K.log(`fs.onRefreshOrRepositoryChanged(${e.map(n=>n.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const n=k.getOpenUris(this.scheme,e);for(const[i,a]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(s=>ee(a,s))&&(this.implicitlyWatchedUris.delete(i),n.set(i,a));K.debug(`fs.updateOpenOrWatchedUris(${e.map(i=>i.toString()).join(", ")}): uris=${n.size}`);for(const i of e)n.set(b(i),i);const r=[...n.values()].map(i=>({type:l.FileChangeType.Changed,uri:i}));setTimeout(()=>{K.debug(`fs.updateOpenOrWatchedUris: Firing events=${r.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(r)},0)}watch(e,n){const r=b(e);this.watchedUris.set(r,e);const i=kr(this.providerService,e).then(()=>this.providerService.watch(k.getProviderUri(e),n));return{dispose:async()=>{this.watchedUris.delete(r),(await i).dispose()}}}async stat(e){const n=new _t(`fs.stat(${e.toString()})`);await kr(this.providerService,e);const r=this.providerService.getVirtualRootUri(e),i=r.toString();this.syncedRootUris.has(i)||(this.syncedRootUris.add(i),await this.providerService.fetchOrSync(r));let a;try{if(this.providerService.changeStoreMaybeHasChanges(r,e)!==!1){if(n.logStep("ChangeStore query"),a=await this.providerService.changeStoreStat(e),a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(b(e),e);return a=await this.providerService.stat(k.getProviderUri(e)),a}finally{a===void 0&&this.implicitlyWatchedUris.delete(b(e)),n.stop()}}async readDirectory(e){const n=new _t(`fs.readDirectory(${e.toString()})`);await kr(this.providerService,e),this.implicitlyWatchedUris.set(b(e),e);try{n.logStep("Provider query");let r=await this.providerService.readDirectory(k.getProviderUri(e));return this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(n.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),r=await this.providerService.changeStoreUpdateDirectoryEntries(e,r)),r}finally{n.stop()}}async createDirectory(e){const n=new _t(`fs.createDirectory(${e.toString()})`);await kr(this.providerService,e);try{await this.providerService.changeStoreCreateDirectory(e)}catch(r){throw K.error(r,n.context),r}finally{n.stop()}}async readFile(e){const n=new _t(`fs.readFile(${e.toString()})`),r=b(e);let i;await kr(this.providerService,e);try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){n.logStep("ChangeStore query");const a=await this.providerService.changeStoreReadFile(e);if(a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(r,e);return i=await this.providerService.readFile(k.getProviderUri(e)),i}catch(a){throw a instanceof Xt&&Nn.showProviderNotFoundMessage(a),a}finally{i===void 0&&this.implicitlyWatchedUris.delete(r),n.stop()}}async writeFile(e,n,r){const i=new _t(`fs.writeFile(${e.toString()})`,{},n.length,r);await kr(this.providerService,e);try{let a;try{if(a=await this.stat(e),!r.overwrite)throw l.FileSystemError.FileExists()}catch(s){if(s instanceof l.FileSystemError&&s.code===_a){if(!r.create)throw l.FileSystemError.FileNotFound(e)}else throw s}try{if(a===void 0)await this.providerService.changeStoreCreateFile(e,n);else{i.logStep("Provider original query");let s;try{s=await this.providerService.readFile(k.getProviderUri(e))}catch(c){if(c instanceof l.FileSystemError&&c.code===_a)s=new Uint8Array;else throw c}i.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.providerService.changeStoreWriteFile(e,n,s)}}catch(s){throw K.error(s,i.context),s}}catch(a){throw a instanceof Xt&&Nn.showProviderNotFoundMessage(a),a}finally{i.stop()}}async delete(e,n){const r=new _t(`fs.delete(${e.toString()})`,{},n);await kr(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:await this.providerService.changeStoreDeleteFile(e);break;case l.FileType.Directory:{await this.deleteDirectory(e,n);break}default:throw l.FileSystemError.NoPermissions()}}catch(i){throw K.error(i,r.context),i}finally{r.stop()}}async deleteDirectory(e,n){const r=new _t(`fs.deleteDirectory(${e.toString()})`,{},n);try{const i=await this.readDirectory(e);if(i.length!==0){if(!n.recursive&&i.some(([,a])=>a===l.FileType.Directory))throw l.FileSystemError.NoPermissions();for(const[a,s]of i)s===l.FileType.Directory?await this.deleteDirectory(l.Uri.joinPath(e,a),n):await this.providerService.changeStoreDeleteFile(l.Uri.joinPath(e,a))}await this.providerService.changeStoreDeleteDirectory(e)}catch(i){throw K.error(i,r.context),i}finally{r.stop()}}async rename(e,n,r){const i=new _t(`fs.rename(${e.toString()} -> ${n.toString()})`,{},r);await kr(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite}),await this.delete(e,{recursive:!1});break}case l.FileType.Directory:{await this.renameDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw K.error(a,i.context),a}finally{i.stop()}}async renameDirectory(e,n,r){const i=new _t(`fs.renameDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{await this.copyDirectory(e,n,r),await this.delete(e,{recursive:!0})}catch(a){throw K.error(a,i.context),a}finally{i.stop()}}async copy(e,n,r){const i=new _t(`fs.copy(${e.toString()} -> ${n.toString()})`,{},r);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite});break}case l.FileType.Directory:{await this.copyDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw K.error(a,i.context),a}finally{i.stop()}}async copyDirectory(e,n,r){const i=new _t(`fs.copyDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{if(await this.exists(n))throw l.FileSystemError.FileExists();try{await this.createDirectory(n);const a=await this.readDirectory(e);for(const[s,c]of a)c===l.FileType.Directory?await this.copyDirectory(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r):await this.copy(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r)}catch(a){throw K.error(a,i.context),a}}finally{i.stop()}}async exists(e){try{return await this.stat(e),!0}catch(n){if(n instanceof l.FileSystemError&&n.code===_a)return!1;throw n}}async provideFileSearchResults(e,n,r){var i;const a=new _t(`fs.provideFileSearchResults(${e.pattern}, ${n.folder.toString()})`,{logLevel:Ze.Debug});await kr(this.providerService,n.folder);let s;try{return s=await this.providerService.provideFileSearchResults(e,{...n,folder:k.getProviderUri(n.folder)},r),s==null?void 0:s.map(c=>k.getVirtualUri(c))}catch(c){throw K.error(c,a.context),c}finally{a.stop({suffix:` \u2022 ${(i=s==null?void 0:s.length)!=null?i:0} results found`})}}async provideTextSearchResults(e,n,r,i){return await kr(this.providerService,n.folder),this.providerService.provideTextSearchResults(e,{...n,folder:k.getProviderUri(n.folder)},{report:a=>r.report({...a,uri:k.getVirtualUri(a.uri)})},i)}}o(ia,"ChangeTrackingFileSystem"),da([wt()],ia.prototype,"stat",1),da([wt()],ia.prototype,"readDirectory",1),da([wt()],ia.prototype,"readFile",1);const go=o(class{constructor(t){this.providerService=t,this.lock=new _n("PendingRepositoryOpenActions"),this.disposable=l.Disposable.from(t.onDidChangeRepositories(e=>e.added.length&&this.onRepositoriesOpened(e.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const n=await this.getAndDelete(e);(n==null?void 0:n.applyChangeset)&&await this.applyPendingChangeset(e,n.applyChangeset),(n==null?void 0:n.filesToOpen)&&this.openPendingFiles(e.uri,n.filesToOpen),await this.fetchOrSync(e).then(async()=>{const r=me.getEffective("uncommittedChangesOnEntry");if(r==="none"||!await this.providerService.changeStoreHasChanges(e.uri)||(await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e.uri))).length===0&&r==="promptIfBehind")return;const{state:s}=await this.providerService.getMetadata(e.uri);if(s===void 0||s.behind<1)return;const c=await this.providerService.changeStoreGetChanges(e.uri),u=c.length===1?l.l10n.t("You have {0} file with uncommitted changes from a previous edit session.",c.length.toString()):l.l10n.t("You have {0} files with uncommitted changes from a previous edit session.",c.length.toString());let d="";s.behind===1?d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commit behind.`,s.behind.toString()):s.behind>1&&(d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commits behind.`,s.behind.toString()));const f=[u,d].join(`

`),h={title:l.l10n.t("Sync")},p={title:l.l10n.t("Continue Without Syncing"),isCloseAffordance:!0},_={title:l.l10n.t("Don't Show Again")},ne=await l.window.showInformationMessage(f,{modal:!0},h,p,_);switch(ne==null?void 0:ne.title){case h.title:await l.commands.executeCommand("remoteHub.sync");break;case _.title:await me.updateEffective("uncommittedChangesOnEntry","none");break;default:break}})}}async fetchOrSync(t){await this.providerService.fetchOrSync(t.uri)}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){K.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t.uri);if(n!==void 0)return await this.storeCore(t.uri,void 0),n},"PendingRepositoryOpenActions.getAndDelete")}catch(e){K.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){K.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let n of e){const r=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(n);let i,a;(r==null?void 0:r.groups)!==void 0&&(i=Number(r.groups.start),isNaN(i)&&(i=void 0),a=Number(r.groups.end),isNaN(a)&&(a=void 0),n=n.substring(0,r.index));const s=l.Uri.joinPath(t,n);let c;try{c=await l.workspace.fs.stat(s)}catch{}if((c==null?void 0:c.type)===l.FileType.Directory)l.commands.executeCommand("revealInExplorer",s);else{let u;i!==void 0&&(u={selection:new l.Range(Number(i)-1,0,a!=null?a:i,0)}),l.commands.executeCommand("vscode.open",s,u)}}}}setChangesetToApply(t,e){return K.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return K.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){K.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.providerService.changeStoreApplyChangeset(t.uri,e,{save:!0})}catch(n){K.error(n,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.providerService.getFromStorage(t,this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.providerService.deleteFromStorage(t,this.getStorageKey(t)):this.providerService.storeInStorage(t,this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${b(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&T(r)?l.Uri.from(r):r);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return K.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:go.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let vo=go;vo.storageSchemaVersion=1;function Pi(){}o(Pi,"Diff"),Pi.prototype={diff:o(function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.callback;typeof r=="function"&&(i=r,r={}),this.options=r;var a=this;function s(A){return i?(setTimeout(function(){i(void 0,A)},0),!0):A}o(s,"done"),e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var c=n.length,u=e.length,d=1,f=c+u,h=[{newPos:-1,components:[]}],p=this.extractCommon(h[0],n,e,0);if(h[0].newPos+1>=c&&p+1>=u)return s([{value:this.join(n),count:n.length}]);function _(){for(var A=-1*d;A<=d;A+=2){var X=void 0,pe=h[A-1],Q=h[A+1],be=(Q?Q.newPos:0)-A;pe&&(h[A-1]=void 0);var Ne=pe&&pe.newPos+1<c,We=Q&&0<=be&&be<u;if(!Ne&&!We){h[A]=void 0;continue}if(!Ne||We&&pe.newPos<Q.newPos?(X=Ie(Q),a.pushComponent(X.components,void 0,!0)):(X=pe,X.newPos++,a.pushComponent(X.components,!0,void 0)),be=a.extractCommon(X,n,e,A),X.newPos+1>=c&&be+1>=u)return s(po(a,X.components,n,e,a.useLongestToken));h[A]=X}d++}if(o(_,"execEditLength"),i)o(function A(){setTimeout(function(){if(d>f)return i();_()||A()},0)},"exec")();else for(;d<=f;){var ne=_();if(ne)return ne}},"diff"),pushComponent:o(function(e,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={count:i.count+1,added:n,removed:r}:e.push({count:1,added:n,removed:r})},"pushComponent"),extractCommon:o(function(e,n,r,i){for(var a=n.length,s=r.length,c=e.newPos,u=c-i,d=0;c+1<a&&u+1<s&&this.equals(n[c+1],r[u+1]);)c++,u++,d++;return d&&e.components.push({count:d}),e.newPos=c,u},"extractCommon"),equals:o(function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:o(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:o(function(e){return e},"castInput"),tokenize:o(function(e){return e.split("")},"tokenize"),join:o(function(e){return e.join("")},"join")};function po(t,e,n,r,i){for(var a=0,s=e.length,c=0,u=0;a<s;a++){var d=e[a];if(d.removed){if(d.value=t.join(r.slice(u,u+d.count)),u+=d.count,a&&e[a-1].added){var h=e[a-1];e[a-1]=e[a],e[a]=h}}else{if(!d.added&&i){var f=n.slice(c,c+d.count);f=f.map(function(_,ne){var A=r[u+ne];return A.length>_.length?A:_}),d.value=t.join(f)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var p=e[s-1];return s>1&&typeof p.value=="string"&&(p.added||p.removed)&&t.equals("",p.value)&&(e[s-2].value+=p.value,e.pop()),e}o(po,"buildValues");function Ie(t){return{newPos:t.newPos,components:t.components.slice(0)}}o(Ie,"clonePath");var bt=new Pi;function Pt(t,e,n){return bt.diff(t,e,n)}o(Pt,"diffChars");function Zt(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}o(Zt,"generateOptions");var In=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Kn=/\S/,On=new Pi;On.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!Kn.test(t)&&!Kn.test(e)},On.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&In.test(e[n])&&In.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function Ur(t,e,n){return n=Zt(n,{ignoreWhitespace:!0}),On.diff(t,e,n)}o(Ur,"diffWords");function hi(t,e,n){return On.diff(t,e,n)}o(hi,"diffWordsWithSpace");var Mr=new Pi;Mr.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function Wr(t,e,n){return Mr.diff(t,e,n)}o(Wr,"diffLines");function gi(t,e,n){var r=Zt(n,{ignoreWhitespace:!0});return Mr.diff(t,e,r)}o(gi,"diffTrimmedLines");var Pr=new Pi;Pr.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function ba(t,e,n){return Pr.diff(t,e,n)}o(ba,"diffSentences");var is=new Pi;is.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Bc(t,e,n){return is.diff(t,e,n)}o(Bc,"diffCss");function mo(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mo=o(function(e){return typeof e},"_typeof"):mo=o(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),mo(t)}o(mo,"_typeof");function Qi(t){return hl(t)||gl(t)||vl(t)||pl()}o(Qi,"_toConsumableArray");function hl(t){if(Array.isArray(t))return ko(t)}o(hl,"_arrayWithoutHoles");function gl(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}o(gl,"_iterableToArray");function vl(t,e){if(!!t){if(typeof t=="string")return ko(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ko(t,e)}}o(vl,"_unsupportedIterableToArray");function ko(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}o(ko,"_arrayLikeToArray");function pl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o(pl,"_nonIterableSpread");var ml=Object.prototype.toString,Ea=new Pi;Ea.useLongestToken=!0,Ea.tokenize=Mr.tokenize,Ea.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(a,s){return typeof s=="undefined"?n:s}:r;return typeof t=="string"?t:JSON.stringify(Fo(t,null,null,i),i,"  ")},Ea.equals=function(t,e){return Pi.prototype.equals.call(Ea,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Hc(t,e,n){return Ea.diff(t,e,n)}o(Hc,"diffJson");function Fo(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return n[a];var s;if(ml.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),n.push(s),a=0;a<t.length;a+=1)s[a]=Fo(t[a],e,n,r,i);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),mo(t)==="object"&&t!==null){e.push(t),s={},n.push(s);var c=[],u;for(u in t)t.hasOwnProperty(u)&&c.push(u);for(c.sort(),a=0;a<c.length;a+=1)u=c[a],s[u]=Fo(t[u],e,n,r,u);e.pop(),n.pop()}else s=t;return s}o(Fo,"canonicalize");var yo=new Pi;yo.tokenize=function(t){return t.slice()},yo.join=yo.removeEmpty=function(t){return t};function Uc(t,e,n){return yo.diff(t,e,n)}o(Uc,"diffArrays");function Ha(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.split(/\r\n|[\n\v\f\r\x85]/),r=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],a=0;function s(){var d={};for(i.push(d);a<n.length;){var f=n[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(f))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(f);h&&(d.index=h[1]),a++}for(c(d),c(d),d.hunks=[];a<n.length;){var p=n[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))d.hunks.push(u());else{if(p&&e.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(p));a++}}}o(s,"parseIndex");function c(d){var f=/^(---|\+\+\+)\s+(.*)$/.exec(n[a]);if(f){var h=f[1]==="---"?"old":"new",p=f[2].split("	",2),_=p[0].replace(/\\\\/g,"\\");/^".*"$/.test(_)&&(_=_.substr(1,_.length-2)),d[h+"FileName"]=_,d[h+"Header"]=(p[1]||"").trim(),a++}}o(c,"parseFileHeader");function u(){var d=a,f=n[a++],h=f.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+h[1],oldLines:typeof h[2]=="undefined"?1:+h[2],newStart:+h[3],newLines:typeof h[4]=="undefined"?1:+h[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var _=0,ne=0;a<n.length&&!(n[a].indexOf("--- ")===0&&a+2<n.length&&n[a+1].indexOf("+++ ")===0&&n[a+2].indexOf("@@")===0);a++){var A=n[a].length==0&&a!=n.length-1?" ":n[a][0];if(A==="+"||A==="-"||A===" "||A==="\\")p.lines.push(n[a]),p.linedelimiters.push(r[a]||`
`),A==="+"?_++:A==="-"?ne++:A===" "&&(_++,ne++);else break}if(!_&&p.newLines===1&&(p.newLines=0),!ne&&p.oldLines===1&&(p.oldLines=0),e.strict){if(_!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(d+1));if(ne!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(d+1))}return p}for(o(u,"parseHunk");a<n.length;)s();return i}o(Ha,"parsePatch");function yl(t,e,n){var r=!0,i=!1,a=!1,s=1;return o(function c(){if(r&&!a){if(i?s++:r=!1,t+s<=n)return s;a=!0}if(!i)return a||(r=!0),e<=t-s?-s++:(i=!0,c())},"iterator")}o(yl,"distanceIterator");function as(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=Ha(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var r=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=e.hunks,s=n.compareLine||function(Di,Ri,aa,Li){return Ri===Li},c=0,u=n.fuzzFactor||0,d=0,f=0,h,p;function _(Di,Ri){for(var aa=0;aa<Di.lines.length;aa++){var Li=Di.lines[aa],Ra=Li.length>0?Li[0]:" ",Mo=Li.length>0?Li.substr(1):Li;if(Ra===" "||Ra==="-"){if(!s(Ri+1,r[Ri],Ra,Mo)&&(c++,c>u))return!1;Ri++}}return!0}o(_,"hunkFits");for(var ne=0;ne<a.length;ne++){for(var A=a[ne],X=r.length-A.oldLines,pe=0,Q=f+A.oldStart-1,be=yl(Q,d,X);pe!==void 0;pe=be())if(_(A,Q+pe)){A.offset=f+=pe;break}if(pe===void 0)return!1;d=A.offset+A.oldStart+A.oldLines}for(var Ne=0,We=0;We<a.length;We++){var Qe=a[We],It=Qe.oldStart+Qe.offset+Ne-1;Ne+=Qe.newLines-Qe.oldLines;for(var vt=0;vt<Qe.lines.length;vt++){var qt=Qe.lines[vt],hn=qt.length>0?qt[0]:" ",nn=qt.length>0?qt.substr(1):qt,Wt=Qe.linedelimiters[vt];if(hn===" ")It++;else if(hn==="-")r.splice(It,1),i.splice(It,1);else if(hn==="+")r.splice(It,0,nn),i.splice(It,0,Wt),It++;else if(hn==="\\"){var dn=Qe.lines[vt-1]?Qe.lines[vt-1][0]:null;dn==="+"?h=!0:dn==="-"&&(p=!0)}}}if(h)for(;!r[r.length-1];)r.pop(),i.pop();else p&&(r.push(""),i.push(`
`));for(var Ir=0;Ir<r.length-1;Ir++)r[Ir]=r[Ir]+i[Ir];return r.join("")}o(as,"applyPatch");function Wc(t,e){typeof t=="string"&&(t=Ha(t));var n=0;function r(){var i=t[n++];if(!i)return e.complete();e.loadFile(i,function(a,s){if(a)return e.complete(a);var c=as(s,i,e);e.patched(i,c,function(u){if(u)return e.complete(u);r()})})}o(r,"processIndex"),r()}o(Wc,"applyPatches");function os(t,e,n,r,i,a,s){s||(s={}),typeof s.context=="undefined"&&(s.context=4);var c=Wr(n,r,s);c.push({value:"",lines:[]});function u(pe){return pe.map(function(Q){return" "+Q})}o(u,"contextLines");for(var d=[],f=0,h=0,p=[],_=1,ne=1,A=o(function(Q){var be=c[Q],Ne=be.lines||be.value.replace(/\n$/,"").split(`
`);if(be.lines=Ne,be.added||be.removed){var We;if(!f){var Qe=c[Q-1];f=_,h=ne,Qe&&(p=s.context>0?u(Qe.lines.slice(-s.context)):[],f-=p.length,h-=p.length)}(We=p).push.apply(We,Qi(Ne.map(function(Ir){return(be.added?"+":"-")+Ir}))),be.added?ne+=Ne.length:_+=Ne.length}else{if(f)if(Ne.length<=s.context*2&&Q<c.length-2){var It;(It=p).push.apply(It,Qi(u(Ne)))}else{var vt,qt=Math.min(Ne.length,s.context);(vt=p).push.apply(vt,Qi(u(Ne.slice(0,qt))));var hn={oldStart:f,oldLines:_-f+qt,newStart:h,newLines:ne-h+qt,lines:p};if(Q>=c.length-2&&Ne.length<=s.context){var nn=/\n$/.test(n),Wt=/\n$/.test(r),dn=Ne.length==0&&p.length>hn.oldLines;!nn&&dn&&n.length>0&&p.splice(hn.oldLines,0,"\\ No newline at end of file"),(!nn&&!dn||!Wt)&&p.push("\\ No newline at end of file")}d.push(hn),f=0,h=0,p=[]}_+=Ne.length,ne+=Ne.length}},"_loop"),X=0;X<c.length;X++)A(X);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:a,hunks:d}}o(os,"structuredPatch");function wl(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}o(wl,"formatPatch");function Sl(t,e,n,r,i,a,s){return wl(os(t,e,n,r,i,a,s))}o(Sl,"createTwoFilesPatch");function Cl(t,e,n,r,i,a){return Sl(t,t,e,n,r,i,a)}o(Cl,"createPatch");function _l(t,e){return t.length!==e.length?!1:No(t,e)}o(_l,"arrayEqual");function No(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}o(No,"arrayStartsWith");function bl(t){var e=Bo(t.lines),n=e.oldLines,r=e.newLines;n!==void 0?t.oldLines=n:delete t.oldLines,r!==void 0?t.newLines=r:delete t.newLines}o(bl,"calcLineCount");function $c(t,e,n){t=ss(t,n),e=ss(e,n);var r={};(t.index||e.index)&&(r.index=t.index||e.index),(t.newFileName||e.newFileName)&&(ls(t)?ls(e)?(r.oldFileName=wo(r,t.oldFileName,e.oldFileName),r.newFileName=wo(r,t.newFileName,e.newFileName),r.oldHeader=wo(r,t.oldHeader,e.oldHeader),r.newHeader=wo(r,t.newHeader,e.newHeader)):(r.oldFileName=t.oldFileName,r.newFileName=t.newFileName,r.oldHeader=t.oldHeader,r.newHeader=t.newHeader):(r.oldFileName=e.oldFileName||t.oldFileName,r.newFileName=e.newFileName||t.newFileName,r.oldHeader=e.oldHeader||t.oldHeader,r.newHeader=e.newHeader||t.newHeader)),r.hunks=[];for(var i=0,a=0,s=0,c=0;i<t.hunks.length||a<e.hunks.length;){var u=t.hunks[i]||{oldStart:1/0},d=e.hunks[a]||{oldStart:1/0};if(cs(u,d))r.hunks.push(us(u,s)),i++,c+=u.newLines-u.oldLines;else if(cs(d,u))r.hunks.push(us(d,c)),a++,s+=d.newLines-d.oldLines;else{var f={oldStart:Math.min(u.oldStart,d.oldStart),oldLines:0,newStart:Math.min(u.newStart+s,d.oldStart+c),newLines:0,lines:[]};El(f,u.oldStart,u.lines,d.oldStart,d.lines),a++,i++,r.hunks.push(f)}}return r}o($c,"merge");function ss(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return Ha(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return os(void 0,void 0,e,t)}return t}o(ss,"loadPatch");function ls(t){return t.newFileName&&t.newFileName!==t.oldFileName}o(ls,"fileNameChanged");function wo(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}o(wo,"selectField");function cs(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}o(cs,"hunkBefore");function us(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}o(us,"cloneHunk");function El(t,e,n,r,i){var a={offset:e,lines:n,index:0},s={offset:r,lines:i,index:0};for(fs(t,a,s),fs(t,s,a);a.index<a.lines.length&&s.index<s.lines.length;){var c=a.lines[a.index],u=s.lines[s.index];if((c[0]==="-"||c[0]==="+")&&(u[0]==="-"||u[0]==="+"))Al(t,a,s);else if(c[0]==="+"&&u[0]===" "){var d;(d=t.lines).push.apply(d,Qi(fa(a)))}else if(u[0]==="+"&&c[0]===" "){var f;(f=t.lines).push.apply(f,Qi(fa(s)))}else c[0]==="-"&&u[0]===" "?ds(t,a,s):u[0]==="-"&&c[0]===" "?ds(t,s,a,!0):c===u?(t.lines.push(c),a.index++,s.index++):Oo(t,fa(a),fa(s))}hs(t,a),hs(t,s),bl(t)}o(El,"mergeLines");function Al(t,e,n){var r=fa(e),i=fa(n);if(gs(r)&&gs(i)){if(No(r,i)&&vs(n,r,r.length-i.length)){var a;(a=t.lines).push.apply(a,Qi(r));return}else if(No(i,r)&&vs(e,i,i.length-r.length)){var s;(s=t.lines).push.apply(s,Qi(i));return}}else if(_l(r,i)){var c;(c=t.lines).push.apply(c,Qi(r));return}Oo(t,r,i)}o(Al,"mutualChange");function ds(t,e,n,r){var i=fa(e),a=Dl(n,i);if(a.merged){var s;(s=t.lines).push.apply(s,Qi(a.merged))}else Oo(t,r?a:i,r?i:a)}o(ds,"removal");function Oo(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}o(Oo,"conflict");function fs(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r),e.offset++}}o(fs,"insertLeading");function hs(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}o(hs,"insertTrailing");function fa(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var r=t.lines[t.index];if(n==="-"&&r[0]==="+"&&(n="+"),n===r[0])e.push(r),t.index++;else break}return e}o(fa,"collectChange");function Dl(t,e){for(var n=[],r=[],i=0,a=!1,s=!1;i<e.length&&t.index<t.lines.length;){var c=t.lines[t.index],u=e[i];if(u[0]==="+")break;if(a=a||c[0]!==" ",r.push(u),i++,c[0]==="+")for(s=!0;c[0]==="+";)n.push(c),c=t.lines[++t.index];u.substr(1)===c.substr(1)?(n.push(c),t.index++):s=!0}if((e[i]||"")[0]==="+"&&a&&(s=!0),s)return n;for(;i<e.length;)r.push(e[i++]);return{merged:r,changes:n}}o(Dl,"collectContext");function gs(t){return t.reduce(function(e,n){return e&&n[0]==="-"},!0)}o(gs,"allRemoves");function vs(t,e,n){for(var r=0;r<n;r++){var i=e[e.length-n+r].substr(1);if(t.lines[t.index+r]!==" "+i)return!1}return t.index+=n,!0}o(vs,"skipRemoveSuperset");function Bo(t){var e=0,n=0;return t.forEach(function(r){if(typeof r!="string"){var i=Bo(r.mine),a=Bo(r.theirs);e!==void 0&&(i.oldLines===a.oldLines?e+=i.oldLines:e=void 0),n!==void 0&&(i.newLines===a.newLines?n+=i.newLines:n=void 0)}else n!==void 0&&(r[0]==="+"||r[0]===" ")&&n++,e!==void 0&&(r[0]==="-"||r[0]===" ")&&e++}),{oldLines:e,newLines:n}}o(Bo,"calcOldNewLineCount");function Kc(t){for(var e=[],n,r,i=0;i<t.length;i++)n=t[i],n.added?r=1:n.removed?r=-1:r=0,e.push([r,n.value]);return e}o(Kc,"convertChangesToDMP");function Gc(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(Rl(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")}o(Gc,"convertChangesToXML");function Rl(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}o(Rl,"escapeHTML");var ps=/[^a-zA-Z0-9]/,ms=/\s/,ys=/[\r\n]/,Tl=/\n\r?\n$/,Ml=/^\r?\n\r?\n/,gt;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(gt||(gt={}));function Il(t,e){return t<e?t:e}o(Il,"min");function Pl(t,e){return t>e?t:e}o(Pl,"max");var ai=it,Ua=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return o(t,"PatchObject"),t.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+e+" +"+n+` @@
`],i,a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case gt.DIFF_INSERT:i="+";break;case gt.DIFF_DELETE:i="-";break;case gt.DIFF_EQUAL:i=" ";break}r[a+1]=i+encodeURI(this.diffs[a][1])+`
`}return r.join("").replace(/%20/g," ")},t}(),Ll=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return o(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,n,r,i){typeof i=="undefined"&&(this.diffTimeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.diffTimeout*1e3);var a=i;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e===n)return e?[[gt.DIFF_EQUAL,e]]:[];typeof r=="undefined"&&(r=!0);var s=r,c=this.diff_commonPrefix(e,n),u=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var d=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var f=this.diff_compute_(e,n,s,a);return u&&f.unshift([gt.DIFF_EQUAL,u]),d&&f.push([gt.DIFF_EQUAL,d]),this.diff_cleanupMerge(f),f},t.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var r=0,i=ai.min(e.length,n.length),a=i,s=0;r<a;)e.substring(s,a)===n.substring(s,a)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;for(var r=0,i=ai.min(e.length,n.length),a=i,s=0;r<a;)e.substring(e.length-a,e.length-s)===n.substring(n.length-a,n.length-s)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_cleanupSemantic=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=0,u=0,d=0,f=0;s<e.length;)e[s][0]===gt.DIFF_EQUAL?(r[i++]=s,c=d,u=f,d=0,f=0,a=e[s][1]):(e[s][0]===gt.DIFF_INSERT?d+=e[s][1].length:f+=e[s][1].length,a&&a.length<=ai.max(c,u)&&a.length<=ai.max(d,f)&&(e.splice(r[i-1],0,[gt.DIFF_DELETE,a]),e[r[i-1]+1][0]=gt.DIFF_INSERT,i--,i--,s=i>0?r[i-1]:-1,c=0,u=0,d=0,f=0,a=null,n=!0)),s++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]===gt.DIFF_DELETE&&e[s][0]===gt.DIFF_INSERT){var h=e[s-1][1],p=e[s][1],_=this.diff_commonOverlap_(h,p),ne=this.diff_commonOverlap_(p,h);_>=ne?(_>=h.length/2||_>=p.length/2)&&(e.splice(s,0,[gt.DIFF_EQUAL,p.substring(0,_)]),e[s-1][1]=h.substring(0,h.length-_),e[s+1][1]=p.substring(_),s++):(ne>=h.length/2||ne>=p.length/2)&&(e.splice(s,0,[gt.DIFF_EQUAL,h.substring(0,ne)]),e[s-1][0]=gt.DIFF_INSERT,e[s-1][1]=p.substring(0,p.length-ne),e[s+1][0]=gt.DIFF_DELETE,e[s+1][1]=h.substring(ne),s++),s++}s++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var n=1;n<e.length-1;){if(e[n-1][0]===gt.DIFF_EQUAL&&e[n+1][0]===gt.DIFF_EQUAL){var r=e[n-1][1],i=e[n][1],a=e[n+1][1],s=this.diff_commonSuffix(r,i);if(s){var c=i.substring(i.length-s);r=r.substring(0,r.length-s),i=c+i.substring(0,i.length-s),a=c+a}for(var u=r,d=i,f=a,h=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);i.charAt(0)===a.charAt(0);){r+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var p=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);p>=h&&(h=p,u=r,d=i,f=a)}e[n-1][1]!==u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=d,f?e[n+1][1]=f:(e.splice(n+1,1),n--))}n++}},t.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=!1,u=!1,d=!1,f=!1;s<e.length;)e[s][0]===gt.DIFF_EQUAL?(e[s][1].length<this.diffEditCost&&(d||f)?(r[i++]=s,c=d,u=f,a=e[s][1]):(i=0,a=null),d=f=!1):(e[s][0]===gt.DIFF_DELETE?f=!0:d=!0,a&&(c&&u&&d&&f||a.length<this.diffEditCost/2&&Number(c)+Number(u)+Number(d)+Number(f)===3)&&(e.splice(r[i-1],0,[gt.DIFF_DELETE,a]),e[r[i-1]+1][0]=gt.DIFF_INSERT,i--,a=null,c&&u?(d=f=!0,i=0):(i--,s=i>0?r[i-1]:-1,d=f=!1),n=!0)),s++;n&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([gt.DIFF_EQUAL,""]);for(var n=0,r=0,i=0,a="",s="",c;n<e.length;)switch(e[n][0]){case gt.DIFF_INSERT:i++,s+=e[n][1],n++;break;case gt.DIFF_DELETE:r++,a+=e[n][1],n++;break;case gt.DIFF_EQUAL:r+i>1?(r!==0&&i!==0&&(c=this.diff_commonPrefix(s,a),c!==0&&(n-r-i>0&&e[n-r-i-1][0]===gt.DIFF_EQUAL?e[n-r-i-1][1]+=s.substring(0,c):(e.splice(0,0,[gt.DIFF_EQUAL,s.substring(0,c)]),n++),s=s.substring(c),a=a.substring(c)),c=this.diff_commonSuffix(s,a),c!==0&&(e[n][1]=s.substring(s.length-c)+e[n][1],s=s.substring(0,s.length-c),a=a.substring(0,a.length-c))),n-=r+i,e.splice(n,r+i),a.length&&(e.splice(n,0,[gt.DIFF_DELETE,a]),n++),s.length&&(e.splice(n,0,[gt.DIFF_INSERT,s]),n++),n++):n!==0&&e[n-1][0]===gt.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,a="",s="";break}e[e.length-1][1]===""&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]===gt.DIFF_EQUAL&&e[n+1][0]===gt.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,n){var r=0,i=0,a=0,s=0,c;for(c=0;c<e.length&&(e[c][0]!==gt.DIFF_INSERT&&(r+=e[c][1].length),e[c][0]!==gt.DIFF_DELETE&&(i+=e[c][1].length),!(r>n));c++)a=r,s=i;return e.length!==c&&e[c][0]===gt.DIFF_DELETE?s:s+(n-a)},t.prototype.diff_prettyHtml=function(e){for(var n=[],r=/&/g,i=/</g,a=/>/g,s=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],f=d.replace(r,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(s,"&para;<br>");switch(u){case gt.DIFF_INSERT:n[c]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case gt.DIFF_DELETE:n[c]='<del style="background:#ffe6e6;">'+f+"</del>";break;case gt.DIFF_EQUAL:n[c]="<span>"+f+"</span>";break}}return n.join("")},t.prototype.diff_text1=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==gt.DIFF_INSERT&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==gt.DIFF_DELETE&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_levenshtein=function(e){for(var n=0,r=0,i=0,a=0;a<e.length;a++){var s=e[a][0],c=e[a][1];switch(s){case gt.DIFF_INSERT:r+=c.length;break;case gt.DIFF_DELETE:i+=c.length;break;case gt.DIFF_EQUAL:n+=ai.max(r,i),r=0,i=0;break}}return n+=ai.max(r,i),n},t.prototype.diff_toDelta=function(e){for(var n=[],r=0;r<e.length;r++)switch(e[r][0]){case gt.DIFF_INSERT:n[r]="+"+encodeURI(e[r][1]);break;case gt.DIFF_DELETE:n[r]="-"+e[r][1].length;break;case gt.DIFF_EQUAL:n[r]="="+e[r][1].length;break}return n.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,n){for(var r=[],i=0,a=0,s=n.split(/\t/g),c=0;c<s.length;c++){var u=s[c].substring(1);switch(s[c].charAt(0)){case"+":try{r[i++]=[gt.DIFF_INSERT,decodeURI(u)]}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var f=e.substring(a,a+=d);s[c].charAt(0)==="="?r[i++]=[gt.DIFF_EQUAL,f]:r[i++]=[gt.DIFF_DELETE,f];break;default:if(s[c])throw new Error("Invalid diff operation in diff_fromDelta: "+s[c])}}if(a!==e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+")");return r},t.prototype.diff_linesToChars=function(e,n){var r=[],i={};r[0]="";var a=this.diff_linesToCharsMunge_(e,r,i,4e4),s=this.diff_linesToCharsMunge_(n,r,i,65535);return{chars1:a,chars2:s,lineArray:r}},t.prototype.diff_charsToLines=function(e,n){for(var r=0;r<e.length;r++){for(var i=e[r][1],a=[],s=0;s<i.length;s++)a[s]=n[i.charCodeAt(s)];e[r][1]=a.join("")}},t.prototype.match_main=function(e,n,r){if(e==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=ai.max(0,ai.min(r,e.length)),e===n?0:e.length?e.substring(r,r+n.length)===n?r:this.match_bitap_(e,n,r):-1},t.prototype.patch_make=function(e,n,r){var i,a;if(typeof e=="string"&&typeof n=="string"&&typeof r=="undefined")i=e,a=this.diff_main(i,n,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof n=="undefined"&&typeof r=="undefined")a=e,i=this.diff_text1(a);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof r=="undefined")i=e,a=n;else if(typeof e=="string"&&typeof n=="string"&&r&&typeof r=="object")i=e,a=r;else throw new Error("Unknown call format to patch_make");if(a.length===0)return[];for(var s=[],c=new Ua,u=0,d=0,f=0,h=i,p=i,_=0;_<a.length;_++){var ne=a[_][0],A=a[_][1];switch(!u&&ne!==gt.DIFF_EQUAL&&(c.start1=d,c.start2=f),ne){case gt.DIFF_INSERT:c.diffs[u++]=a[_],c.length2+=A.length,p=p.substring(0,f)+A+p.substring(f);break;case gt.DIFF_DELETE:c.length1+=A.length,c.diffs[u++]=a[_],p=p.substring(0,f)+p.substring(f+A.length);break;case gt.DIFF_EQUAL:A.length<=2*this.patchMargin&&u&&a.length!==_+1?(c.diffs[u++]=a[_],c.length1+=A.length,c.length2+=A.length):A.length>=2*this.patchMargin&&u&&(this.patch_addContext_(c,h),s.push(c),c=new Ua,u=0,h=p,d=f);break}ne!==gt.DIFF_INSERT&&(d+=A.length),ne!==gt.DIFF_DELETE&&(f+=A.length)}return u&&(this.patch_addContext_(c,h),s.push(c)),s},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){for(var i=e[r],a=new Ua,s=0;s<i.diffs.length;s++)a.diffs[s]=[i.diffs[s][0],i.diffs[s][1]];a.start1=i.start1,a.start2=i.start2,a.length1=i.length1,a.length2=i.length2,n[r]=a}return n},t.prototype.patch_apply=function(e,n){if(e.length===0)return[n,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);n=r+n+r,this.patch_splitMax(e);for(var i=0,a=[],s=0;s<e.length;s++){var c=e[s].start2+i,u=this.diff_text1(e[s].diffs),d=void 0,f=-1;if(u.length>this.matchMaxBits?(d=this.match_main(n,u.substring(0,this.matchMaxBits),c),d!==-1&&(f=this.match_main(n,u.substring(u.length-this.matchMaxBits),c+u.length-this.matchMaxBits),(f===-1||d>=f)&&(d=-1))):d=this.match_main(n,u,c),d===-1)a[s]=!1,i-=e[s].length2-e[s].length1;else{a[s]=!0,i=d-c;var h=void 0;if(f===-1?h=n.substring(d,d+u.length):h=n.substring(d,f+this.matchMaxBits),u===h)n=n.substring(0,d)+this.diff_text2(e[s].diffs)+n.substring(d+u.length);else{var p=this.diff_main(u,h,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(p)/u.length>this.patchDeleteThreshold)a[s]=!1;else{this.diff_cleanupSemanticLossless(p);for(var _=0,ne=0,A=0;A<e[s].diffs.length;A++){var X=e[s].diffs[A];X[0]!==gt.DIFF_EQUAL&&(ne=this.diff_xIndex(p,_)),X[0]===gt.DIFF_INSERT?n=n.substring(0,d+ne)+X[1]+n.substring(d+ne):X[0]===gt.DIFF_DELETE&&(n=n.substring(0,d+ne)+n.substring(d+this.diff_xIndex(p,_+X[1].length))),X[0]!==gt.DIFF_DELETE&&(_+=X[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,a]},t.prototype.patch_addPadding=function(e){for(var n=this.patchMargin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var a=e[0],s=a.diffs;if(s.length===0||s[0][0]!==gt.DIFF_EQUAL)s.unshift([gt.DIFF_EQUAL,r]),a.start1-=n,a.start2-=n,a.length1+=n,a.length2+=n;else if(n>s[0][1].length){var c=n-s[0][1].length;s[0][1]=r.substring(s[0][1].length)+s[0][1],a.start1-=c,a.start2-=c,a.length1+=c,a.length2+=c}if(a=e[e.length-1],s=a.diffs,s.length===0||s[s.length-1][0]!==gt.DIFF_EQUAL)s.push([gt.DIFF_EQUAL,r]),a.length1+=n,a.length2+=n;else if(n>s[s.length-1][1].length){var c=n-s[s.length-1][1].length;s[s.length-1][1]+=r.substring(0,c),a.length1+=c,a.length2+=c}return r},t.prototype.patch_splitMax=function(e){for(var n=this.matchMaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var i=e[r];e.splice(r--,1);for(var a=i.start1,s=i.start2,c="";i.diffs.length!==0;){var u=new Ua,d=!0;for(u.start1=a-c.length,u.start2=s-c.length,c!==""&&(u.length1=u.length2=c.length,u.diffs.push([gt.DIFF_EQUAL,c]));i.diffs.length!==0&&u.length1<n-this.patchMargin;){var f=i.diffs[0][0],h=i.diffs[0][1];f===gt.DIFF_INSERT?(u.length2+=h.length,s+=h.length,u.diffs.push(i.diffs.shift()),d=!1):f===gt.DIFF_DELETE&&u.diffs.length===1&&u.diffs[0][0]===gt.DIFF_EQUAL&&h.length>2*n?(u.length1+=h.length,a+=h.length,d=!1,u.diffs.push([f,h]),i.diffs.shift()):(h=h.substring(0,n-u.length1-this.patchMargin),u.length1+=h.length,a+=h.length,f===gt.DIFF_EQUAL?(u.length2+=h.length,s+=h.length):d=!1,u.diffs.push([f,h]),h===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}c=this.diff_text2(u.diffs),c=c.substring(c.length-this.patchMargin);var p=this.diff_text1(i.diffs).substring(0,this.patchMargin);p!==""&&(u.length1+=p.length,u.length2+=p.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===gt.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=p:u.diffs.push([gt.DIFF_EQUAL,p])),d||e.splice(++r,0,u)}}},t.prototype.patch_toText=function(e){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return n.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var r=e.split(`
`),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var s=r[i].match(a);if(!s)throw new Error("Invalid patch string: "+r[i]);var c=new Ua;n.push(c),c.start1=parseInt(s[1],10),s[2]===""?(c.start1--,c.length1=1):s[2]==="0"?c.length1=0:(c.start1--,c.length1=parseInt(s[2],10)),c.start2=parseInt(s[3],10),s[4]===""?(c.start2--,c.length2=1):s[4]==="0"?c.length2=0:(c.start2--,c.length2=parseInt(s[4],10)),i++;for(var u=void 0,d=void 0,f=void 0;i<r.length;){u=r[i].charAt(0),f=r[i].substring(1);try{d=decodeURI(f)}catch(h){throw new Error("Illegal escape in patch_fromText: "+f)}if(u==="-")c.diffs.push([gt.DIFF_DELETE,d]);else if(u==="+")c.diffs.push([gt.DIFF_INSERT,d]);else if(u===" ")c.diffs.push([gt.DIFF_EQUAL,d]);else{if(u==="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+d)}i++}}return n},t.prototype.diff_compute_=function(e,n,r,i){var a;if(!e)return[[gt.DIFF_INSERT,n]];if(!n)return[[gt.DIFF_DELETE,e]];var s=e.length>n.length?e:n,c=e.length>n.length?n:e,u=s.indexOf(c);if(u!==-1)return a=[[gt.DIFF_INSERT,s.substring(0,u)],[gt.DIFF_EQUAL,c],[gt.DIFF_INSERT,s.substring(u+c.length)]],e.length>n.length&&(a[0][0]=gt.DIFF_DELETE,a[2][0]=gt.DIFF_DELETE),a;if(c.length===1)return[[gt.DIFF_DELETE,e],[gt.DIFF_INSERT,n]];var d=this.diff_halfMatch_(e,n);if(d){var f=d[0],h=d[1],p=d[2],_=d[3],ne=d[4],A=this.diff_main(f,p,r,i),X=this.diff_main(h,_,r,i);return A.concat([[gt.DIFF_EQUAL,ne]],X)}return r&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,i):this.diff_bisect_(e,n,i)},t.prototype.diff_lineMode_=function(e,n,r){var i=this.diff_linesToChars(e,n);e=i.chars1,n=i.chars2;var a=i.lineArray,s=this.diff_main(e,n,!1,r);this.diff_charsToLines(s,a),this.diff_cleanupSemantic(s),s.push([gt.DIFF_EQUAL,""]);for(var c=0,u=0,d=0,f="",h="";c<s.length;){switch(s[c][0]){case gt.DIFF_INSERT:d++,h+=s[c][1];break;case gt.DIFF_DELETE:u++,f+=s[c][1];break;case gt.DIFF_EQUAL:if(u>=1&&d>=1){s.splice(c-u-d,u+d),c=c-u-d;for(var p=this.diff_main(f,h,!1,r),_=p.length-1;_>=0;_--)s.splice(c,0,p[_]);c=c+p.length}d=0,u=0,f="",h="";break}c++}return s.pop(),s},t.prototype.diff_bisect_=function(e,n,r){for(var i=e.length,a=n.length,s=Math.ceil((i+a)/2),c=s,u=2*s,d=new Array(u),f=new Array(u),h=0;h<u;h++)d[h]=-1,f[h]=-1;d[c+1]=0,f[c+1]=0;for(var p=i-a,_=p%2!=0,ne=0,A=0,X=0,pe=0,Q=0;Q<s&&!(Date.now()>r);Q++){for(var be=-Q+ne;be<=Q-A;be+=2){var Ne=c+be,We=void 0;be===-Q||be!==Q&&d[Ne-1]<d[Ne+1]?We=d[Ne+1]:We=d[Ne-1]+1;for(var Qe=We-be;We<i&&Qe<a&&e.charAt(We)===n.charAt(Qe);)We++,Qe++;if(d[Ne]=We,We>i)A+=2;else if(Qe>a)ne+=2;else if(_){var It=c+p-be;if(It>=0&&It<u&&f[It]!==-1){var vt=i-f[It];if(We>=vt)return this.diff_bisectSplit_(e,n,We,Qe,r)}}}for(var qt=-Q+X;qt<=Q-pe;qt+=2){var It=c+qt,vt=void 0;qt===-Q||qt!==Q&&f[It-1]<f[It+1]?vt=f[It+1]:vt=f[It-1]+1;for(var hn=vt-qt;vt<i&&hn<a&&e.charAt(i-vt-1)===n.charAt(a-hn-1);)vt++,hn++;if(f[It]=vt,vt>i)pe+=2;else if(hn>a)X+=2;else if(!_){var Ne=c+p-qt;if(Ne>=0&&Ne<u&&d[Ne]!==-1){var We=d[Ne],Qe=c+We-Ne;if(vt=i-vt,We>=vt)return this.diff_bisectSplit_(e,n,We,Qe,r)}}}}return[[gt.DIFF_DELETE,e],[gt.DIFF_INSERT,n]]},t.prototype.diff_bisectSplit_=function(e,n,r,i,a){var s=e.substring(0,r),c=n.substring(0,i),u=e.substring(r),d=n.substring(i),f=this.diff_main(s,c,!1,a),h=this.diff_main(u,d,!1,a);return f.concat(h)},t.prototype.diff_linesToCharsMunge_=function(e,n,r,i){for(var a="",s=0,c=-1,u=n.length;c<e.length-1;){c=e.indexOf(`
`,s),c===-1&&(c=e.length-1);var d=e.substring(s,c+1);(r.hasOwnProperty?r.hasOwnProperty(d):r[d]!==void 0)?a+=String.fromCharCode(r[d]):(u===i&&(d=e.substring(s),c=e.length),a+=String.fromCharCode(u),r[d]=u,n[u++]=d),s=c+1}return a},t.prototype.diff_commonOverlap_=function(e,n){var r=e.length,i=n.length;if(r===0||i===0)return 0;r>i?e=e.substring(r-i):r<i&&(n=n.substring(0,r));var a=ai.min(r,i);if(e===n)return a;for(var s=0,c=1;;){var u=e.substring(a-c),d=n.indexOf(u);if(d===-1)return s;c+=d,(d===0||e.substring(a-c)===n.substring(0,c))&&(s=c,c++)}},t.prototype.diff_halfMatch_=function(e,n){if(this.diffTimeout<=0)return null;var r=e.length>n.length?e:n,i=e.length>n.length?n:e;if(r.length<4||i.length*2<r.length)return null;var a=this.diff_halfMatchI_(r,i,Math.ceil(r.length/4)),s=this.diff_halfMatchI_(r,i,Math.ceil(r.length/2)),c;if(!a&&!s)return null;s?a?c=a[4].length>s[4].length?a:s:c=s:c=a;var u,d,f,h,p=c[4];return e.length>n.length?(u=c[0],d=c[1],f=c[2],h=c[3]):(f=c[0],h=c[1],u=c[2],d=c[3]),[u,d,f,h,p]},t.prototype.diff_halfMatchI_=function(e,n,r){for(var i=e.substring(r,r+Math.floor(e.length/4)),a="",s,c,u,d,f=n.indexOf(i,0);f!==-1;){var h=this.diff_commonPrefix(e.substring(r),n.substring(f)),p=this.diff_commonSuffix(e.substring(0,r),n.substring(0,f));a.length<p+h&&(a=n.substring(f-p,f)+n.substring(f,f+h),s=e.substring(0,r-p),c=e.substring(r+h),u=n.substring(0,f-p),d=n.substring(f+h)),f=n.indexOf(i,f+1)}return a.length*2>=e.length?[s,c,u,d,a]:null},t.prototype.diff_cleanupSemanticScore_=function(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),a=r.match(ps),s=i.match(ps),c=a&&r.match(ms),u=s&&i.match(ms),d=c&&r.match(ys),f=u&&i.match(ys),h=d&&e.match(Tl),p=f&&n.match(Ml);return h||p?5:d||f?4:a&&!c&&u?3:c||u?2:a||s?1:0},t.prototype.match_bitap_=function(e,n,r){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(n),a=this.matchThreshold,s=e.indexOf(n,r);s!==-1&&(a=ai.min(this.match_bitapScore_(0,s,n,r),a),s=e.lastIndexOf(n,r+n.length),s!==-1&&(a=ai.min(this.match_bitapScore_(0,s,n,r),a)));var c=1<<n.length-1;s=-1;for(var u,d,f=n.length+e.length,h,p=0;p<n.length;p++){for(u=0,d=f;u<d;)this.match_bitapScore_(p,r+d,n,r)<=a?u=d:f=d,d=Math.floor((f-u)/2+u);f=d;var _=ai.max(1,r-d+1),ne=ai.min(r+d,e.length)+n.length,A=Array(ne+2);A[ne+1]=(1<<p)-1;for(var X=ne;X>=_;X--){var pe=i[e.charAt(X-1)];if(p===0?A[X]=(A[X+1]<<1|1)&pe:A[X]=(A[X+1]<<1|1)&pe|((h[X+1]|h[X])<<1|1)|h[X+1],A[X]&c){var Q=this.match_bitapScore_(p,X-1,n,r);if(Q<=a)if(a=Q,s=X-1,s>r)_=ai.max(1,2*r-s);else break}}if(this.match_bitapScore_(p+1,r,n,r)>a)break;h=A}return s},t.prototype.match_bitapScore_=function(e,n,r,i){var a=e/r.length,s=Math.abs(i-n);return this.matchDistance?a+s/this.matchDistance:s?1:a},t.prototype.match_alphabet_=function(e){for(var n={},r=0;r<e.length;r++)n[e.charAt(r)]=0;for(var r=0;r<e.length;r++)n[e.charAt(r)]|=1<<e.length-r-1;return n},t.prototype.patch_addContext_=function(e,n){if(n.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!==n.lastIndexOf(r)&&r.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var a=n.substring(e.start2-i,e.start2);a&&e.diffs.unshift([gt.DIFF_EQUAL,a]);var s=n.substring(e.start2+e.length1,e.start2+e.length1+i);s&&e.diffs.push([gt.DIFF_EQUAL,s]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+s.length,e.length2+=a.length+s.length}},t}();function Ho(t,e){let n={};for(let a=0;a<e.length;a++){const s=e[a];n[s]?n[s].push(a):n[s]=[a]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let a=0;a<t.length;a++){const s=t[a],c=n[s]||[];let u=0,d=i[0];for(let f=0;f<c.length;f++){const h=c[f];let p;for(p=u;p<i.length&&!(i[p].buffer2index<h&&(p===i.length-1||i[p+1].buffer2index>h));p++);if(p<i.length){const _={buffer1index:a,buffer2index:h,chain:i[p]};if(u===i.length?i.push(d):i[u]=d,u=p+1,d=_,u===i.length)break}}i[u]=d}return i[i.length-1]}o(Ho,"LCS");function xl(t,e){const n=Ho(t,e);let r=[],i=t.length,a=e.length,s={common:[]};function c(){s.common.length&&(s.common.reverse(),r.push(s),s={common:[]})}o(c,"processCommon");for(let u=n;u!==null;u=u.chain){let d={buffer1:[],buffer2:[]};for(;--i>u.buffer1index;)d.buffer1.push(t[i]);for(;--a>u.buffer2index;)d.buffer2.push(e[a]);(d.buffer1.length||d.buffer2.length)&&(c(),d.buffer1.reverse(),d.buffer2.reverse(),r.push(d)),i>=0&&s.common.push(t[i])}return c(),r.reverse(),r}o(xl,"diffComm");function ws(t,e){const n=Ho(t,e);let r=[],i=t.length,a=e.length;for(let s=n;s!==null;s=s.chain){const c=i-s.buffer1index-1,u=a-s.buffer2index-1;i=s.buffer1index,a=s.buffer2index,(c||u)&&r.push({buffer1:[i+1,c],buffer1Content:t.slice(i+1,i+1+c),buffer2:[a+1,u],buffer2Content:e.slice(a+1,a+1+u)})}return r.reverse(),r}o(ws,"diffIndices");function zc(t,e){const n=Ho(t,e);let r=[],i=t.length,a=e.length;function s(c,u,d){let f=[];for(let h=0;h<d;h++)f.push(c[u+h]);return{offset:u,length:d,chunk:f}}o(s,"chunkDescription");for(let c=n;c!==null;c=c.chain){const u=i-c.buffer1index-1,d=a-c.buffer2index-1;i=c.buffer1index,a=c.buffer2index,(u||d)&&r.push({buffer1:s(t,c.buffer1index+1,u),buffer2:s(e,c.buffer2index+1,d)})}return r.reverse(),r}o(zc,"diffPatch");function kl(t,e,n){let r=[];function i(u,d){r.push({ab:d,oStart:u.buffer1[0],oLength:u.buffer1[1],abStart:u.buffer2[0],abLength:u.buffer2[1]})}o(i,"addHunk"),ws(e,t).forEach(u=>i(u,"a")),ws(e,n).forEach(u=>i(u,"b")),r.sort((u,d)=>u.oStart-d.oStart);let a=[],s=0;function c(u){u>s&&(a.push({stable:!0,buffer:"o",bufferStart:s,bufferLength:u-s,bufferContent:e.slice(s,u)}),s=u)}for(o(c,"advanceTo");r.length;){let u=r.shift(),d=u.oStart,f=u.oStart+u.oLength,h=[u];for(c(d);r.length;){const p=r[0],_=p.oStart;if(_>f)break;f=Math.max(f,_+p.oLength),h.push(r.shift())}if(h.length===1){if(u.abLength>0){const p=u.ab==="a"?t:n;a.push({stable:!0,buffer:u.ab,bufferStart:u.abStart,bufferLength:u.abLength,bufferContent:p.slice(u.abStart,u.abStart+u.abLength)})}}else{let p={a:[t.length,-1,e.length,-1],b:[n.length,-1,e.length,-1]};for(;h.length;){u=h.shift();const Q=u.oStart,be=Q+u.oLength,Ne=u.abStart,We=Ne+u.abLength;let Qe=p[u.ab];Qe[0]=Math.min(Ne,Qe[0]),Qe[1]=Math.max(We,Qe[1]),Qe[2]=Math.min(Q,Qe[2]),Qe[3]=Math.max(be,Qe[3])}const _=p.a[0]+(d-p.a[2]),ne=p.a[1]+(f-p.a[3]),A=p.b[0]+(d-p.b[2]),X=p.b[1]+(f-p.b[3]);let pe={stable:!1,aStart:_,aLength:ne-_,aContent:t.slice(_,ne),oStart:d,oLength:f-d,oContent:e.slice(d,f),bStart:A,bLength:X-A,bContent:n.slice(A,X)};a.push(pe)}s=f}return c(e.length),a}o(kl,"diff3MergeRegions");function Uo(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=typeof t=="string",s=typeof e=="string",c=typeof n=="string";a&&(t=t.split(r.stringSeparator)),s&&(e=e.split(r.stringSeparator)),c&&(n=n.split(r.stringSeparator));let u=[];const d=kl(t,e,n);let f=[];function h(){f.length&&u.push({ok:f}),f=[]}o(h,"flushOk");function p(_,ne){if(_.length!==ne.length)return!1;for(let A=0;A<_.length;A++)if(_[A]!==ne[A])return!1;return!0}return o(p,"isFalseConflict"),d.forEach(_=>{_.stable?f.push(..._.bufferContent):r.excludeFalseConflicts&&p(_.aContent,_.bContent)?f.push(..._.aContent):(h(),u.push({conflict:{a:_.aContent,aIndex:_.aStart,o:_.oContent,oIndex:_.oStart,b:_.bContent,bIndex:_.bStart}}))}),h(),u}o(Uo,"diff3Merge");function Jc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},r);const a=Uo(t,e,n,r);let s=!1,c=[];return a.forEach(u=>{u.ok?c=c.concat(u.ok):u.conflict&&(s=!0,c.push(`<<<<<<<${r.label.a?` ${r.label.a}`:""}`),c=c.concat(u.conflict.a),c.push(`|||||||${r.label.o?` ${r.label.o}`:""}`),c=c.concat(u.conflict.o),c.push("======="),c=c.concat(u.conflict.b),c.push(`>>>>>>>${r.label.b?` ${r.label.b}`:""}`))}),{conflict:s,result:c}}o(Jc,"mergeDiff3");function Fl(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=Uo(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];d.ok?c=c.concat(d.ok):(s=!0,c=c.concat([`
<<<<<<<<<
`],d.conflict.a,[`
=========
`],d.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:s,result:c}}o(Fl,"node_diff3_merge");function Vc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},r);const a=Uo(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];if(d.ok)c=c.concat(d.ok);else{const f=xl(d.conflict.a,d.conflict.b);for(let h=0;h<f.length;h++){let p=f[h];p.common?c=c.concat(p.common):(s=!0,c=c.concat([`
<<<<<<<<<
`],p.buffer1,[`
=========
`],p.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:s,result:c}}o(Vc,"mergeDigIn");function jc(t,e){let n=[],r=0;function i(a){for(;r<a;)n.push(t[r]),r++}o(i,"advanceTo");for(let a=0;a<e.length;a++){let s=e[a];i(s.buffer1.offset);for(let c=0;c<s.buffer2.chunk.length;c++)n.push(s.buffer2.chunk[c]);r+=s.buffer1.length}return i(t.length),n}o(jc,"patch");function Yc(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}o(Yc,"stripPatch");function qc(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}o(qc,"invertPatch");const Wo=new Ll;Wo.diffTimeout=0;function Ss(t,e,n){return me.get("experimental.useDiffMatchPatch")===!0?Wo.patch_toText(Wo.patch_make(e,n)):Cl(t,e,n)}o(Ss,"diffs_createPatch");function Cs(t,e,n,r){const i=`diff --git a/${t} b/${t}`;switch(r){case"modify":return Ss(t,e,n);case"add":{let a;!n.endsWith(`
`)&&!n.endsWith(`\r
`)?a=`
\\ No newline at end of file`:a="";const s=/\r?\n/g,c=n.split(s),u=n.match(s)||[],d=c.length,f=[];for(let h=0;h<d;h+=1)(h<c.length-1||h===c.length-1&&c[h]!=="")&&f.push("+"),f.push(c[h]),h<u.length&&f.push(u[h]);return n=f.join(""),`${i}
new file mode 100644
--- /dev/null
+++ b/${t}
@@ -0,0 +1,${d} @@
${n}${a}`}case"delete":{let a=0;return e=e.replace(/\r?\n/g,s=>(a++,`${s}-`)),`${i}
deleted file mode 100644
--- a/${t}
+++ /dev/null
@@ -1,${a} +0,0 @@
-${e}`}}}o(Cs,"createPatch2");function _s(t,e,n){return as(t,e,n)}o(_s,"diffs_applyPatch");function Nl(t,e){const n=[];for(const r of Ha(t,e))n.push({...r,oldFileName:r.newFileName,oldHeader:r.newHeader,newFileName:r.oldFileName,newHeader:r.oldHeader,hunks:r.hunks.map(i=>({...i,oldLines:i.newLines,oldStart:i.newStart,newLines:i.oldLines,newStart:i.oldStart,lines:i.lines.map(a=>a[0]==="-"?`+${a.slice(1)}`:a[0]==="+"?`-${a.slice(1)}`:a)}))}),n.push(r);return n}o(Nl,"reversePatch");function bs(t,e,n,r){let i=`
`;const a=t.match(/(?:\r?\n)/g);if(a!==null&&a.length!==0){const d=a.filter(f=>f===`\r
`).length;i=d>a.length-d?`\r
`:`
`}const s=Fl(t,e,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),c=s.result;let u=s.conflict;for(let d=0;d<c.length;d+=1)c[d]===`
<<<<<<<<<
`?c[d]="<<<<<<< HEAD":c[d]===`
=========
`?c[d]="=======":c[d]===`
>>>>>>>>>
`&&(c[d]=`>>>>>>> ${r}`);return{conflicts:u,mergedContent:c.join(i)}}o(bs,"diffs_merge");var Ol=Object.defineProperty,Bl=Object.getOwnPropertyDescriptor,Hl=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Bl(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Ol(e,n,i),i},"changeStore_decorateClass");const Ul=l.FileSystemError.FileNotFound().code,Es=`===================================================================
`,Ki=new TextDecoder,Wl=new TextEncoder;function $l(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}o($l,"isOperation");function So(t,e,n){return{type:t.type,rootUri:e,uri:n!=null?n:t.uri}}o(So,"toEvent");const Wa=o(class{constructor(t,e,n,r,i,a){this.providerService=t,this.storageService=e,this.fileStorageService=n,this.telemetryService=r,this.workspaceId=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new tr,this.scopedStores=new Map,a===void 0&&(this.disposable=l.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function n(r){const i=await l.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${r.toString(!0)}

${this.toStorage(await this.getWorkingOperations(r))}`});return void l.window.showTextDocument(i)}if(o(n,"exportCore"),t===void 0)for(const r of(e=l.workspace.workspaceFolders)!=null?e:[])await n.call(this,r.uri);else return n.call(this,t)}async getWorkspacesWithChanges(){var t;const e=new _t("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])r.uri.scheme===k.scheme&&await this.hasChanges(r.uri)&&n.push(r.uri);return n.length>0?n:void 0}finally{e.stop()}}async acceptAll(t,e){const n=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;K.log(n);const r=[];await this.lock.synchronizeWrite(b(t),async()=>{const i=await this.getWorkingOperations(t),a=[];let s=[];const c=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!i.some(u=>u.staged));for(const u of i){if(c&&!u.staged){s.push(u);continue}u.fileType===l.FileType.File&&await this.discardWorkingContent(t,u.uri);let d;if(u.type===D.Created&&u.fileType===l.FileType.Directory&&(i.some(f=>Z(f.uri,u.uri))||(d={type:D.Deleted,rootUri:t,uri:u.uri})),r.push(d!=null?d:So(u,t)),u.type===D.Created){let f=u.uri;for(;;){const{parent:h}=this.findParent(f,i,p=>p.type===D.Created);if(h){a.push(h),f=h.uri;continue}break}}}s.length>0&&a.length>0&&(s=s.filter(u=>a.includes(u)?(r.push(So(u,t)),!1):!0)),await this.saveWorkingOperations(t,s)},n),r.length!==0&&this._onDidChange.fire(r)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.discard(${t.toString()})`;K.log(n);const r=[];await this.lock.synchronizeWrite(b(e),async()=>this.discardCore(e,t,r),n),r.length!==0&&this._onDidChange.fire(r)}async discardCore(t,e,n){K.debug(`ChangeStore.discardCore(${e.toString()})`);let r=await this.getWorkingOperations(t);if(r.length===0)return;const i=$(e),a=r.findIndex(u=>$(u.uri)===i);if(a===-1)return;const[s]=r.splice(a,1);let c;switch(s.type){case D.Created:c=D.Deleted;break;case D.Deleted:c=D.Created;break;default:c=s.type;break}if(n.push({type:c,rootUri:t,uri:e}),s.type===D.Created){let u=s.uri;for(;;){const{parent:d,parentIndex:f}=this.findNewParentWithOnlyChild(u,r);if(d){r.splice(f,1),n.push({type:D.Deleted,rootUri:t,uri:d.uri}),u=d.uri;continue}break}}else if(s.type===D.Deleted){let u=s.uri;const d=this.findDeletedParents(u,r);let f=[...r];d.forEach(({parent:h,parentIndex:p})=>{f[p]=void 0,n.push({type:D.Created,rootUri:t,uri:h.uri})}),r=f.filter(h=>h!==void 0)}await this.saveWorkingOperations(t,r),s.fileType===l.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).discardAll(t,e);const r=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;K.log(r);const i=[];await this.lock.synchronizeWrite(b(t),async()=>{const a=await this.getWorkingOperations(t),s=[];let c=[];const u=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!a.some(d=>d.staged));for(const d of a){if(u&&!d.staged){c.push(d);continue}d.fileType===l.FileType.File&&await this.discardWorkingContent(t,d.uri);let f;switch(d.type){case D.Created:f=D.Deleted;break;case D.Deleted:f=D.Created;break;default:f=d.type;break}if(i.push({type:f,rootUri:t,uri:d.uri}),d.type===D.Created){let h=d.uri;for(;;){const{parent:p}=this.findNewParentWithOnlyChild(h,a);if(p){s.push(p),h=p.uri;continue}break}}}c.length>0&&s.length>0&&(c=c.filter(d=>s.includes(d)?(i.push({type:D.Deleted,rootUri:t,uri:d.uri}),!1):!0)),await this.saveWorkingOperations(t,c)},r),i.length!==0&&this._onDidChange.fire(i)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.stage(${t.toString()})`;K.log(n);const r=[];await this.lock.synchronizeWrite(b(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.stageCore(e,t,i,r,a)},n),r.length!==0&&this._onDidChange.fire(r)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;K.log(e);const n=[];await this.lock.synchronizeWrite(b(t),async()=>{const r=(await this.getWorkingOperations(t)).filter(i=>!i.staged);if(r.length!==0)for(const i of r){const{index:a}=await this.getWorkingOperation(i.uri,t);if(!await this.stageCore(t,i.uri,i,n,a))return}},e),n.length!==0&&this._onDidChange.fire(n)}async stageCore(t,e,n,r,i){if(n.conflicts){if(!n.conflicts.status.includes(D.Deleted)){const s=l.l10n.t("Yes");if(await l.window.showWarningMessage(l.l10n.t("Are you sure you want to stage {0} with merge conflicts?",j(e)),{modal:!0},s)!==s)return!1}const[,a]=n.conflicts.status;switch(a){case D.Changed:switch(n.type){case D.Created:return!1;case D.Changed:return await this.spliceOperation(e,i,{...n,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0;case D.Deleted:const s=l.l10n.t("Keep Their Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by us and modified by them.

What would you like to do?`,j(e)),{modal:!0},s,c);return u===s?(await this.discardCore(t,e,r),!0):u===c?(await this.spliceOperation(e,i,{...n,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):!1}case D.Created:switch(n.type){case D.Changed:case D.Deleted:return!1;case D.Created:return await this.spliceOperation(e,i,{...n,type:D.Changed,conflicts:void 0,size:n.size,hash:n.hash,originalHash:n.originalHash,staged:!0,timestamp:Date.now()},r),!0}case D.Deleted:switch(n.type){case D.Created:case D.Changed:{const s=l.l10n.t("Keep Our Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by them and modified by us.

What would you like to do?`,j(e)),{modal:!0},s,c);return u===s?(await this.spliceOperation(e,i,{...n,type:D.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):u===c?(await this.discardCore(t,e,r),!0):!1}case D.Deleted:return await this.discardCore(t,e,r),!0}}}return await this.spliceOperation(e,i,{...n,staged:!0,conflicts:void 0,timestamp:Date.now()},r),!0}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.unstage(${t.toString()})`;K.log(n);const r=[];await this.lock.synchronizeWrite(b(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.spliceOperation(t,a,{...i,staged:!1,timestamp:Date.now()},r)},n),r.length!==0&&this._onDidChange.fire(r)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;K.log(e);const n=[];await this.lock.synchronizeWrite(b(t),async()=>{const r=(await this.getWorkingOperations(t)).map(i=>({...i,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),n.push(...r.map(i=>So(i,t))))},e),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const n=b(t),r=this.cache.get(n);return r!==void 0?r.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).maybeHasChanges(t,e);const r=b(t),i=this.cache.get(r);if(i===void 0)return;if(i.length===0)return!1;if(e===void 0)return!0;const a=$(e);return i.some(s=>$(s.uri)===a)}async hasMergeConflicts(t){return this.lock.synchronizeRead(b(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(b(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(b(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const n=this.providerService.getVirtualRootUri(t);if(n!==void 0)return this.lock.synchronizeRead(b(n),async()=>{const{operation:r}=await this.getWorkingOperation(t,n);return r},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getChanges(t,e):this.lock.synchronizeRead(b(t),async()=>{let r=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:i,predicate:a}=e;r=r.filter(s=>{var c;return(!i||s.conflicts===void 0)&&((c=a==null?void 0:a(s))!=null?c:!0)})}return r},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getGroupedChanges(t,e):this.lock.synchronizeRead(b(t),async()=>{var r,i;const a=await this.getWorkingOperations(t),s={conflicts:[],staged:[],working:[]};for(const c of a)!((i=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,c))!=null?i:!0)||(c.conflicts?s.conflicts.push(c):c.staged?s.staged.push(c):s.working.push(c));return s},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const n=b(e),r=this.cache.get(n);if((r==null?void 0:r.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(n,async()=>{const i=Ki.decode(await this.getWorkingContent(e,t));if(i!==void 0)return i;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(b(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.conflicts!==void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(b(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(b(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return!r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,n,r){var i;let a;$l(n)?a=n:r=r!=null?r:n,K.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,a==null?void 0:a.uri,r==null?void 0:r.save);const s=this.getScopedChangeStore(e.workspaceId),c=(i=e.patch)!=null?i:await s.createPatch(e.uri,a==null?void 0:a.uri);await this.applyPatchCore(t,c,{...r,getIncomingContent:async u=>{const d=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId);return Ki.decode(await l.workspace.fs.readFile(d))},merge:async(u,d,f)=>{try{const h=k.getProviderUri(u),p=Ki.decode(await l.workspace.fs.readFile(h)),_=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,d),e.workspaceId),ne=Ki.decode(await l.workspace.fs.readFile(_)),A=await this.providerService.getMetadata(_);return{...bs(f,p,ne,A.HEAD.sha),baseUri:h,incomingUri:_}}catch(h){throw new Error(`Unable to apply patch to ${d}: ${String(h)}`)}}})}async applyPatch(t,e,n){if(K.log(`ChangeStore.applyPatch(${t.toString()})`,n==null?void 0:n.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,n)}async applyPatchCore(t,e,n={}){const r=`ChangeStore.applyPatchCore(${t.toString()})`;K.debug(r,n==null?void 0:n.save);const i=new l.WorkspaceEdit,a=[],s=new Map;async function c(p){var _;const ne=b(p),A=l.workspace.textDocuments.find(X=>b(X.uri)===ne);return(_=A==null?void 0:A.getText())!=null?_:Ki.decode(await l.workspace.fs.readFile(p))}o(c,"getContent");async function u(p){try{const _=await l.workspace.fs.stat(p);return Boolean(_)}catch{return!1}}o(u,"exists");async function d(p,_,ne){let A=_s("",ne,{fuzzFactor:0});if(A===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${_}`);A=await n.getIncomingContent(_)}i.createFile(p,{overwrite:!0}),i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),A)}o(d,"applyCreate");async function f(p,_,ne,A){const X=await c(p);let pe=_s(X,ne,{fuzzFactor:1});if(pe===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${_}; Resulted in conflicts`);const Q={title:l.l10n.t("Merge")},be={title:l.l10n.t("Skip File"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,_),{modal:!0},Q,be)!==Q)return;const We=await n.merge(p,_,X);pe=We.mergedContent,We.conflicts&&s.set(b(p),{type:A,baseUri:We.baseUri,incomingUri:We.incomingUri})}i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),pe)}o(f,"applyModification");const h=(n==null?void 0:n.reverse)?Nl(e,{}):Ha(e,{});for(const p of h)if(p.oldFileName==="/dev/null"){if(!p.newFileName)continue;const _=p.newFileName.startsWith("b/")?p.newFileName.substr(2):p.newFileName,ne=this.providerService.createRelativeVirtualUri(t,_);a.push(b(ne)),!await u(ne)?await d(ne,_,p):await f(ne,_,p,D.Created)}else if(p.newFileName==="/dev/null"){if(!p.oldFileName)continue;const _=p.oldFileName.startsWith("a/")?p.oldFileName.substr(2):p.oldFileName,ne=this.providerService.createRelativeVirtualUri(t,_);await u(ne)&&i.deleteFile(ne)}else if(p.oldFileName===p.newFileName){if(!p.newFileName)continue;const _=this.providerService.createRelativeVirtualUri(t,p.newFileName);a.push(b(_)),!await u(_)?await d(_,p.newFileName,p):await f(_,p.newFileName,p,D.Changed)}else throw new Error(`Unable to apply patch to ${p.oldFileName}; Renames aren't currently supported`);if(await l.workspace.applyEdit(i),n.save&&a.length)for(const p of a){const _=l.workspace.textDocuments.find(ne=>b(ne.uri)===p);await(_==null?void 0:_.save())}s.size&&setTimeout(async()=>{const p=[];await this.lock.synchronizeWrite(b(t),async()=>{const _=await this.getWorkingOperations(t);if(_.length===0)return;let ne=-1;for(const A of _){ne++;const X=s.get(b(A.uri));X!==void 0&&await this.spliceOperation(A.uri,ne,{...A,conflicts:{baseUri:X.baseUri,incomingUri:X.incomingUri,status:[A.type,X.type]},timestamp:Date.now()},p)}},r),p.length!==0&&this._onDidChange.fire(p)},0)}async createChangeset(t){K.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,n){if(K.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let a=await this.getWorkingOperations(t);if((n==null?void 0:n.staged)&&(a=a.filter(c=>c.staged)),a.length===0)return"";const s=[];for(const c of a){const u=await this.createPatchCore(t,c);s.push(u)}return s.join("")}const{operation:r}=await this.getWorkingOperation(e,t);if(r===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(n==null?void 0:n.staged)&&r.staged?"":await this.createPatchCore(t,r)}async createPatchCore(t,e){if(e.fileType!==l.FileType.File)return"";const n=this.providerService.getRelativeFilePath(t,e.uri),r=`diff --git a/${n} b/${n}`;if(e.type===D.Created){let u=await this.getContent(e.uri);return Cs(n,"",u,"add")}if(e.type===D.Deleted){let u=Ki.decode(await l.workspace.fs.readFile(k.getProviderUri(e.uri)));return Cs(n,u,"","delete")}const i=await this.getContent(e.uri),a=Ki.decode(await l.workspace.fs.readFile(k.getProviderUri(e.uri))),s=Ss(n,a,i),c=s.indexOf(Es);return`${r}
${s.substr(c+Es.length)}`}async keep(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=`ChangeStore.keep(${t.toString()})`;K.log(r,e);const i=[];await this.lock.synchronizeWrite(b(n),async()=>{const{operation:a,index:s}=await this.getWorkingOperation(t,n);if(a===void 0)return;if(e===void 0&&a.conflicts){const[,u]=a.conflicts.status;switch(u){case D.Changed:switch(a.type){case D.Changed:case D.Created:case D.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break;case D.Created:switch(a.type){case D.Changed:case D.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break;case D.Created:await this.spliceOperation(t,s,{...a,type:D.Changed,size:a.size,hash:a.hash,originalHash:a.originalHash,conflicts:void 0,timestamp:Date.now()},i);break}break;case D.Deleted:switch(a.type){case D.Deleted:await this.discardCore(n,t,i);break;case D.Changed:await this.spliceOperation(t,s,{...a,type:D.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);break;case D.Created:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break}return}if(e===void 0)return;switch(e.type){case D.Changed:switch(a.type){case D.Deleted:await this.spliceOperation(t,s,{...a,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case D.Created:break;case D.Changed:break}break;case D.Created:switch(a.type){case D.Changed:case D.Deleted:return;case D.Created:break}break;case D.Deleted:switch(a.type){case D.Deleted:return this.discardCore(n,t,i);case D.Changed:await this.spliceOperation(t,s,{...a,type:D.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case D.Created:return}}const c=e!==void 0?await l.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,s,{...a,type:D.Changed,originalHash:c!==void 0?await Tn(c):a.originalHash,conflicts:void 0,timestamp:Date.now()},i)},r),i.length!==0&&this._onDidChange.fire(i)}async merge(t,e,n){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const i=`ChangeStore.merge(${t.toString()})`;K.log(i,e,n);const a=[];await this.lock.synchronizeWrite(b(r),async()=>{const{operation:s,index:c}=await this.getWorkingOperation(t,r);if(s===void 0)return;switch(e.type){case D.Changed:switch(s.type){case D.Deleted:await this.spliceOperation(t,c,{...s,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case D.Created:break;case D.Changed:break}break;case D.Created:switch(s.type){case D.Deleted:case D.Changed:return;case D.Created:const _=await l.workspace.fs.readFile(e.providerUri);await this.spliceOperation(t,c,{...s,originalHash:_!==void 0?await Tn(_):s.originalHash,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},type:D.Changed,timestamp:Date.now()},a);break}break;case D.Deleted:switch(s.type){case D.Deleted:return this.discardCore(r,t,a);case D.Changed:await this.spliceOperation(t,c,{...s,type:D.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case D.Created:return}}const u=await this.providerService.getMetadata(e.providerUri),d=await this.getWorkingContent(r,t),f=s.type===D.Created?new Uint8Array(0):await l.workspace.fs.readFile(n.providerUri),h=await l.workspace.fs.readFile(e.providerUri),p=bs(Ki.decode(d),Ki.decode(f),Ki.decode(h),u.HEAD.sha);await this.writeFileCore(r,t,a,Wl.encode(p.mergedContent),h!=null?h:new Uint8Array(0),p.conflicts?{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]}:void 0)},i),a.length!==0&&this._onDidChange.fire(a)}async resolveDiffCommand(t,e,n,r){let i;const a=this.providerService.getVirtualRootUri(t);return a!==void 0&&({operation:i}=await this.getWorkingOperation(t,a)),(i==null?void 0:i.type)===D.Deleted?this.resolveOpenCommand(e):((i==null?void 0:i.type)===D.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,n,r]})}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return n===this.workspaceId?t:t.with({fragment:n})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;K.log(`ChangeStore.getScopedChangeStore(${e})`);let n=this.scopedStores.get(e);return n===void 0&&(n=e===this.workspaceId?new Wa.ScopedChangeStore(this,e,this.workspaceId):new Wa.ScopedChangeStore(new Wa(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,n)),n}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const r=b(n),i=this.cache.get(r);if((i==null?void 0:i.length)!==0)return this.lock.synchronizeRead(r,async()=>{var a;const{operation:s}=await this.getWorkingOperation(t,n);if(s!==void 0){if(s.type===D.Deleted)throw l.FileSystemError.FileNotFound(`The ${s.fileType===l.FileType.Directory?"folder":"file"} has been deleted.`);return{type:s.fileType,size:(a=s.size)!=null?a:0,ctime:0,mtime:s.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const n=new _t(`ChangeStore.readFile(${t.toString()})`);try{const r=this.providerService.getVirtualRootUri(t);if(r===void 0)return;const i=b(r),a=this.cache.get(i);return(a==null?void 0:a.length)===0?void 0:await this.lock.synchronizeRead(i,()=>{const s=this.cache.get(i);if((s==null?void 0:s.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(r,t)},n.context)}finally{n.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new _t(`ChangeStore.createDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(b(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e),s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,i===void 0?{type:D.Created,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...i,timestamp:Date.now()},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new _t(`ChangeStore.deleteDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(b(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===D.Created)return this.discardCore(e,t,r);const s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,{type:D.Deleted,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async updateDirectoryEntries(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return e;const r=new _t(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const i=b(n),a=this.cache.get(i);return(a==null?void 0:a.length)===0?e:await this.lock.synchronizeRead(i,async()=>{const{path:s}=z(n,t),c=await this.getWorkingOperations(n);for(const u of c)switch(u.type){case D.Changed:break;case D.Created:{if(Z(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri);e.push([d,u.fileType])}break}case D.Deleted:{if(Z(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri),f=e.findIndex(([h])=>h===d);f!==-1&&e.splice(f,1)}break}}return e},r.context)}finally{r.stop()}}async writeFile(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=new _t(`ChangeStore.writeFile(${t.toString()})`,{},e.length,r);try{const s=[];if(await this.lock.synchronizeWrite(b(i),async()=>this.writeFileCore(i,t,s,e,n,r),a.context),s.length===0)return;this._onDidChange.fire(s)}finally{a.stop()}}async writeFileCore(t,e,n,r,i,a){const s=new _t(`ChangeStore.writeFileCore(${e.toString()})`,{},r.length,a);try{const[{operation:c,index:u},d,f]=await Promise.all([this.getWorkingOperation(e,t),Tn(r),Tn(i)]);if(d===f&&(!c||(c==null?void 0:c.type)===D.Changed))return this.discardCore(t,e,n);if(d===(c==null?void 0:c.hash)&&f===(c==null?void 0:c.originalHash))return;const[{HEAD:h}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,r)]);await this.spliceOperation(e,u,c===void 0?{type:D.Changed,uri:e,fileType:l.FileType.File,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1}:{...c,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1},n)}finally{s.stop()}}async createFile(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=new _t(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const i=[];if(await this.lock.synchronizeWrite(b(n),async()=>{const[{operation:a,index:s},c,u]=await Promise.all([this.getWorkingOperation(t,n),Tn(e),this.providerService.getMetadata(t),this.saveWorkingContent(n,t,e)]);await this.spliceOperation(t,s,a===void 0?{type:D.Created,uri:t,fileType:l.FileType.File,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c,originalHash:c}:a.type===D.Deleted?{...a,type:D.Changed,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c}:{...a,type:D.Created,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c},i)},r.context),i.length===0)return;this._onDidChange.fire(i)}finally{r.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new _t(`ChangeStore.deleteFile(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(b(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===D.Created)return this.discardCore(e,t,r);const[s]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,a,{type:D.Deleted,uri:t,fileType:l.FileType.File,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}findParent(t,e,n){const r=Ee(t),{operation:i,index:a}=this.findWorkingOperation(r,e);return i!==void 0&&n(i,e)?{parent:i,parentIndex:a}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const n=$(t);return this.findParent(t,e,(r,i)=>r.type===D.Created&&!i.some(a=>Z(a.uri,r.uri)&&$(a.uri)!==n))}findDeletedParents(t,e){const n=[];for(let r=0;r<e.length;r+=1){const i=e[r];i.type===D.Deleted&&ee(t,i.uri)&&n.push({parent:i,parentIndex:r})}return n}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const n=$(t);let r=-1;const i=e.find((a,s)=>$(a.uri)!==n?!1:(r=s,!0));return i===void 0?{operation:void 0,index:-1}:{operation:i,index:r}}async getWorkingOperations(t){const e=b(t);let n=this.cache.get(e);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,n)),n}async saveWorkingOperations(t,e){K.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const n=b(t);this.cache.set(n,e);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(e))}catch(r){throw this.cache.delete(n),K.error(r,`Failed to save repository changes for ${n}`),r}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(n){throw K.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(t,e){K.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(n){if(n instanceof l.FileSystemError&&n.code===Ul)return;throw K.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(t,e,n){K.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),n)}catch(r){throw K.error(r),this.telemetryService.sendException(r),r}}getFileStorageKey(t,e){return`changestore/${F(e)}`}async spliceOperation(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=await this.getWorkingOperations(i);e!==-1?a.splice(e,1,n):a.push(n),await this.saveWorkingOperations(i,a),r.push(So(n,i,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&T(r)?typeof r=="string"?l.Uri.parse(r):l.Uri.from(r):r);return Array.isArray(e)?e:e.operations}catch(e){throw K.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:Wa.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let $o=Wa;$o.operationsStorageSchemaVersion=1,$o.ScopedChangeStore=class{constructor(t,e,n){this.changeStore=t,this.scope=e,this.workspaceId=n}createPatch(t,e,n){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),n)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const n=this.changeStore.getUriScope(t)!==this.workspaceId,r=await this.changeStore.stat(this.stripUriScope(t));return r!==void 0&&n&&(r.permissions=l.FilePermission.Readonly),r}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,n,r){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},Hl([tn()],$o.prototype,"getWorkingOperations",1);function Kl(t){switch(t){case D.Changed:return l.l10n.t("Modified");case D.Created:return l.l10n.t("Added");case D.Deleted:return l.l10n.t("Deleted")}}o(Kl,"getStatusText");function Gl(t){const[e,n]=t;switch(e){case D.Changed:switch(n){case D.Changed:case D.Created:return l.l10n.t("Modified by Both");case D.Deleted:return l.l10n.t("Deleted by Incoming")}case D.Created:switch(n){case D.Changed:case D.Created:return l.l10n.t("Added by Both");case D.Deleted:return l.l10n.t("Deleted by Incoming")}case D.Deleted:switch(n){case D.Changed:case D.Created:return l.l10n.t("Deleted by Current");case D.Deleted:return l.l10n.t("Deleted by Both")}}}o(Gl,"getConflictStatusText");class As{constructor(e,n){this.providerService=e,this.gitIgnoreFiles=n,this._onDidChangeFileDecorations=new l.EventEmitter,this._decorations=new Map,this._submodules=new Set,this.disposable=l.Disposable.from(l.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),e.onDidChangeRepositories(this.onDidChangeRepositories,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){let n;const r=e.map(({uri:i})=>(this._decorations.delete(b(i)),this.gitIgnoreFiles.isIgnoreFile(i)&&(n=i),i));n?(this.gitIgnoreFiles.getIgnoreFile(n,!0),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)):setTimeout(()=>this._onDidChangeFileDecorations.fire(r),0)}async onDidChangeRepositories(e){for(const n of e.added){this.gitIgnoreFiles.getIgnoreFile(n.uri,!1);const r=await this.providerService.getSubmodules(n.uri);if(!!r)for(const[i,a]of r)this._submodules.add(i)}for(const n of e.removed)this._submodules.delete(b(n.uri))}async provideFileDecoration(e,n){if(e.scheme!==Vn.scheme)return;await kr(this.providerService,e);const r=b(e);let i=this._decorations.get(r);if(i!==void 0)return i!=null?i:void 0;const a=await this.gitIgnoreFiles.getIgnoreFile(e,!1),s=(await l.workspace.fs.stat(e)).type===l.FileType.Directory;if(a==null?void 0:a.isArbitraryPathIgnored(e.path,s))return i={color:new l.ThemeColor("remoteHub.decorations.ignoredResourceForeground")},this._decorations.set(r,i),i;const c=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let u;c.length>0&&(u=c.find(f=>b(f.uri)===r));const d=await this.providerService.changeStoreGetChange(e);if(d===void 0){if(u!==void 0)switch(u.type){case D.Created:i={badge:"\u2193A",color:new l.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Added)")};break;case D.Deleted:i={badge:"\u2193D",color:new l.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Deleted)")};break;case D.Changed:i={badge:"\u2193M",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes")};break}else this._submodules.has(this.providerService.getRelativeFilePath(e))&&(i={badge:"S",color:new l.ThemeColor("remoteHub.decorations.submoduleForegroundColor"),tooltip:"Submodule"});return this._decorations.set(r,i!=null?i:null),i}if(d.conflicts)i={badge:"!",color:new l.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:l.l10n.t("Merge Conflicts ({0})",Gl(d.conflicts.status))};else if(u!==void 0)switch(u.type){case D.Created:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Added)")};break;case D.Deleted:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Deleted)")};break;case D.Changed:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")}}else switch(d.type){case D.Created:i={badge:"A",color:new l.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:l.l10n.t("Added")};break;case D.Changed:i={badge:"M",color:new l.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:l.l10n.t("Modified")};break;case D.Deleted:i={badge:"D",color:new l.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:l.l10n.t("Deleted")};break}return this._decorations.set(r,i!=null?i:null),i}}o(As,"ScmDecorationProvider");var Qc=dr(919);function Xc(t,e,n){if(!(e==null?void 0:e.length)&&!(n==null?void 0:n.length))return new Set(t);let r;if(e==null?void 0:e.length){const i=new Set([...e,...e.map(s=>`${s}/**`)]),a=micromatch(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}if(n==null?void 0:n.length){const i=new Set([...n,...n.map(a=>`${a}/**`)]);if(r===void 0){const a=micromatch.not(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}else micromatch(t,[...i],{dot:!0,nocase:!0}).forEach(r.delete,r)}return r}o(Xc,"globFilter");function Ds(t,e={}){if(!t)return Ls;if(typeof t=="string"||rc(t)){const n=Go(t,e);if(n===Gi)return Ls;const r=o(function(i,a){return!!n(i,a)},"resultPattern");return n.allBasenames&&(r.allBasenames=n.allBasenames),n.allPaths&&(r.allPaths=n.allPaths),r}return ac(t,e)}o(Ds,"parse");function zl(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}o(zl,"equals");function Ko(t){return!!t&&typeof t.then=="function"}o(Ko,"isThenable");function Zc(){return Object.create(null)}o(Zc,"getEmptyExpression");const Co="**",Rs="/",_o="[/\\\\]",bo="[^/\\\\]",eu=/\//g;function Ts(t,e){switch(t){case 0:return"";case 1:return`${bo}*?`;default:return`(?:${_o}|${bo}+${_o}${e?`|${_o}${bo}+`:""})*?`}}o(Ts,"starsToRegExp");function Ms(t,e){if(!t)return[];const n=[];let r=!1,i=!1,a="";for(const s of t){switch(s){case e:if(!r&&!i){n.push(a),a="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":i=!0;break;case"]":i=!1;break}a+=s}return a&&n.push(a),n}o(Ms,"splitGlobAware");function Is(t){if(!t)return"";let e="";const n=Ms(t,Rs);if(n.every(r=>r===Co))e=".*";else{let r=!1;n.forEach((i,a)=>{if(i===Co){if(r)return;e+=Ts(2,a===n.length-1)}else{let s=!1,c="",u=!1,d="";for(const f of i){if(f!=="}"&&s){c+=f;continue}if(u&&(f!=="]"||!d)){let h;f==="-"?h=f:(f==="^"||f==="!")&&!d?h="^":f===Rs?h="":h=on(f),d+=h;continue}switch(f){case"{":s=!0;continue;case"[":u=!0;continue;case"}":{e+=`(?:${Ms(c,",").map(_=>Is(_)).join("|")})`,s=!1,c="";break}case"]":{e+="["+d+"]",u=!1,d="";break}case"?":e+=bo;continue;case"*":e+=Ts(1);continue;default:e+=on(f)}}a<n.length-1&&(n[a+1]!==Co||a+2<n.length)&&(e+=_o)}r=i===Co})}return e}o(Is,"parseRegExp");const Jl=/^\*\*\/\*\.[\w\.-]+$/,Vl=/^\*\*\/([\w\.-]+)\/?$/,jl=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Yl=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,ql=/^\*\*((\/[\w\.-]+)+)\/?$/,Ql=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Ps=new Qn(1e4),Ls=o(function(){return!1},"FALSE"),Gi=o(function(){return null},"NULL");function Go(t,e){if(!t)return Gi;let n;typeof t!="string"?n=t.pattern:n=t,n=n.trim();const r=`${n}_${!!e.trimForExclusions}`;let i=Ps.get(r);if(i)return xs(i,t);let a;return Jl.test(n)?i=Zl(n.substr(4),n):(a=Vl.exec(zo(n,e)))?i=ec(a[1],n):(e.trimForExclusions?Yl:jl).test(n)?i=tc(n,e):(a=ql.exec(zo(n,e)))?i=ks(a[1].substr(1),n,!0):(a=Ql.exec(zo(n,e)))?i=ks(a[1],n,!1):i=nc(n),Ps.set(r,i),xs(i,t)}o(Go,"parsePattern");function Xl(t,e){if(!t||!e)return t;const n=e.length;if(n===0||t.length===0)return t;let r=0;for(;t.indexOf(e,r)===r;)r=r+n;return t.substring(r)}o(Xl,"ltrim");function xs(t,e){if(typeof e=="string")return t;const n=o(function(r,i){return ee(r,e.base)?t(Xl(r.substr(e.base.length),"/"),i):null},"wrappedPattern");return n.allBasenames=t.allBasenames,n.allPaths=t.allPaths,n.basenames=t.basenames,n.patterns=t.patterns,n}o(xs,"wrapRelativePattern");function zo(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}o(zo,"trimForExclusions");function Zl(t,e){return function(n,r){return typeof n=="string"&&n.endsWith(t)?e:null}}o(Zl,"trivia1");function ec(t,e){const n=`/${t}`,r=`\\${t}`,i=o(function(s,c){return typeof s!="string"?null:c?c===t?e:null:s===t||s.endsWith(n)||s.endsWith(r)?e:null},"parsedPattern"),a=[t];return i.basenames=a,i.patterns=[e],i.allBasenames=a,i}o(ec,"trivia2");function tc(t,e){const n=Fs(t.slice(1,-1).split(",").map(c=>Go(c,e)).filter(c=>c!==Gi),t),r=n.length;if(!r)return Gi;if(r===1)return n[0];const i=o(function(c,u){for(let d=0,f=n.length;d<f;d++)if(n[d](c,u))return t;return null},"parsedPattern"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(tc,"trivia3");function ks(t,e,n){const r="/"+t;let i;return n?i=o(function(a,s){return typeof a=="string"&&a.endsWith(r)?e:null},"parsedPattern"):i=o(function(a,s){return null},"parsedPattern"),i.allPaths=[(n?"*/":"./")+t],i}o(ks,"trivia4and5");function nc(t){try{const e=new RegExp(`^${Is(t)}$`);return function(n){return e.lastIndex=0,typeof n=="string"&&e.test(n)?t:null}}catch(e){return Gi}}o(nc,"toRegExp");function tu(t,e,n){return!t||typeof e!="string"?!1:Ds(t)(e,void 0,n)}o(tu,"match");function rc(t){const e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}o(rc,"isRelativePattern");function nu(t){return t.allBasenames||[]}o(nu,"getBasenameTerms");function ru(t){return t.allPaths||[]}o(ru,"getPathTerms");function ic(t){let e=-1,n=0,r=-1,i=!0,a=0;for(let s=t.length-1;s>=0;--s){const c=t.charCodeAt(s);if(c===47){if(!i){n=s+1;break}continue}r===-1&&(i=!1,r=s+1),c===46?e===-1?e=s:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===n+1?"":t.slice(e,r)}o(ic,"extname");function ac(t,e){const n=Fs(Object.getOwnPropertyNames(t).map(c=>oc(c,t[c],e)).filter(c=>c!==Gi)),r=n.length;if(!r)return Gi;if(!n.some(c=>!!c.requiresSiblings)){if(r===1)return n[0];const c=o(function(f,h){let p;for(let _=0,ne=n.length;_<ne;_++){const A=n[_](f,h);if(typeof A=="string")return A;Ko(A)&&(p||(p=[]),p.push(A))}return p?(async()=>{for(const _ of p){const ne=await _;if(typeof ne=="string")return ne}return null})():null},"resultExpression2"),u=n.find(f=>!!f.allBasenames);u&&(c.allBasenames=u.allBasenames);const d=n.reduce((f,h)=>h.allPaths?f.concat(h.allPaths):f,[]);return d.length&&(c.allPaths=d),c}const i=o(function(c,u,d){let f,h;for(let p=0,_=n.length;p<_;p++){const ne=n[p];ne.requiresSiblings&&d&&(u||(u=j(c)),f||(f=u.substr(0,u.length-ic(c).length)));const A=ne(c,u,f,d);if(typeof A=="string")return A;Ko(A)&&(h||(h=[]),h.push(A))}return h?(async()=>{for(const p of h){const _=await p;if(typeof _=="string")return _}return null})():null},"resultExpression"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(ac,"parsedExpression");function oc(t,e,n){if(e===!1)return Gi;const r=Go(t,n);if(r===Gi)return Gi;if(typeof e=="boolean")return r;if(e){const i=e.when;if(typeof i=="string"){const a=o((s,c,u,d)=>{if(!d||!r(s,c))return null;const f=i.replace("$(basename)",()=>u),h=d(f);return Ko(h)?h.then(p=>p?t:null):h?t:null},"result");return a.requiresSiblings=!0,a}}return r}o(oc,"parseExpressionPattern");function Fs(t,e){const n=t.filter(c=>!!c.basenames);if(n.length<2)return t;const r=n.reduce((c,u)=>{const d=u.basenames;return d?c.concat(d):c},[]);let i;if(e){i=[];for(let c=0,u=r.length;c<u;c++)i.push(e)}else i=n.reduce((c,u)=>{const d=u.patterns;return d?c.concat(d):c},[]);const a=o(function(c,u){if(typeof c!="string")return null;if(!u){let f;for(f=c.length;f>0;f--){const h=c.charCodeAt(f-1);if(h===47||h===92)break}u=c.substr(f)}const d=r.indexOf(u);return d!==-1?i[d]:null},"aggregate");a.basenames=r,a.patterns=i,a.allBasenames=r;const s=t.filter(c=>!c.basenames);return s.push(a),s}o(Fs,"aggregateBasenameMatches");function iu(t,e){return zl(t,e,(n,r)=>typeof n=="string"&&typeof r=="string"?n===r:typeof n!="string"&&typeof r!="string"?n.base===r.base&&n.pattern===r.pattern:!1)}o(iu,"patternsEquals");class Ns{constructor(e,n,r){if(this.location=n,this.parent=r,n[n.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");n[n.length-1]!=="/"&&(n+="/"),this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}updateContents(e){this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}isPathIncludedInTraversal(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);return!this.isPathIgnored(e,n)}isArbitraryPathIgnored(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);const r=e.split("/").filter(s=>s);let i=!1,a="";for(let s=0;s<r.length;s++){const c=s===r.length-1,u=r[s];if(a=a+"/"+u,!this.isPathIncludedInTraversal(a,c?n:!0)){i=!0;break}}return i}gitignoreLinesToExpression(e,n,r){const i=e.map(s=>this.gitignoreLineToGlob(s,n)),a=Object.create(null);for(const s of i)a[s]=!0;return Ds(a,{trimForExclusions:r})}parseIgnoreFile(e,n,r){const i=e.split(`
`).map(A=>A.trim()).filter(A=>A&&A[0]!=="#"),a=i.filter(A=>!A.endsWith("/")),s=a.filter(A=>!A.includes("!")),c=this.gitignoreLinesToExpression(s,n,!0),u=a.filter(A=>A.includes("!")).map(A=>A.replace(/!/g,"")),d=this.gitignoreLinesToExpression(u,n,!1),f=i.filter(A=>!A.includes("!")),h=this.gitignoreLinesToExpression(f,n,!0),p=i.filter(A=>A.includes("!")).map(A=>A.replace(/!/g,"")),_=this.gitignoreLinesToExpression(p,n,!1);return o((A,X)=>{if(!A.startsWith(n))return!1;if(X&&h(A)&&!_(A))return!0;const pe=c(A),Q=d(A);return pe&&!Q?!0:r?r.isPathIgnored(A,X):!1},"isPathIgnored")}gitignoreLineToGlob(e,n){const r=e.indexOf("/");return r===-1||r===e.length-1?e="**/"+e:(r===0?n.slice(-1)==="/"&&(e=e.slice(1)):n.slice(-1)!=="/"&&(e="/"+e),e=n+e),e}}o(Ns,"IgnoreFile");const Os=new TextDecoder;class Bs{constructor(e){this.providerService=e,this._gitIgnoreFiles=new Map}isIgnoreFile(e){return this.getIgnoreFileUri(e).toString()===e.toString()}async getIgnoreFile(e,n){const r=this.providerService.getVirtualRootUri(e),i=r.toString(),a=this._gitIgnoreFiles.get(i);if(a&&!n)return a;const s=this.doProcessIgnoreFile(r,a);return this._gitIgnoreFiles.set(i,s),s}getIgnoreFileUri(e){const n=this.providerService.getVirtualRootUri(e);return this.providerService.createRelativeUri(n,".gitignore")}async doProcessIgnoreFile(e,n){const r=this.providerService.createRelativeUri(e,".gitignore");try{if((await l.workspace.fs.stat(r)).type!==l.FileType.File)return;const a=await l.workspace.fs.readFile(r);if(n!==void 0){const s=await n;if(s)return s.updateContents(Os.decode(a)),s}return new Ns(Os.decode(a),`${e.path}/`)}catch(i){}}}o(Bs,"IgnoreFileService");const Hs=o(t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296},"e");class Us{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:r,dictionaries:i,style:a,seed:s}=e;this.dictionaries=i,this.separator=r,this.length=n,this.style=a,this.seed=s}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,r)=>{let i;e?(i=(s=>{if(typeof s=="string"){const c=s.split("").map(d=>d.charCodeAt(0)).reduce((d,f)=>d+f,1),u=Math.floor(Number(c));return Hs(u)}return Hs(s)})(e),e=4294967296*i):i=Math.random();let a=r[Math.floor(i*r.length)]||"";if(this.style==="lowerCase")a=a.toLowerCase();else if(this.style==="capital"){const[s,...c]=a.split("");a=s.toUpperCase()+c.join("")}else this.style==="upperCase"&&(a=a.toUpperCase());return n?`${n}${this.separator}${a}`:`${a}`},"")}}o(Us,"a");const Ws={separator:"_",dictionaries:[]},sc=o(t=>{const e=[...t&&t.dictionaries||Ws.dictionaries],n={...Ws,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new Us(n).generate()},"n");var lc=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blonde","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","chronic","chubby","circular","civic","civil","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colorful","colossal","coloured","colourful","combined","comfortable","commercial","common","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fatal","favourable","favourite","federal","fellow","few","fierce","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","implicit","important","impossible","impressed","impressive","improved","inadequate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mutual","mysterious","naked","narrow","nasty","national","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","only","open","operational","opposite","optimistic","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],cc=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],uc=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"],au=null,ou=null,su=null;class $s{static generate(e={}){let n=e.min||1,r=e.max||999;if(e.length){const i=Math.pow(10,e.length);return n=i/10,r=i-1,[`${Math.floor(Math.random()*(r-n))+n}`]}return[`${Math.floor(Math.random()*(r-n))+n}`]}}o($s,"y");class Xi{constructor(e,n){this.command=e,this.show=n}get label(){return this.command.title}get identifier(){return this.command.command}async execute(){var e;return void await l.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}get alwaysShow(){var e;return(e=this.show)!=null?e:!1}get commandArguments(){return this.command.arguments}set commandArguments(e){this.command.arguments=e}}o(Xi,"CommandQuickPickItem");var Eo;(function(t){async function e(n,r,i,a,s,c){let u;Array.isArray(s)?u=s:c===void 0&&(u=[],c=s);const d=l.window.createQuickPick(),f=new Nr(500),h=[f],{defaultBranch:p,HEAD:_}=await n.getMetadata(r);async function ne(be){const[Ne,We,Qe,It]=await Promise.all([n.getBranch(r,p.name),n.getBranches(r,{query:be,limit:100}),n.getTags(r,{query:be,limit:100}),n.getSnapshots(r)]),vt=new Set,qt=new Set;for(const dn of It)vt.add(dn.hash),qt.add(dn.branch.name);const hn=((c==null?void 0:c.filterBranches)?We.branches.filter(c==null?void 0:c.filterBranches):We.branches).filter(dn=>dn.name!==p.name).sort((dn,Ir)=>dn.committedDate&&Ir.committedDate?Ir.committedDate.getTime()-dn.committedDate.getTime():0),nn=l.l10n.t("Open indexed commit"),Wt=[{iconPath:new l.ThemeIcon("layers-active"),tooltip:nn}];if(be!==void 0&&u){for(const dn of u)if(dn.identifier==="remoteHub.createBranch"||dn.identifier==="remoteHub.createBranchFrom"){const Ir=dn.commandArguments;if(!Ir)continue;const Di=Ir.findIndex(aa=>"uri"in aa);let Ri;Di!==-1&&([Ri]=Ir.splice(Di,1),Ri.branch=be,Ir.push(Ri),dn.commandArguments=Ir)}}return[...u,{label:"",kind:l.QuickPickItemKind.Separator},...(c==null?void 0:c.showHead)?[{label:"HEAD",description:`\u2022$(git-commit) ${O(_.sha)}${vt.has(_.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:we.Commit,name:void 0,sha:_.sha,buttons:vt.has(_.sha)?Wt:void 0}]:[],{label:`$(${(Ne==null?void 0:Ne.locked)?"lock":"git-branch"}) ${p.name} (default)`,description:`\u2022$(git-commit) ${O(p.sha)}${qt.has(p.name)||vt.has(p.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:we.Branch,name:void 0,sha:p.sha,buttons:qt.has(p.name)||vt.has(p.sha)?Wt:void 0},...hn.map(dn=>({label:`$(${dn.locked?"lock":"git-branch"}) ${dn.name}`,description:`\u2022$(git-commit) ${O(dn.commit)}${qt.has(dn.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:we.Branch,name:dn.name,sha:dn.commit,buttons:qt.has(dn.name)?Wt:void 0})),...Qe.tags.map(dn=>({label:`$(tag) ${dn.name}`,description:`\u2022$(git-commit) ${O(dn.commit)}${vt.has(dn.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:we.Tag,name:dn.name,sha:dn.commit,buttons:vt.has(dn.commit)?Wt:void 0}))]}o(ne,"getItems");const A=ne(void 0);let X,pe=!1;async function Q(be){X=void 0;const Ne=d.activeItems;d.items=be!=null?be:await A,pe&&Ne.length!==0&&(d.activeItems=d.items.filter(We=>Ne.some(Qe=>Qe.label===We.label))),d.busy=!1}o(Q,"setItems");try{return await new Promise(Ne=>{var We;h.push(d.onDidHide(()=>Ne(void 0)),d.onDidChangeValue(Qe=>{if(pe=!1,Qe=Qe.trim(),(c==null?void 0:c.allowResetToSha)&&_.branch&&N(Qe)){Q([{label:`Reset $(git-branch) ${_.branch.name} to $(git-commit) ${Qe}`,name:_.branch.name,sha:Qe,type:we.Branch}]);return}d.busy=!0;const It=f.debounce(Qe?()=>ne(Qe):()=>A);X===void 0&&(X=It.then(async vt=>Q(vt)))}),d.onDidAccept(()=>{if(d.activeItems.length!==0){const[Qe]=d.activeItems;Ne(Qe)}}),d.onDidTriggerItemButton(Qe=>{const It=Qe.item;!(It instanceof Xi)&&It.kind!==l.QuickPickItemKind.Separator&&(It.useIndex=!0),Ne(It)})),d.title=a,d.placeholder=i,d.matchOnDescription=!0,d.ignoreFocusOut=(We=c==null?void 0:c.ignoreFocusOut)!=null?We:!0,d.busy=!0,d.show(),X=f.debounce(async()=>A,0).then(Qe=>Q(Qe))})}finally{d.dispose(),h.forEach(be=>void be.dispose())}}o(e,"show"),t.show=e})(Eo||(Eo={}));const dc=new TextDecoder;class Ks{constructor(e,n,r,i){this.providerService=e,this.openActionsService=n,this.telemetryService=r,this.ignoreFileService=i,this._onDidCloseRepository=new l.EventEmitter,this._onDidOpenRepository=new l.EventEmitter,this._onDidChangeState=new l.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=l.Disposable.from(me.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:s})=>{const c=this.getScmProvider(k.getVirtualUri(s.uri));c!==void 0&&await this.updateStatusBarCommands(c,void 0)}),this.providerService.onDidSyncRepository(async({repository:s,syncing:c})=>{const u=this.getScmProvider(k.getVirtualUri(s.uri));u!==void 0&&(await this.updateStatusBarCommands(u,{syncing:c}),c===!1&&await this.update(s.uri))}),this.providerService.onDidRefresh(s=>{for(const c of s)this.update(c)}),this.providerService.onDidChangeChangeStore(s=>this.update(s[0].rootUri)),...this.registerCommands());const a=this.providerService.repositories;this.onRepositoriesChanged({added:a,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=me.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}onConfigurationChanged(e){me.changed(e,"staging")&&(this._staging=void 0,me.changed(e,"staging.enabled")&&this.refresh()),me.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const n of e.added){const r=await this.update(n.uri);(r==null?void 0:r.repository)&&this._onDidOpenRepository.fire(r.repository)}if(e.removed.length)for(const n of e.removed){const r=this._scmProviders.findIndex(i=>b(i.sourceControl.rootUri)===b(n.uri));if(r!==-1){const i=this._scmProviders[r];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(r,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[l.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createPullRequest"),void this.createPullRequest(e)}),l.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),l.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commit"),void this.commitChanges(e,{empty:!1})}),l.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),l.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if(Gs(e)){const a=this.getSourceControlFrom(e);if((a==null?void 0:a.rootUri)===void 0)return;const c=e.resourceStates.filter($a);if(c.length!==0){if(await Vo(c))for(const u of c)await this.providerService.getChangeStore(u.resourceUri).discard(u.resourceUri),await this.closeDiffEditors(a.rootUri,[u.resourceUri]);else this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"});return}}let n=!1;e!==void 0&&"confirmDiscard"in e&&(n=!0,e=void 0);const r=this.getSourceControlFrom(e);if((r==null?void 0:r.rootUri)===void 0)return;this.telemetryService.publicLog2("command.discardAllChanges");const i=await this.providerService.getChangeStore(r.rootUri).getChanges(r.rootUri);n||await Vo(i)?await this.providerService.getChangeStore(r.rootUri).discardAll(r.rootUri):this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"})}),l.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{const n=this.getSourceControlFrom(e[0]);if((n==null?void 0:n.rootUri)!==void 0)for(const r of e)!$a(r)||(this.telemetryService.publicLog2("command.discardChanges"),await Vo([r])?(await this.providerService.getChangeStore(r.resourceUri).discard(r.resourceUri),await this.closeDiffEditors(n.rootUri,[r.resourceUri])):this.telemetryService.publicLog2("command.discardChanges.abort",{reason:"aborted"}))}),l.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.stageAllChanges"),await this.providerService.getChangeStore(n.rootUri).stageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!$a(i)||(this.telemetryService.publicLog2("command.stageChanges"),await this.providerService.getChangeStore(i.resourceUri).stage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.unstageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.unstageAllChanges"),await this.providerService.getChangeStore(n.rootUri).unstageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!$a(i)||(this.telemetryService.publicLog2("command.unstageChanges"),await this.providerService.getChangeStore(i.resourceUri).unstage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const n of e)!$a(n)||(this.telemetryService.publicLog2("command.keepChanges"),await this.providerService.getChangeStore(n.resourceUri).keep(n.resourceUri))}),l.commands.registerCommand("remoteHub.openChanges",e=>{var n;const{command:r}=e;if(!!r)return this.telemetryService.publicLog2("command.openChanges"),void l.commands.executeCommand(r.command,...(n=r.arguments)!=null?n:[])}),l.commands.registerCommand("remoteHub.openFile",async(...e)=>{var n;for(const r of e)if(Jo(r)){const i=r,a=this.providerService.getChangeStore(i.resourceUri).resolveOpenCommand(i.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:l.ViewColumn.Active});this.telemetryService.publicLog2("command.openFile"),await l.commands.executeCommand(a.command,...(n=a.arguments)!=null?n:[])}else if(r instanceof l.Uri){this.telemetryService.publicLog2("command.openFile");const i=r;await l.window.showTextDocument(i)}}),l.commands.registerCommand("remoteHub.createBranch",async e=>{await qr("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),l.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ka(this._scmProviders,l.l10n.t("Choose which repository to create a new branch on"));if(r===void 0)return;this.telemetryService.publicLog2("command.createBranchFrom");const i=await this.providerService.getMetadata(r);let a;if(i.accessLevel<le.Write&&(a=await this.providerService.getFork(r),a===void 0)){const A={title:l.l10n.t("Fork Repository")},X={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You don't have access to create branches on this repository.

Do you want to create a branch on a fork?`),{modal:!0},A,X)!==A){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"no permissions and declined to fork"});return}if(a=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",i.name)},()=>this.providerService.fork(r)),a===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"aborted fork failed"});return}}let s,c=e==null?void 0:e.branch,u=!1;try{(!c||!w(c))&&(c=await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>Ga(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),void 0,void 0)));let A;if(e==null?void 0:e.fromSha)A=e.fromSha,A==="HEAD"&&(A=i.HEAD.sha);else{const X=await Eo.show(this.providerService,r,l.l10n.t("Select a ref to create the new branch from"),void 0,{showHead:!0});if(!X){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}A=X.sha,u=Boolean(X.useIndex)}c&&A&&(s=await this.providerService.createBranch(r,c,A,a))}catch(A){K.error(A),l.window.showErrorMessage(l.l10n.t("Unable to create the new branch."));return}if(!s){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const d=await this.providerService.switchTo(a?this.providerService.createVirtualUri(r,a):r,{type:we.Branch,id:s});if(!d)return;const f=await this.providerService.getChangeStore(r).createChangeset(r);f&&await this.openActionsService.setChangesetToApply(d.uri,f);const h=l.l10n.t("Switch to Branch"),p=l.l10n.t("Open in New Window"),ne=me.get("switchToCreatedBranch")==="always"?h:await l.window.showInformationMessage(l.l10n.t(`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,s),{modal:!0},h,p);!ne||(await this.providerService.getChangeStore(r).discardAll(r),d.location=ne===p?ze.NewWindow:ze.CurrentWindow,u&&await me.setMode(d.uri,de.getIndexDefault(se.Branch)),await kn(this.providerService,d,{skipChangesPrompt:!0}))}),l.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.publicLog2("command.applyPatch");let n;const r=l.window.activeTextEditor;if((r==null?void 0:r.document.languageId)!=="diff"){const i=await l.window.showOpenDialog({openLabel:l.l10n.t("Open Patch"),title:l.l10n.t("Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(i===void 0||i.length===0)return;n=dc.decode(await l.workspace.fs.readFile(i[0]))}else n=r.document.getText();try{await this.providerService.getChangeStore(e.rootUri).applyPatch(e.rootUri,n)}catch{l.window.showErrorMessage(l.l10n.t("Invalid patch file"))}}),l.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const n=Array.isArray(e)?e:[e];for(const r of n){const i=this.getSourceControlFrom(r);if((i==null?void 0:i.rootUri)===void 0)return;let a;Jo(r)&&(a=r.resourceUri),this.telemetryService.publicLog2("command.exportPatch");const s=await this.providerService.getChangeStore(i.rootUri).createPatch(i.rootUri,a),c=await l.workspace.openTextDocument({language:"diff",content:s});await l.window.showTextDocument(c)}}),l.commands.registerCommand("remoteHub.switchToBranch",async e=>{var n,r;const i=(n=e==null?void 0:e.uri)!=null?n:await Ka(this._scmProviders,l.l10n.t("Choose which repository to switch branches on"));if(i===void 0)return;this.telemetryService.publicLog2("command.switchToBranch");const a=[],s=await this.providerService.getMetadata(i);if(e==null?void 0:e.commands)switch(a.push(new Xi(yr({command:"remoteHub.createBranch",title:l.l10n.t("{0} Create new branch...","$(add)"),arguments:[{uri:i}]}),!0),new Xi(yr({command:"remoteHub.createBranchFrom",title:l.l10n.t("{0} Create new branch from...","$(add)"),arguments:[{uri:i}]}),!0)),s.HEAD.type){case J.Branch:a.push(new Xi(yr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.branch.name}]})));break;case J.RemoteBranch:a.push(new Xi(yr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Remote Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.HEAD.branch.remote.repo,branch:s.HEAD.branch.name}]})));break;case J.Tag:a.push(new Xi(yr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Tag on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,tag:s.HEAD.detached.name}]})));break;case J.Commit:a.push(new Xi(yr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Commit on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,sha:s.HEAD.sha}]})));break}const c=(r=s.HEAD.branch)==null?void 0:r.name,u=Boolean(c&&!await this.providerService.getChangeStore(i).hasChanges(i)),d=await Eo.show(this.providerService,i,l.l10n.t("Select a branch or tag to checkout"),void 0,a,{allowResetToSha:u,filterBranches:c?f=>f.name!==c:void 0,ignoreFocusOut:!1});if(!d){this.telemetryService.publicLog2("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return d instanceof Xi?void d.execute():u&&d.type===we.Branch&&d.name===c&&d.sha?l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(i,{to:d.sha})}catch(f){K.error(f),l.window.showErrorMessage(l.l10n.t("Unable to reset the repository to commit '{0}'.",O(d.sha)))}}):void l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const f=await this.providerService.switchTo(i,d.name?{type:d.type,id:d.name}:void 0);if(f!==void 0){if(d.useIndex){const h=await this.providerService.getModeRefType(f.uri);await me.setMode(f.uri,de.getIndexDefault(h))}return kn(this.providerService,f)}})}),l.commands.registerCommand("remoteHub.fetch",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ka(this._scmProviders,l.l10n.t("Choose which repository to fetch"));if(r!==void 0){this.telemetryService.publicLog2("command.fetch");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.fetch(r,{force:!0}))}catch(i){l.window.showErrorMessage(l.l10n.t("Unable to fetch repository"))}}}),l.commands.registerCommand("remoteHub.fetchAll",async e=>{const n=this.providerService.repositories;if(n.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.publicLog2("command.fetchAll"),(await l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const i=[];for(const a of n)try{await this.providerService.fetch(a.uri)}catch(s){i.push(s)}return i})).length&&!(e==null?void 0:e.automated)&&l.window.showErrorMessage(n.length?l.l10n.t("Unable to fetch repositories"):l.l10n.t("Unable to fetch repository"))}),l.commands.registerCommand("remoteHub.pull",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ka(this._scmProviders,l.l10n.t("Choose which repository to pull"));if(r!==void 0){this.telemetryService.publicLog2("command.pull");try{await this.sync(r,{pull:!0})}catch{}}}),l.commands.registerCommand("remoteHub.sync",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ka(this._scmProviders,l.l10n.t("Choose which repository to sync"));if(r!==void 0){this.telemetryService.publicLog2("command.sync");try{await this.sync(r)}catch{}}}),l.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.publicLog2("command.disableCommitDirectlyWarning"),me.updateEffective("commitDirectlyWarning",mt.Off)})]}async sync(e,{pull:n,...r}={pull:!1}){this.telemetryService.publicLog2("sync");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,r))}catch(i){if(Xe.asVirtualProviderErrorCode(i)===ae.SyncConflictsError){const a={title:l.l10n.t("Continue")},s={title:l.l10n.t("Cancel"),isCloseAffordance:!0};await l.window.showWarningMessage(n?l.l10n.t(`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):l.l10n.t(`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0},a,s)===a?await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,{conflictResolution:ve.Merge})):this.telemetryService.publicLog2("sync.abort",{reason:"abandoned"})}else if(Xe.asVirtualProviderErrorCode(i)===ae.UnresolvedConflictsError)await l.window.showErrorMessage(n?l.l10n.t("You must resolve any pending conflicts before pulling."):l.l10n.t("You must resolve any pending conflicts before syncing."),{modal:!0});else throw K.error(i),this.telemetryService.sendException(i),l.window.showErrorMessage(l.l10n.t("Unable to sync the repository.")),i}}async commitChanges(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,n))}catch(r){if(Xe.asVirtualProviderErrorCode(r)===ae.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}K.error(r),l.window.showErrorMessage(l.l10n.t("Unable to commit.")),this.telemetryService.sendException(r)}}async commitChangesCore(e,n){const r=e.rootUri;this.telemetryService.publicLog2("commit",{staging:String(this.staging.enabled)});const i=new _t(`VirtualSourceControl.commitChanges(${r.toString()})`);let a;try{const s=await this.providerService.getMetadata(r);let c,u;const d=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const h=e.inputBox.value;if(await this.providerService.getChangeStore(r).hasMergeConflicts(r)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted conflicts"}),a=": Aborted; Unresolved conflicts";return}const p=await this.providerService.getCommitOperations(r,{staged:d});if(p.length===0&&!n.empty){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),a=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted no message"}),a=": Aborted; No message";return}let _,ne;if(s.HEAD.type===J.RemoteBranch?(ne=s.HEAD.branch.remote.accessLevel<le.Write,_=ne&&s.accessLevel<le.Write):(_=s.accessLevel<le.Write,ne=_),u===void 0&&_&&(u=await this.providerService.getFork(r),u===void 0)){const A={title:l.l10n.t("Fork Repository")},X={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t("You're trying to make changes in a project you don't have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0},A,X)!==A){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned fork prompt"}),a=": Aborted; Abandoned fork prompt";return}if(u=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",s.name)},()=>this.providerService.fork(r)),u===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("commit.abort",{reason:"aborted fork failed"}),a=": Aborted; Fork failed";return}}if(u||ne){if(u===void 0){const pe={title:l.l10n.t("Commit to a New Branch")},Q={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You're trying to make changes to a branch you don't have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0},pe,Q)!==pe){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned remote branch prompt"}),a=": Aborted; Abandoned commit to new branch prompt";return}}let A=0;try{const pe=await this.providerService.getBranches(u?this.providerService.createVirtualUri(r,u):r,{query:"patch-"});for(const Q of pe.branches){const be=/^patch-(?<num>\d+)$/.exec(Q.name);if(be==null?void 0:be.groups){const Ne=Number(be.groups.num);Ne>A&&(A=Ne)}}}catch{}const X=await Ga(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name),`patch-${A+1}`);if(X&&(c=await this.providerService.createBranch(r,X,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned create branch prompt"}),a=": Aborted; Abandoned create branch prompt";return}}try{await this.providerService.createAndPushCommit(r,h,p,c,n,u),await this.closeDiffEditors(r,void 0)}catch(A){const X=Xe.asVirtualProviderErrorCode(A);if(X===ae.DetachedHEADError){const pe={title:l.l10n.t("Commit to a New Branch")},Q={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},pe,Q)!==pe){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const Ne=await Ga(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(Ne&&(c=await this.providerService.createBranch(r,Ne,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(X===ae.MergeConflictError){const pe={title:l.l10n.t("Pull")},Q={title:l.l10n.t("Sync (Pull & Push)")},be={title:l.l10n.t("Cancel"),isCloseAffordance:!0},Ne=await l.window.showErrorMessage(l.l10n.t(`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},pe,Q,be);if(Ne!==pe&&Ne!==Q){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned conflicts prompt"}),a=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(r,{pull:Ne===pe,conflictResolution:ve.Merge}),Ne===pe){a=': Aborted; Chose "pull" from merge changes prompt';return}continue}else if(X===ae.CommitToProtectedBranchError){const pe={title:l.l10n.t("Commit to a New Branch")},Q={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if((l.workspace.getConfiguration("git").get("branchProtectionPrompt")==="alwaysCommitToNewBranch"?pe:await l.window.showErrorMessage(l.l10n.t(`You are trying to commit to a protected branch and you do not have permission to push your commits to the remote.

How would you like to proceed?`),{modal:!0},pe,Q))!==pe){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const We=await Ga(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(We&&(c=await this.providerService.createBranch(r,We,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(X===ae.CommitToArchivedRepositoryError){l.window.showErrorMessage(l.l10n.t("The current repository has been archived and is now read-only. Please contact the repository owner."),{modal:!0}),this.telemetryService.publicLog2("commit.abort",{reason:"archived repository"}),a=`: Aborted; ${String(A)}`;return}else throw K.error(A),a=`: Aborted; ${String(A)}`,A}break}if(e.inputBox.value="",u?await this.providerService.getChangeStore(r).discardAll(r,{staged:d}):await this.providerService.getChangeStore(r).acceptAll(r,{staged:d}),qo(ga.HasCommitted,!0),!u&&!c)return;async function f(){if(u){const A={title:l.l10n.t("Switch to Fork")},X={title:l.l10n.t("Cancel"),isCloseAffordance:!0},pe=await l.window.showInformationMessage(l.l10n.t("Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",s.name),{modal:!0},A,X);if(this.telemetryService.publicLog2("commit.switchToFork",{confirm:String(pe===A)}),pe===A){let Q;c!==void 0?Q={type:we.Branch,id:c}:s.HEAD.branch!==void 0&&(Q={type:we.Branch,id:s.HEAD.branch.name}),kn(this.providerService,{name:u.name,uri:this.providerService.createVirtualUri(r,{repo:u.repo,ref:Q}),location:ze.CurrentWindow})}return}const h={title:l.l10n.t("Switch to Branch")},p={title:l.l10n.t("Cancel"),isCloseAffordance:!0},_=me.get("switchToCreatedBranch")==="always",ne=_?h:await l.window.showInformationMessage(l.l10n.t("Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",c),{modal:!0},h,p);this.telemetryService.publicLog2("commit.switchToBranch",{confirm:String(ne===h),autoConfirm:String(_)}),ne===h&&kn(this.providerService,{name:s.name,uri:this.providerService.createVirtualUri(r,{repo:s.repo,ref:c?{type:we.Branch,id:c}:void 0}),location:ze.CurrentWindow})}o(f,"showSwitchToPrompt"),f.call(this)}finally{i.stop(a?{message:a}:void 0)}}async createPullRequest(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,n))}catch(r){const i=Xe.asVirtualProviderErrorCode(r);if(i===ae.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}if(i===ae.CommitFailedError){l.window.showErrorMessage(l.l10n.t("Unable to commit."));return}K.error(r),l.window.showErrorMessage(l.l10n.t("Unable to open a pull request.")),this.telemetryService.sendException(r)}}async createPullRequestCore(e,n){var r;const i=e.rootUri,a=(r=n==null?void 0:n.draft)!=null?r:!1;this.telemetryService.publicLog2("createPullRequest",{draft:String(a),staging:String(this.staging.enabled)});const s=new _t(`VirtualSourceControl.createPullRequest(${i.toString()})`);let c;try{let u=o(function(){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned branch prompt"}),c=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),d;const f=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(n==null?void 0:n.sha)){if(await this.providerService.getChangeStore(i).hasMergeConflicts(i)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted conflicts"}),c=": Aborted; Unresolved conflicts";return}if(d=await this.providerService.getCommitOperations(i,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),d.length===0){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),c=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const h=e.inputBox.value;if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted no message"}),c=": Aborted; No message";return}const p=await this.providerService.getMetadata(i);let _,ne;p.HEAD.type===J.RemoteBranch?(ne=p.HEAD.branch.remote.accessLevel<le.Write,_=ne&&p.accessLevel<le.Write):(_=p.accessLevel<le.Write,ne=_);let A=n==null?void 0:n.fork;if(A===void 0&&_&&(A=await this.providerService.getFork(i),A===void 0)){const Qe={title:l.l10n.t("Fork Repository")},It={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t(`You're trying to make changes in a project you don't have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0},Qe,It)!==Qe){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned fork prompt"}),c=": Aborted; Abandoned fork prompt";return}if(A=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",p.name)},()=>this.providerService.fork(i)),A===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted fork failed"}),c=": Aborted; Fork failed";return}}const X=h.trimStart().split(`
`),pe=await l.window.showInputBox({ignoreFocusOut:!0,placeHolder:l.l10n.t("New pull request title"),prompt:l.l10n.t("Please provide a title for the new pull request"),value:X[0]});if(!pe){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned title prompt"}),c=": Aborted; Abandoned title prompt";return}async function Q(Qe){let It=0;try{const hn=await this.providerService.getBranches(A?this.providerService.createVirtualUri(i,A):i,{query:"patch-"});for(const nn of hn.branches){const Wt=/^patch-(?<num>\d+)$/.exec(nn.name);if(Wt==null?void 0:Wt.groups){const dn=Number(Wt.groups.num);dn>It&&(It=dn)}}}catch{}const vt=await Ga(this.providerService,i,l.l10n.t("Create a new branch for this pull request"),l.l10n.t("New branch name"),l.l10n.t("New Pull Request \u2022 Create Branch \u2022 {0}",A?A.name:p.name),`patch-${It+1}`);let qt;return vt&&(qt=await this.providerService.createBranch(i,vt,Qe,A)),qt}o(Q,"createBranch");const be=await Q.call(this,p.HEAD.sha);if(!be){u.call(this);return}(d==null?void 0:d.length)&&await this.providerService.createAndPushCommit(i,h,d,be,void 0,A);const Ne=await this.providerService.createPullRequest(i,be,pe,X.slice(1).join(`
`),{draft:a},A);e.inputBox.value="",(d==null?void 0:d.length)&&(A?await this.providerService.getChangeStore(i).discardAll(i,{staged:f}):await this.providerService.getChangeStore(i).acceptAll(i,{staged:f}));async function We(){const Qe={title:l.l10n.t("Switch to Pull Request")},It={title:l.l10n.t("Cancel"),isCloseAffordance:!0},vt=await l.window.showInformationMessage(l.l10n.t("Created pull request #{0} in {1}. Do you want to switch to the new pull request?",Ne.id,p.name),{modal:!0},Qe,It);this.telemetryService.publicLog2("commit.switchToPullRequest",{confirm:String(vt===Qe)}),vt===Qe&&kn(this.providerService,{name:p.name,uri:this.providerService.createVirtualUri(i,{repo:p.repo,ref:{type:we.PullRequest,id:Ne.id}}),location:ze.CurrentWindow})}o(We,"showSwitchToPrompt"),We.call(this)}finally{s.stop(c?{message:c}:void 0)}}async update(e){const n=l.workspace.getWorkspaceFolder(e);if(n===void 0)return;const r=await this.providerService.getMetadata(e),i=await this.createOrUpdateScmProvider(e,n.name),a=await this.ignoreFileService.getIgnoreFile(e,!1),s=await this.providerService.getChangeStore(e).getGroupedChanges(e,{predicate:h=>h.fileType===l.FileType.File}),c=await Promise.all(s.conflicts.filter(h=>a?!a.isArbitraryPathIgnored(h.uri.path,!1):!0).map(async h=>({type:h.type,resourceUri:h.uri,command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,h.conflicts.incomingUri,l.l10n.t("{0} (Incoming Changes \u2194 Current Changes)",j(h.uri)))}))),u=o(h=>this.providerService.createVirtualUri(k.getProviderId(h),{repo:r.repo,ref:{type:we.Commit,id:r.HEAD.sha}},this.providerService.getRelativeFilePath(h)),"getOriginalVirtualUri"),d=await Promise.all(s.staged.filter(h=>a?!a.isArbitraryPathIgnored(h.uri.path,!1):!0).map(async h=>({type:h.type,resourceUri:h.uri,command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,u(h.uri),l.l10n.t("{0} (Index)",j(h.uri)))}))),f=await Promise.all(s.working.filter(h=>a?!a.isArbitraryPathIgnored(h.uri.path,!1):!0).map(async h=>({type:h.type,resourceUri:h.uri,decorations:{strikeThrough:h.type===D.Deleted},command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,u(h.uri),l.l10n.t("{0} (Working Tree)",j(h.uri)))})));return i.sourceControl.actionButton=this.ensureActionButton(e),this.ensureMergeConflictsGroup(i).resourceStates=c,this.ensureStagedChangesGroup(i).resourceStates=this.staging.enabled?d:[],this.ensureWorkingChangesGroup(i).resourceStates=this.staging.enabled?f:[...d,...f],i}ensureActionButton(e){var n,r;const i=(n=this.providerService.getRegisteredProvider(e))==null?void 0:n.name;return{command:{title:l.l10n.t("Commit & Push"),tooltip:i!==void 0?l.l10n.t("Your changes will be committed and pushed directly to {0}.",i):l.l10n.t("Your changes will be committed and pushed directly to the remote."),command:"remoteHub.commit"},secondaryCommands:[[{title:l.l10n.t("Continue Working On..."),tooltip:l.l10n.t("Bring your working changes with you to a new development environment."),command:"remoteHub.continueOn"}]],enabled:(r=this.providerService.changeStoreMaybeHasChanges(e))!=null?r:!0}}async createOrUpdateScmProvider(e,n){var r,i;const a=await this.providerService.getMetadata(e);let s;const c=a.HEAD.branch?a.HEAD.name:void 0;let u=this.getScmProvider(e);if(u===void 0){n=a.name,s=l.scm.createSourceControl(`remoteHub:${a.provider.id}`,n,e),s.quickDiffProvider={provideOriginalResource:f=>k.getProviderUri(f)};const d=this.providerService.createIGitRepository(e,s,a);u={id:a.provider.id,name:a.provider.name,sourceControl:s,groups:[],repository:d},this.ensureMergeConflictsGroup(u),this.ensureStagedChangesGroup(u),this.ensureWorkingChangesGroup(u),this._scmProviders.push(u)}else s=u.sourceControl;return a.accessLevel>=le.Write||((i=(r=a.HEAD.branch)==null?void 0:r.remote)==null?void 0:i.accessLevel)!==void 0&&a.HEAD.branch.remote.accessLevel>=le.Write?(s.acceptInputCommand={command:"remoteHub.commit",title:l.l10n.t("Commit"),arguments:[s]},c?s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to '{0}' on {1})",c,a.provider.name):s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to {0})",a.provider.name),me.get("commitDirectlyWarning")===mt.Off?s.inputBox.validateInput=void 0:s.inputBox.validateInput=d=>{if(me.get("commitDirectlyWarning")===mt.Auto&&nl(ga.HasCommitted))return;const f=new l.MarkdownString(c?l.l10n.t("Your changes will be committed and immediately pushed to the '{0}' branch on {1}.",c,a.provider.name):l.l10n.t("Your changes will be committed and immediately pushed to {0}.",a.provider.name));return f.isTrusted=!0,f.appendMarkdown(`&nbsp; [${l.l10n.t("Don't show again")}](command:remoteHub.disableCommitDirectlyWarning '${l.l10n.t("Hide")}')`),{message:f,type:l.SourceControlInputBoxValidationType.Information}}):(s.acceptInputCommand={command:"remoteHub.createPullRequest",title:l.l10n.t("Create a Pull Request"),arguments:[s]},s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to create a pull request for '{0}')",n)),await this.updateStatusBarCommands(u,{syncing:!1},a),u}async updateStatusBarCommands(e,n,r){var i,a,s,c,u;const d=e.sourceControl.rootUri;r=r!=null?r:await this.providerService.getMetadata(d);const{HEAD:f}=r,h=await this.providerService.getIndexMetadata(d),p=(h==null?void 0:h.type)===Re.Active,_=(h==null?void 0:h.type)===Re.Active,ne=Re.hasIndex(h==null?void 0:h.type),A=await this.providerService.getChangeStore(d).hasChanges(d),X=(a=f.type===J.Branch&&((i=await this.providerService.getBranch(d,f.branch.name))==null?void 0:i.locked)?"$(lock)":void 0)!=null?a:ki(f.type),pe=[];if(pe.push(yr({command:"remoteHub.switchToBranch",title:`${X} ${f.name}${A?"*":""}`,tooltip:`${O(f.sha)}`,arguments:[{uri:d,commands:!0}]})),f.detached||((n==null?void 0:n.syncing)?pe.push(yr({command:"",title:"$(sync~spin)",tooltip:l.l10n.t("Syncing Changes..."),arguments:[]})):pe.push(yr({command:"remoteHub.sync",title:`$(sync)${((c=(s=r.state)==null?void 0:s.behind)!=null?c:0)>0?` ${(u=r.state)==null?void 0:u.behind}\u2193`:""}`,tooltip:p||_?l.l10n.t("Sync to latest indexed commit"):l.l10n.t("Sync (Pull & Push)"),arguments:[{uri:d}]}))),r.pullRequest&&pe.push(yr({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${r.pullRequest.id}`,tooltip:l.l10n.t(`Open Pull Request #{0} on {1}

{2}`,r.pullRequest.id,r.provider.name,r.pullRequest.title),arguments:[{provider:r.provider,repo:r.repo,pullRequest:{id:r.pullRequest.id}}]})),ne){const Q=this.providerService.getIndexProvider(d);Q&&pe.push(...await Q.getStatusBarContributions(d))}e.sourceControl.statusBarCommands=pe}ensureMergeConflictsGroup(e){const n="conflicts";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Merge Conflicts")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureStagedChangesGroup(e){const n="staged";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Staged Changes")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureWorkingChangesGroup(e){const n="changes";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Changes")),e.groups.push(r)),r}getScmProvider(e){const n=b(e);return this._scmProviders.find(r=>b(r.sourceControl.rootUri)===n)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let n;if(fc(e))n=e;else if(Gs(e)){const r=e,i=this._scmProviders.find(a=>a.groups.find(s=>s.id===r.id));n=i==null?void 0:i.sourceControl}else if(Jo(e)){const r=e,i=this._scmProviders.find(a=>a.groups.some(s=>s.resourceStates.find(c=>c.resourceUri.toString()===r.resourceUri.toString())));n=i==null?void 0:i.sourceControl}else{if(this._scmProviders.length!==1)return;n=this._scmProviders[0].sourceControl}return n}async closeDiffEditors(e,n){if(!l.workspace.getConfiguration("git",e).get("closeDiffOnOperation",!1))return;const i=[];for(const a of l.window.tabGroups.all.map(s=>s.tabs).flat()){const{input:s}=a;(s instanceof l.TabInputTextDiff||s instanceof l.TabInputNotebookDiff)&&s.modified.scheme===k.scheme&&(!n||n.some(c=>c.path===s.modified.path))&&i.push(a)}await l.window.tabGroups.close(i,!0)}}o(Ks,"VirtualSourceControl");function fc(t){return"rootUri"in t&&"inputBox"in t}o(fc,"isSourceControl");function Gs(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}o(Gs,"isSourceControlResourceGroup");function Jo(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof l.Uri}o(Jo,"isSourceControlResourceState");function $a(t){return"type"in t}o($a,"isTrackedChange");async function Vo(t){var e,n,r;if(t.length===0)return!0;let i,a=l.l10n.t("Discard Changes");if(t.length===1){const c=t[0];c.type===D.Created?(i=l.l10n.t(`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,j((e=c.resourceUri)!=null?e:c.uri)),a=l.l10n.t("Delete file")):c.type===D.Deleted?(a=l.l10n.t("Restore file"),i=l.l10n.t("Are you sure you want to restore {0}?",j((n=c.resourceUri)!=null?n:c.uri))):i=l.l10n.t("Are you sure you want to discard changes in {0}?",j((r=c.resourceUri)!=null?r:c.uri))}else t.every(c=>c.type===D.Created)?i=l.l10n.t(`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(c=>c.type===D.Deleted)?(a=l.l10n.t("Restore files"),i=l.l10n.t("Are you sure you want to restore {0} files?",t.length)):i=l.l10n.t("Are you sure you want to discard changes in {0} files?",t.length);return await l.window.showWarningMessage(i,{modal:!0},a)===a}o(Vo,"confirmDiscard");async function Ka(t,e,n){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const r=await l.window.showQuickPick(t.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:e,title:n});if(!!r)return r.uri}o(Ka,"getOrPickRootUri");async function Ga(t,e,n,r,i,a){let s;const c=l.window.createInputBox();c.ignoreFocusOut=!0;try{return await new Promise(u=>{s=l.Disposable.from(c.onDidHide(()=>u(void 0)),c.onDidChangeValue(d=>{if(d=d.trim(),!d){c.validationMessage=l.l10n.t("Please enter a valid branch name");return}if(!w(d)){c.validationMessage=l.l10n.t("'{0}' isn't a valid branch name",d);return}c.validationMessage=void 0}),c.onDidAccept(async()=>{const d=c.value.trim();if((await t.getBranches(e,{query:d,limit:100})).branches.some(h=>h.name===d)){c.validationMessage=l.l10n.t("Branch '{0}' already exists",d);return}c.enabled=!1,c.busy=!0,u(d)})),c.prompt=n,c.placeholder=r,c.title=i,c.value=hc(a),c.show()})}finally{c.dispose(),s==null||s.dispose()}}o(Ga,"getBranchNameWithPrompt");function hc(t){const e=l.workspace.getConfiguration("git"),n=e.get("branchPrefix","");if(!t&&e.get("branchRandomName.enable",!1)===!0){const r=gc();return`${n}${r}`}return`${n}${t!=null?t:""}`}o(hc,"generateBranchName");function gc(){const t=l.workspace.getConfiguration("git"),e=t.get("branchRandomName.dictionary",["adjectives","animals"]),n=[];for(const r of e)r.toLowerCase()==="adjectives"&&n.push(lc),r.toLowerCase()==="animals"&&n.push(cc),r.toLowerCase()==="colors"&&n.push(uc),r.toLowerCase()==="numbers"&&n.push($s.generate({length:3}));return n.length===0?"":sc({dictionaries:n,length:n.length,separator:t.get("branchWhitespaceChar","-")})}o(gc,"generateRandomBranchName");class zi extends l.TimelineItem{static is(e){return e instanceof zi}constructor(e,n,r,i,{dateType:a,showAuthor:s,dateFormatter:c}){var u;const d=r.message.indexOf(`
`),f=d!==-1?`${r.message.substring(0,d)} \u2026`:r.message,h=a==="authored"?r.authorDate:r.commitDate;super(f,(u=h==null?void 0:h.getTime())!=null?u:0);this.id=r.hash,this.contextValue=`${k.scheme}:${n}:file:commit`,this.command=i,s&&(this.description=r.authorName),this.tooltip=vc(r,c,h),this.iconPath=new l.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=n,this.hash=r.hash,this.parents=r.parents,this.message=r.message}}o(zi,"CommitTimelineItem");function vc(t,e,n){return t.authorName&&t.authorEmail?l.l10n.t(`{0} ({1}) \u2014 {2}
{3}

{4}`,t.authorName,t.authorEmail,O(t.hash),e.format(n),t.message):t.authorName&&!t.authorEmail?l.l10n.t(`{0} \u2014 {1}
{2}

{3}`,t.authorName,O(t.hash),e.format(n),t.message):l.l10n.t(`{0}
{1}

{2}`,O(t.hash),e.format(n),t.message)}o(vc,"getCommitTooltip");class ha extends l.TimelineItem{static is(e){return e instanceof ha}constructor(e,n,r,i,a,{dateFormatter:s}){const c=l.l10n.t("Staged Changes");super(c,r.timestamp);this.id="index",this.contextValue=`${k.scheme}:${n}:file:${this.id}`,this.command=a,this.iconPath=new l.ThemeIcon("git-commit"),this.tooltip=l.l10n.t(`{0}  \u2014 {1}
{2}

{3}`,l.l10n.t("You"),l.l10n.t("Index"),s.format(new Date(r.timestamp)),Kl(r.type)),this.rootUri=e,this.providerId=n,this.hash="~",this.parents=i,this.message=c}}o(ha,"ChangeOperationTimelineItem");class zs{constructor(e){this.providerService=e,this._onDidChange=new l.EventEmitter,this.id="github-file-history",this.label=l.l10n.t("GitHub File History"),this.debouncer=new Nr(500),this.disposable=l.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),me.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const n=b(this.rootUri);!e.some(r=>b(r)===n)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const n=b(this.rootUri);(e.added.some(r=>b(r.uri)===n)||e.removed.some(r=>b(r.uri)===n))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||b(this.rootUri)!==b(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const n=b(this.rootUri);e.some(r=>b(r.rootUri)===n)&&this.fireChanged()}async provideTimeline(e,n,r){var i;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const ne of this.providerService.repositories)if(ne.uri.path===this.rootUri.path){this.rootUri=ne.uri;break}const a=this.providerService.getRelativeFilePath(this.rootUri,e),s=await this.providerService.getMetadata(this.rootUri);if(!s||r.isCancellationRequested)return{items:[]};const c=await this.providerService.getCommits(this.rootUri,{ref:s.HEAD.sha,path:a||void 0,cursor:n.cursor,limit:typeof n.limit=="number"?n.limit:void 0});if(c===void 0||c.commits.length===0||r.isCancellationRequested)return{items:[]};const u=((i=c.paging)==null?void 0:i.more)?{cursor:c.paging.cursor}:void 0,d=new Intl.DateTimeFormat(l.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),f=me.getAny("git.timeline.date",void 0,"committed"),h=me.getAny("git.timeline.showAuthor",void 0,!0),p=await Promise.all(c.commits.map(async ne=>new zi(this.rootUri,s.provider.id,ne,await this.resolveDiffCommand(ne,s,e,a),{dateType:f,showAuthor:h,dateFormatter:d}))),_=n.cursor===void 0?await this.providerService.changeStoreGetChange(e):void 0;if(_&&Boolean(_.staged&&me.get("staging.enabled"))){const A=new ha(this.rootUri,s.provider.id,_,[c.commits[0].hash],await this.providerService.changeStoreResolveDiffCommand(_.uri,k.getProviderUri(_.uri),l.l10n.t("{0} (Index)",j(_.uri))),{dateFormatter:d});p.splice(0,0,A)}return{items:p,paging:u}}catch(a){return K.error(a),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=l.workspace.registerTimelineProvider([Vn.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[l.commands.registerCommand("remoteHub.timeline.copyCommitId",(n,r,i)=>{!zi.is(n)||l.env.clipboard.writeText(n.hash)}),l.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(n,r,i)=>{!zi.is(n)||l.env.clipboard.writeText(n.message)}),l.commands.registerCommand("remoteHub.timeline.openDiff",async(n,r,i)=>{var a;!zi.is(n)&&!ha.is(n)||n.command!==void 0&&await l.commands.executeCommand(n.command.command,...(a=n.command.arguments)!=null?a:[])}),l.commands.registerCommand("remoteHub.timeline.openOnGitHub",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.selectForCompare",async(n,r,i)=>{!r||!zi.is(n)&&!ha.is(n)||(e={uri:r,left:n},await l.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),l.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(n,r,i)=>{if(!r||!e||!zi.is(n)&&!ha.is(n)||b(r)!==b(e.uri))return;const{left:a}=e,s=this.providerService.getRelativeFilePath(n.rootUri,r),c=await this.providerService.getMetadata(n.rootUri),u=j(r),d=a.parents[0];let f;d===void 0?f=l.l10n.t("{0} ({1})",u,O(n.hash)):a.hash===""?f=l.l10n.t("{0} (Working Tree)",u):a.hash==="~"?f=l.l10n.t("{0} (Index)",u):f=l.l10n.t("{0} ({1})",u,O(a.hash));let h=a.hash===""||a.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:we.Commit,id:d!=null?d:"0000000000000000000000000000000000000000"}},s);d===void 0&&(h=h.with({query:"~"}));const p=n.parents[0];let _;p===void 0?_=l.l10n.t("{0} ({1})",u,O(n.hash)):p==="~"&&n.hash===""?_=l.l10n.t("{0} (Working Tree)",u):n.hash==="~"?_=l.l10n.t("{0} (Index)",u):_=l.l10n.t("{0} ({1})",u,O(n.hash));const ne=l.l10n.t("{0} \u27F7 {1}",f,_),A=n.hash===""||n.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:we.Commit,id:n.hash}},s);await l.commands.executeCommand("vscode.diff",h,A,ne)})]}async resolveDiffCommand(e,n,r,i,a){const s=j(r);let c=e.parents[0],u=this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:we.Commit,id:c!=null?c:"0000000000000000000000000000000000000000"}},i);try{await this.providerService.stat(u)}catch(h){c=void 0}let d;c===void 0?d=l.l10n.t("{0} ({1})",s,O(e.hash)):e.hash===""?d=l.l10n.t("{0} (Working Tree)",s):e.hash==="~"?d=l.l10n.t("{0} (Index)",s):d=l.l10n.t("{0} ({1}) \u27F7  {0} ({2})",s,O(c),O(e.hash)),c===void 0&&(u=u.with({query:"~"}));const f=e.hash===""||e.hash==="~"?r:this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:we.Commit,id:e.hash}},i);return{command:"vscode.diff",title:"Open Comparison",arguments:[u,f,d,a]}}async openOnRemote(e){if(!zi.is(e))return;const n=await this.providerService.getMetadata(e.rootUri);await qr("remoteHub.openOnRemote",{provider:n.provider,repo:n.repo,sha:e.hash})}}o(zs,"VirtualTimelineProvider");class Js{constructor(e,n){this.providerService=e,this.telemetryService=n,this.disposable=l.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var n;const r=new _t(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);await kr(this.providerService,void 0);try{switch(e.path){case"/open":{this.telemetryService.publicLog2("handleUri.open");let i,a;for(const c of e.query.split("&")){const[u,d]=c.split("=");switch(u){case"url":i=decodeURIComponent(d);break;case"location":a=d===ze.CurrentWindow?ze.CurrentWindow:ze.NewWindow;break}}if(!i){r.log({message:": Unable to find url parameter"}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted url not found"});return}i=i.trim(),a=a!=null?a:ze.NewWindow;const s=await this.providerService.createWorkspaceForRemoteUrl(i,void 0,a);if(!s){r.log({message:`: Unable to open workspace for ${i}`}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted invalid url"});const c=l.l10n.t("Show Extensions");l.window.showErrorMessage(l.l10n.t(`Unable to open ${i}.
You may need to install or enable additional extensions.`),c).then(u=>{u===c&&l.commands.executeCommand("workbench.view.extensions",`${Qo.join(" ")}`)});return}r.log({message:`: Opening ${i} in ${a}`}),kn(this.providerService,s);break}case"/open-files":{let i;for(const s of e.query.split("&")){const[c,u]=s.split("=");if(c==="url"){i=decodeURIComponent(u);break}}if(!i){r.log({message:": Unable to find url parameter"});return}i=i.trim();const a=await this.providerService.createWorkspaceForRemoteUrl(i);if(!a){r.log({message:`: Unable to open files/folders for ${i}`});return}a.filesToOpen?(r.log({message:`: Opening files/folders for ${i}`}),await((n=Ro())==null?void 0:n.openPendingFiles(a.uri,a.filesToOpen))):r.log({message:`: No files/folders found to open for ${i}`});break}default:{r.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{r.stop()}}}o(Js,"RemoteUriHandler");var pc=Object.defineProperty,mc=Object.getOwnPropertyDescriptor,yc=o((t,e,n,r)=>{for(var i=r>1?void 0:r?mc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&pc(e,n,i),i},"view_decorateClass"),Aa;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(Aa||(Aa={}));const Vs=o(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof Vs}get id(){}toString(){return`${K.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,n){return this.splatted&&this.parent!==void 0&&this.parent!==n?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let Da=Vs;yc([tn((t=!1,e=!1,n)=>JSON.stringify([t,e,n==null?void 0:n.toString()]))],Da.prototype,"triggerChange",1);class js{constructor(e,n,r,i){this.id=e,this.name=n,this.providerService=r,this.telemetryService=i,this._onDidChangeTreeData=new l.EventEmitter,this.disposables=[];const a=!1;if(K.isDebugging&&a){const s=this.getTreeItem;this.getTreeItem=async function(c){var u;const d=await s.apply(this,[c]),f=c.getParent();return d.tooltip===void 0&&(d.tooltip=new l.MarkdownString(d.label!==void 0&&typeof d.label!="string"?d.label.label:(u=d.label)!=null?u:"")),typeof d.tooltip=="string"?d.tooltip=`${d.tooltip}

---
context: ${d.contextValue}
node: ${c.toString()}${f!==void 0?`
parent: ${f.toString()}`:""}`:d.tooltip.appendMarkdown(`

---

context: \`${d.contextValue}\`\\
node: \`${c.toString()}\`${f!==void 0?`\\
parent: \`${f.toString()}\``:""}`),d}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!me.changed(e,`views.${this.configKey}`)}dispose(){l.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=l.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(me.onDidChange(n=>{!this.filterConfigurationChanged(n)||(this._config=void 0,this.onConfigurationChanged(n))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.publicLog2("view.open",{view:this.id}),this.root=this.getRoot()),this.root}async getChildren(e){return e!==void 0?e.getChildren():(await kr(this.providerService,void 0),this.ensureRoot().getChildren())}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var n,r;await((r=(n=this.root)==null?void 0:n.refresh)==null?void 0:r.call(n,e)),this.triggerNodeChange()}async refreshNode(e,n=!1,r=!1){var i;const a=await((i=e.refresh)==null?void 0:i.call(e,n));!r&&a===!0||this.triggerNodeChange(e)}async reveal(e,n){if(this.tree!==void 0)try{await this.tree.reveal(e,n)}catch(r){K.error(r)}}async show(){try{await l.commands.executeCommand(`${this.id}.focus`)}catch(e){K.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=me.get("views")[this.configKey]),this._config}}o(js,"View");class Ys extends Da{constructor(e,n,r,i,a,s,c){super(e,n);this._message=r,this._description=i,this._tooltip=a,this._iconPath=s,this._contextValue=c}getChildren(){return[]}getTreeItem(){var e;const n=new l.TreeItem(this._message,l.TreeItemCollapsibleState.None);return n.contextValue=(e=this._contextValue)!=null?e:Aa.Message,n.description=this._description,n.tooltip=this._tooltip,n.iconPath=this._iconPath,n}}o(Ys,"MessageNode");var wc=Object.defineProperty,Sc=Object.getOwnPropertyDescriptor,jo=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Sc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&wc(e,n,i),i},"workspaceRepositoriesView_decorateClass");const qs=o(class extends Da{constructor(t,e,n,r,i,a,s){super(t,e);this.changeStore=n,this.canonical=r,this.workspaceRepository=i,this.operation=a,this.canApplyChanges=s}static getId(t,e,n){return`${za.getId(t,e)}:${this.key}(${n.uri.toString()})`}get id(){return qs.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new l.TreeItem(t,l.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${Aa.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const n=Boolean(this.operation.staged&&me.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const r=k.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,r,n?l.l10n.t("{0} (Index)",j(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree)",j(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:r}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),i=this.view.providerService.createProviderUri(this.operation.uri,{repo:r,ref:{type:we.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,n?l.l10n.t("{0} (Index of {1})",j(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree of {1})",j(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await l.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await l.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){l.window.showErrorMessage(String(e))}}},"_FileChangeNode");let Qs=qs;Qs.key=":changes";const Xs=o(class extends Da{constructor(t,e,n,r,i){super(t,e);this.canonical=n,this.workspaceRepository=r,this.root=i}static getId(t,e){return`${Ao.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return Xs.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||l.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.providerService.getChangeStore(this.workspaceRepository.uri).getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(n=>new Qs(this.view,this,t,this.canonical,this.workspaceRepository,n,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=jt(this.workspaceRepository),n=Vn.isCanonicalUri(this.workspaceRepository.uri)?l.l10n.t("{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,r=new l.TreeItem(this.root?this.canonical.name:n,e?l.TreeItemCollapsibleState.Collapsed:l.TreeItemCollapsibleState.None);return r.id=this.id,r.contextValue=`${Aa.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,r.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${Dn(this.workspaceRepository.timestamp,{ago:!0})}`,r.iconPath=t?new l.ThemeIcon("check"):this.root?tl(this.canonical.provider.id):ti(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),r.tooltip=new l.MarkdownString(void 0,!0).appendMarkdown(l.l10n.t(`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?l.l10n.t(`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",Cc(this.workspaceRepository.ref.type),ki(this.workspaceRepository.ref.type),n,t?` \u2014 _${l.l10n.t("Active")}_ `:"",Dn(this.workspaceRepository.timestamp,{ago:!0}),yn(this.workspaceRepository.ref.type,this.workspaceRepository.changes,{preamble:`${l.l10n.t("Has Uncommitted Changes")}\\
`}))),e&&(r.resourceUri=l.Uri.parse("remotehub-view://wsrepo/changes")),r}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository)}catch(e){l.window.showErrorMessage(String(e))}}remove(){return this.view.providerService.workspaceRepositoriesRemoveRepository(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let za=Xs;za.key=":wsrepo",jo([tn()],za.prototype,"refresh",1);const Zs=o(class extends Da{constructor(t,e,n,r){super(t,e);this.canonical=n,this.workspaceRepositories=r}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return Zs.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new Ys(this.view,this,l.l10n.t("No remote repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new za(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(n=>n.workspaceId===this.view.workspaceId),e=new l.TreeItem(this.canonical.name,t?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.Collapsed);return e.contextValue=Aa.WorkspaceRepositories,e.iconPath=tl(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let Ao=Zs;Ao.key=":wsrepos",jo([tn()],Ao.prototype,"refresh",1);class Yo extends Da{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.providerService.workspaceRepositoriesGetRepositoriesByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const n=[];for(const[r,i]of e){const a=l.Uri.parse(r);try{const{name:s,provider:c}=this.view.providerService.getVirtualUriMetadata(a),u={uri:a,name:s,provider:c,hasActive:i.some(d=>d.workspaceId===this.view.workspaceId)};i.length===1?n.push(new za(this.view,this,u,i[0],!0)):n.push(new Ao(this.view,this,u,i))}catch(s){if(s instanceof Xt)continue;K.error(s)}}this.children=n}return this.children}getTreeItem(){return new l.TreeItem("Repositories",l.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}o(Yo,"WorkspaceRepositoriesViewNode"),jo([tn()],Yo.prototype,"refresh",1);class el extends js{constructor(e,n,r){super("remoteHub.views.workspaceRepositories",l.l10n.t("Remote Repositories"),e,r);this.workspaceId=n,this.configKey="workspaceRepositories",this.disposables.push(this.providerService.onDidChangeWorkspaceRepositories(this.onRepositoriesChanged,this),l.window.registerFileDecorationProvider({provideFileDecoration:(i,a)=>{if(!(i.scheme!=="remotehub-view"||i.authority!=="wsrepo"||!i.path.includes("/changes")))return{badge:"\u25CF",color:new l.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:l.l10n.t("Has Uncommitted Changes")}}}))}getRoot(){return new Yo(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[l.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.refresh"),this.providerService.workspaceRepositoriesRefresh(),void this.refresh(!0)),this),l.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.open"),kn(this.providerService,{name:e.name,uri:e.uri,location:ze.CurrentWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openInNewWindow"),kn(this.providerService,{name:e.name,uri:e.uri,location:ze.NewWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.remove"),e.remove()),this),l.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openFile"),e.openFile()),this),l.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const n=b(this.providerService.getVirtualCanonicalRootUri(e.uri)),r=this.providerService.repositories.filter(a=>b(a.canonicalUri)===n);return await _c(r,l.l10n.t("Choose a repository to apply the changeset to"))}}o(el,"WorkspaceRepositoriesView");function Cc(t,e){switch(t){case J.Branch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Branch");case J.RemoteBranch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Remote Branch");case J.Tag:return l.l10n.t("Tag");case J.Commit:return l.l10n.t("Commit")}}o(Cc,"headTypeToString");function tl(t){switch(t){case"github":return new l.ThemeIcon("github");case"azurerepos":return new l.ThemeIcon("azure-devops");default:return new l.ThemeIcon("vm")}}o(tl,"providerToIconPath");async function _c(t,e){if(t.length!==0){if(t.length>1){const n=await l.window.showQuickPick(t.map(r=>({label:r.name,description:r.provider.name,repository:r})),{placeHolder:e});return n?n.repository:void 0}return t[0]}}o(_c,"getRepository");let Do;function Ro(){return Do}o(Ro,"getOpenActionsService");var ga;(function(t){t.HasCommitted="has:committed",t.Version="version"})(ga||(ga={}));let To;function nl(t){return To.globalState.get(t)}o(nl,"getState");async function qo(t,e){return To.globalState.update(t,e)}o(qo,"updateState");let rl=!1;function bc(){return rl}o(bc,"isPreRelease");async function Ec(t){To=t,Je.configure("remoteHub",t),K.configure(t,"Remote Repositories",me.get("logLevel")),_t.start("Time to root directory",{log:!1});const e=En.configure(t),n=new Le(t),r=t.extension.packageJSON.version;await qo(ga.Version,r),await t.workspaceState.update(ga.Version,r);const[,i]=To.extension.packageJSON.version.split(".");rl=Number.parseInt(i)%2==1;try{const a=new Vn(n,t.workspaceState);Do=new vo(a);const s=new Bs(a),c=new Ks(a,Do,n,s),u=new Ca(a);if(typeof l.workspace.registerEditSessionIdentityProvider!==void 0&&t.subscriptions.push(l.workspace.registerEditSessionIdentityProvider(k.scheme,new uo(a))),typeof l.workspace.registerCanonicalUriProvider!==void 0&&!l.extensions.getExtension("vscode.git")){const d=new Ft(a);try{t.subscriptions.push(...Ft.SupportedSchemes.map(f=>l.workspace.registerCanonicalUriProvider(f,d)))}catch{}}return t.subscriptions.push(me.onDidChange(d=>{!me.changed(d,"logLevel")||(K.logLevel=me.get("logLevel"))}),a.onDidChangeRepositories(async d=>{for(const f of d.added)try{const h=await f.getMetadata(),{HEAD:p,defaultBranch:_,name:ne,provider:A,pullRequest:X}=h,pe=p.name.replace(/\//g,"\u2009\u2215\u2009");let Q=" ";if(X!==void 0)Q=` (PR ${X.id}) `;else if(p.type===J.Tag)Q=` (${pe}) `;else if(p.type===J.Commit)Q=` (${pe}) `;else if(p.type===J.Branch||p.type===J.RemoteBranch){const Ne=p.branch.name.replace(/\//g,"\u2009\u2215\u2009");p.branch.name!==_.name&&(Q=` (${Ne}) `)}const be={uri:f.uri,type:"folder",label:`${ne}${Q}[${A.name}]`};l.commands.executeCommand("_workbench.addToRecentlyOpened",be)}catch(h){K.error(h,"Failed to add repository to recently opened")}}),new As(a,s),new ia(a),new Js(a,n),...Hr(a,t.extension.id,n),...Tc(a,n),...await Ac(a,c,t,n),new zs(a),new el(a,e,n),c,Do,a,n),n.publicLog2("activate"),Promise.resolve(u)}catch(a){throw K.error(a),et(t,a),a}}o(Ec,"activate");async function Ac(t,e,n,r){const i=[];if(il()){const a=new un(t,r);t.registerVirtualIndexProvider("github",a),t.registerVirtualIndexProvider("azurerepos",a),i.push(a)}return i.push(Rc(t,e),Dc(e)),i}o(Ac,"registerProviders");function Dc(t){async function e(){let r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps");r||await new Promise(a=>{const s=l.extensions.onDidChange(()=>{r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps"),r&&(s.dispose(),a())})});const i=await r.activate();if(!(!i||typeof i.registerGitProvider!="function"))return i.registerGitProvider(t)}o(e,"registerWithStaticWebApps");const n=e();return l.Disposable.from({dispose:async()=>{var r;return void((r=await n)==null?void 0:r.dispose())}})}o(Dc,"registerStaticWebApps");function Rc(t,e){async function n(){var i;try{let a=(i=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?i:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");a||(K.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(h=>{const p=l.extensions.onDidChange(()=>{var _;a=(_=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?_:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),a&&(p.dispose(),h())})})),K.log("[ GHPR] Registering..."),Rr(Xn.HasPullRequestExtension,!0);const s=await a.activate();if(!s)throw new Error("Unable to get registration api");const c=s.registerGitProvider(e),u=t.onDidChangeRepositories(h=>d(h));async function d(h){const p=h.added.filter(_=>_.provider.id==="github");if(p.length!==0){K.log("[ GHPR] Checking for opened PRs...");for(const _ of p){const ne=await t.getBestRemoteUri(_.uri,te.PullRequest);if(!!ne){u.dispose(),K.log("[ GHPR] Opened PR found; preloading"),l.commands.executeCommand("github.api.preloadPullRequest",ne.toString());return}}K.log("[ GHPR] No opened PRs found")}}o(d,"onRepositoriesChanged"),K.log("[ GHPR] Registration complete");const f=t.repositories;return f.length&&d({added:f,removed:[]}),l.Disposable.from(c,u)}catch(a){return K.error(a,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}o(n,"registerWithGHPR");const r=n();return l.Disposable.from({dispose:async()=>{var i;return void((i=await r)==null?void 0:i.dispose())}})}o(Rc,"registerGitHub");function Tc(t,e){if(!il())return[];e.publicLog2("codex.enableRichNav",{});const n=new Bt(t);return[n,n.register(new cn(e)),...cn.createStatus()]}o(Tc,"registerNavigationServiceProviders");function il(){return l.env.uiKind===l.UIKind.Desktop||me.get("richNavigation.enabled")===!0}o(il,"isRichNavEnabled");const Qo=["github.remotehub","ms-vscode.azure-repos"],Xo=new Map,Zo=new Map;async function kr(t,e){var n,r,i;if(e!==void 0&&typeof e!="string"&&(e=Vn.getProviderId(e)),e&&Zo.has(e)){const a=Zo.get(e);if(!a)return;await Xo.get(a);return}for(const a of l.extensions.all){const s=a.id,{contributes:c}=a.packageJSON;if(!c||!Qo.includes(s.toLowerCase()))continue;const u=Xo.get(s),d=(r=(n=c.virtualWorkspaces)==null?void 0:n.providers)!=null?r:[],f=d.find(p=>p===e)!==void 0,h=d.length&&e===void 0;if(!u&&(h||f)){const p=(i=l.extensions.getExtension(s))==null?void 0:i.activate().then(_=>_.registerVirtualProviderService(t));if(p===void 0)return;Xo.set(s,p);for(const _ of d)Zo.set(_,s);if(await p,e!==void 0&&f)return}else u&&await u}}o(kr,"ensureProvidersRegistered")})(),module.exports=Po})();
